(window.webpackJsonp=window.webpackJsonp||[]).push([["mapBase","userBase"],{0:function(t,e){},"00a2":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("feb7");e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&i.isNumber(e[0])&&i.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var i=0,n=t.features;i<n.length;i++){var o=n[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},"00dc":function(t,e,r){(function(t){var i=r("58a2"),n=r("c24d"),o=r("561d");var a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(n[e].prime,"hex"),i=new t(n[e].gen,"hex");return new o(r,i)},e.createDiffieHellman=e.DiffieHellman=function e(r,n,s,u){return t.isBuffer(n)||void 0===a[n]?e(r,"binary",n,s):(n=n||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"==typeof r?new o(i(r,s),s,!0):(t.isBuffer(r)||(r=new t(r,n)),new o(r,s,!0)))}}).call(this,r("1c35").Buffer)},"0106":function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(12).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"0145":function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},"0184":function(t,e,r){"use strict";var i=r("da3e");function n(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=n,n.prototype._init=function(){},n.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},n.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),i=0;i<r;i++)this.buffer[this.bufferOff+i]=t[e+i];return this.bufferOff+=r,r},n.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(t){var e=0,r=0,i=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(i*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(n,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,n,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},n.prototype._updateDecrypt=function(t){for(var e=0,r=0,i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(i*this.blockSize);i>0;i--)e+=this._buffer(t,e),r+=this._flushBuffer(n,r);return e+=this._buffer(t,e),n},n.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},n.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},n.prototype._unpad=function(t){return t},n.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},"0211":function(t,e,r){"use strict";const i=e;i._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const i=t[r];e[i]=r})),e},i.der=r("8b71")},"023b":function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,o){return'<div>\n  <div class="dls-map-measure-distances" title="'+t.escapeExpression((a=r("dfab"),a&&(a.__esModule?a.default:a)).call(null!=e?e:t.nullContext||{},"MeasuringDistances","timemap",{name:"lang",hash:{},data:o,loc:{start:{line:2,column:48},end:{line:2,column:87}}}))+'">\n    <div class="measure-but cp"></div>\n  </div>\n</div>\n';var a},useData:!0})},"04cd":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=r("bc3a"),o=(i=n)&&i.__esModule?i:{default:i},a=r("b4e1");e.default={searchTimeLine:function(){var t=a.MabState._get("mapApiUrls").timelineUrl;return o.default.get(t)}},t.exports=e.default},"05f0":function(t,e,r){"use strict";var i=r("d113").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,n){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,n,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(n?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},"0632":function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=r("1c35"),n=i.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=a),a.prototype=Object.create(n.prototype),o(n,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},"07f2":function(t,e,r){"use strict";var i=r("c3c0"),n=r("6eed");function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,n),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},"087f":function(t,e,r){var i=r("3fb5"),n=r("b672"),o=r("8707").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,n.call(this,64,56)}function h(t){return t<<30|t>>>2}function l(t,e,r,i){return 0===t?e&r|~e&i:2===t?e&r|e&i|r&i:e^r^i}i(u,n),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,i=0|this._a,n=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,c=0;c<16;++c)r[c]=t.readInt32BE(4*c);for(;c<80;++c)r[c]=r[c-3]^r[c-8]^r[c-14]^r[c-16];for(var f=0;f<80;++f){var p=~~(f/20),d=0|((e=i)<<5|e>>>27)+l(p,n,o,s)+u+r[f]+a[p];u=s,s=o,o=h(n),n=i,i=d}this._a=i+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},"09dc":function(t,e,r){"use strict";t.exports=l;var i=r("9d8a").codes,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,u=r("e666");function h(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r("3fb5")(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new n("_transform()"))},l.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},"09f5":function(t,e,r){var i=r("39f5"),n=r("8707").Buffer,o=r("6430");function a(t,e,r,a){o.call(this),this._cipher=new i.AES(e),this._prev=n.from(r),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=a,this._mode=t}r("3fb5")(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},"0a06":function(t,e,r){"use strict";var i=r("2444"),n=r("c532"),o=r("f6b4"),a=r("5270");function s(t){this.defaults=t,this.interceptors={request:new o,response:new o}}s.prototype.request=function(t){"string"==typeof t&&(t=n.merge({url:arguments[0]},arguments[1])),(t=n.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},n.forEach(["delete","get","head","options"],(function(t){s.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){s.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}})),t.exports=s},"0ae3":function(t,e,r){"use strict";t.exports=n;var i=r("09dc");function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}r("3fb5")(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},"0b1f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleMap=e.MapGL=void 0;var i=o(r("7d14")),n=o(r("7683"));function o(t){return t&&t.__esModule?t:{default:t}}e.MapGL=i.default,e.SimpleMap=n.default},"0be8":function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},"0cbb":function(t,e,r){"use strict";var i,n=e,o=r("7d92"),a=r("4136"),s=r("f3a3").assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new u(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=u,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r("409b")}catch(t){i=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},"0da4":function(t,e,r){"use strict";var i=r("da3e"),n=r("3fb5"),o={};function a(t){i.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var r=Object.keys(o),i=0;i<r.length;i++){var a=r[i];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,r,i){var n=this._cbcState,o=this.constructor.super_.prototype,a=n.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,r,i);for(s=0;s<this.blockSize;s++)a[s]=r[i+s]}else{o._update.call(this,t,e,r,i);for(s=0;s<this.blockSize;s++)r[i+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},"0df6":function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},"0f2c":function(t,e,r){var i=r("2aee"),n=r("f460"),o=r("83d5"),a=r("0106"),s=r("a958"),u=r("98e6"),h=r("5291"),l=r("8707").Buffer;t.exports=function(t,e,r){var c;c=t.padding?t.padding:r?1:4;var f,p=i(t),d=p.modulus.byteLength();if(e.length>d||new a(e).cmp(p.modulus)>=0)throw new Error("decryption error");f=r?h(new a(e),p):s(e,p);var m=l.alloc(d-f.length);if(f=l.concat([m,f],d),4===c)return function(t,e){var r=t.modulus.byteLength(),i=u("sha1").update(l.alloc(0)).digest(),a=i.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),h=e.slice(a+1),c=o(s,n(h,a)),f=o(h,n(c,r-a-1));if(function(t,e){t=l.from(t),e=l.from(e);var r=0,i=t.length;t.length!==e.length&&(r++,i=Math.min(t.length,e.length));var n=-1;for(;++n<i;)r+=t[n]^e[n];return r}(i,f.slice(0,a)))throw new Error("decryption error");var p=a;for(;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}(p,f);if(1===c)return function(t,e,r){var i=e.slice(0,2),n=2,o=0;for(;0!==e[n++];)if(n>=e.length){o++;break}var a=e.slice(2,n-1);("0002"!==i.toString("hex")&&!r||"0001"!==i.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(n)}(0,f,r);if(3===c)return f;throw new Error("unknown padding")}},1:function(t,e){},10:function(t,e){},11:function(t,e){},"116d":function(t,e,r){t.exports=r("b4e8")},"11dc":function(t,e,r){"use strict";(function(e,i){var n=r("8707").Buffer,o=e.crypto||e.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=n.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)o.getRandomValues(r.slice(a,a+65536));else o.getRandomValues(r);if("function"==typeof e)return i.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r("c8ba"),r("f28c"))},12:function(t,e){},13:function(t,e){},"13e2":function(t,e,r){"use strict";var i=r("c3c0"),n=r("edc9"),o=r("aa56"),a=i.rotl32,s=i.sum32,u=i.sum32_5,h=o.ft_1,l=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(f,l),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,i=0;i<16;i++)r[i]=t[e+i];for(;i<r.length;i++)r[i]=a(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],o=this.h[1],l=this.h[2],f=this.h[3],p=this.h[4];for(i=0;i<r.length;i++){var d=~~(i/20),m=u(a(n,5),h(d,o,l,f),p,r[i],c[d]);p=f,f=l,l=a(o,30),o=n,n=m}this.h[0]=s(this.h[0],n),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],p)},f.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},14:function(t,e){},1545:function(t,e,r){"use strict";e.utils=r("5ee7"),e.Cipher=r("0184"),e.DES=r("4e2b"),e.CBC=r("0da4"),e.EDE=r("1fec")},"19c0":function(t,e,r){"use strict";var i,n=h(r("6042")),o=h(r("3f6b")),a=r("49dc"),s=h(r("9fdf")),u=h(r("1e9f"));h(r("e088"));function h(t){return t&&t.__esModule?t:{default:t}}var l=s.default.getLang({api:!0});t.exports=(i={getUserInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default.expire("bearer",{expires:0}),(0,a.getJson)("/api/user/info",t,e).then((function(t){return t}))},checkPhoneNum:function(t){return(0,a.postJson)("/api/auth/checkPhoneNum",t)},sendMessage:function(t){return(0,a.postJson)("/api/auth/sendMessage",t)},newSendMessage:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/n/sms/send",t)},newCheckMessage:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/n/sms/check",t)},weixin:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/n/weixin",t)},newGetUserInfo:function(){return(0,a.getJson)("/api/auth/w1/y/profile/"+l)},newSetUserInfo:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/y/profile/save",t)},newGetCaptcha:function(){return(0,a.getJson)("/api/auth/w1/n/getKaptcha")},newCheckCaptcha:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/n/checkKaptcha",t)},newLoginWithPassword:function(t){return(0,a.postJson)("/api/auth/w1/n/login",t)},newResetPasswordWithPhone:function(t){return(0,a.postJson)("/api/auth/w1/n/setPassword",t)},addPassword:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/y/addPassword",t)},modifyPassword:function(t){return(0,o.default)({language:l},t),(0,a.postJson)("/api/auth/w1/y/modifyPassword",t)},checkMessage:function(t){return(0,a.postJson)("/api/auth/checkMessage",t)},getCaptcha:function(){return(0,a.getJson)("/api/auth/getKaptcha")},checkKaptcha:function(t){return(0,a.postJson)("/api/auth/checkKaptcha",t)},setUserInfo:function(t){var e={};return(0,o.default)(e,{username:"",avatar:"",signature:"",company:"",address:"",occupation:"",position:""},t),(0,a.postJson)("/api/user/info",e)},setUserInterest:function(t){return(0,a.postJson)("/api/auth/setUserInterest",t)},checkUsername:function(t){return(0,a.postJson)("/api/auth/checkUsername",t)},checkInvitation:function(t){return(0,a.postJson)("/api/auth/checkInvitation",t)},resetPassword:function(t){return(0,a.postJson)("/api/auth/resetPassword",t)},setUsername:function(t){return(0,a.postJson)("/api/auth/setUsername",t)},loginByPhone:function(t){return(0,a.postJson)("/api/auth/loginByPhone",t)},hasPhoneRegistered:function(t){return(0,a.postJson)("/api/auth/hasPhoneRegistered",t)},doLogin:function(t){return(0,a.postJson)("/user/doLogin",t)},loginWithPassword:function(t){return(0,a.postJson)("/api/auth",t)},register:function(t){return(0,a.postJson)("/api/auth/register",t)},logout:function(){return u.default.expire("bearer",{expires:0}),(0,a.getJson)("/api/auth/logout")},getUserArticle:function(t,e){return(0,a.getJson)("/api/user/article/list/"+t+"/"+e)},getUserArticleV2:function(t,e,r){return(0,a.getJson)("/api/user/w2/article/list/"+t+"/"+e+"/"+r)},getEntryArticle:function(t,e,r){return(0,a.getJson)("/api/article/ugc/v1/y/audit/info?page="+e+"&size="+r+"&auditStatus="+t)},getUserItem:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;return(0,a.getJson)("/api/user/item/list/"+i+"/"+r+"/"+t+"/"+e)},getUserMedia:function(t,e,r){return(0,a.getJson)("/api/user/upload/list/"+t+"/"+e+"/"+r)},getUserFavor:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return(0,a.getJson)("/api/social/favor/list/"+r+"/"+t+"/"+e)},getUserPost:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l,n={0:"REJECT",1:"PASS",2:"WAIT"},o=n[r];return(0,a.getJson)("/api/m/social/user/web/v1/y/post/"+i+"/"+t+"/"+e+"?filter="+o)},deletePost:function(t){return(0,a.postJson)("/api/m/social/user/v1/y/post/delete",t)},getItemsModules:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return(0,a.getJson)("/api/user/item/list/modules/"+t)},getUserItemsList:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l;return(0,a.getJson)("/api/user/item/list/"+n+"/"+r+"/"+i+"/"+t+"/"+e)},getNeedImprove:function(t,e){return(0,a.getJson)("/api/user/item/needImprove/list/"+t+"/"+e)}},(0,n.default)(i,"checkUsername",(function(t){return(0,a.postJson)("/api/user/checkUsername",t)})),(0,n.default)(i,"getRelationModules",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return(0,a.getJson)("/api/user/relation/list/modules/"+t)})),(0,n.default)(i,"getUserRelation",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;return(0,a.getJson)("/api/user/relation/list/"+i+"/"+r+"/"+t+"/"+e)})),(0,n.default)(i,"getUserRelationDraft",(function(t){return(0,a.postJson)("/api/special/groupDraft/list",t)})),(0,n.default)(i,"deleteUserRelationDraft",(function(t){return(0,a.postJson)("/api/special/groupDraft/delete",t)})),(0,n.default)(i,"getDraftList",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"article",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;return(0,a.getJson)("/api/user/draft/list/"+i+"/"+r+"/"+t+"/"+e)})),(0,n.default)(i,"getUgcArticleDraftList",(function(t,e){return(0,a.getJson)("/api/article/ugc/v1/y/audit/info?auditStatus=-1&page="+t+"&size="+e)})),(0,n.default)(i,"getUgcArticleNewest",(function(t){return(0,a.getJson)("/api/article/ugc/v1/y/view/newer?ids="+t)})),(0,n.default)(i,"getUserBook",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;return(0,a.getJson)("/api/user/book/list/"+i+"/"+r+"/"+t+"/"+e)})),(0,n.default)(i,"deleteUsersDraft",(function(t){if(t)return(0,a.postJson)("/api/user/draft/delete",{id:t})})),(0,n.default)(i,"deleteUgcArticleDraft",(function(t){return(0,a.postJson)("/api/article/ugc/v1/y/del?ugcId="+t)})),(0,n.default)(i,"change",(function(t){var e={};return(0,o.default)(e,{oldPassword:"",newPassword:""},t),(0,a.postJson)("/api/user/password/change",e)})),(0,n.default)(i,"sendMessageNew",(function(t){var e={};return(0,o.default)(e,{nationCode:"",mobile:"",invitationCode:""},t),(0,a.postJson)("/api/auth/sendMessage/v2",e)})),(0,n.default)(i,"checkMessageNew",(function(t){var e={};return(0,o.default)(e,{nationCode:"",mobile:"",message:""},t),(0,a.postJson)("/api/auth/checkMessage/v2",e)})),(0,n.default)(i,"registerNew",(function(t){var e={};return(0,o.default)(e,{nationCode:"",mobile:"",invitationCode:"",username:"",password:""},t),(0,a.postJson)("/api/auth/register/v2",e)})),(0,n.default)(i,"getUsersTimeMapList",(function(t){var e=t.module,r=void 0===e?"timemap":e,i=t.page,n=void 0===i?0:i,o=t.size,s=void 0===o?15:o,u=t.language,h={module:r,page:n,size:s,language:void 0===u?l:u};return(0,a.postJson)("/api/user/special/list",h)})),(0,n.default)(i,"bindPhoneNumber",(function(t){return(0,a.postJson)("/api/user/binding/add",t)})),(0,n.default)(i,"checkCaptcha",(function(t){return(0,a.postJson)("/api/auth/checkKaptcha",t)})),(0,n.default)(i,"updateNumber",(function(t){return(0,a.postJson)("/api/user/binding/update",t)})),(0,n.default)(i,"unbindNumber",(function(){return(0,a.postJson)("/api/user/binding/remove")})),(0,n.default)(i,"getInvitationCode",(function(){return(0,a.getJson)("/api/user/getInvitationCode")})),(0,n.default)(i,"getMapScriptsDrafts",(function(t){var e=t.language,r=t.page,i=t.size;return e=e||"cn",(0,a.getJson)("/api/mapscript/v1/draft/list/"+e+"/"+r+"/"+i)})),(0,n.default)(i,"getMapScriptsAudits",(function(t){var e=t.language,r=t.page,i=t.size;return e=e||"cn",(0,a.getJson)("/api/mapscript/v1/audit/list/"+e+"/"+r+"/"+i)})),(0,n.default)(i,"newMapScript",(function(t){var e=t.title,r=t.language,i=void 0===r?"cn":r;return(0,a.postJson)("/api/mapscript/v1/create",{title:e,language:i})})),(0,n.default)(i,"commitScriptAudit",(function(t){var e=t.id;return(0,a.getJson)("/api/mapscript/v1/draft/commitaudit/"+e)})),(0,n.default)(i,"deleteScriptDraft",(function(t){var e=t.id;return(0,a.getJson)("/api/mapscript/v1/draft/delete/"+e)})),(0,n.default)(i,"deleteScriptAudit",(function(t){var e=t.id;return(0,a.getJson)("/api/mapscript/v1/audit/delete/"+e)})),(0,n.default)(i,"appeal",(function(t){return(0,a.postJson)("/api/auth/w1/y/appeal",t)})),(0,n.default)(i,"getUserInfoV3",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={ticket:t};return(0,a.postJson)("/api/m/social/auth/w1/n/login",e)})),(0,n.default)(i,"getUserPopupStatus",(function(){return(0,a.getJson)("/api/m/social/auth/w1/y/user/popup/status")})),(0,n.default)(i,"markerUserAgree",(function(){return(0,a.postJson)("/api/m/social/auth/w1/y/user/popup/save",{})})),(0,n.default)(i,"getMyArticleV3",(function(){return(0,a.getJson)("/api/m/social/user/v3/y/article/list")})),(0,n.default)(i,"vestUserLogin",(function(t){return(0,a.getJson)("/api/m/social/auth/v1/n/vestUser/login",t)})),i)},"19ea":function(t,e,r){"use strict";(function(e,i){function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var i=t.entry;t.entry=null;for(;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=k,k.WritableState=S;var a={deprecate:r("b7d1")},s=r("5bbb"),u=r("1c35").Buffer,h=e.Uint8Array||function(){};var l,c=r("493f"),f=r("b9b5").getHighWaterMark,p=r("9d8a").codes,d=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,b=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;function M(){}function S(t,e,a){o=o||r("e666"),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(P,t,e),t._writableState.errorEmitted=!0,x(t,n)):(o(n),t._writableState.errorEmitted=!0,x(t,n),P(t,e))}(t,r,n,e,o);else{var a=I(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||z(t,r),n?i.nextTick(E,t,r,a,o):E(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function k(t){var e=this instanceof(o=o||r("e666"));if(!e&&!l.call(k,this))return new k(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function A(t,e,r,i,n,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function E(t,e,r,i){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),P(t,e)}function z(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,o=new Array(i),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,l=r.encoding,c=r.callback;if(A(t,e,!1,e.objectMode?1:h.length,h,l,c),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function P(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(T,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}r("3fb5")(k,s),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===k&&(t&&t._writableState instanceof S)}})):l=function(t){return t instanceof this},k.prototype.pipe=function(){x(this,new y)},k.prototype.write=function(t,e,r){var n,o=this._writableState,a=!1,s=!o.objectMode&&(n=t,u.isBuffer(n)||n instanceof h);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=M),o.ending?function(t,e){var r=new b;x(t,r),i.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var o;return null===r?o=new _:"string"==typeof r||e.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(x(t,o),i.nextTick(n,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,i,n,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,i,n,o);return h}(this,o,s,t,e,r)),a},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||z(this,t))},k.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(t,e,r){r(new m("_write()"))},k.prototype._writev=null,k.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,P(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(t,e){e(t)}}).call(this,r("c8ba"),r("f28c"))},"1a2a":function(t,e,r){"use strict";var i=r("3fb5"),n=r("d424"),o=r("6430"),a=r("8707").Buffer,s=r("5a76"),u=r("b5ca"),h=r("69f2"),l=a.alloc(128);function c(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new u:h(t)).update(e).digest():e.length<r&&(e=a.concat([e,l],r));for(var i=this._ipad=a.allocUnsafe(r),n=this._opad=a.allocUnsafe(r),s=0;s<r;s++)i[s]=54^e[s],n[s]=92^e[s];this._hash="rmd160"===t?new u:h(t),this._hash.update(i)}i(c,o),c.prototype._update=function(t){this._hash.update(t)},c.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:h(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new c("rmd160",e):"md5"===t?new n(s,e):new c(t,e)}},"1c46":function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r("11dc"),e.createHash=e.Hash=r("98e6"),e.createHmac=e.Hmac=r("1a2a");var i=r("116d"),n=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);e.getHashes=function(){return o};var a=r("a099");e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=r("956a");e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=r("00dc");e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var h=r("b692");e.createSign=h.createSign,e.Sign=h.Sign,e.createVerify=h.createVerify,e.Verify=h.Verify,e.createECDH=r("e1d3");var l=r("6442");e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var c=r("75cc");e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},"1d10":function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,r,i,n){return'<div class="area-pop-out" >\n  <div class="area-pop">\n    <span>'+t.escapeExpression(t.lambda(e,e))+'</span><span class="area-unit">k㎡</span>\n  </div>\n  <div class="delete-area-btn"></div>\n</div>'},useData:!0})},"1d2b":function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return t.apply(e,r)}}},"1dc2":function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,o){return'<div class="dls-map-measure-area">\n  <div class="dls-map-measure-area-but" title="'+t.escapeExpression((a=r("dfab"),a&&(a.__esModule?a.default:a)).call(null!=e?e:t.nullContext||{},"MeasuringArea","timemap",{name:"lang",hash:{},data:o,loc:{start:{line:2,column:47},end:{line:2,column:81}}}))+'">\n    <div class="right-but cp"></div>\n  </div>\n</div>';var a},useData:!0})},"1e3c":function(t,e,r){var i=r("6430"),n=r("1545"),o=r("3fb5"),a=r("8707").Buffer,s={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function u(t){i.call(this);var e,r=t.mode.toLowerCase(),n=s[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=n.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,i),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},"1fec":function(t,e,r){"use strict";var i=r("da3e"),n=r("3fb5"),o=r("0184"),a=r("4e2b");function s(t,e){i.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:n}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:r})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}n(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,r,i){var n=this._edeState;n.ciphers[0]._update(t,e,r,i),n.ciphers[1]._update(r,i,r,i),n.ciphers[2]._update(r,i,r,i)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},2:function(t,e){},"206d":function(t,e,r){(function(e,i){var n,o=r("8707").Buffer,a=r("7d2a"),s=r("9f9d"),u=r("e07b"),h=r("8be6"),l=e.crypto&&e.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function p(t,e,r,i,n){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:n}},t,i<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,r,d,m,g,y){"function"==typeof g&&(y=g,g=void 0);var v=c[(g=g||"sha1").toLowerCase()];if(!v||"function"!=typeof e.Promise)return i.nextTick((function(){var e;try{e=u(t,r,d,m,g)}catch(t){return y(t)}y(null,e)}));if(a(d,m),t=h(t,s,"Password"),r=h(r,s,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){i.nextTick((function(){e(null,t)}))}),(function(t){i.nextTick((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var r=p(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=r,r}(v).then((function(e){return e?p(t,r,d,m,v):u(t,r,d,m,g)})),y)}}).call(this,r("c8ba"),r("f28c"))},2089:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(r("3f6b")),n=s(r("8827")),o=s(r("57ba")),a=s(r("d331"));function s(t){return t&&t.__esModule?t:{default:t}}r("a8b4");var u=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{$container:{},map:{}},e),this._render(),this._bind()}return(0,o.default)(t,[{key:"_render",value:function(){this.$html=$((0,a.default)()),this.$container.append(this.$html)}},{key:"_zoomIn",value:function(){var t=this.map.gl.getZoom()+1;this.map.gl.zoomTo(Math.min(t,this.map.gl.getMaxZoom()))}},{key:"_zoomOut",value:function(){var t=this.map.gl.getZoom()-1;this.map.gl.zoomTo(Math.max(t,this.map.gl.getMinZoom()))}},{key:"_bind",value:function(){this.$html.find(".zoom-in-icon").click(this._zoomIn.bind(this)),this.$html.find(".zoom-out-icon").click(this._zoomOut.bind(this))}}]),t}();e.default=u,t.exports=e.default},"20f6":function(t,e,r){"use strict";const i=e;i.der=r("cfbd"),i.pem=r("8df7")},2137:function(t,e,r){"use strict";var i=r("c3c0"),n=r("da3e");function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},"21bf":function(t,e,r){(function(e){var i;t.exports=(i=i||function(t,i){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==e&&e.crypto&&(n=e.crypto),!n)try{n=r("1c46")}catch(t){}var o=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),s={},u=s.lib={},h=u.Base={extend:function(t){var e=a(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=u.WordArray=h.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes,n=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var a=r[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=a<<24-(i+o)%4*8}else for(o=0;o<n;o+=4)e[i+o>>>2]=r[o>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=h.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(o());return new l.init(e,t)}}),c=s.enc={},f=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var o=e[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new l.init(r,e/2)}},p=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var o=e[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new l.init(r,e)}},d=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},m=u.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r,i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,h=t.min(4*u,o);if(u){for(var c=0;c<u;c+=a)this._doProcessBlock(n,c);r=n.splice(0,u),i.sigBytes-=h}return new l.init(r,h)},clone:function(){var t=h.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(u.Hasher=m.extend({cfg:h.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new g.HMAC.init(t,r).finalize(e)}}}),s.algo={});return s}(Math),i)}).call(this,r("c8ba"))},"22ab":function(t,e,r){"use strict";function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=r("1c35").Buffer,s=r(6).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,h;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,r,i,n=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,r=n,i=s,a.prototype.copy.call(e,r,i),s+=o.data.length,o=o.next;return n}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,i=e.data;for(t-=i.length;e=e.next;){var n=e.data,o=t>n.length?n.length:t;if(o===n.length?i+=n:i+=n.slice(0,t),0==(t-=o)){o===n.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,i=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var n=r.data,o=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,o),0==(t-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),h&&o(e,h),t}()},2444:function(t,e,r){"use strict";(function(e){var i=r("c532"),n=r("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e)&&(s=r("b50d")),s),transformRequest:[function(t,e){return n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){u.headers[t]=i.merge(o)})),t.exports=u}).call(this,r("f28c"))},2705:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(r("3f6b")),n=a(r("8827")),o=a(r("57ba"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{node:"",data:"",props:"",method:"",comps:""},e)}return(0,o.default)(t,[{key:"parseChildNodes",value:function(){var t=this,e=function(e){var r=t.comps[e],i=t.node.getElementsByTagName("m:"+e.toLocaleLowerCase());(i=Array.prototype.slice.call(i)).forEach((function(e){var i=t.parseAtrributes(e,r);i&&(t.createChildNode(i,e,r),e.remove())}))};for(var r in this.comps)e(r)}},{key:"parseForeach",value:function(t,e){var r=this,i=t.parentNode,n=t.attributes.item("m:foreach");if(n){var o=this._getValueByPath(n.nodeValue);o&&o.forEach((function(i){r.createChildNode(i,t,e)}))}i.removeChild(t)}},{key:"createChildNode",value:function(t,e,r){var n=new r;n.props=(0,i.default)({},t),n.renderBeforeDom(e)}},{key:"parseAtrributes",value:function(t,e){for(var r=this,i=t.attributes,n={__events:[]},o=[],a=i.length-1;a>=0;a--){var s=i[a],u=s.name,h=s.value,l=u.match(/^(m):(.*)/),c=u.match(/^(mv):(.*)/);if(l){l[1];var f=l[2];o.push(f)}else if(c){var p=c[1],d=c[2];n.__events.push({event:p,eventFn:d})}else n[u]=this._getValueByPath(h)}return o.forEach((function(i){switch(i){case"foreach":r.parseForeach(t,e)}})),n}},{key:"_getValueByPath",value:function(t){if(!/^\{[^\}]*\}$/.test(t))return t;var e=(t=t.slice(1,t.length-1)).split("."),r=void 0,i={data:this.data,props:this.props};return e.forEach((function(t){(r=i[t])&&(i=i[t])})),r}},{key:"_getEvent",value:function(){}}]),t}();e.default=s,t.exports=e.default},2801:function(t){t.exports=JSON.parse('{"_args":[["elliptic@6.5.3","/home/Service/fe"]],"_from":"elliptic@6.5.3","_id":"elliptic@6.5.3","_inBundle":false,"_integrity":"sha1-y1nrLv2vc6C9eMzXAVpirW4Pk9Y=","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"elliptic@6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"6.5.3","saveSpec":null,"fetchSpec":"6.5.3"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"http://fe.registry.evatlas.com/elliptic/-/elliptic-6.5.3.tgz","_spec":"6.5.3","_where":"/home/Service/fe","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.3"}')},"2aee":function(t,e,r){var i=r("4111"),n=r("d70e"),o=r("4dd0"),a=r("fda6"),s=r("a099"),u=r("8707").Buffer;function h(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var r,h,l=o(t,e),c=l.tag,f=l.data;switch(c){case"CERTIFICATE":h=i.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(h||(h=i.PublicKey.decode(f,"der")),r=h.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(h.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return h.subjectPrivateKey=h.subjectPublicKey,{type:"ec",data:h};case"1.2.840.10040.4.1":return h.algorithm.params.pub_key=i.DSAparam.decode(h.subjectPublicKey.data,"der"),{type:"dsa",data:h.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=n[t.algorithm.decrypt.cipher.algo.join(".")],h=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,c=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(e,r,i,c,"sha1"),p=a.createDecipheriv(o,f,h),d=[];return d.push(p.update(l)),d.push(p.final()),u.concat(d)}(f=i.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(r=(h=i.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(h.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:h.algorithm.curve,privateKey:i.ECPrivateKey.decode(h.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return h.algorithm.params.priv_key=i.DSAparam.decode(h.subjectPrivateKey,"der"),{type:"dsa",params:h.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=i.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+c)}}t.exports=h,h.signature=i.signature},"2d83":function(t,e,r){"use strict";var i=r("387f");t.exports=function(t,e,r,n,o){var a=new Error(t);return i(a,e,r,n,o)}},"2e3a":function(t,e,r){"use strict";var i=r("49dc");t.exports={eventTracking:function(t){return(0,i.postJson)("https://www.allhistory.com/api/log/tracking/record",t,{once:!1})}}},"2e67":function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"2fe6":function(t,e,r){},3:function(t,e){},"30b5":function(t,e,r){"use strict";var i=r("c532");function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(n(e)+"="+n(t))})))})),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},"329b":function(t,e,r){"use strict";r.r(e),r.d(e,"version",(function(){return ri})),r.d(e,"Collection",(function(){return v})),r.d(e,"Iterable",(function(){return ni})),r.d(e,"Seq",(function(){return O})),r.d(e,"Map",(function(){return be})),r.d(e,"OrderedMap",(function(){return ir})),r.d(e,"List",(function(){return Ve})),r.d(e,"Stack",(function(){return ur})),r.d(e,"Set",(function(){return vr})),r.d(e,"OrderedSet",(function(){return Ur})),r.d(e,"Record",(function(){return Jr})),r.d(e,"Range",(function(){return kr})),r.d(e,"Repeat",(function(){return Qr})),r.d(e,"is",(function(){return Q})),r.d(e,"fromJS",(function(){return ti})),r.d(e,"hash",(function(){return it})),r.d(e,"isImmutable",(function(){return S})),r.d(e,"isCollection",(function(){return d})),r.d(e,"isKeyed",(function(){return m})),r.d(e,"isIndexed",(function(){return g})),r.d(e,"isAssociative",(function(){return y})),r.d(e,"isOrdered",(function(){return A})),r.d(e,"isValueObject",(function(){return Y})),r.d(e,"get",(function(){return Gt})),r.d(e,"getIn",(function(){return Ar})),r.d(e,"has",(function(){return Zt})),r.d(e,"hasIn",(function(){return zr})),r.d(e,"merge",(function(){return ae})),r.d(e,"mergeDeep",(function(){return ue})),r.d(e,"mergeWith",(function(){return se})),r.d(e,"mergeDeepWith",(function(){return he})),r.d(e,"remove",(function(){return Ht})),r.d(e,"removeIn",(function(){return Yt})),r.d(e,"set",(function(){return Kt})),r.d(e,"setIn",(function(){return $t})),r.d(e,"update",(function(){return te})),r.d(e,"updateIn",(function(){return Wt}));var i={};function n(t){t&&(t.value=!0)}function o(){}function a(t){return void 0===t.size&&(t.size=t.__iterate(u)),t.size}function s(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?a(t)+e:e}function u(){return!0}function h(t,e,r){return(0===t&&!p(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function l(t,e){return f(t,e,0)}function c(t,e){return f(t,e,e)}function f(t,e,r){return void 0===t?r:p(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function p(t){return t<0||0===t&&1/t==-1/0}function d(t){return Boolean(t&&t["@@__IMMUTABLE_ITERABLE__@@"])}function m(t){return Boolean(t&&t["@@__IMMUTABLE_KEYED__@@"])}function g(t){return Boolean(t&&t["@@__IMMUTABLE_INDEXED__@@"])}function y(t){return m(t)||g(t)}var v=function(t){return d(t)?t:O(t)},_=function(t){function e(t){return m(t)?t:F(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v),b=function(t){function e(t){return g(t)?t:N(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v),w=function(t){function e(t){return d(t)&&!y(t)?t:U(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(v);v.Keyed=_,v.Indexed=b,v.Set=w;function x(t){return Boolean(t&&t["@@__IMMUTABLE_SEQ__@@"])}function M(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}function S(t){return d(t)||M(t)}var k="@@__IMMUTABLE_ORDERED__@@";function A(t){return Boolean(t&&t[k])}var E="function"==typeof Symbol&&Symbol.iterator,z=E||"@@iterator",I=function(t){this.next=t};function T(t,e,r,i){var n=0===t?e:1===t?r:[e,r];return i?i.value=n:i={value:n,done:!1},i}function P(){return{value:void 0,done:!0}}function C(t){return!!B(t)}function L(t){return t&&"function"==typeof t.next}function R(t){var e=B(t);return e&&e.call(t)}function B(t){var e=t&&(E&&t[E]||t["@@iterator"]);if("function"==typeof e)return e}I.prototype.toString=function(){return"[Iterator]"},I.KEYS=0,I.VALUES=1,I.ENTRIES=2,I.prototype.inspect=I.prototype.toSource=function(){return this.toString()},I.prototype[z]=function(){return this};var D=Object.prototype.hasOwnProperty;function j(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var O=function(t){function e(t){return null==t?J():S(t)?t.toSeq():function(t){var e=W(t);if(e)return e;if("object"==typeof t)return new V(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var i=r.length,n=0;n!==i;){var o=r[e?i-++n:n++];if(!1===t(o[1],o[0],this))break}return n}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var i=r.length,n=0;return new I((function(){if(n===i)return{value:void 0,done:!0};var o=r[e?i-++n:n++];return T(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(v),F=function(t){function e(t){return null==t?J().toKeyedSeq():d(t)?m(t)?t.toSeq():t.fromEntrySeq():M(t)?t.toSeq():H(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(O),N=function(t){function e(t){return null==t?J():d(t)?m(t)?t.entrySeq():t.toIndexedSeq():M(t)?t.toSeq().entrySeq():K(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(O),U=function(t){function e(t){return(d(t)&&!y(t)?t:N(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(O);O.isSeq=x,O.Keyed=F,O.Set=U,O.Indexed=N,O.prototype["@@__IMMUTABLE_SEQ__@@"]=!0;var q=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[s(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,i=r.length,n=0;n!==i;){var o=e?i-++n:n++;if(!1===t(r[o],o,this))break}return n},e.prototype.__iterator=function(t,e){var r=this._array,i=r.length,n=0;return new I((function(){if(n===i)return{value:void 0,done:!0};var o=e?i-++n:n++;return T(t,o,r[o])}))},e}(N),V=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return D.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,i=this._keys,n=i.length,o=0;o!==n;){var a=i[e?n-++o:o++];if(!1===t(r[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._object,i=this._keys,n=i.length,o=0;return new I((function(){if(o===n)return{value:void 0,done:!0};var a=i[e?n-++o:o++];return T(t,a,r[a])}))},e}(F);V.prototype[k]=!0;var Z,G=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=R(this._collection),i=0;if(L(r))for(var n;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=R(this._collection);if(!L(r))return new I(P);var i=0;return new I((function(){var e=r.next();return e.done?e:T(t,i++,e.value)}))},e}(N);function J(){return Z||(Z=new q([]))}function H(t){var e=Array.isArray(t)?new q(t):C(t)?new G(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new V(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function K(t){var e=W(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function W(t){return j(t)?new q(t):C(t)?new G(t):void 0}function $(t){return Boolean(t&&t["@@__IMMUTABLE_MAP__@@"])}function X(t){return $(t)&&A(t)}function Y(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function Q(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Y(t)&&Y(e)&&t.equals(e))}var tt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),i=65535&(e|=0);return r*i+((t>>>16)*i+r*(e>>>16)<<16>>>0)|0};function et(t){return t>>>1&1073741824|3221225471&t}var rt=Object.prototype.valueOf;function it(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return et(e)}(t);case"string":return t.length>ct?function(t){var e=dt[t];void 0===e&&(e=nt(t),pt===ft&&(pt=0,dt={}),pt++,dt[t]=e);return e}(t):nt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?et(t.hashCode(t)):(t.valueOf!==rt&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(ut&&void 0!==(e=st.get(t)))return e;if(void 0!==(e=t[lt]))return e;if(!at){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[lt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++ht,1073741824&ht&&(ht=0);if(ut)st.set(t,e);else{if(void 0!==ot&&!1===ot(t))throw new Error("Non-extensible objects are not allowed as keys.");if(at)Object.defineProperty(t,lt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[lt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[lt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return nt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function nt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return et(e)}var ot=Object.isExtensible,at=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var st,ut="function"==typeof WeakMap;ut&&(st=new WeakMap);var ht=0,lt="__immutablehash__";"function"==typeof Symbol&&(lt=Symbol(lt));var ct=16,ft=255,pt=0,dt={},mt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=wt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,i=bt(this,t,e);return this._useKeys||(i.valueSeq=function(){return r._iter.toSeq().map(t,e)}),i},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,i){return t(e,i,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(F);mt.prototype[k]=!0;var gt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,i=0;return e&&a(this),this._iter.__iterate((function(n){return t(n,e?r.size-++i:i++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,i=this._iter.__iterator(1,e),n=0;return e&&a(this),new I((function(){var o=i.next();return o.done?o:T(t,e?r.size-++n:n++,o.value,o)}))},e}(N),yt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new I((function(){var e=r.next();return e.done?e:T(t,e.value,e.value,e)}))},e}(U),vt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){Ct(e);var i=d(e);return t(i?e.get(1):e[1],i?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(1,e);return new I((function(){for(;;){var e=r.next();if(e.done)return e;var i=e.value;if(i){Ct(i);var n=d(i);return T(t,n?i.get(0):i[0],n?i.get(1):i[1],e)}}}))},e}(F);function _t(t){var e=Rt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Bt,e.__iterateUncached=function(e,r){var i=this;return t.__iterate((function(t,r){return!1!==e(r,t,i)}),r)},e.__iteratorUncached=function(e,r){if(2===e){var i=t.__iterator(e,r);return new I((function(){var t=i.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,r)},e}function bt(t,e,r){var n=Rt(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,o){var a=t.get(n,i);return a===i?o:e.call(r,a,n,t)},n.__iterateUncached=function(i,n){var o=this;return t.__iterate((function(t,n,a){return!1!==i(e.call(r,t,n,a),n,o)}),n)},n.__iteratorUncached=function(i,n){var o=t.__iterator(2,n);return new I((function(){var n=o.next();if(n.done)return n;var a=n.value,s=a[0];return T(i,s,e.call(r,a[1],s,t),n)}))},n}function wt(t,e){var r=this,i=Rt(t);return i._iter=t,i.size=t.size,i.reverse=function(){return t},t.flip&&(i.flip=function(){var e=_t(t);return e.reverse=function(){return t.flip()},e}),i.get=function(r,i){return t.get(e?r:-1-r,i)},i.has=function(r){return t.has(e?r:-1-r)},i.includes=function(e){return t.includes(e)},i.cacheResult=Bt,i.__iterate=function(r,i){var n=this,o=0;return i&&a(t),t.__iterate((function(t,a){return r(t,e?a:i?n.size-++o:o++,n)}),!i)},i.__iterator=function(i,n){var o=0;n&&a(t);var s=t.__iterator(2,!n);return new I((function(){var t=s.next();if(t.done)return t;var a=t.value;return T(i,e?a[0]:n?r.size-++o:o++,a[1],t)}))},i}function xt(t,e,r,n){var o=Rt(t);return n&&(o.has=function(n){var o=t.get(n,i);return o!==i&&!!e.call(r,o,n,t)},o.get=function(n,o){var a=t.get(n,i);return a!==i&&e.call(r,a,n,t)?a:o}),o.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate((function(t,o,u){if(e.call(r,t,o,u))return s++,i(t,n?o:s-1,a)}),o),s},o.__iteratorUncached=function(i,o){var a=t.__iterator(2,o),s=0;return new I((function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,h=u[0],l=u[1];if(e.call(r,l,h,t))return T(i,n?h:s++,l,o)}}))},o}function Mt(t,e,r,i){var n=t.size;if(h(e,r,n))return t;var o=l(e,n),a=c(r,n);if(o!=o||a!=a)return Mt(t.toSeq().cacheResult(),e,r,i);var u,f=a-o;f==f&&(u=f<0?0:f);var p=Rt(t);return p.size=0===u?u:t.size&&u||void 0,!i&&x(t)&&u>=0&&(p.get=function(e,r){return(e=s(this,e))>=0&&e<u?t.get(e+o,r):r}),p.__iterateUncached=function(e,r){var n=this;if(0===u)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,s=!0,h=0;return t.__iterate((function(t,r){if(!s||!(s=a++<o))return h++,!1!==e(t,i?r:h-1,n)&&h!==u})),h},p.__iteratorUncached=function(e,r){if(0!==u&&r)return this.cacheResult().__iterator(e,r);if(0===u)return new I(P);var n=t.__iterator(e,r),a=0,s=0;return new I((function(){for(;a++<o;)n.next();if(++s>u)return{value:void 0,done:!0};var t=n.next();return i||1===e||t.done?t:T(e,s-1,0===e?void 0:t.value[1],t)}))},p}function St(t,e,r,i){var n=Rt(t);return n.__iterateUncached=function(n,o){var a=this;if(o)return this.cacheResult().__iterate(n,o);var s=!0,u=0;return t.__iterate((function(t,o,h){if(!s||!(s=e.call(r,t,o,h)))return u++,n(t,i?o:u-1,a)})),u},n.__iteratorUncached=function(n,o){var a=this;if(o)return this.cacheResult().__iterator(n,o);var s=t.__iterator(2,o),u=!0,h=0;return new I((function(){var t,o,l;do{if((t=s.next()).done)return i||1===n?t:T(n,h++,0===n?void 0:t.value[1],t);var c=t.value;o=c[0],l=c[1],u&&(u=e.call(r,l,o,a))}while(u);return 2===n?t:T(n,o,l,t)}))},n}function kt(t,e){var r=m(t),i=[t].concat(e).map((function(t){return d(t)?r&&(t=_(t)):t=r?H(t):K(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var n=i[0];if(n===t||r&&m(n)||g(t)&&g(n))return n}var o=new q(i);return r?o=o.toKeyedSeq():g(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),o}function At(t,e,r){var i=Rt(t);return i.__iterateUncached=function(n,o){if(o)return this.cacheResult().__iterate(n,o);var a=0,s=!1;return function t(u,h){u.__iterate((function(o,u){return(!e||h<e)&&d(o)?t(o,h+1):(a++,!1===n(o,r?u:a-1,i)&&(s=!0)),!s}),o)}(t,0),a},i.__iteratorUncached=function(i,n){if(n)return this.cacheResult().__iterator(i,n);var o=t.__iterator(i,n),a=[],s=0;return new I((function(){for(;o;){var t=o.next();if(!1===t.done){var u=t.value;if(2===i&&(u=u[1]),e&&!(a.length<e)||!d(u))return r?t:T(i,s++,u,t);a.push(o),o=u.__iterator(i,n)}else o=a.pop()}return{value:void 0,done:!0}}))},i}function Et(t,e,r){e||(e=Dt);var i=m(t),n=0,o=t.toSeq().map((function(e,i){return[i,e,n++,r?r(e,i,t):e]})).valueSeq().toArray();return o.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(i?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),i?F(o):g(t)?N(o):U(o)}function zt(t,e,r){if(e||(e=Dt),r){var i=t.toSeq().map((function(e,i){return[e,r(e,i,t)]})).reduce((function(t,r){return It(e,t[1],r[1])?r:t}));return i&&i[0]}return t.reduce((function(t,r){return It(e,t,r)?r:t}))}function It(t,e,r){var i=t(r,e);return 0===i&&r!==e&&(null==r||r!=r)||i>0}function Tt(t,e,r,i){var n=Rt(t),o=new q(r).map((function(t){return t.size}));return n.size=i?o.max():o.min(),n.__iterate=function(t,e){for(var r,i=this.__iterator(1,e),n=0;!(r=i.next()).done&&!1!==t(r.value,n++,this););return n},n.__iteratorUncached=function(t,n){var o=r.map((function(t){return t=v(t),R(n?t.reverse():t)})),a=0,s=!1;return new I((function(){var r;return s||(r=o.map((function(t){return t.next()})),s=i?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),s?{value:void 0,done:!0}:T(t,a++,e.apply(null,r.map((function(t){return t.value}))))}))},n}function Pt(t,e){return t===e?t:x(t)?e:t.constructor(e)}function Ct(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Lt(t){return m(t)?_:g(t)?b:w}function Rt(t){return Object.create((m(t)?F:g(t)?N:U).prototype)}function Bt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):O.prototype.cacheResult.call(this)}function Dt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function jt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),i=new Array(r),n=0;n<r;n++)i[n]=t[n+e];return i}function Ot(t,e){if(!t)throw new Error(e)}function Ft(t){Ot(t!==1/0,"Cannot perform this action with an infinite size.")}function Nt(t){if(j(t)&&"string"!=typeof t)return t;if(A(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Ut(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function qt(t){return"object"==typeof t&&(S(t)||Array.isArray(t)||Ut(t))}function Vt(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Zt(t,e){return S(t)?t.has(e):qt(t)&&D.call(t,e)}function Gt(t,e,r){return S(t)?t.get(e,r):Zt(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function Jt(t){if(Array.isArray(t))return jt(t);var e={};for(var r in t)D.call(t,r)&&(e[r]=t[r]);return e}function Ht(t,e){if(!qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(S(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!D.call(t,e))return t;var r=Jt(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Kt(t,e,r){if(!qt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(S(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(D.call(t,e)&&r===t[e])return t;var i=Jt(t);return i[e]=r,i}function Wt(t,e,r,n){n||(n=r,r=void 0);var o=function t(e,r,n,o,a,s){var u=r===i;if(o===n.length){var h=u?a:r,l=s(h);return l===h?r:l}if(!u&&!qt(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,o).map(Vt)+"]: "+r);var c=n[o],f=u?i:Gt(r,c,i),p=t(f===i?e:S(f),f,n,o+1,a,s);return p===f?r:p===i?Ht(r,c):Kt(u?e?Ce():{}:r,c,p)}(S(t),t,Nt(e),0,r,n);return o===i?r:o}function $t(t,e,r){return Wt(t,e,i,(function(){return r}))}function Xt(t,e){return $t(this,t,e)}function Yt(t,e){return Wt(t,e,(function(){return i}))}function Qt(t){return Yt(this,t)}function te(t,e,r,i){return Wt(t,[e],r,i)}function ee(t,e,r){return 1===arguments.length?t(this):te(this,t,e,r)}function re(t,e,r){return Wt(this,t,e,r)}function ie(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return oe(this,t)}function ne(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return oe(this,e,t)}function oe(t,e,r){for(var n=[],o=0;o<e.length;o++){var a=_(e[o]);0!==a.size&&n.push(a)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var e=r?function(e,n){te(t,n,i,(function(t){return t===i?e:r(t,e,n)}))}:function(e,r){t.set(r,e)},o=0;o<n.length;o++)n[o].forEach(e)})):t.constructor(n[0])}function ae(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return ce(t,e)}function se(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];return ce(e,r,t)}function ue(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return le(t,e)}function he(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];return le(e,r,t)}function le(t,e,r){return ce(t,e,function(t){return function e(r,i,n){return qt(r)&&qt(i)?ce(r,[i],e):t?t(r,i,n):i}}(r))}function ce(t,e,r){if(!qt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(S(t))return"function"==typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var i=Array.isArray(t),n=t,o=i?b:_,a=i?function(e){n===t&&(n=Jt(n)),n.push(e)}:function(e,i){var o=D.call(n,i),a=o&&r?r(n[i],e,i):e;o&&a===n[i]||(n===t&&(n=Jt(n)),n[i]=a)},s=0;s<e.length;s++)o(e[s]).forEach(a);return n}function fe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return le(this,t)}function pe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return le(this,e,t)}function de(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Wt(this,t,Ce(),(function(t){return ce(t,e)}))}function me(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Wt(this,t,Ce(),(function(t){return le(t,e)}))}function ge(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function ye(){return this.__ownerID?this:this.__ensureOwner(new o)}function ve(){return this.__ensureOwner()}function _e(){return this.__altered}gt.prototype.cacheResult=mt.prototype.cacheResult=yt.prototype.cacheResult=vt.prototype.cacheResult=Bt;var be=function(t){function e(e){return null==e?Ce():$(e)&&!A(e)?e:Ce().withMutations((function(r){var i=t(e);Ft(i.size),i.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ce().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Le(this,t,e)},e.prototype.remove=function(t){return Le(this,t,i)},e.prototype.deleteAll=function(t){var e=v(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ce()},e.prototype.sort=function(t){return ir(Et(this,t))},e.prototype.sortBy=function(t,e){return ir(Et(this,e,t))},e.prototype.map=function(t,e){return this.withMutations((function(r){r.forEach((function(i,n){r.set(n,t.call(e,i,n,r))}))}))},e.prototype.__iterator=function(t,e){return new ze(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,i=0;return this._root&&this._root.iterate((function(e){return i++,t(e[1],e[0],r)}),e),i},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pe(this.size,this._root,t,this.__hash):0===this.size?Ce():(this.__ownerID=t,this.__altered=!1,this)},e}(_);be.isMap=$;var we=be.prototype;we["@@__IMMUTABLE_MAP__@@"]=!0,we.delete=we.remove,we.removeAll=we.deleteAll,we.setIn=Xt,we.removeIn=we.deleteIn=Qt,we.update=ee,we.updateIn=re,we.merge=we.concat=ie,we.mergeWith=ne,we.mergeDeep=fe,we.mergeDeepWith=pe,we.mergeIn=de,we.mergeDeepIn=me,we.withMutations=ge,we.wasAltered=_e,we.asImmutable=ve,we["@@transducer/init"]=we.asMutable=ye,we["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},we["@@transducer/result"]=function(t){return t.asImmutable()};var xe=function(t,e){this.ownerID=t,this.entries=e};xe.prototype.get=function(t,e,r,i){for(var n=this.entries,o=0,a=n.length;o<a;o++)if(Q(r,n[o][0]))return n[o][1];return i},xe.prototype.update=function(t,e,r,a,s,u,h){for(var l=s===i,c=this.entries,f=0,p=c.length;f<p&&!Q(a,c[f][0]);f++);var d=f<p;if(d?c[f][1]===s:l)return this;if(n(h),(l||!d)&&n(u),!l||1!==c.length){if(!d&&!l&&c.length>=Fe)return function(t,e,r,i){t||(t=new o);for(var n=new Ae(t,it(r),[r,i]),a=0;a<e.length;a++){var s=e[a];n=n.update(t,0,void 0,s[0],s[1])}return n}(t,c,a,s);var m=t&&t===this.ownerID,g=m?c:jt(c);return d?l?f===p-1?g.pop():g[f]=g.pop():g[f]=[a,s]:g.push([a,s]),m?(this.entries=g,this):new xe(t,g)}};var Me=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Me.prototype.get=function(t,e,r,i){void 0===e&&(e=it(r));var n=1<<(31&(0===t?e:e>>>t)),o=this.bitmap;return 0==(o&n)?i:this.nodes[je(o&n-1)].get(t+5,e,r,i)},Me.prototype.update=function(t,e,r,n,o,a,s){void 0===r&&(r=it(n));var u=31&(0===e?r:r>>>e),h=1<<u,l=this.bitmap,c=0!=(l&h);if(!c&&o===i)return this;var f=je(l&h-1),p=this.nodes,d=c?p[f]:void 0,m=Re(d,t,e+5,r,n,o,a,s);if(m===d)return this;if(!c&&m&&p.length>=Ne)return function(t,e,r,i,n){for(var o=0,a=new Array(32),s=0;0!==r;s++,r>>>=1)a[s]=1&r?e[o++]:void 0;return a[i]=n,new Se(t,o+1,a)}(t,p,l,u,m);if(c&&!m&&2===p.length&&Be(p[1^f]))return p[1^f];if(c&&m&&1===p.length&&Be(m))return m;var g=t&&t===this.ownerID,y=c?m?l:l^h:l|h,v=c?m?Oe(p,f,m,g):function(t,e,r){var i=t.length-1;if(r&&e===i)return t.pop(),t;for(var n=new Array(i),o=0,a=0;a<i;a++)a===e&&(o=1),n[a]=t[a+o];return n}(p,f,g):function(t,e,r,i){var n=t.length+1;if(i&&e+1===n)return t[e]=r,t;for(var o=new Array(n),a=0,s=0;s<n;s++)s===e?(o[s]=r,a=-1):o[s]=t[s+a];return o}(p,f,m,g);return g?(this.bitmap=y,this.nodes=v,this):new Me(t,y,v)};var Se=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};Se.prototype.get=function(t,e,r,i){void 0===e&&(e=it(r));var n=31&(0===t?e:e>>>t),o=this.nodes[n];return o?o.get(t+5,e,r,i):i},Se.prototype.update=function(t,e,r,n,o,a,s){void 0===r&&(r=it(n));var u=31&(0===e?r:r>>>e),h=o===i,l=this.nodes,c=l[u];if(h&&!c)return this;var f=Re(c,t,e+5,r,n,o,a,s);if(f===c)return this;var p=this.count;if(c){if(!f&&--p<Ue)return function(t,e,r,i){for(var n=0,o=0,a=new Array(r),s=0,u=1,h=e.length;s<h;s++,u<<=1){var l=e[s];void 0!==l&&s!==i&&(n|=u,a[o++]=l)}return new Me(t,n,a)}(t,l,p,u)}else p++;var d=t&&t===this.ownerID,m=Oe(l,u,f,d);return d?(this.count=p,this.nodes=m,this):new Se(t,p,m)};var ke=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};ke.prototype.get=function(t,e,r,i){for(var n=this.entries,o=0,a=n.length;o<a;o++)if(Q(r,n[o][0]))return n[o][1];return i},ke.prototype.update=function(t,e,r,o,a,s,u){void 0===r&&(r=it(o));var h=a===i;if(r!==this.keyHash)return h?this:(n(u),n(s),De(this,t,e,r,[o,a]));for(var l=this.entries,c=0,f=l.length;c<f&&!Q(o,l[c][0]);c++);var p=c<f;if(p?l[c][1]===a:h)return this;if(n(u),(h||!p)&&n(s),h&&2===f)return new Ae(t,this.keyHash,l[1^c]);var d=t&&t===this.ownerID,m=d?l:jt(l);return p?h?c===f-1?m.pop():m[c]=m.pop():m[c]=[o,a]:m.push([o,a]),d?(this.entries=m,this):new ke(t,this.keyHash,m)};var Ae=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};Ae.prototype.get=function(t,e,r,i){return Q(r,this.entry[0])?this.entry[1]:i},Ae.prototype.update=function(t,e,r,o,a,s,u){var h=a===i,l=Q(o,this.entry[0]);return(l?a===this.entry[1]:h)?this:(n(u),h?void n(s):l?t&&t===this.ownerID?(this.entry[1]=a,this):new Ae(t,this.keyHash,[o,a]):(n(s),De(this,t,e,it(o),[o,a])))},xe.prototype.iterate=ke.prototype.iterate=function(t,e){for(var r=this.entries,i=0,n=r.length-1;i<=n;i++)if(!1===t(r[e?n-i:i]))return!1},Me.prototype.iterate=Se.prototype.iterate=function(t,e){for(var r=this.nodes,i=0,n=r.length-1;i<=n;i++){var o=r[e?n-i:i];if(o&&!1===o.iterate(t,e))return!1}},Ae.prototype.iterate=function(t,e){return t(this.entry)};var Ee,ze=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Te(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,i=e.index++,n=void 0;if(r.entry){if(0===i)return Ie(t,r.entry)}else if(r.entries){if(i<=(n=r.entries.length-1))return Ie(t,r.entries[this._reverse?n-i:i])}else if(i<=(n=r.nodes.length-1)){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Ie(t,o.entry);e=this._stack=Te(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(I);function Ie(t,e){return T(t,e[0],e[1])}function Te(t,e){return{node:t,index:0,__prev:e}}function Pe(t,e,r,i){var n=Object.create(we);return n.size=t,n._root=e,n.__ownerID=r,n.__hash=i,n.__altered=!1,n}function Ce(){return Ee||(Ee=Pe(0))}function Le(t,e,r){var n,o;if(t._root){var a={value:!1},s={value:!1};if(n=Re(t._root,t.__ownerID,0,void 0,e,r,a,s),!s.value)return t;o=t.size+(a.value?r===i?-1:1:0)}else{if(r===i)return t;o=1,n=new xe(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Pe(o,n):Ce()}function Re(t,e,r,o,a,s,u,h){return t?t.update(e,r,o,a,s,u,h):s===i?t:(n(h),n(u),new Ae(e,o,[a,s]))}function Be(t){return t.constructor===Ae||t.constructor===ke}function De(t,e,r,i,n){if(t.keyHash===i)return new ke(e,i,[t.entry,n]);var o,a=31&(0===r?t.keyHash:t.keyHash>>>r),s=31&(0===r?i:i>>>r),u=a===s?[De(t,e,r+5,i,n)]:(o=new Ae(e,i,n),a<s?[t,o]:[o,t]);return new Me(e,1<<a|1<<s,u)}function je(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Oe(t,e,r,i){var n=i?t:jt(t);return n[e]=r,n}var Fe=8,Ne=16,Ue=8;function qe(t){return Boolean(t&&t["@@__IMMUTABLE_LIST__@@"])}var Ve=function(t){function e(e){var r=$e();if(null==e)return r;if(qe(e))return e;var i=t(e),n=i.size;return 0===n?r:(Ft(n),n>0&&n<32?We(0,n,5,null,new Ge(i.toArray())):r.withMutations((function(t){t.setSize(n),i.forEach((function(e,r){return t.set(r,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=s(this,t))>=0&&t<this.size){var r=Qe(this,t+=this._origin);return r&&r.array[31&t]}return e},e.prototype.set=function(t,e){return function(t,e,r){if((e=s(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?tr(t,e).set(0,r):tr(t,0,e+1).set(e,r)}));e+=t._origin;var i=t._tail,n=t._root,o={value:!1};e>=er(t._capacity)?i=Xe(i,t.__ownerID,0,e,r,o):n=Xe(n,t.__ownerID,t._level,e,r,o);if(!o.value)return t;if(t.__ownerID)return t._root=n,t._tail=i,t.__hash=void 0,t.__altered=!0,t;return We(t._origin,t._capacity,t._level,n,i)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):$e()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){tr(r,0,e+t.length);for(var i=0;i<t.length;i++)r.set(e+i,t[i])}))},e.prototype.pop=function(){return tr(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){tr(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},e.prototype.shift=function(){return tr(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++){var n=e[i],o=t("string"!=typeof n&&C(n)?n:[n]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(t){r.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(r[0])},e.prototype.setSize=function(t){return tr(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(i){for(var n=0;n<r.size;n++)i.set(n,t.call(e,i.get(n),n,i))}))},e.prototype.slice=function(t,e){var r=this.size;return h(t,e,r)?this:tr(this,l(t,r),c(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,i=Ke(this,e);return new I((function(){var n=i();return n===He?{value:void 0,done:!0}:T(t,e?--r:r++,n)}))},e.prototype.__iterate=function(t,e){for(var r,i=e?this.size:0,n=Ke(this,e);(r=n())!==He&&!1!==t(r,e?--i:i++,this););return i},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?We(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?$e():(this.__ownerID=t,this.__altered=!1,this)},e}(b);Ve.isList=qe;var Ze=Ve.prototype;Ze["@@__IMMUTABLE_LIST__@@"]=!0,Ze.delete=Ze.remove,Ze.merge=Ze.concat,Ze.setIn=Xt,Ze.deleteIn=Ze.removeIn=Qt,Ze.update=ee,Ze.updateIn=re,Ze.mergeIn=de,Ze.mergeDeepIn=me,Ze.withMutations=ge,Ze.wasAltered=_e,Ze.asImmutable=ve,Ze["@@transducer/init"]=Ze.asMutable=ye,Ze["@@transducer/step"]=function(t,e){return t.push(e)},Ze["@@transducer/result"]=function(t){return t.asImmutable()};var Ge=function(t,e){this.array=t,this.ownerID=e};Ge.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var i=r>>>e&31;if(i>=this.array.length)return new Ge([],t);var n,o=0===i;if(e>0){var a=this.array[i];if((n=a&&a.removeBefore(t,e-5,r))===a&&o)return this}if(o&&!n)return this;var s=Ye(this,t);if(!o)for(var u=0;u<i;u++)s.array[u]=void 0;return n&&(s.array[i]=n),s},Ge.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var i,n=r-1>>>e&31;if(n>=this.array.length)return this;if(e>0){var o=this.array[n];if((i=o&&o.removeAfter(t,e-5,r))===o&&n===this.array.length-1)return this}var a=Ye(this,t);return a.array.splice(n+1),i&&(a.array[n]=i),a};var Je,He={};function Ke(t,e){var r=t._origin,i=t._capacity,n=er(i),o=t._tail;return a(t._root,t._level,0);function a(t,s,u){return 0===s?function(t,a){var s=a===n?o&&o.array:t&&t.array,u=a>r?0:r-a,h=i-a;h>32&&(h=32);return function(){if(u===h)return He;var t=e?--h:u++;return s&&s[t]}}(t,u):function(t,n,o){var s,u=t&&t.array,h=o>r?0:r-o>>n,l=1+(i-o>>n);l>32&&(l=32);return function(){for(;;){if(s){var t=s();if(t!==He)return t;s=null}if(h===l)return He;var r=e?--l:h++;s=a(u&&u[r],n-5,o+(r<<n))}}}(t,s,u)}}function We(t,e,r,i,n,o,a){var s=Object.create(Ze);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=i,s._tail=n,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function $e(){return Je||(Je=We(0,0,5))}function Xe(t,e,r,i,o,a){var s,u=i>>>r&31,h=t&&u<t.array.length;if(!h&&void 0===o)return t;if(r>0){var l=t&&t.array[u],c=Xe(l,e,r-5,i,o,a);return c===l?t:((s=Ye(t,e)).array[u]=c,s)}return h&&t.array[u]===o?t:(a&&n(a),s=Ye(t,e),void 0===o&&u===s.array.length-1?s.array.pop():s.array[u]=o,s)}function Ye(t,e){return e&&t&&e===t.ownerID?t:new Ge(t?t.array.slice():[],e)}function Qe(t,e){if(e>=er(t._capacity))return t._tail;if(e<1<<t._level+5){for(var r=t._root,i=t._level;r&&i>0;)r=r.array[e>>>i&31],i-=5;return r}}function tr(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var i=t.__ownerID||new o,n=t._origin,a=t._capacity,s=n+e,u=void 0===r?a:r<0?a+r:n+r;if(s===n&&u===a)return t;if(s>=u)return t.clear();for(var h=t._level,l=t._root,c=0;s+c<0;)l=new Ge(l&&l.array.length?[void 0,l]:[],i),c+=1<<(h+=5);c&&(s+=c,n+=c,u+=c,a+=c);for(var f=er(a),p=er(u);p>=1<<h+5;)l=new Ge(l&&l.array.length?[l]:[],i),h+=5;var d=t._tail,m=p<f?Qe(t,u-1):p>f?new Ge([],i):d;if(d&&p>f&&s<a&&d.array.length){for(var g=l=Ye(l,i),y=h;y>5;y-=5){var v=f>>>y&31;g=g.array[v]=Ye(g.array[v],i)}g.array[f>>>5&31]=d}if(u<a&&(m=m&&m.removeAfter(i,0,u)),s>=p)s-=p,u-=p,h=5,l=null,m=m&&m.removeBefore(i,0,s);else if(s>n||p<f){for(c=0;l;){var _=s>>>h&31;if(_!==p>>>h&31)break;_&&(c+=(1<<h)*_),h-=5,l=l.array[_]}l&&s>n&&(l=l.removeBefore(i,h,s-c)),l&&p<f&&(l=l.removeAfter(i,h,p-c)),c&&(s-=c,u-=c)}return t.__ownerID?(t.size=u-s,t._origin=s,t._capacity=u,t._level=h,t._root=l,t._tail=m,t.__hash=void 0,t.__altered=!0,t):We(s,u,h,l,m)}function er(t){return t<32?0:t-1>>>5<<5}var rr,ir=function(t){function e(t){return null==t?or():X(t)?t:or().withMutations((function(e){var r=_(t);Ft(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):or()},e.prototype.set=function(t,e){return ar(this,t,e)},e.prototype.remove=function(t){return ar(this,t,i)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?nr(e,r,t,this.__hash):0===this.size?or():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(be);function nr(t,e,r,i){var n=Object.create(ir.prototype);return n.size=t?t.size:0,n._map=t,n._list=e,n.__ownerID=r,n.__hash=i,n}function or(){return rr||(rr=nr(Ce(),$e()))}function ar(t,e,r){var n,o,a=t._map,s=t._list,u=a.get(e),h=void 0!==u;if(r===i){if(!h)return t;s.size>=32&&s.size>=2*a.size?(n=(o=s.filter((function(t,e){return void 0!==t&&u!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=o.__ownerID=t.__ownerID)):(n=a.remove(e),o=u===s.size-1?s.pop():s.set(u,void 0))}else if(h){if(r===s.get(u)[1])return t;n=a,o=s.set(u,[e,r])}else n=a.set(e,s.size),o=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=o,t.__hash=void 0,t):nr(n,o)}ir.isOrderedMap=X,ir.prototype[k]=!0,ir.prototype.delete=ir.prototype.remove;function sr(t){return Boolean(t&&t["@@__IMMUTABLE_STACK__@@"])}var ur=function(t){function e(t){return null==t?fr():sr(t)?t:fr().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=s(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,i=arguments.length-1;i>=0;i--)r={value:t[i],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):cr(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&sr(e))return e;Ft(e.size);var r=this.size,i=this._head;return e.__iterate((function(t){r++,i={value:t,next:i}}),!0),this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):cr(r,i)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):fr()},e.prototype.slice=function(e,r){if(h(e,r,this.size))return this;var i=l(e,this.size);if(c(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var n=this.size-i,o=this._head;i--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):cr(n,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?cr(this.size,this._head,t,this.__hash):0===this.size?fr():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new q(this.toArray()).__iterate((function(e,i){return t(e,i,r)}),e);for(var i=0,n=this._head;n&&!1!==t(n.value,i++,this);)n=n.next;return i},e.prototype.__iterator=function(t,e){if(e)return new q(this.toArray()).__iterator(t,e);var r=0,i=this._head;return new I((function(){if(i){var e=i.value;return i=i.next,T(t,r++,e)}return{value:void 0,done:!0}}))},e}(b);ur.isStack=sr;var hr,lr=ur.prototype;function cr(t,e,r,i){var n=Object.create(lr);return n.size=t,n._head=e,n.__ownerID=r,n.__hash=i,n.__altered=!1,n}function fr(){return hr||(hr=cr(0))}lr["@@__IMMUTABLE_STACK__@@"]=!0,lr.shift=lr.pop,lr.unshift=lr.push,lr.unshiftAll=lr.pushAll,lr.withMutations=ge,lr.wasAltered=_e,lr.asImmutable=ve,lr["@@transducer/init"]=lr.asMutable=ye,lr["@@transducer/step"]=function(t,e){return t.unshift(e)},lr["@@transducer/result"]=function(t){return t.asImmutable()};function pr(t){return Boolean(t&&t["@@__IMMUTABLE_SET__@@"])}function dr(t){return pr(t)&&A(t)}function mr(t,e){if(t===e)return!0;if(!d(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||m(t)!==m(e)||g(t)!==g(e)||A(t)!==A(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!y(t);if(A(t)){var n=t.entries();return e.every((function(t,e){var i=n.next().value;return i&&Q(i[1],t)&&(r||Q(i[0],e))}))&&n.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var a=t;t=e,e=a}var s=!0,u=e.__iterate((function(e,n){if(r?!t.has(e):o?!Q(e,t.get(n,i)):!Q(t.get(n,i),e))return s=!1,!1}));return s&&t.size===u}function gr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function yr(t){if(!t||"object"!=typeof t)return t;if(!d(t)){if(!qt(t))return t;t=O(t)}if(m(t)){var e={};return t.__iterate((function(t,r){e[r]=yr(t)})),e}var r=[];return t.__iterate((function(t){r.push(yr(t))})),r}var vr=function(t){function e(e){return null==e?Mr():pr(e)&&!A(e)?e:Mr().withMutations((function(r){var i=t(e);Ft(i.size),i.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(_(t).keySeq())},e.intersect=function(t){return(t=v(t).toArray()).length?br.intersect.apply(e(t.pop()),t):Mr()},e.union=function(t){return(t=v(t).toArray()).length?br.union.apply(e(t.pop()),t):Mr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return wr(this,this._map.set(t,t))},e.prototype.remove=function(t){return wr(this,this._map.remove(t))},e.prototype.clear=function(){return wr(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,i=[],n=[];return this.forEach((function(o){var a=t.call(e,o,o,r);a!==o&&(i.push(o),n.push(a))})),this.withMutations((function(t){i.forEach((function(e){return t.remove(e)})),n.forEach((function(e){return t.add(e)}))}))},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var i=0;i<e.length;i++)t(e[i]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var i=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||i.push(t)})),this.withMutations((function(t){i.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var i=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&i.push(t)})),this.withMutations((function(t){i.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return Ur(Et(this,t))},e.prototype.sortBy=function(t,e){return Ur(Et(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(w);vr.isSet=pr;var _r,br=vr.prototype;function wr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function xr(t,e){var r=Object.create(br);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Mr(){return _r||(_r=xr(Ce()))}br["@@__IMMUTABLE_SET__@@"]=!0,br.delete=br.remove,br.merge=br.concat=br.union,br.withMutations=ge,br.asImmutable=ve,br["@@transducer/init"]=br.asMutable=ye,br["@@transducer/step"]=function(t,e){return t.add(e)},br["@@transducer/result"]=function(t){return t.asImmutable()},br.__empty=Mr,br.__make=xr;var Sr,kr=function(t){function e(t,r,i){if(!(this instanceof e))return new e(t,r,i);if(Ot(0!==i,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),i=void 0===i?1:Math.abs(i),r<t&&(i=-i),this._start=t,this._end=r,this._step=i,this.size=Math.max(0,Math.ceil((r-t)/i-1)+1),0===this.size){if(Sr)return Sr;Sr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+s(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return h(t,r,this.size)?this:(t=l(t,this.size),(r=c(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,i=this._step,n=e?this._start+(r-1)*i:this._start,o=0;o!==r&&!1!==t(n,e?r-++o:o++,this);)n+=e?-i:i;return o},e.prototype.__iterator=function(t,e){var r=this.size,i=this._step,n=e?this._start+(r-1)*i:this._start,o=0;return new I((function(){if(o===r)return{value:void 0,done:!0};var a=n;return n+=e?-i:i,T(t,e?r-++o:o++,a)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:mr(this,t)},e}(N);function Ar(t,e,r){for(var n=Nt(e),o=0;o!==n.length;)if((t=Gt(t,n[o++],i))===i)return r;return t}function Er(t,e){return Ar(this,t,e)}function zr(t,e){return Ar(t,e,i)!==i}function Ir(){Ft(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}v.isIterable=d,v.isKeyed=m,v.isIndexed=g,v.isAssociative=y,v.isOrdered=A,v.Iterator=I,gr(v,{toArray:function(){Ft(this.size);var t=new Array(this.size||0),e=m(this),r=0;return this.__iterate((function(i,n){t[r++]=e?[n,i]:i})),t},toIndexedSeq:function(){return new gt(this)},toJS:function(){return yr(this)},toKeyedSeq:function(){return new mt(this,!0)},toMap:function(){return be(this.toKeyedSeq())},toObject:Ir,toOrderedMap:function(){return ir(this.toKeyedSeq())},toOrderedSet:function(){return Ur(m(this)?this.valueSeq():this)},toSet:function(){return vr(m(this)?this.valueSeq():this)},toSetSeq:function(){return new yt(this)},toSeq:function(){return g(this)?this.toIndexedSeq():m(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ur(m(this)?this.valueSeq():this)},toList:function(){return Ve(m(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Pt(this,kt(this,t))},includes:function(t){return this.some((function(e){return Q(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Ft(this.size);var r=!0;return this.__iterate((function(i,n,o){if(!t.call(e,i,n,o))return r=!1,!1})),r},filter:function(t,e){return Pt(this,xt(this,t,e,!0))},find:function(t,e,r){var i=this.findEntry(t,e);return i?i[1]:r},forEach:function(t,e){return Ft(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Ft(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(i){r?r=!1:e+=t,e+=null!=i?i.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Pt(this,bt(this,t,e))},reduce:function(t,e,r){return Lr(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Lr(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Pt(this,wt(this,!0))},slice:function(t,e){return Pt(this,Mt(this,t,e,!0))},some:function(t,e){return!this.every(Dr(t),e)},sort:function(t){return Pt(this,Et(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return a(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var i=be().asMutable();return t.__iterate((function(n,o){i.update(e.call(r,n,o,t),0,(function(t){return t+1}))})),i.asImmutable()}(this,t,e)},equals:function(t){return mr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new q(t._cache);var e=t.toSeq().map(Br).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Dr(t),e)},findEntry:function(t,e,r){var i=r;return this.__iterate((function(r,n,o){if(t.call(e,r,n,o))return i=[n,r],!1})),i},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(u,null,t)},flatMap:function(t,e){return Pt(this,function(t,e,r){var i=Lt(t);return t.toSeq().map((function(n,o){return i(e.call(r,n,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Pt(this,At(this,t,!0))},fromEntrySeq:function(){return new vt(this)},get:function(t,e){return this.find((function(e,r){return Q(r,t)}),void 0,e)},getIn:Er,groupBy:function(t,e){return function(t,e,r){var i=m(t),n=(A(t)?ir():be()).asMutable();t.__iterate((function(o,a){n.update(e.call(r,o,a,t),(function(t){return(t=t||[]).push(i?[a,o]:o),t}))}));var o=Lt(t);return n.map((function(e){return Pt(t,o(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,i)!==i},hasIn:function(t){return zr(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:v(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:v(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return Q(e,t)}))},keySeq:function(){return this.toSeq().map(Rr).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return zt(this,t)},maxBy:function(t,e){return zt(this,e,t)},min:function(t){return zt(this,t?jr(t):Fr)},minBy:function(t,e){return zt(this,e?jr(e):Fr,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Pt(this,St(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Dr(t),e)},sortBy:function(t,e){return Pt(this,Et(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Pt(this,function(t,e,r){var i=Rt(t);return i.__iterateUncached=function(i,n){var o=this;if(n)return this.cacheResult().__iterate(i,n);var a=0;return t.__iterate((function(t,n,s){return e.call(r,t,n,s)&&++a&&i(t,n,o)})),a},i.__iteratorUncached=function(i,n){var o=this;if(n)return this.cacheResult().__iterator(i,n);var a=t.__iterator(2,n),s=!0;return new I((function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var n=t.value,u=n[0],h=n[1];return e.call(r,h,u,o)?2===i?t:T(i,u,h,t):(s=!1,{value:void 0,done:!0})}))},i}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Dr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=A(t),r=m(t),i=e?1:0;return function(t,e){return e=tt(e,3432918353),e=tt(e<<15|e>>>-15,461845907),e=tt(e<<13|e>>>-13,5),e=tt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=et((e=tt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(r?e?function(t,e){i=31*i+Nr(it(t),it(e))|0}:function(t,e){i=i+Nr(it(t),it(e))|0}:e?function(t){i=31*i+it(t)|0}:function(t){i=i+it(t)|0}),i)}(this))}});var Tr=v.prototype;Tr["@@__IMMUTABLE_ITERABLE__@@"]=!0,Tr[z]=Tr.values,Tr.toJSON=Tr.toArray,Tr.__toStringMapper=Vt,Tr.inspect=Tr.toSource=function(){return this.toString()},Tr.chain=Tr.flatMap,Tr.contains=Tr.includes,gr(_,{flip:function(){return Pt(this,_t(this))},mapEntries:function(t,e){var r=this,i=0;return Pt(this,this.toSeq().map((function(n,o){return t.call(e,[o,n],i++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Pt(this,this.toSeq().flip().map((function(i,n){return t.call(e,i,n,r)})).flip())}});var Pr=_.prototype;Pr["@@__IMMUTABLE_KEYED__@@"]=!0,Pr[z]=Tr.entries,Pr.toJSON=Ir,Pr.__toStringMapper=function(t,e){return Vt(e)+": "+Vt(t)},gr(b,{toKeyedSeq:function(){return new mt(this,!1)},filter:function(t,e){return Pt(this,xt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Pt(this,wt(this,!1))},slice:function(t,e){return Pt(this,Mt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=l(t,t<0?this.count():this.size);var i=this.slice(0,t);return Pt(this,1===r?i:i.concat(jt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Pt(this,At(this,t,!1))},get:function(t,e){return(t=s(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=s(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Pt(this,function(t,e){var r=Rt(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,i){var n=this,o=0;return t.__iterate((function(t){return(!o||!1!==r(e,o++,n))&&!1!==r(t,o++,n)}),i),o},r.__iteratorUncached=function(r,i){var n,o=t.__iterator(1,i),a=0;return new I((function(){return(!n||a%2)&&(n=o.next()).done?n:a%2?T(r,a++,e):T(r,a++,n.value,n)}))},r}(this,t))},interleave:function(){var t=[this].concat(jt(arguments)),e=Tt(this.toSeq(),N.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Pt(this,r)},keySeq:function(){return kr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Pt(this,St(this,t,e,!1))},zip:function(){var t=[this].concat(jt(arguments));return Pt(this,Tt(this,Or,t))},zipAll:function(){var t=[this].concat(jt(arguments));return Pt(this,Tt(this,Or,t,!0))},zipWith:function(t){var e=jt(arguments);return e[0]=this,Pt(this,Tt(this,t,e))}});var Cr=b.prototype;function Lr(t,e,r,i,n,o){return Ft(t.size),t.__iterate((function(t,o,a){n?(n=!1,r=t):r=e.call(i,r,t,o,a)}),o),r}function Rr(t,e){return e}function Br(t,e){return[e,t]}function Dr(t){return function(){return!t.apply(this,arguments)}}function jr(t){return function(){return-t.apply(this,arguments)}}function Or(){return jt(arguments)}function Fr(t,e){return t<e?1:t>e?-1:0}function Nr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Cr["@@__IMMUTABLE_INDEXED__@@"]=!0,Cr[k]=!0,gr(w,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),w.prototype.has=Tr.includes,w.prototype.contains=w.prototype.includes,gr(F,_.prototype),gr(N,b.prototype),gr(U,w.prototype);var Ur=function(t){function e(t){return null==t?Gr():dr(t)?t:Gr().withMutations((function(e){var r=w(t);Ft(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(_(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(vr);Ur.isOrderedSet=dr;var qr,Vr=Ur.prototype;function Zr(t,e){var r=Object.create(Vr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Gr(){return qr||(qr=Zr(or()))}Vr[k]=!0,Vr.zip=Cr.zip,Vr.zipWith=Cr.zipWith,Vr.__empty=Gr,Vr.__make=Zr;var Jr=function(t,e){var r,i=function(o){var a=this;if(o instanceof i)return o;if(!(this instanceof i))return new i(o);if(!r){r=!0;var s=Object.keys(t),u=n._indices={};n._name=e,n._keys=s,n._defaultValues=t;for(var h=0;h<s.length;h++){var l=s[h];u[l]=h,n[l]?"object"==typeof console&&console.warn:Xr(n,l)}}this.__ownerID=void 0,this._values=Ve().withMutations((function(t){t.setSize(a._keys.length),_(o).forEach((function(e,r){t.set(a._indices[r],e===a._defaultValues[r]?void 0:e)}))}))},n=i.prototype=Object.create(Hr);return n.constructor=i,e&&(i.displayName=e),i};Jr.prototype.toString=function(){for(var t,e=Wr(this)+" { ",r=this._keys,i=0,n=r.length;i!==n;i++)e+=(i?", ":"")+(t=r[i])+": "+Vt(this.get(t));return e+" }"},Jr.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&$r(this).equals($r(t))},Jr.prototype.hashCode=function(){return $r(this).hashCode()},Jr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Jr.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],i=this._values.get(r);return void 0===i?this._defaultValues[t]:i},Jr.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return Kr(this,r)}return this},Jr.prototype.remove=function(t){return this.set(t)},Jr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Kr(this,t)},Jr.prototype.wasAltered=function(){return this._values.wasAltered()},Jr.prototype.toSeq=function(){return $r(this)},Jr.prototype.toJS=function(){return yr(this)},Jr.prototype.entries=function(){return this.__iterator(2)},Jr.prototype.__iterator=function(t,e){return $r(this).__iterator(t,e)},Jr.prototype.__iterate=function(t,e){return $r(this).__iterate(t,e)},Jr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Kr(this,e,t):(this.__ownerID=t,this._values=e,this)},Jr.isRecord=M,Jr.getDescriptiveName=Wr;var Hr=Jr.prototype;function Kr(t,e,r){var i=Object.create(Object.getPrototypeOf(t));return i._values=e,i.__ownerID=r,i}function Wr(t){return t.constructor.displayName||t.constructor.name||"Record"}function $r(t){return H(t._keys.map((function(e){return[e,t.get(e)]})))}function Xr(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Ot(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}Hr["@@__IMMUTABLE_RECORD__@@"]=!0,Hr.delete=Hr.remove,Hr.deleteIn=Hr.removeIn=Qt,Hr.getIn=Er,Hr.hasIn=Tr.hasIn,Hr.merge=ie,Hr.mergeWith=ne,Hr.mergeIn=de,Hr.mergeDeep=fe,Hr.mergeDeepWith=pe,Hr.mergeDeepIn=me,Hr.setIn=Xt,Hr.update=ee,Hr.updateIn=re,Hr.withMutations=ge,Hr.asMutable=ye,Hr.asImmutable=ve,Hr[z]=Hr.entries,Hr.toJSON=Hr.toObject=Tr.toObject,Hr.inspect=Hr.toSource=function(){return this.toString()};var Yr,Qr=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(Yr)return Yr;Yr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return Q(this._value,t)},e.prototype.slice=function(t,r){var i=this.size;return h(t,r,i)?this:new e(this._value,c(r,i)-l(t,i))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return Q(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return Q(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var r=this.size,i=0;i!==r&&!1!==t(this._value,e?r-++i:i++,this););return i},e.prototype.__iterator=function(t,e){var r=this,i=this.size,n=0;return new I((function(){return n===i?{value:void 0,done:!0}:T(t,e?i-++n:n++,r._value)}))},e.prototype.equals=function(t){return t instanceof e?Q(this._value,t._value):mr(t)},e}(N);function ti(t,e){return function t(e,r,i,n,o,a){var s=Array.isArray(i)?N:Ut(i)?F:null;if(s){if(~e.indexOf(i))throw new TypeError("Cannot convert circular structure to Immutable");e.push(i),o&&""!==n&&o.push(n);var u=r.call(a,n,s(i).map((function(n,a){return t(e,r,n,a,o,i)})),o&&o.slice());return e.pop(),o&&o.pop(),u}return i}([],e||ei,t,"",e&&e.length>2?[]:void 0,{"":t})}function ei(t,e){return m(e)?e.toMap():e.toList()}var ri="4.0.0-rc.11",ii={version:ri,Collection:v,Iterable:v,Seq:O,Map:be,OrderedMap:ir,List:Ve,Stack:ur,Set:vr,OrderedSet:Ur,Record:Jr,Range:kr,Repeat:Qr,is:Q,fromJS:ti,hash:it,isImmutable:S,isCollection:d,isKeyed:m,isIndexed:g,isAssociative:y,isOrdered:A,isValueObject:Y,isSeq:x,isList:qe,isMap:$,isOrderedMap:X,isStack:sr,isSet:pr,isOrderedSet:dr,isRecord:M,get:Gt,getIn:Ar,has:Zt,hasIn:zr,merge:ae,mergeDeep:ue,mergeWith:se,mergeDeepWith:he,remove:Ht,removeIn:Yt,set:Kt,setIn:$t,update:te,updateIn:Wt},ni=v;e.default=ii},3300:function(t,e,r){"use strict";var i=r("f3a3"),n=r("80af"),o=r("3fb5"),a=r("ea53"),s=i.assert;function u(t){a.call(this,"short",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(t,e,r,i){a.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(e,16),this.y=new n(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,r,i){a.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(e,16),this.y=new n(r,16),this.z=new n(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new n(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=(e=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(t.lambda)r=new n(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new n(t.a,16),b:new n(t.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:n.mont(t),r=new n(2).toRed(e).redInvm(),i=r.redNeg(),o=new n(3).toRed(e).redNeg().redSqrt().redMul(r);return[i.redAdd(o).fromRed(),i.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,r,i,o,a,s,u,h,l,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,p=this.n.clone(),d=new n(1),m=new n(0),g=new n(0),y=new n(1),v=0;0!==f.cmpn(0);){var _=p.div(f);h=p.sub(_.mul(f)),l=g.sub(_.mul(d));var b=y.sub(_.mul(m));if(!i&&h.cmp(c)<0)e=u.neg(),r=d,i=h.neg(),o=l;else if(i&&2==++v)break;u=h,p=f,f=h,g=d,d=l,y=m,m=b}a=h.neg(),s=l;var w=i.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=r),i.negative&&(i=i.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:i,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],i=e[1],n=i.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=n.mul(r.a),s=o.mul(i.a),u=n.mul(r.b),h=o.mul(i.b);return{k1:t.sub(a).sub(s),k2:u.add(h).neg()}},u.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=i.fromRed().isOdd();return(e&&!o||!e&&o)&&(i=i.redNeg()),this.point(t,i)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[2*o]=s,i[2*o+1]=u,n[2*o]=a.k1,n[2*o+1]=a.k2}for(var h=this._wnafMulAdd(1,i,n,2*o,r),l=0;l<2*o;l++)i[l]=null,n[l]=null;return h},o(h,a.BasePoint),u.prototype.point=function(t,e,r){return new h(this,t,e,r)},u.prototype.pointFromJSON=function(t,e){return h.fromJSON(this,t,e)},h.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,i=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],r);if(!e[2])return i;function n(e){return t.point(e[0],e[1],r)}var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),i=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},h.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),i=t.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(t){return t=new n(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},h.prototype.mulAdd=function(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},h.prototype.jmulAdd=function(t,e,r){var i=[this,e],n=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},h.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},h.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),u.prototype.jpoint=function(t,e,r){return new l(this,t,e,r)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),i=this.y.redMul(e).redMul(t);return this.curve.point(r,i)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(e),n=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=i.redSub(n),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),l=h.redMul(s),c=i.redMul(h),f=u.redSqr().redIAdd(l).redISub(c).redISub(c),p=u.redMul(c.redISub(f)).redISub(o.redMul(l)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,p,d)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,i=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(i),s=n.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=r.redMul(u),c=s.redSqr().redIAdd(h).redISub(l).redISub(l),f=s.redMul(l.redISub(c)).redISub(n.redMul(h)),p=this.z.redMul(a);return this.curve.jpoint(c,f,p)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}var i=this.curve.a,n=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<t;r++){var l=o.redSqr(),c=h.redSqr(),f=c.redSqr(),p=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),d=o.redMul(c),m=p.redSqr().redISub(d.redAdd(d)),g=d.redISub(m),y=p.redMul(g);y=y.redIAdd(y).redISub(f);var v=h.redMul(s);r+1<t&&(u=u.redMul(f)),o=m,s=v,h=y}return this.curve.jpoint(o,h.redMul(n),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i),u=s.redSqr().redISub(a).redISub(a),h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),t=u,e=s.redMul(a.redISub(u)).redISub(h),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),p=this.x.redAdd(c).redSqr().redISub(l).redISub(f);p=p.redIAdd(p);var d=l.redAdd(l).redIAdd(l),m=d.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},l.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var h=o.redIAdd(o);h=(h=h.redIAdd(h)).redIAdd(h),e=s.redMul(a.redISub(u)).redISub(h),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),p=this.x.redSub(l).redMul(this.x.redAdd(l));p=p.redAdd(p).redIAdd(p);var d=f.redIAdd(f),m=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(c).redISub(l);var g=c.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=p.redMul(d.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n)),u=e.redAdd(e),h=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(h.redAdd(h)),c=h.redISub(l),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=s.redMul(c).redISub(f),d=r.redAdd(r).redMul(i);return this.curve.jpoint(l,p,d)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),i=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(i),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=i.redIAdd(i);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var h=n.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=e.redMul(h);l=(l=l.redIAdd(l)).redIAdd(l);var c=this.x.redMul(s).redISub(l);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(h.redMul(u.redISub(h)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(c,f,p)},l.prototype.mul=function(t,e){return t=new n(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var i=e.redMul(this.z),n=r.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(i)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var i=t.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3337:function(t,e,r){"use strict";var i=e;i.version=r("2801").version,i.utils=r("f3a3"),i.rand=r("fdac"),i.curve=r("4136"),i.curves=r("0cbb"),i.ec=r("b9a8"),i.eddsa=r("945d")},"334a":function(t,e,r){(e=t.exports=r("4250")).Stream=e,e.Readable=e,e.Writable=r("19ea"),e.Duplex=r("e666"),e.Transform=r("09dc"),e.PassThrough=r("0ae3"),e.finished=r("ee93"),e.pipeline=r("fbd5")},"343e":function(t,e,r){"use strict";const i=e;i.der=r("3768"),i.pem=r("85b3")},"34d5":function(t,e,r){(e=t.exports=r("cf35")).Stream=e,e.Readable=e,e.Writable=r("49ce"),e.Duplex=r("5e7d"),e.Transform=r("f1c8"),e.PassThrough=r("9d28"),e.finished=r("42a7"),e.pipeline=r("ac4f")},3505:function(t,e,r){var i=r("8707").Buffer,n=r("8c8a");function o(t,e,r){var o=e.length,a=n(e,t._cache);return t._cache=t._cache.slice(o),t._prev=i.concat([t._prev,r?e:a]),a}e.encrypt=function(t,e,r){for(var n,a=i.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=i.allocUnsafe(0)),!(t._cache.length<=e.length)){a=i.concat([a,o(t,e,r)]);break}n=t._cache.length,a=i.concat([a,o(t,e.slice(0,n),r)]),e=e.slice(n)}return a}},3768:function(t,e,r){"use strict";const i=r("3fb5"),n=r("c591").Buffer,o=r("8360"),a=r("8b71");function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function h(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},i(u,o),u.prototype._encodeComposite=function(t,e,r,i){const o=function(t,e,r,i){let n;"seqof"===t?t="seq":"setof"===t&&(t="set");if(a.tagByName.hasOwnProperty(t))n=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return i.error("Unknown tag: "+t);n=t}if(n>=31)return i.error("Multi-octet tag encoding unsupported");e||(n|=32);return n|=a.tagClassByName[r||"universal"]<<6,n}(t,e,r,this.reporter);if(i.length<128){const t=n.alloc(2);return t[0]=o,t[1]=i.length,this._createEncoderBuffer([t,i])}let s=1;for(let t=i.length;t>=256;t>>=8)s++;const u=n.alloc(2+s);u[0]=o,u[1]=128|s;for(let t=1+s,e=i.length;e>0;t--,e>>=8)u[t]=255&e;return this._createEncoderBuffer([u,i])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=n.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let i=0;for(let e=0;e<t.length;e++){let r=t[e];for(i++;r>=128;r>>=7)i++}const o=n.alloc(i);let a=o.length-1;for(let e=t.length-1;e>=0;e--){let r=t[e];for(o[a--]=127&r;(r>>=7)>0;)o[a--]=128|127&r}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let r;const i=new Date(t);return"gentime"===e?r=[h(i.getUTCFullYear()),h(i.getUTCMonth()+1),h(i.getUTCDate()),h(i.getUTCHours()),h(i.getUTCMinutes()),h(i.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[h(i.getUTCFullYear()%100),h(i.getUTCMonth()+1),h(i.getUTCDate()),h(i.getUTCHours()),h(i.getUTCMinutes()),h(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!n.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=n.from(e)}if(n.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=n.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let e=t;e>=256;e>>=8)r++;const i=new Array(r);for(let e=i.length-1;e>=0;e--)i[e]=255&t,t>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(n.from(i))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,r){const i=this._baseState;let n;if(null===i.default)return!1;const o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,r).join()),o.length!==i.defaultBuffer.length)return!1;for(n=0;n<o.length;n++)if(o[n]!==i.defaultBuffer[n])return!1;return!0}},"37e6":function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(11).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"380f":function(t,e,r){"use strict";var i=r("f3a3"),n=i.assert,o=i.parseBytes,a=i.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(t){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),t)},s.prototype.getPublic=function(t){return i.encode(this.pubBytes(),t)},t.exports=s},"387f":function(t,e,r){"use strict";t.exports=function(t,e,r,i,n){return t.config=e,r&&(t.code=r),t.request=i,t.response=n,t}},3934:function(t,e,r){"use strict";var i=r("c532");t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var i=t;return e&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=i.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},"399f":function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(9).Buffer}catch(t){}function s(t,e,r){for(var n=0,o=Math.min(t.length,r),a=0,s=e;s<o;s++){var u,h=t.charCodeAt(s)-48;n<<=4,n|=u=h>=49&&h<=54?h-49+10:h>=17&&h<=22?h-17+10:h,a|=u}return i(!(240&a),"Invalid character in "+t),n}function u(t,e,r,n){for(var o=0,a=0,s=Math.min(t.length,r),u=e;u<s;u++){var h=t.charCodeAt(u)-48;o*=n,a=h>=49?h-49+10:h>=17?h-17+10:h,i(h>=0&&a<n,"Invalid character"),o+=a}return o}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){h(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?c[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=f[t],l=p[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(l).toString(t);r=(d=d.idivn(l)).isZero()?m+r:c[h-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function d(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,n),a},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,i=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|i;t[r++]=255&a,r<t.length&&(t[r++]=a>>8&255),r<t.length&&(t[r++]=a>>16&255),6===o?(r<t.length&&(t[r++]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r<t.length)for(t[r++]=i;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,i=0,n=0,o=0;n<this.length;n++){var a=this.words[n]<<o|i;t[r--]=255&a,r>=0&&(t[r--]=a>>8&255),r>=0&&(t[r--]=a>>16&255),6===o?(r>=0&&(t[r--]=a>>24&255),i=0,o=0):(i=a>>>24,o+=2)}if(r>=0)for(t[r--]=i;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r._strip()}function y(t,e,r){return g(t,e,r)}function v(t,e){this.x=t,this.y=e}Math.imul||(m=d),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,e):r<63?d(this,t,e):r<1024?g(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},v.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},v.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},v.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},v.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},v.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var r=0,n=0;n<this.length;n++){var o=(0|this.words[n])*t,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=t.words[i]>>>n&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this._strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s._strip(),i._strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var r=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(r*n+(0|this.words[o]))%t;return e?-n:n},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*r;this.words[n]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(w,b),w.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(x,b),n(M,b),n(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new x;else if("p192"===t)e=new M;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return _[t]=e,e},k.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},n(A,k),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"39a9":function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=r("1c35"),n=i.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=a),a.prototype=Object.create(n.prototype),o(n,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},"39f5":function(t,e,r){var i=r("8707").Buffer;function n(t){i.isBuffer(t)||(t=i.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(4*n);return r}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,r,i,n){for(var o,a,s,u,h=r[0],l=r[1],c=r[2],f=r[3],p=t[0]^e[0],d=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],y=4,v=1;v<n;v++)o=h[p>>>24]^l[d>>>16&255]^c[m>>>8&255]^f[255&g]^e[y++],a=h[d>>>24]^l[m>>>16&255]^c[g>>>8&255]^f[255&p]^e[y++],s=h[m>>>24]^l[g>>>16&255]^c[p>>>8&255]^f[255&d]^e[y++],u=h[g>>>24]^l[p>>>16&255]^c[d>>>8&255]^f[255&m]^e[y++],p=o,d=a,m=s,g=u;return o=(i[p>>>24]<<24|i[d>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^e[y++],a=(i[d>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&p])^e[y++],s=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[p>>>8&255]<<8|i[255&d])^e[y++],u=(i[g>>>24]<<24|i[p>>>16&255]<<16|i[d>>>8&255]<<8|i[255&m])^e[y++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],i=[],n=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var h=s^s<<1^s<<2^s<<3^s<<4;h=h>>>8^255&h^99,r[a]=h,i[h]=a;var l=t[a],c=t[l],f=t[c],p=257*t[h]^16843008*h;n[0][a]=p<<24|p>>>8,n[1][a]=p<<16|p>>>16,n[2][a]=p<<8|p>>>24,n[3][a]=p,p=16843009*f^65537*c^257*l^16843008*a,o[0][h]=p<<24|p>>>8,o[1][h]=p<<16|p>>>16,o[2][h]=p<<8|p>>>24,o[3][h]=p,0===a?a=s=1:(a=l^t[t[t[f^l]]],s^=t[t[s]])}return{SBOX:r,INV_SBOX:i,SUB_MIX:n,INV_SUB_MIX:o}}();function h(t){this._key=n(t),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,i=4*(r+1),n=[],o=0;o<e;o++)n[o]=t[o];for(o=e;o<i;o++){var a=n[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),n[o]=n[o-e]^a}for(var h=[],l=0;l<i;l++){var c=i-l,f=n[c-(l%4?0:4)];h[l]=l<4||c<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=n,this._invKeySchedule=h},h.prototype.encryptBlockRaw=function(t){return a(t=n(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},h.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=i.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},h.prototype.decryptBlock=function(t){var e=(t=n(t))[1];t[1]=t[3],t[3]=e;var r=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=i.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},h.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=h},"3b74":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("716c");function n(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(o(t[r]))}return e}function o(t){var e,r,i,n,o,s,u=0,h=t.length;if(h>2){for(s=0;s<h;s++)s===h-2?(i=h-2,n=h-1,o=0):s===h-1?(i=h-1,n=0,o=1):(i=s,n=s+1,o=s+2),e=t[i],r=t[n],u+=(a(t[o][0])-a(e[0]))*Math.sin(a(r[1]));u=6378137*u*6378137/2}return u}function a(t){return t*Math.PI/180}e.default=function(t){return i.geomReduce(t,(function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return n(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=n(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},"3daf":function(t,e,r){"use strict";var i=r("f3a3"),n=r("80af"),o=r("3fb5"),a=r("ea53"),s=i.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function h(t,e,r,i,o){a.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(e,16),this.y=new n(r,16),this.z=i?new n(i,16):this.curve.one,this.t=o&&new n(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,r,i){return this.point(t,e,r,i)},u.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=i.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),i=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(n)},o(h,a.BasePoint),u.prototype.pointFromJSON=function(t){return h.fromJSON(this,t)},u.prototype.point=function(t,e,r,i){return new h(this,t,e,r,i)},h.fromJSON=function(t,e){return new h(t,e[0],e[1],e[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},h.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=i.redAdd(e),a=o.redSub(r),s=i.redSub(e),u=n.redMul(a),h=o.redMul(s),l=n.redMul(s),c=a.redMul(o);return this.curve.point(u,h,c,l)},h.prototype._projDbl=function(){var t,e,r,i=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var a=(h=this.curve._mulA(n)).redAdd(o);if(this.zOne)t=i.redSub(n).redSub(o).redMul(a.redSub(this.curve.two)),e=a.redMul(h.redSub(o)),r=a.redSqr().redSub(a).redSub(a);else{var s=this.z.redSqr(),u=a.redSub(s).redISub(s);t=i.redSub(n).redISub(o).redMul(u),e=a.redMul(h.redSub(o)),r=a.redMul(u)}}else{var h=n.redAdd(o);s=this.curve._mulC(this.z).redSqr(),u=h.redSub(s).redSub(s);t=this.curve._mulC(i.redISub(h)).redMul(u),e=this.curve._mulC(h).redMul(n.redISub(o)),r=h.redMul(u)}return this.curve.point(t,e,r)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=n.redSub(i),s=n.redAdd(i),u=r.redAdd(e),h=o.redMul(a),l=s.redMul(u),c=o.redMul(u),f=a.redMul(s);return this.curve.point(h,l,f,c)},h.prototype._projAdd=function(t){var e,r,i=this.z.redMul(t.z),n=i.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=n.redSub(s),h=n.redAdd(s),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),c=i.redMul(u).redMul(l);return this.curve.twisted?(e=i.redMul(h).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(h)):(e=i.redMul(h).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(h)),this.curve.point(c,e,r)},h.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},h.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},h.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},h.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},h.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},"3f62":function(t,e,r){var i=r("8707").Buffer,n=i.alloc(16,0);function o(t){var e=i.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,r,i=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],n=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(n[0]^=i[0],n[1]^=i[1],n[2]^=i[2],n[3]^=i[3]),r=0!=(1&i[3]),e=3;e>0;e--)i[e]=i[e]>>>1|(1&i[e-1])<<31;i[0]=i[0]>>>1,r&&(i[0]=i[0]^225<<24)}this.state=o(n)},a.prototype.update=function(t){var e;for(this.cache=i.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(i.concat([this.cache,n],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},4:function(t,e){},"409b":function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},4111:function(t,e,r){"use strict";var i=r("7f7a");e.certificate=r("56b5");var n=i.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=n;var o=i.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var a=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));e.PublicKey=a;var s=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=i.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var h=i.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=h;var l=i.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=l,e.DSAparam=i.define("DSAparam",(function(){this.int()}));var c=i.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=c;var f=i.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=i.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},4136:function(t,e,r){"use strict";var i=e;i.base=r("ea53"),i.short=r("3300"),i.mont=r("676f"),i.edwards=r("3daf")},4186:function(t,e,r){"use strict";(function(e){var i;function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r("ee93"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),h=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[l]=null,t[a]=null,t[s]=null,e(p(r,!1)))}}function m(t){e.nextTick(d,t)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((n(i={get stream(){return this[f]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[h])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(r,i){e.nextTick((function(){t[u]?i(t[u]):r(p(void 0,!0))}))}));var i,n=this[l];if(n)i=new Promise(function(t,e){return function(r,i){t.then((function(){e[h]?r(p(void 0,!0)):e[c](r,i)}),i)}}(n,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));i=new Promise(this[c])}return this[l]=i,i}},Symbol.asyncIterator,(function(){return this})),n(i,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),i),g);t.exports=function(t){var e,r=Object.create(y,(n(e={},f,{value:t,writable:!0}),n(e,a,{value:null,writable:!0}),n(e,s,{value:null,writable:!0}),n(e,u,{value:null,writable:!0}),n(e,h,{value:t._readableState.endEmitted,writable:!0}),n(e,c,{value:function(t,e){var i=r[f].read();i?(r[l]=null,r[a]=null,r[s]=null,t(p(i,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[l]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[l]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var i=r[a];null!==i&&(r[l]=null,r[a]=null,r[s]=null,i(p(void 0,!0))),r[h]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r("f28c"))},"41df":function(t,e,r){"use strict";const i=e;i.Reporter=r("d1c8").Reporter,i.DecoderBuffer=r("6283").DecoderBuffer,i.EncoderBuffer=r("6283").EncoderBuffer,i.Node=r("8360")},4228:function(t,e,r){var i=r("82f0"),n=r("8707").Buffer,o=r("bac2"),a=r("09f5"),s=r("6430"),u=r("39f5"),h=r("ae84");function l(t,e,r){s.call(this),this._cache=new c,this._last=void 0,this._cipher=new u.AES(e),this._prev=n.from(r),this._mode=t,this._autopadding=!0}function c(){this.cache=n.allocUnsafe(0)}function f(t,e,r){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=n.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof e&&(e=n.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,r,!0):"auth"===s.type?new i(s.module,e,r,!0):new l(s.module,e,r)}r("3fb5")(l,s),l.prototype._update=function(t){var e,r;this._cache.add(t);for(var i=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),i.push(r);return n.concat(i)},l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},c.prototype.add=function(t){this.cache=n.concat([this.cache,t])},c.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=h(e,!1,r.key,r.iv);return f(t,i.key,i.iv)},e.createDecipheriv=f},4250:function(t,e,r){"use strict";(function(e,i){var n;t.exports=k,k.ReadableState=S;r("7e25").EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r("5bbb"),s=r("1c35").Buffer,u=e.Uint8Array||function(){};var h,l=r(0);h=l&&l.debuglog?l.debuglog("stream"):function(){};var c,f,p,d=r("96a5"),m=r("493f"),g=r("b9b5").getHighWaterMark,y=r("9d8a").codes,v=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("3fb5")(k,a);var x=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(t,e,i){n=n||r("e666"),t=t||{},"boolean"!=typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(c||(c=r("7d72").StringDecoder),this.decoder=new c(t.encoding),this.encoding=t.encoding)}function k(t){if(n=n||r("e666"),!(this instanceof k))return new k(t);var e=this instanceof n;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,r,i,n){h("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(h("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,T(t)))}(t,a);else if(n||(o=function(t,e){var r;i=e,s.isBuffer(i)||i instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e));var i;return r}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),i)a.endEmitted?x(t,new w):E(t,a,e,!0);else if(a.ended)x(t,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):P(t,a)):E(t,a,e,!1)}else i||(a.reading=!1,P(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function E(t,e,r,i){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&I(t)),P(t,e)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),k.prototype.destroy=m.destroy,k.prototype._undestroy=m.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=s.from(t,e),e=""),r=!0),A(this,t,e,!1,r)},k.prototype.unshift=function(t){return A(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){c||(c=r("7d72").StringDecoder);var e=new c(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};function z(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;h("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(T,t))}function T(t){var e=t._readableState;h("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,D(t)}function P(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(h("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function L(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){h("readable nexttick read 0"),t.read(0)}function B(t,e){h("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),D(t),e.flowing&&!e.reading&&t.read(0)}function D(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function O(t){var e=t._readableState;h("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick(F,e,t))}function F(t,e){if(h("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function N(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}k.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):I(this),null;if(0===(t=z(t,e))&&e.ended)return 0===e.length&&O(this),null;var i,n=e.needReadable;return h("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",n=!0),e.ended||e.reading?h("reading or ended",n=!1):n&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=z(r,e))),null===(i=t>0?j(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&O(this)),null!==i&&this.emit("data",i),i},k.prototype._read=function(t){x(this,new b("_read()"))},k.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,h("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?u:g;function s(e,i){h("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",l),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",f),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function u(){h("onend"),t.end()}n.endEmitted?i.nextTick(a):r.once("end",a),t.on("unpipe",s);var l=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,D(t))}}(r);t.on("drain",l);var c=!1;function f(e){h("ondata");var i=t.write(e);h("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==N(n.pipes,t))&&!c&&(h("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(e){h("onerror",e),g(),t.removeListener("error",p),0===o(t,"error")&&x(t,e)}function d(){t.removeListener("finish",m),g()}function m(){h("onfinish"),t.removeListener("close",d),g()}function g(){h("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",p),t.once("close",d),t.once("finish",m),t.emit("pipe",r),n.flowing||(h("pipe resume"),r.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=N(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},k.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,h("on readable",n.length,n.reading),n.length?I(this):n.reading||i.nextTick(R,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick(L,this),r},k.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(L,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(B,t,e))}(this,t)),t.paused=!1,this},k.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;for(var n in t.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){(h("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(e.push(n)||(i=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){h("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r("4186")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,e){return void 0===p&&(p=r("919c")),p(k,t,e)})}).call(this,r("c8ba"),r("f28c"))},"42a7":function(t,e,r){"use strict";var i=r("d113").codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}(o||n);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||l()},h=e._writableState&&e._writableState.finished,l=function(){s=!1,h=!0,a||o.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,c=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!c?(e._readableState&&e._readableState.ended||(t=new i),o.call(e,t)):s&&!h?(e._writableState&&e._writableState.ended||(t=new i),o.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",l),e.on("abort",d),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",l),e.removeListener("abort",d),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},"44a3":function(t,e,r){"use strict";var i=r("80af"),n=r("f3a3"),o=n.assert,a=n.cachedProperty,s=n.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof i&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},"467f":function(t,e,r){"use strict";var i=r("2d83");t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(i("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},"48e6":function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(2).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"493f":function(t,e,r){"use strict";(function(e){function r(t,e){n(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(n,this,t)):e.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(i,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(i,a),o(t)):e.nextTick(i,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r("f28c"))},"49ce":function(t,e,r){"use strict";(function(e,i){function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var i=t.entry;t.entry=null;for(;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=k,k.WritableState=S;var a={deprecate:r("b7d1")},s=r("f12a"),u=r("1c35").Buffer,h=e.Uint8Array||function(){};var l,c=r("9019"),f=r("05f0").getHighWaterMark,p=r("d113").codes,d=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,b=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;function M(){}function S(t,e,a){o=o||r("5e7d"),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(P,t,e),t._writableState.errorEmitted=!0,x(t,n)):(o(n),t._writableState.errorEmitted=!0,x(t,n),P(t,e))}(t,r,n,e,o);else{var a=I(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||z(t,r),n?i.nextTick(E,t,r,a,o):E(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function k(t){var e=this instanceof(o=o||r("5e7d"));if(!e&&!l.call(k,this))return new k(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function A(t,e,r,i,n,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):r?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function E(t,e,r,i){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),P(t,e)}function z(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,o=new Array(i),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,l=r.encoding,c=r.callback;if(A(t,e,!1,e.objectMode?1:h.length,h,l,c),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),P(t,e)}))}function P(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(T,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}r("3fb5")(k,s),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===k&&(t&&t._writableState instanceof S)}})):l=function(t){return t instanceof this},k.prototype.pipe=function(){x(this,new y)},k.prototype.write=function(t,e,r){var n,o=this._writableState,a=!1,s=!o.objectMode&&(n=t,u.isBuffer(n)||n instanceof h);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=M),o.ending?function(t,e){var r=new b;x(t,r),i.nextTick(e,r)}(this,r):(s||function(t,e,r,n){var o;return null===r?o=new _:"string"==typeof r||e.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(x(t,o),i.nextTick(n,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,i,n,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,i,n,o);return h}(this,o,s,t,e,r)),a},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||z(this,t))},k.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(t,e,r){r(new m("_write()"))},k.prototype._writev=null,k.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,P(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(t,e){e(t)}}).call(this,r("c8ba"),r("f28c"))},"4a52":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(r("9b57")),n=a(r("8827")),o=a(r("57ba"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,r,o){if((0,n.default)(this,t),this.obj=e,this.key=r,this.cb=o,!(r.indexOf("__")>-1)){var a=this.obj[this.key];a&&a.push&&(this.arr=[].concat((0,i.default)(a)),this.length=this.arr.length)}}return(0,o.default)(t,[{key:"__reSettle",value:function(){this.length=this.arr.length,this.obj[this.key]=this.arr,this.obj[this.key]=new t(this.obj,this.key,this.cb)}},{key:"getValue",value:function(){return this.arr}},{key:"push",value:function(t){this.arr.push(t),this.__reSettle()}},{key:"pop",value:function(){this.arr.pop(),this.__reSettle()}},{key:"shift",value:function(){this.arr.shift(),this.__reSettle()}},{key:"unshift",value:function(){var t;(t=this.arr).unshift.apply(t,arguments),this.__reSettle()}},{key:"sort",value:function(){var t;(t=this.arr).sort.apply(t,arguments),this.__reSettle()}},{key:"indexOf",value:function(t){return this.arr.indexOf(t)}},{key:"forEach",value:function(t){this.arr.forEach(t)}},{key:"find",value:function(t){return this.arr.find(t)}},{key:"findIndex",value:function(t){return this.arr.findIndex(t)}},{key:"filter",value:function(){var t;return(t=this.arr).filter.apply(t,arguments)}},{key:"map",value:function(t){return this.arr.map(t)}},{key:"slice",value:function(t,e){this.arr=this.arr.slice(t,e),this.__reSettle()}},{key:"splice",value:function(t,e,r){this.arr.splice(t,e,r),this.__reSettle()}},{key:"reverse",value:function(){return this.arr.reverse(),this.arr}},{key:"concat",value:function(){var t;return(t=this.arr).concat.apply(t,arguments),this.arr}}]),t}();e.default=s,t.exports=e.default},"4bb7":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={findValueByString:function(t,e){if(!/^\{[^\}]*\}$/.test(t))return t;var r=(t=t.slice(1,t.length-1)).split("."),i=void 0;return r.forEach((function(t){(i=e[t])&&(e=e[t])})),i}},t.exports=e.default},"4bf2":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=h(r("9b57")),n=h(r("b24f")),o=h(r("3f6b")),a=h(r("8827")),s=h(r("57ba")),u=h(r("4bb7"));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,a.default)(this,t),(0,o.default)(this,{comp:{}},e),this._getALlEventNodes()}return(0,s.default)(t,[{key:"_getALlEventNodes",value:function(){var t=this;["click","keyup","keydown","change","mouseup","scroll","hover"].forEach((function(e){var r=t.comp.node.querySelectorAll("[mv\\:"+e+"]");[].forEach.call(r,(function(r){r.tagName.indexOf("M:")<0&&t._setEventAction(r,e)})),t.comp.node.getAttribute("mv:"+e)&&t._setEventAction(t.comp.node,e)}))}},{key:"_setEventAction",value:function(t,e){var r=this,o=t.getAttribute("mv:"+e).replace(/([^\(\)]*)\(([^\(\)]*)\)/,"$1|$2").split("|"),a=(0,n.default)(o,2),s=a[0],h=a[1].split(",").map((function(t){return/(^\'[^\']*\'$)|(^\"[^\"]*\"$)/.test(t)?t.replace(/[\'\"]/gi,""):/(^{[^\{\}]*}$)/.test(t)?u.default.findValueByString(t,{data:r.comp.data,props:r.comp.props}):void 0})).filter((function(t){return!!t})),l=this;t.addEventListener(e,(function(t){var e;h.length?(e=l.comp.method)[s].apply(e,(0,i.default)(h).concat([t])):l.comp.method[s](t)}))}}]),t}();e.default=l,t.exports=e.default},"4dd0":function(t,e,r){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=r("ae84"),s=r("fda6"),u=r("8707").Buffer;t.exports=function(t,e){var r,h=t.toString(),l=h.match(i);if(l){var c="aes"+l[1],f=u.from(l[2],"hex"),p=u.from(l[3].replace(/[\r\n]/g,""),"base64"),d=a(e,f.slice(0,8),parseInt(l[1],10)).key,m=[],g=s.createDecipheriv(c,d,f);m.push(g.update(p)),m.push(g.final()),r=u.concat(m)}else{var y=h.match(o);r=u.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:h.match(n)[1],data:r}}},"4e2b":function(t,e,r){"use strict";var i=r("da3e"),n=r("3fb5"),o=r("5ee7"),a=r("0184");function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}n(u,a),t.exports=u,u.create=function(t){return new u(t)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),i.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),n=o.readUInt32BE(e,4);o.pc1(r,n,t.tmp,0),r=t.tmp[0],n=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=h[a>>>1];r=o.r28shl(r,s),n=o.r28shl(n,s),o.pc2(r,n,t.keys,a)}},u.prototype._update=function(t,e,r,i){var n=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,n.tmp,0),a=n.tmp[0],s=n.tmp[1],"encrypt"===this.type?this._encrypt(n,a,s,n.tmp,0):this._decrypt(n,a,s,n.tmp,0),a=n.tmp[0],s=n.tmp[1],o.writeUInt32BE(r,a,i),o.writeUInt32BE(r,s,i+4)},u.prototype._pad=function(t,e){for(var r=t.length-e,i=e;i<t.length;i++)t[i]=r;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)i.equal(t[r],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,r,i,n){for(var a=e,s=r,u=0;u<t.keys.length;u+=2){var h=t.keys[u],l=t.keys[u+1];o.expand(s,t.tmp,0),h^=t.tmp[0],l^=t.tmp[1];var c=o.substitute(h,l),f=s;s=(a^o.permute(c))>>>0,a=f}o.rip(s,a,i,n)},u.prototype._decrypt=function(t,e,r,i,n){for(var a=r,s=e,u=t.keys.length-2;u>=0;u-=2){var h=t.keys[u],l=t.keys[u+1];o.expand(a,t.tmp,0),h^=t.tmp[0],l^=t.tmp[1];var c=o.substitute(h,l),f=a;a=(s^o.permute(c))>>>0,s=f}o.rip(a,s,i,n)}},"4fd1":function(t,e,r){var i=r("3fb5"),n=r("b672"),o=r("8707").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,n.call(this,128,112)}function h(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function c(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function y(t,e){return t>>>0<e>>>0?1:0}i(u,n),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,i=0|this._bh,n=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,M=0|this._dl,S=0|this._el,k=0|this._fl,A=0|this._gl,E=0|this._hl,z=0;z<32;z+=2)e[z]=t.readInt32BE(4*z),e[z+1]=t.readInt32BE(4*z+4);for(;z<160;z+=2){var I=e[z-30],T=e[z-30+1],P=p(I,T),C=d(T,I),L=m(I=e[z-4],T=e[z-4+1]),R=g(T,I),B=e[z-14],D=e[z-14+1],j=e[z-32],O=e[z-32+1],F=C+D|0,N=P+B+y(F,C)|0;N=(N=N+L+y(F=F+R|0,R)|0)+j+y(F=F+O|0,O)|0,e[z]=N,e[z+1]=F}for(var U=0;U<160;U+=2){N=e[U],F=e[U+1];var q=l(r,i,n),V=l(b,w,x),Z=c(r,b),G=c(b,r),J=f(s,S),H=f(S,s),K=a[U],W=a[U+1],$=h(s,u,v),X=h(S,k,A),Y=E+H|0,Q=_+J+y(Y,E)|0;Q=(Q=(Q=Q+$+y(Y=Y+X|0,X)|0)+K+y(Y=Y+W|0,W)|0)+N+y(Y=Y+F|0,F)|0;var tt=G+V|0,et=Z+q+y(tt,G)|0;_=v,E=A,v=u,A=k,u=s,k=S,s=o+Q+y(S=M+Y|0,M)|0,o=n,M=x,n=i,x=w,i=r,w=b,r=Q+et+y(b=Y+tt|0,Y)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+M|0,this._el=this._el+S|0,this._fl=this._fl+k|0,this._gl=this._gl+A|0,this._hl=this._hl+E|0,this._ah=this._ah+r+y(this._al,b)|0,this._bh=this._bh+i+y(this._bl,w)|0,this._ch=this._ch+n+y(this._cl,x)|0,this._dh=this._dh+o+y(this._dl,M)|0,this._eh=this._eh+s+y(this._el,S)|0,this._fh=this._fh+u+y(this._fl,k)|0,this._gh=this._gh+v+y(this._gl,A)|0,this._hh=this._hh+_+y(this._hl,E)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,i){t.writeInt32BE(e,i),t.writeInt32BE(r,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},5:function(t,e){},5080:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=h(r("8827")),n=h(r("57ba")),o=h(r("51a3")),a=h(r("61b6")),s=h(r("2705")),u=h(r("4bf2"));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){var e=this;(0,i.default)(this,t),this.requireLibsLoaded=!1,this.rootData={data:this.data,props:this.props},this.requireLibs?this.requireLibsLoaded||this.loadLibs().then((function(t){e._onLibsLoaded()})):setTimeout((function(t){return e._onLibsLoaded()}),0)}return(0,n.default)(t,[{key:"loadLibs",value:function(){return o.default.load(this.requireLibs)}},{key:"_onLibsLoaded",value:function(){this.requireLibsLoaded=!0,this._init()}},{key:"_init",value:function(){this.init(),this.__render(),this._startObserve(),this.onComponentMount()}},{key:"onComponentMount",value:function(){}},{key:"__updateNode",value:function(){var t=this.render();return this.node&&([Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("replaceWith")||Object.defineProperty(t,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var r=t instanceof Node;e.appendChild(r?t:document.createTextNode(String(t)))})),this.parentNode&&this.parentNode.replaceChild(e,this)}})})),this.node.replaceWith(t)),this.node=t,this.node}},{key:"_startObserve",value:function(){var t=this;new a.default(this.data,(function(e,r){t.data=r,t.__render()}))}},{key:"init",value:function(){}},{key:"__render",value:function(){this.hbsTemplate&&(this.__updateNode(),new u.default({comp:this}),this.__initialChildComps())}},{key:"render",value:function(){var t=document.createElement("div");return t.innerHTML=this.hbsTemplate({data:this.data,props:this.props,staticData:this.staticData}),t.firstChild}},{key:"__initialChildComps",value:function(){this.comps&&(this.templateParser=new s.default({node:this.node,data:this.data,props:this.props,comps:this.comps,method:this.method}),this.templateParser.parseChildNodes())}},{key:"setData",value:function(t){this.data=t,this.__render()}},{key:"destory",value:function(){this.node.parentNode.removeChild(this.node)}},{key:"renderInDom",value:function(t){this.container=t,this.__render(),this.container.appendChild(this.node),this.__initialChildComps()}},{key:"renderBeforeDom",value:function(t){var e=t.parentNode;e&&(this.node=this.render(),e.insertBefore(this.node,t))}},{key:"isMarble",value:function(){return!0}}]),t}();e.default=l,t.exports=e.default},5165:function(t,e,r){(function(t){var i=r("8c8a");function n(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,n(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),i(r,o)}}).call(this,r("1c35").Buffer)},"51a3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(r("9b57")),n=o(r("e1de"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={load:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new n.default((function(r){e.length?t.loadScript(0,e,r):r()}))},loadScript:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],o=r[t],a=[].concat((0,i.default)(document.getElementsByTagName("script"))).find((function(t){return t.getAttribute("src")==o})),s=a;a||((s=document.createElement("script")).setAttribute("src",o),s.setAttribute("loaded","false"),document.body.appendChild(s));var u=r[++t];"true"!=s.getAttribute("loaded")&&s.getAttribute("loaded")?s.addEventListener("load",(function(i){s.setAttribute("loaded","true"),u?e.loadScript(t,r,n):n()})):u?this.loadScript(t,r,n):n()}},t.exports=e.default},5239:function(t,e,r){var i=r("8707").Buffer;function n(t,e,r){for(var i,n,a=-1,s=0;++a<8;)i=e&1<<7-a?128:0,s+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^i))>>a%8,t._prev=o(t._prev,r?i:n);return s}function o(t,e){var r=t.length,n=-1,o=i.allocUnsafe(t.length);for(t=i.concat([t,i.from([e])]);++n<r;)o[n]=t[n]<<1|t[n+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,a=i.allocUnsafe(o),s=-1;++s<o;)a[s]=n(t,e[s],r);return a}},5270:function(t,e,r){"use strict";var i=r("c532"),n=r("c401"),o=r("2e67"),a=r("2444"),s=r("d925"),u=r("e683");function h(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return h(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return h(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(h(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},5291:function(t,e,r){var i=r("0106"),n=r("8707").Buffer;t.exports=function(t,e){return n.from(t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed().toArray())}},"561d":function(t,e,r){(function(e){var i=r("48e6"),n=new(r("7a10")),o=new i(24),a=new i(11),s=new i(10),u=new i(3),h=new i(7),l=r("58a2"),c=r("11dc");function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new i(t),this}function p(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new i(t),this}t.exports=m;var d={};function m(t,e,r){this.setGenerator(e),this.__prime=new i(t),this._prime=i.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function g(t,r){var i=new e(t.toArray());return r?i.toString(r):i}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),i=[r,t.toString(16)].join("_");if(i in d)return d[i];var c,f=0;if(t.isEven()||!l.simpleSieve||!l.fermatTest(t)||!n.test(t))return f+=1,f+="02"===r||"05"===r?8:4,d[i]=f,f;switch(n.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(c=t.mod(s)).cmp(u)&&c.cmp(h)&&(f+=8);break;default:f+=4}return d[i]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new i(c(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var r=(t=(t=new i(t)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new e(r.toArray()),o=this.getPrime();if(n.length<o.length){var a=new e(o.length-n.length);a.fill(0),n=e.concat([a,n])}return n},m.prototype.getPublicKey=function(t){return g(this._pub,t)},m.prototype.getPrivateKey=function(t){return g(this._priv,t)},m.prototype.getPrime=function(t){return g(this.__prime,t)},m.prototype.getGenerator=function(t){return g(this._gen,t)},m.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new i(t),this}}).call(this,r("1c35").Buffer)},"56b5":function(t,e,r){"use strict";var i=r("7f7a"),n=i.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=i.define("RelativeDistinguishedName",(function(){this.setof(o)})),h=i.define("RDNSequence",(function(){this.seqof(u)})),l=i.define("Name",(function(){this.choice({rdnSequence:this.use(h)})})),c=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))})),f=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(l),this.key("validity").use(c),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),d=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));t.exports=d},"57e2":function(t,e,r){"use strict";(function(e){var i;function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r("42a7"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),h=Symbol("ended"),l=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var r=t[f].read();null!==r&&(t[l]=null,t[a]=null,t[s]=null,e(p(r,!1)))}}function m(t){e.nextTick(d,t)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((n(i={get stream(){return this[f]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[h])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(r,i){e.nextTick((function(){t[u]?i(t[u]):r(p(void 0,!0))}))}));var i,n=this[l];if(n)i=new Promise(function(t,e){return function(r,i){t.then((function(){e[h]?r(p(void 0,!0)):e[c](r,i)}),i)}}(n,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));i=new Promise(this[c])}return this[l]=i,i}},Symbol.asyncIterator,(function(){return this})),n(i,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),i),g);t.exports=function(t){var e,r=Object.create(y,(n(e={},f,{value:t,writable:!0}),n(e,a,{value:null,writable:!0}),n(e,s,{value:null,writable:!0}),n(e,u,{value:null,writable:!0}),n(e,h,{value:t._readableState.endEmitted,writable:!0}),n(e,c,{value:function(t,e){var i=r[f].read();i?(r[l]=null,r[a]=null,r[s]=null,t(p(i,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[l]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[l]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var i=r[a];null!==i&&(r[l]=null,r[a]=null,r[s]=null,i(p(void 0,!0))),r[h]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r("f28c"))},"58a2":function(t,e,r){var i=r("11dc");t.exports=v,v.simpleSieve=g,v.fermatTest=y;var n=r("48e6"),o=new n(24),a=new(r("7a10")),s=new n(1),u=new n(2),h=new n(5),l=(new n(16),new n(8),new n(10)),c=new n(3),f=(new n(7),new n(11)),p=new n(4),d=(new n(12),null);function m(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var i=Math.ceil(Math.sqrt(r)),n=0;n<e&&t[n]<=i&&r%t[n]!=0;n++);e!==n&&t[n]<=i||(t[e++]=r)}return d=t,t}function g(t){for(var e=m(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function y(t){var e=n.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new n(2===e||5===e?[140,123]:[140,39]);var r,d;for(e=new n(e);;){for(r=new n(i(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(u),e.cmp(u)){if(!e.cmp(h))for(;r.mod(l).cmp(c);)r.iadd(p)}else for(;r.mod(o).cmp(f);)r.iadd(p);if(g(d=r.shrn(1))&&g(r)&&y(d)&&y(r)&&a.test(d)&&a.test(r))return r}}},5919:function(t,e,r){"use strict";e.sha1=r("13e2"),e.sha224=r("07f2"),e.sha256=r("6eed"),e.sha384=r("8b95"),e.sha512=r("b525")},5934:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getOriginUrl=function(t){return t.replace(/\/?[\?#].*/,"")},e.getUrlHost=function(t){return t.replace(/(https?:\/\/)?([\w\.]*).*/,"$1$2")},e.getUrlPath=function(t){return t.replace(/(https?:\/\/)?([\w\.]*)\/(.*)/,"$3")}},"59b3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.defaultState={sketchEditingState:!1,sketchClickState:!1,itemTimeMap:{},multiMarkerIsOpening:!1,multiMarkerBgOpened:!1,isMovingMapForEntryCard:!1,entryCompCardsState:!1,EntryCardOpened:!1,markerClickState:!1,defMeasureDistanceState:!1,defMeasureAreaState:!1,filterTags:[],periodsData:[],mapYears:[],isFocusMapYearInput:!1,home:{},result:{defCategories:null},detail:{},itemEdit:{},itemNodeEdit:{sketchData:null}}},"5a76":function(t,e,r){var i=r("f576");t.exports=function(t){return(new i).update(t).digest()}},"5bbb":function(t,e,r){t.exports=r("7e25").EventEmitter},"5c31":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadLib=void 0;var i=o(r("e1de")),n=o(r("9b57"));function o(t){return t&&t.__esModule?t:{default:t}}e.loadLib=function(t){return new i.default((function(e){t&&"string"==typeof t?function(t,e){var r=[].concat((0,n.default)(document.getElementsByTagName("script"))).find((function(e){return e.getAttribute("src")===t})),i=r;r||((i=document.createElement("script")).setAttribute("src",t),i.setAttribute("loaded","false"),document.body.appendChild(i)),"true"!==i.getAttribute("loaded")?i.addEventListener("load",(function(t){i.setAttribute("loaded","true"),e()})):e()}(t,e):e()}))}},"5c33":function(t,e,r){},"5e7d":function(t,e,r){"use strict";(function(e){var i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var n=r("cf35"),o=r("49ce");r("3fb5")(h,n);for(var a=i(o.prototype),s=0;s<a.length;s++){var u=a[s];h.prototype[u]||(h.prototype[u]=o.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);n.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||e.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r("f28c"))},"5ee7":function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,i){for(var n=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}r[i+0]=n>>>0,r[i+1]=o>>>0},e.rip=function(t,e,r,i){for(var n=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)n<<=1,n|=e>>>s+a&1,n<<=1,n|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[i+0]=n>>>0,r[i+1]=o>>>0},e.pc1=function(t,e,r,i){for(var n=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=t>>s+a&1}for(s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[i+0]=n>>>0,r[i+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,n){for(var o=0,a=0,s=i.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>i[u]&1;for(u=s;u<i.length;u++)a<<=1,a|=e>>>i[u]&1;r[n+0]=o>>>0,r[n+1]=a>>>0},e.expand=function(t,e,r){var i=0,n=0;i=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=t>>>o&63;for(o=11;o>=3;o-=4)n|=t>>>o&63,n<<=6;n|=(31&t)<<1|t>>>31,e[r+0]=i>>>0,e[r+1]=n>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,i=0;i<4;i++){r<<=4,r|=n[64*i+(t>>>18-6*i&63)]}for(i=0;i<4;i++){r<<=4,r|=n[256+64*i+(e>>>18-6*i&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var i=t.toString(2);i.length<e;)i="0"+i;for(var n=[],o=0;o<e;o+=r)n.push(i.slice(o,o+r));return n.join(" ")}},6:function(t,e){},"617b":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(r("3f6b")),n=a(r("8827")),o=a(r("57ba"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{map:{}},e),this.createPersonLayers()}return(0,o.default)(t,[{key:"createPersonLayers",value:function(){this.map.addLayer({id:"location-layer",type:"fill",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{}}),this.map.addLayer({id:"person-fill",type:"fill",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"fill-color":" rgba(249, 142, 100, 0.9)","fill-opacity":.17}}),this.map.addLayer({id:"person-fill-border",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"line-color":" rgba(249, 142, 100, 0.9)","line-width":1,"line-opacity":1,"line-dasharray":[1,1]}}),this.map.addLayer({id:"sketch-polygon",type:"fill",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"fill-color":{property:"fillStyle",type:"identity"}}}),this.map.addLayer({id:"sketch-polygon-border",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"line-color":{property:"strokeStyle",type:"identity"},"line-width":1}}),this.map.addLayer({id:"sketch-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":{property:"strokeStyle",type:"identity"},"line-width":{property:"lineWidth",type:"identity"}}}),this.map.addLayer({id:"sketch-point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},paint:{"circle-radius":{property:"radius",type:"identity"},"circle-color":{property:"fillStyle",type:"identity"},"circle-stroke-width":{property:"lineWidth",type:"identity"},"circle-stroke-color":{property:"strokeStyle",type:"identity"}}}),this.map.addLayer({id:"person-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f2c007","line-width":4,"line-opacity":1}}),this.map.addLayer({id:"detail-recommend-polygon",type:"fill",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"fill-color":"rgba(134, 93, 255, 0.9)","fill-opacity":.17}}),this.map.addLayer({id:"detail-recommend-polygon-border",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{},paint:{"line-color":"rgba(134, 93, 255, 0.9)","line-width":1,"line-opacity":1,"line-dasharray":[1,1]}}),this.map.addLayer({id:"detail-recommend-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgba(134, 93, 255, 0.9)","line-width":4,"line-opacity":1}}),this.map.addLayer({id:"detail-recommend-kgs-point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},paint:{"circle-radius":5,"circle-color":"rgba(139, 93, 255, 0.9)"}}),this.map.addLayer({id:"detail-recommend-kgs-point-border",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},paint:{"circle-radius":8,"circle-color":"rgba(139, 93, 255, 0.9)","circle-opacity":.18}}),this.map.addLayer({id:"detail-recommend-kgs-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgba(139, 93, 255, 0.9)","line-width":2,"line-opacity":1,"line-dasharray":[.2,3]}}),this.map.addLayer({id:"kgs-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgba(249, 142, 100, 0.9)","line-width":2,"line-opacity":1,"line-dasharray":[.2,3]}}),this.map.addLayer({id:"kgs-point-border",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},paint:{"circle-radius":8,"circle-color":"rgba(249, 142, 100, 0.9)","circle-opacity":.18}}),this.map.addLayer({id:"kgs-point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},paint:{"circle-radius":5,"circle-color":"rgba(249, 142, 100, 0.9)"}}),this.map.addLayer({id:"node-line",type:"line",source:{type:"geojson",data:{type:"FeatureCollection",features:[]}},layout:{"line-join":"round","line-cap":"butt"},paint:{"line-width":2,"line-opacity":1,"line-dasharray":[0,3,2],"line-color":"#AF420E"}})}}]),t}();e.default=s,t.exports=e.default},"61b6":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(r("3f6b")),n=u(r("4849")),o=u(r("1098")),a=u(r("8827")),s=u(r("4a52"));function u(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if((0,a.default)(this,t),"object"==(void 0===e?"undefined":(0,o.default)(e))){var u=function(o){var a=e[o];!e[o]||!e[o].push||e[o]instanceof s.default||(e[o].__proto__=new s.default(e,o,r),a=e[o]),(0,n.default)(e,o,{get:function(){return a},set:function(n){var s=(0,i.default)({},e),u=(0,i.default)({},e);s[o]=n,a=n,r(u,s),new t(s,r)}})};for(var h in e)u(h)}},t.exports=e.default},6283:function(t,e,r){"use strict";const i=r("3fb5"),n=r("d1c8").Reporter,o=r("c591").Buffer;function a(t,e){n.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}i(a,n),e.DecoderBuffer=a,a.isDecoderBuffer=function(t){if(t instanceof a)return!0;return"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},a.prototype.restore=function(t){const e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,n.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new a(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=s,s.isEncoderBuffer=function(t){if(t instanceof s)return!0;return"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},"62c9":function(t,e,r){var i=r("8707").Buffer;function n(t,e,r){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=i.concat([t._prev.slice(1),i.from([r?e:n])]),n}e.encrypt=function(t,e,r){for(var o=e.length,a=i.allocUnsafe(o),s=-1;++s<o;)a[s]=n(t,e[s],r);return a}},6430:function(t,e,r){var i=r("8707").Buffer,n=r("d485").Transform,o=r("7d72").StringDecoder;function a(t){n.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r("3fb5")(a,n),a.prototype.update=function(t,e,r){"string"==typeof t&&(t=i.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,r){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){i=t}finally{r(i)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||i.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var i=this._decoder.write(t);return r&&(i+=this._decoder.end()),i},t.exports=a},6442:function(t,e,r){e.publicEncrypt=r("ad25"),e.privateDecrypt=r("0f2c"),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},"676f":function(t,e,r){"use strict";var i=r("80af"),n=r("3fb5"),o=r("ea53"),a=r("f3a3");function s(t){o.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),i=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},n(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),i=t.redMul(e),n=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=n.redMul(i),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),r=this,i=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var o=n.length-1;o>=0;o--)0===n[o]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},"69f2":function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r("087f"),e.sha1=r("7e78"),e.sha224=r("72aa"),e.sha256=r("a255"),e.sha384=r("b837"),e.sha512=r("4fd1")},"6aa23":function(t,e,r){"use strict";var i=r("7d92"),n=r("7658"),o=r("da3e");function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=n.toArray(t.entropy,t.entropyEnc||"hex"),r=n.toArray(t.nonce,t.nonceEnc||"hex"),i=n.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}t.exports=a,a.prototype._init=function(t,e,r){var i=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,r,i){"string"!=typeof e&&(i=r,r=e,e=null),t=n.toArray(t,e),r=n.toArray(r,i),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},a.prototype.generate=function(t,e,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(i=r,r=e,e=null),r&&(r=n.toArray(r,i||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(r),this._reseed++,n.encode(a,e)}},"6ade":function(t,e,r){var i=r("8c8a"),n=r("8707").Buffer,o=r("bd9d");function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var u=a(t),h=o+16*s;t._cache.writeUInt32BE(u[0],h+0),t._cache.writeUInt32BE(u[1],h+4),t._cache.writeUInt32BE(u[2],h+8),t._cache.writeUInt32BE(u[3],h+12)}var l=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),i(e,l)}},"6eed":function(t,e,r){"use strict";var i=r("c3c0"),n=r("edc9"),o=r("aa56"),a=r("da3e"),s=i.sum32,u=i.sum32_4,h=i.sum32_5,l=o.ch32,c=o.maj32,f=o.s0_256,p=o.s1_256,d=o.g0_256,m=o.g1_256,g=n.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}i.inherits(v,g),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,i=0;i<16;i++)r[i]=t[e+i];for(;i<r.length;i++)r[i]=u(m(r[i-2]),r[i-7],d(r[i-15]),r[i-16]);var n=this.h[0],o=this.h[1],g=this.h[2],y=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(a(this.k.length===r.length),i=0;i<r.length;i++){var x=h(w,p(v),l(v,_,b),this.k[i],r[i]),M=s(f(n),c(n,o,g));w=b,b=_,_=v,v=s(y,x),y=g,g=o,o=n,n=s(x,M)}this.h[0]=s(this.h[0],n),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],y),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],_),this.h[6]=s(this.h[6],b),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},"6fe7":function(t,e,r){var i=r("39a9").Buffer,n=r("1a2a"),o=r("a958"),a=r("3337").ec,s=r("399f"),u=r("2aee"),h=r("cd91");function l(t,e,r,o){if((t=i.from(t.toArray())).length<e.byteLength()){var a=i.alloc(e.byteLength()-t.length);t=i.concat([a,t])}var s=r.length,u=function(t,e){t=(t=c(t,e)).mod(e);var r=i.from(t.toArray());if(r.length<e.byteLength()){var n=i.alloc(e.byteLength()-r.length);r=i.concat([n,r])}return r}(r,e),h=i.alloc(s);h.fill(1);var l=i.alloc(s);return l=n(o,l).update(h).update(i.from([0])).update(t).update(u).digest(),h=n(o,l).update(h).digest(),{k:l=n(o,l).update(h).update(i.from([1])).update(t).update(u).digest(),v:h=n(o,l).update(h).digest()}}function c(t,e){var r=new s(t),i=(t.length<<3)-e.bitLength();return i>0&&r.ishrn(i),r}function f(t,e,r){var o,a;do{for(o=i.alloc(0);8*o.length<t.bitLength();)e.v=n(r,e.k).update(e.v).digest(),o=i.concat([o,e.v]);a=c(o,t),e.k=n(r,e.k).update(e.v).update(i.from([0])).digest(),e.v=n(r,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function p(t,e,r,i){return t.toRed(s.mont(r)).redPow(e).fromRed().mod(i)}t.exports=function(t,e,r,n,d){var m=u(e);if(m.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(t,e){var r=h[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var n=new a(r).keyFromPrivate(e.privateKey).sign(t);return i.from(n.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==n)throw new Error("wrong private key type");return function(t,e,r){var n,o=e.params.priv_key,a=e.params.p,u=e.params.q,h=e.params.g,d=new s(0),m=c(t,u).mod(u),g=!1,y=l(o,u,t,r);for(;!1===g;)n=f(u,y,r),d=p(h,n,a,u),0===(g=n.invm(u).imul(m.add(o.mul(d))).mod(u)).cmpn(0)&&(g=!1,d=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),i.from(r)}(d,g)}(t,m,r)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");t=i.concat([d,t]);for(var g=m.modulus.byteLength(),y=[0,1];t.length+y.length+1<g;)y.push(255);y.push(0);for(var v=-1;++v<t.length;)y.push(t[v]);return o(y,m)},t.exports.getKey=l,t.exports.makeKey=f},7:function(t,e){},"716c":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("feb7");function n(t,e,r){if(null!==t)for(var i,o,a,s,u,h,l,c,f=0,p=0,d=t.type,m="FeatureCollection"===d,g="Feature"===d,y=m?t.features.length:1,v=0;v<y;v++){u=(c=!!(l=m?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,w=0;if(null!==(s=c?l.geometries[_]:l)){h=s.coordinates;var x=s.type;switch(f=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(h,p,v,b,w))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===e(h[i],p,v,b,w))return!1;p++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(o=0;o<h[i].length-f;o++){if(!1===e(h[i][o],p,v,b,w))return!1;p++}"MultiLineString"===x&&b++,"Polygon"===x&&w++}"Polygon"===x&&b++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(w=0,o=0;o<h[i].length;o++){for(a=0;a<h[i][o].length-f;a++){if(!1===e(h[i][o][a],p,v,b,w))return!1;p++}w++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===n(s.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function s(t,e){var r,i,n,o,a,s,u,h,l,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,m=p?t.features.length:1;for(r=0;r<m;r++){for(s=p?t.features[r].geometry:d?t.geometry:t,h=p?t.features[r].properties:d?t.properties:{},l=p?t.features[r].bbox:d?t.bbox:void 0,c=p?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,n=0;n<a;n++)if(null!==(o=u?s.geometries[n]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,h,l,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,h,l,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,h,l,c))return!1;f++}}function u(t,e){s(t,(function(t,r,n,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,n,{bbox:o,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var h=0;h<t.coordinates.length;h++){var l={type:s,coordinates:t.coordinates[h]};if(!1===e(i.feature(l,n),r,h))return!1}}))}function h(t,e){u(t,(function(t,r,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,h=0,l=0,c=0;return!1!==n(t,(function(n,s,f,p,d){if(void 0===u||r>h||p>l||d>c)return u=n,h=r,l=p,c=d,void(a=0);var m=i.lineString([u,n],t.properties);if(!1===e(m,r,o,d,a))return!1;a++,u=n}))&&void 0}}}))}function l(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,r,n){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,r,n,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(i.lineString(a[s],t.properties),r,n,s))return!1}}}))}e.coordEach=n,e.coordReduce=function(t,e,r,i){var o=r;return n(t,(function(t,i,n,a,s){o=0===i&&void 0===r?t:e(o,t,i,n,a,s)}),i),o},e.propEach=o,e.propReduce=function(t,e,r){var i=r;return o(t,(function(t,n){i=0===n&&void 0===r?t:e(i,t,n)})),i},e.featureEach=a,e.featureReduce=function(t,e,r){var i=r;return a(t,(function(t,n){i=0===n&&void 0===r?t:e(i,t,n)})),i},e.coordAll=function(t){var e=[];return n(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,r){var i=r;return s(t,(function(t,n,o,a,s){i=0===n&&void 0===r?t:e(i,t,n,o,a,s)})),i},e.flattenEach=u,e.flattenReduce=function(t,e,r){var i=r;return u(t,(function(t,n,o){i=0===n&&0===o&&void 0===r?t:e(i,t,n,o)})),i},e.segmentEach=h,e.segmentReduce=function(t,e,r){var i=r,n=!1;return h(t,(function(t,o,a,s,u){i=!1===n&&void 0===r?t:e(i,t,o,a,s,u),n=!0})),i},e.lineEach=l,e.lineReduce=function(t,e,r){var i=r;return l(t,(function(t,n,o,a){i=0===n&&void 0===r?t:e(i,t,n,o,a)})),i},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),u=u||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var h=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),i.lineString([h[s],h[s+1]],u,e);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s-1),i.lineString([h[a][s],h[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s-1),i.lineString([h[o][s],h[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s-1),i.lineString([h[o][a][s],h[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var r,n=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),u=u||t.features[n].properties,r=t.features[n].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var h=r.coordinates;switch(r.type){case"Point":return i.point(h,u,e);case"MultiPoint":return o<0&&(o=h.length+o),i.point(h[o],u,e);case"LineString":return s<0&&(s=h.length+s),i.point(h[s],u,e);case"Polygon":return a<0&&(a=h.length+a),s<0&&(s=h[a].length+s),i.point(h[a][s],u,e);case"MultiLineString":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),i.point(h[o][s],u,e);case"MultiPolygon":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),s<0&&(s=h[o][a].length-s),i.point(h[o][a][s],u,e)}throw new Error("geojson is invalid")}},"72aa":function(t,e,r){var i=r("3fb5"),n=r("a255"),o=r("b672"),a=r("8707").Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}i(u,n),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},7572:function(t,e,r){},"75cc":function(t,e,r){"use strict";(function(t,i){function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r("8707"),a=r("11dc"),s=o.Buffer,u=o.kMaxLength,h=t.crypto||t.msCrypto,l=Math.pow(2,32)-1;function c(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>l||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>l||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>u)throw new RangeError("buffer too small")}function p(t,e,r,n){if(i.browser){var o=t.buffer,s=new Uint8Array(o,e,r);return h.getRandomValues(s),n?void i.nextTick((function(){n(null,t)})):t}if(!n)return a(r).copy(t,e),t;a(r,(function(r,i){if(r)return n(r);i.copy(t,e),n(null,t)}))}h&&h.getRandomValues||!i.browser?(e.randomFill=function(e,r,i,n){if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)n=r,r=0,i=e.length;else if("function"==typeof i)n=i,i=e.length-r;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return c(r,e.length),f(i,r,e.length),p(e,r,i,n)},e.randomFillSync=function(e,r,i){void 0===r&&(r=0);if(!(s.isBuffer(e)||e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');c(r,e.length),void 0===i&&(i=e.length-r);return f(i,r,e.length),p(e,r,i)}):(e.randomFill=n,e.randomFillSync=n)}).call(this,r("c8ba"),r("f28c"))},"75f2":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(r("3f6b")),n=c(r("8827")),o=c(r("57ba")),a=c(r("023b"));r("7572");var s=c(r("7dcf")),u=r("feb7"),h=c(r("8f76")),l=r("a7c7");function c(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{$container:$("body"),map:{},comps:{}},e),this.currentStates=!1,this.mabState=l.MAB_STATE,this._render(),this._bind()}return(0,o.default)(t,[{key:"_render",value:function(){this.$html=$((0,a.default)()),this.$container.append(this.$html)}},{key:"_bind",value:function(){$("body").on("mousedown",this.clickOthers.bind(this)),this.$html.find(".measure-but").on("mousedown",this.startMeasure.bind(this))}},{key:"clickOthers",value:function(t){if(this.currentStates){["mapboxgl-canvas","mcanvas","measure-but","distance-pop","distance-delete-all","delete-icon"].findIndex((function(e){return t.target.classList.contains(e)}))>-1||(this.$html.find(".measure-but").removeClass("active"),this.setEmptyStates(),this.currentStates=!1,this.endIf=!0,this.dblclick=!0,this.mabState.update("defMeasureDistanceState",!1),this.map.gl.getCanvas().style.cursor="")}}},{key:"startMeasure",value:function(){if(this.currentStates)return this.$html.find(".measure-but").removeClass("active"),this.setEmptyStates(),this.endIf=!0,this.dblclick=!0,this.mabState.update("defMeasureDistanceState",!1),this.map.gl.getCanvas().style.cursor="",void(this.currentStates=!1);this.$html.find(".measure-but").addClass("active"),this.setEmptyStates(),this.currentStates=!0,this.markers=[],this.onMoveInMapArr=[],this.onUpInMapArr=[],this.dblclick=!1,this.endIf=!1,this.ifDrag=!1,this.mouseClickFun=this.mouseClickMapFun.bind(this),this.mouseMoveFun=this.mouseMoveMapFun.bind(this),this.map.gl.once("dblclick",this.mouseDblclickFun.bind(this)),this.map.gl.on("click",this.mouseClickFun),this.map.gl.on("drag",this.mouseClickFun),this.map.gl.on("mousemove",this.mouseMoveFun),this.mouseEnterFun=this.mouseEnter.bind(this),this.map.gl.on("mouseenter","measure-points",this.mouseEnterFun),this.mouseLeaveFun=this.mouseLeave.bind(this),this.map.gl.on("mouseleave","measure-points",this.mouseLeaveFun),this.mouseDownFun=this.mouseDown.bind(this),this.map.gl.on("mousedown","measure-points",this.mouseDownFun),this.mabState.update("defMeasureDistanceState",!0)}},{key:"mouseEnter",value:function(){this.map.gl.getCanvas().style.cursor="move"}},{key:"mouseLeave",value:function(){this.map.gl.getCanvas().style.cursor=""}},{key:"mouseDown",value:function(t){t.preventDefault();var e=this.map.gl.queryRenderedFeatures(t.point,{layers:["measure-points"]});this.dragPoint=e[0],this.map.gl.getCanvas().style.cursor="grab";var r=this.onMove.bind(this),i=this.onUp.bind(this);this.onMoveInMapArr.push(r),this.onUpInMapArr.push(i),this.map.gl.on("mousemove",r),this.map.gl.once("mouseup",i)}},{key:"mouseDblclickFun",value:function(){var t=this;this.endIf=!0,this.dblclick=!0,this.map.gl.getCanvas().style.cursor="",this.addDistanceToPerPoint(!0),this.onMoveInMapArr&&this.onMoveInMapArr.forEach((function(e){t.map.gl.off("mousemove",e)}))}},{key:"onMove",value:function(t){var e=this,r=t.lngLat;if(this.ifDrag=!0,this.map.gl.getCanvas().style.cursor="grabbing",this.geojson.features.forEach((function(t,i){t.properties&&t.properties.id&&t.properties.id===e.dragPoint.properties.id&&(e.geojson.features[i].geometry.coordinates=[r.lng,r.lat])})),this.geojson.features.length>1){this.linestring.geometry.coordinates=[],this.geojson.features.forEach((function(t){"Point"===t.geometry.type&&e.linestring.geometry.coordinates.push(t.geometry.coordinates)}));var i=!1;this.geojson.features.forEach((function(t,r){"LineString"===t.geometry.type&&(i=!0,e.geojson.features[r]=e.linestring)})),i||this.geojson.features.push(this.linestring)}this.map.gl.getSource("geojson").setData(this.geojson),this.addDistanceToPerPoint()}},{key:"onUp",value:function(t){var e=this;setTimeout((function(){t.lngLat;e.ifDrag=!1,e.map.gl.getCanvas().style.cursor="",e.onMoveInMapArr&&e.onMoveInMapArr.forEach((function(t){e.map.gl.off("mousemove",t)}))}),2)}},{key:"setEmptyStates",value:function(){this.map.gl.off("click",this.mouseClickFun),this.map.gl.off("drag",this.mouseClickFun),this.map.gl.off("mousemove",this.mouseMoveFun),this.map.gl.off("mouseenter",this.mouseEnterFun),this.map.gl.off("mouseleave",this.mouseLeaveFun),this.map.gl.off("mousedown",this.mouseDownFun),this.markers&&this.markers.length&&this.markers.forEach((function(t,e){t.remove()})),this.geojson={type:"FeatureCollection",features:[]},this.linestring={type:"Feature",geometry:{type:"LineString",coordinates:[]}};var t=this.map.gl.getSource("geojson");t&&this.map.gl.getSource("geojson").setData(this.geojson),!t&&this.map.gl.addSource("geojson",{type:"geojson",data:this.geojson});var e=this.map.gl.getLayer("measure-points"),r=this.map.gl.getLayer("measure-lines");r&&this.map.gl.getSource("geojson").setData(this.geojson),!r&&this.map.gl.addLayer({id:"measure-lines",type:"line",source:"geojson",paint:{"line-width":2,"line-color":"#FF6E56","line-dasharray":[2,2]},filter:["in","$type","LineString"]}),e&&this.map.gl.getSource("geojson").setData(this.geojson),!e&&this.map.gl.addLayer({id:"measure-points",type:"circle",source:"geojson",paint:{"circle-radius":6,"circle-color":"#FF7963"},filter:["in","$type","Point"]});var i=this.map.gl.getLayer("measure-points-center");i&&this.map.gl.getSource("geojson").setData(this.geojson),!i&&this.map.gl.addLayer({id:"measure-points-center",type:"circle",source:"geojson",paint:{"circle-radius":3,"circle-color":"#FFffff"},filter:["in","$type","Point"]})}},{key:"mouseMoveMapFun",value:function(t){if(!this.endIf){var e=this.map.gl.queryRenderedFeatures(t.point,{layers:["measure-points"]});this.map.gl.getCanvas().style.cursor=e.length?"pointer":"crosshair"}}},{key:"mouseClickMapFun",value:function(t){var e=this;if(t.preventDefault&&t.preventDefault(),"drag"===t.type){if(0===t.target.dragPan._inertia.length)return;if(t.target.dragPan._inertia.length>1&&Math.abs(t.target.dragPan._inertia[0][0]-t.target.dragPan._inertia[t.target.dragPan._inertia.length-1][0])>20)return;t.lngLat=this.map.gl.unproject(t.target.dragPan._inertia[0][1]),t.point=t.target.dragPan._inertia[0][1]}setTimeout((function(){if(e.ifDrag||e.dblclick)e.dblclick=!1;else{var r=e.map.gl.queryRenderedFeatures(t.point,{layers:["measure-points"]});if(e.geojson.features.length>1&&e.geojson.features.pop(),r.length)0===e.geojson.features.length&&(e.endIf=!0,e.map.gl.off("click",e.mouseClickFun),e.map.gl.off("drag",e.mouseClickFun),e.map.gl.off("mousemove",e.mouseMoveFun),e.map.gl.off("mouseenter",e.mouseEnterFun),e.map.gl.off("mouseleave",e.mouseLeaveFun),e.map.gl.off("mousedown",e.mouseDownFun),e.onMoveInMapArr&&e.onMoveInMapArr.forEach((function(t){e.map.gl.off("mousemove",t)})));else{if(e.endIf||e.ifDrag)return;var i={type:"Feature",geometry:{type:"Point",coordinates:[t.lngLat.lng,t.lngLat.lat]},properties:{id:String((new Date).getTime())}};e.geojson.features.push(i)}e.geojson.features.length>1&&(e.linestring.geometry.coordinates=e.geojson.features.map((function(t){return t.geometry.coordinates})),e.geojson.features.push(e.linestring),e.addDistanceToPerPoint()),e.map.gl.getSource("geojson").setData(e.geojson)}}),0)}},{key:"pointDragStart",value:function(t){}},{key:"addDistanceToPerPoint",value:function(t){var e=this,r=0;this.markers.forEach((function(t,e){t.remove()}));var i={type:"Feature",geometry:{type:"LineString",coordinates:[]}};this.$container.find(".distance-pop").remove(),this.geojson.features.forEach((function(t,n){if(!(t.geometry.coordinates.length>2||"Point"!==t.geometry.type)&&(i.geometry.coordinates.push(t.geometry.coordinates),n>0)){r=parseFloat(r)+(0,h.default)((0,u.point)(i.geometry.coordinates[i.geometry.coordinates.length-2]),(0,u.point)(i.geometry.coordinates[i.geometry.coordinates.length-1]),{units:"kilometers"});var o={lastDistance:r=parseFloat(r).toFixed(3),id:t.properties.id};n===e.geojson.features.length-2&&(o.showDelete=!0);var a=$((0,s.default)(o));e.popBind(a),e.$container.append(a);var l=new mapboxgl.Marker(a[0]).setLngLat(t.geometry.coordinates).addTo(e.map.gl);e.markers.push(l)}}))}},{key:"popBind",value:function(t){var e=this;t.find(".distance-delete-all").on("mousedown",(function(t){e.reStart()})),t.find(".delete-icon").on("mousedown",(function(t){var r=t.target.dataset.pid;e.geojson.features=e.geojson.features.filter((function(t){return t.properties&&t.properties.id!=r})),e.geojson.features.length<2?(e.endIf=!0,e.map.gl.off("click",e.mouseClickFun),e.map.gl.off("drag",e.mouseClickFun),e.map.gl.off("mousemove",e.mouseMoveFun),e.map.gl.off("mouseenter",e.mouseEnterFun),e.map.gl.off("mouseleave",e.mouseLeaveFun),e.map.gl.off("mousedown",e.mouseDownFun),e.onMoveInMapArr&&e.onMoveInMapArr.forEach((function(t){e.map.gl.off("mousemove",t)})),e.reStart()):e.geojson.features.length>1&&(e.linestring.geometry.coordinates=e.geojson.features.map((function(t){return t.geometry.coordinates})),e.geojson.features.push(e.linestring),e.addDistanceToPerPoint()),e.map.gl.getSource("geojson").setData(e.geojson)}))}},{key:"reStart",value:function(){this.currentStates&&(this.$html.find(".measure-but").removeClass("active"),this.setEmptyStates(),this.endIf=!0,this.dblclick=!0,this.mabState.update("defMeasureDistanceState",!1),this.map.gl.getCanvas().style.cursor=""),this.currentStates=!1,this.startMeasure({restart:!0})}}]),t}();e.default=f,t.exports=e.default},7658:function(t,e,r){"use strict";var i=e;function n(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)r[i]=0|t[i];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(i=0;i<t.length;i++){var n=t.charCodeAt(i),o=n>>8,a=255&n;o?r.push(o,a):r.push(a)}return r},i.zero2=n,i.toHex=o,i.encode=function(t,e){return"hex"===e?o(t):t}},7683:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(r("41b2")),n=u(r("3f6b")),o=u(r("8827")),a=u(r("57ba")),s=u(r("e192"));function u(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,o.default)(this,t),(0,n.default)(this,{container:"map-container",mapExtraConfig:{},minZoom:2,maxZoom:17,useDefaultLayer:!0,defStyle:{version:8,name:"def_streets",layers:[],sources:{def_streets:{type:"raster",tiles:["//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}"],tileSize:256}}},defaultLayer:{id:"_default-layer",type:"raster",source:"def_streets"}},e),this._init()}return(0,a.default)(t,[{key:"_init",value:function(){this.useDefaultLayer&&this.defStyle.layers.push(this.defaultLayer);var t=(0,i.default)({container:this.container,style:this.defStyle,pitchWithRotate:!1,dragRotate:!1,minZoom:this.minZoom,maxZoom:this.maxZoom},this.mapExtraConfig);this.gl=new s.default.Map(t)}},{key:"getMap",value:function(){return this.gl}}]),t}();e.default=h,t.exports=e.default},7790:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(r("5080")),n=o(r("c2aa"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={Component:i.default,Renderer:n.default},t.exports=e.default},"7a10":function(t,e,r){var i=r("d0eb"),n=r("fdac");function o(t){this.rand=t||new n.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var n=new i(this.rand.generate(r))}while(n.cmp(t)>=0);return n},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var n=t.bitLength(),o=i.mont(t),a=new i(1).toRed(o);e||(e=Math.max(1,n/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var h=t.shrn(u),l=s.toRed(o);e>0;e--){var c=this._randrange(new i(2),s);r&&r(c);var f=c.toRed(o).redPow(h);if(0!==f.cmp(a)&&0!==f.cmp(l)){for(var p=1;p<u;p++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(l))break}if(p===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),n=i.mont(t),o=new i(1).toRed(n);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),h=a.toRed(n);e>0;e--){var l=this._randrange(new i(2),a),c=t.gcd(l);if(0!==c.cmpn(1))return c;var f=l.toRed(n).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(h)){for(var p=1;p<s;p++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(h))break}if(p===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},"7a77":function(t,e,r){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},"7aac":function(t,e,r){"use strict";var i=r("c532");t.exports=i.isStandardBrowserEnv()?{write:function(t,e,r,n,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),i.isString(n)&&s.push("path="+n),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"7d14":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=g(r("fdfd")),n=g(r("1098")),o=g(r("41b2")),a=g(r("3f6b")),s=g(r("8827")),u=g(r("57ba")),h=g(r("a112")),l=g(r("e9cc")),c=g(r("617b")),f=r("b4e1"),p=g(r("e192")),d=r("f9e6"),m=g(r("04cd"));function g(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e){var r=this;(0,s.default)(this,t),(0,a.default)(this,{container:"map-container",mapExtraConfig:{},minZoom:2,maxZoom:8,onYearChange:[],onHideMapYears:[],onStopSetMapYear:[],timelineUrl:"",mapStyleUrl:"/styles/dlsgis-history-release/style.json",mapYearStyle:"",mapTileHost:"",wmsUrlYear:"",useUToc:!0,maxYearVal:1949,onReady:function(){}},e),f.MabState.set("mapApiUrls",{timelineUrl:this.timelineUrl,mapTileHost:this.mapTileHost}),this.mabState=f.MabState,this.markersArr=[],this.availableYears=[],m.default.searchTimeLine().then((function(t){if(200===(t=t.data).code){var e=t.data.wmsurl_release,i=t.data.wmsurl_year;r.availableYears=r._setAvailableYear(t.data.timeline),r.mapStyleUrl=e,r.mapYearStyle=i;var n=f.MabState.get("mapApiUrls");f.MabState.set("mapApiUrls",(0,o.default)({},n,{mapStyleUrl:e,mapYearStyle:i})),r._setMap()}}))}return(0,u.default)(t,[{key:"_setAvailableYear",value:function(t){var e=this,r=[];return t.forEach((function(t){if("object"==(void 0===t?"undefined":(0,n.default)(t)))for(var i=t[0];i<t[1]+1;i++)i<=e.maxYearVal&&0!=i&&r.push(i);else r.push(t)})),f.MabState.set("mapYears",[].concat(r)),r}},{key:"_setMap",value:function(){var t=this;if(this.useUToc){var e=(0,d.getUToc)();e.isReady?this._init():e.onReadyFuncs.push({name:"renderMap",fn:function(){t._init()}})}else this._init()}},{key:"_init",value:function(){this._createMap(),this._createEvent(),this._createLayerByYear(),this._bind()}},{key:"_createMap",value:function(){var t=(0,o.default)({container:this.container,style:this.mapStyleUrl,pitchWithRotate:!1,dragRotate:!1,minZoom:this.minZoom,maxZoom:this.maxZoom},this.mapExtraConfig);this.useUToc&&(0,a.default)(t,{transformRequest:d.tReq}),this.gl=new p.default.Map(t),this.gl.addControl(new p.default.ScaleControl("bottom-right"),"bottom-right")}},{key:"_createEvent",value:function(){this.eventHandler=new l.default(this.gl)}},{key:"on",value:function(){var t;(t=this.eventHandler).on.apply(t,arguments)}},{key:"off",value:function(){var t;(t=this.eventHandler).off.apply(t,arguments)}},{key:"_createLayerByYear",value:function(){this.layerByYear=new h.default({map:this.gl,onYearChange:this.onYearChange,onStopSetMapYear:this.onStopSetMapYear})}},{key:"setYear",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";this.setHistoryLayerTimeout&&clearTimeout(this.setHistoryLayerTimeout),this.setHistoryLayerTimeout=setTimeout((function(){e.setHistoryLayerTimeout=null,e.layerByYear.setHistoryLayer(t,r,e.wmsUrlYear)}),100)}},{key:"getAvailableYear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.layerByYear.getNearYear(t,e)}},{key:"hideYears",value:function(){this.layerByYear.hideAllYears(),this.onHideMapYears.forEach((function(t){return t.fn&&t.fn()}))}},{key:"_bind",value:function(){var t=this;this.gl.on("load",(function(){t.onReady(t.availableYears),t.CreatePersonLayers=new c.default({map:t.gl})}))}},{key:"getAllYears",value:function(){return this.layerByYear.getAllYears()}},{key:"getAllLayers",value:function(){var t=this.layerByYear.getCache(),e={country:[],countryCombCon:[],countryTop:[]};t&&(0,i.default)(t).forEach((function(t){(t.layersInfo||[]).forEach((function(t){"country"===t.originalId&&e.country.push(t.id),"country_comb_con"===t.originalId&&e.countryCombCon.push(t.id),"country_top"===t.originalId&&e.countryTop.push(t.id)}))}));return e}},{key:"flyToPoint",value:function(t,e){var r=t.center,i=t.zoom,n={center:r};i&&(n.zoom=i),this.gl.flyTo(n,e)}},{key:"addMarker",value:function(t){var e=t.element,r=t.point,i=t.id,n=void 0===i?"defaultId":i,o=t.type,a=void 0===o?"defaultType":o,s=t.data,u=void 0===s?{}:s,h=t.draggable,l=void 0!==h&&h;if(!e||!r)return!1;var c=new p.default.Marker({element:e,draggable:l});return c.setLngLat(r).addTo(this.gl),this.markersArr.push({id:n,type:a,marker:c,data:u}),c}},{key:"removeMarker",value:function(t){var e=t.marker,r=t.id;if(r){var i=this.markersArr.find((function(t){return t.id===r}));i&&i.marker.remove()}else e.remove()}},{key:"removeMarkerByIdAndType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"defaultType";if(t){var r=this.markersArr.findIndex((function(r){return r.id===t&&r.type===e}));-1!==r&&(this.markersArr[r].marker.remove(),this.markersArr.splice(r,1))}}},{key:"removeMarkerById",value:function(t){this.removeMarkerByIdAndType(t)}},{key:"removeMarkerByIds",value:function(t){var e=this;Array.isArray(t)&&t.forEach((function(t){e.removeMarkerByIdAndType(t)}))}},{key:"removeMarkerByIdsAndType",value:function(t,e){var r=this;Array.isArray(t)&&t.forEach((function(t){r.removeMarkerByIdAndType(t,e)}))}},{key:"removeAllMarker",value:function(){this.markersArr.forEach((function(t){t.marker.remove()})),this.markersArr=[]}},{key:"addPersonPoint",value:function(t,e){this.gl.getSource(e+"-border")&&this.gl.getSource(e)&&(this.gl.getSource(e+"-border").setData({type:"FeatureCollection",features:t}),this.gl.getSource(e).setData({type:"FeatureCollection",features:t}))}},{key:"addSketchPoint",value:function(t,e){this.gl.getSource(e)&&this.gl.getSource(e).setData({type:"FeatureCollection",features:t})}},{key:"removeSketchPoint",value:function(t){this.gl.getSource(t)&&this.gl.getSource(t).setData({type:"FeatureCollection",features:[]})}},{key:"addPersonLineString",value:function(t,e){this.gl.getSource(e)&&this.gl.getSource(e).setData({type:"FeatureCollection",features:t})}},{key:"addSketchLine",value:function(t,e){this.gl.getSource(e)&&this.gl.getSource(e).setData({type:"FeatureCollection",features:t})}},{key:"removeSketchLine",value:function(t){this.gl.getSource(t)&&this.gl.getSource(t).setData({type:"FeatureCollection",features:[]})}},{key:"addPersonPolygon",value:function(t,e){this.gl.getSource(e+"-border")&&this.gl.getLayer(e)&&(this.gl.getSource(e).setData({type:"FeatureCollection",features:t}),this.gl.getSource(e+"-border").setData({type:"FeatureCollection",features:t}))}},{key:"addSketchPolygon",value:function(t,e){this.gl.getSource(e+"-border")&&this.gl.getSource(e)&&(this.gl.getSource(e).setData({type:"FeatureCollection",features:t}),this.gl.getSource(e+"-border").setData({type:"FeatureCollection",features:t}))}},{key:"removeSketchPolygon",value:function(t){this.gl.getSource(t+"-border")&&this.gl.getSource(t)&&(this.gl.getSource(t).setData({type:"FeatureCollection",features:[]}),this.gl.getSource(t+"-border").setData({type:"FeatureCollection",features:[]}))}},{key:"removePersonPoint",value:function(t){this.gl.getSource(t+"-border")&&this.gl.getSource(t)&&(this.gl.getSource(t+"-border").setData({type:"FeatureCollection",features:[]}),this.gl.getSource(t).setData({type:"FeatureCollection",features:[]}))}},{key:"removePersonLineString",value:function(t){this.gl.getSource(t)&&this.gl.getSource(t).setData({type:"FeatureCollection",features:[]})}},{key:"removePersonPolygon",value:function(t){this.gl.getSource(t)&&this.gl.getSource(t+"-border")&&(this.gl.getSource(t).setData({type:"FeatureCollection",features:[]}),this.gl.getSource(t+"-border").setData({type:"FeatureCollection",features:[]}))}},{key:"removePersonLineString",value:function(t){this.gl.getSource(t)&&this.gl.getSource(t).setData({type:"FeatureCollection",features:[]})}},{key:"getLayer",value:function(t){return this.gl.getLayer(t)}},{key:"removeLayer",value:function(t){this.gl.removeLayer(t)}},{key:"getSource",value:function(t){return this.gl.getSource(t)}},{key:"addSource",value:function(t,e){return this.gl.getSource(t,e)}},{key:"removeSource",value:function(t){this.gl.removeSource(t)}},{key:"addLayer",value:function(t){this.gl.addLayer(t)}},{key:"moveLayer",value:function(t,e){this.gl.getLayer(t)&&this.gl.moveLayer(t,e)}},{key:"setLayoutProperty",value:function(t,e,r){this.gl.setLayoutProperty(t,e,r)}},{key:"getZoom",value:function(){return this.gl.getZoom()}}]),t}();e.default=y,t.exports=e.default},"7d2a":function(t,e){var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!=e)throw new TypeError("Bad key length")}},"7d6d":function(t,e,r){var i=r("63b6"),n=r("13c8")(!1);i(i.S,"Object",{values:function(t){return n(t)}})},"7d92":function(t,e,r){var i=e;i.utils=r("c3c0"),i.common=r("edc9"),i.sha=r("5919"),i.ripemd=r("bb44"),i.hmac=r("2137"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},"7dcf":function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({1:function(t,e,r,i,n){return'  <div class="distance-delete-all"></div>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,r,i,n){var o,a,s=null!=e?e:t.nullContext||{},u=t.hooks.helperMissing,h=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="distance-pop-out" >\n  <div class="distance-pop">\n    <span>'+h("function"==typeof(a=null!=(a=l(r,"lastDistance")||(null!=e?l(e,"lastDistance"):e))?a:u)?a.call(s,{name:"lastDistance",hash:{},data:n,loc:{start:{line:3,column:10},end:{line:3,column:26}}}):a)+'</span><span class="distance-unit">km</span>\n    <div class="delete-icon" data-pid="'+h("function"==typeof(a=null!=(a=l(r,"id")||(null!=e?l(e,"id"):e))?a:u)?a.call(s,{name:"id",hash:{},data:n,loc:{start:{line:4,column:39},end:{line:4,column:45}}}):a)+'"></div>\n  </div>\n'+(null!=(o=l(r,"if").call(s,null!=e?l(e,"showDelete"):e,{name:"if",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n,loc:{start:{line:6,column:2},end:{line:8,column:9}}}))?o:"")+"</div>"},useData:!0})},"7e04":function(t,e,r){var i=r("dcef");function n(t){return t&&(t.__esModule?t.default:t)}t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,o,a){var s=null!=e?e:t.nullContext||{},u=t.escapeExpression;return'<div class="map-switch-base-map" title="'+u(n(r("dfab")).call(s,"SwitchBaseMap","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:1,column:40},end:{line:1,column:74}}}))+'">\n  <div class="switch-basemap-icon">\n\n  </div>\n  <div class="small-map">\n    <div class="watercolor">\n      <div class="watercolor-bottom-shadow"></div>\n      <div class="watercolor-bottom-text">'+u(n(r("dfab")).call(s,"simple","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:8,column:42},end:{line:8,column:69}}}))+'</div>\n    </div>\n\n    <div class="satellite">\n      <div class="satellite-bottom-shadow"></div>\n      <div class="satellite-bottom-text">'+u(n(r("dfab")).call(s,"Satellite","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:13,column:41},end:{line:13,column:71}}}))+'</div>\n      <div class="satellite-switch-show-tag">\n        <span class="tag-text">\n          <input type="checkbox" class="input-check" checked id="google-satellite-tag">\n          <label class="check-label" for="google-satellite-tag"></label>\n        </span>\n        <span class="tag-text-content">'+u(n(r("dfab")).call(s,"Label","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:19,column:39},end:{line:19,column:65}}}))+'</span>\n      </div>\n    </div>\n\n    <div class="google-map">\n      <div class="google-map-bottom-shadow"></div>\n      <div class="google-map-bottom-text">'+u(n(r("dfab")).call(s,"street","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:25,column:42},end:{line:25,column:69}}}))+'</div>\n    </div>\n\n    <div class="terrain">\n      <div class="terrain-bottom-shadow"></div>\n      <div class="terrain-bottom-text">'+u(n(r("dfab")).call(s,"terrain","timemap",{name:"lang",hash:{},data:a,loc:{start:{line:30,column:39},end:{line:30,column:67}}}))+"</div>\n    </div>\n  </div>\n</div>"},useData:!0})},"7e78":function(t,e,r){var i=r("3fb5"),n=r("b672"),o=r("8707").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,n.call(this,64,56)}function h(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function c(t,e,r,i){return 0===t?e&r|~e&i:2===t?e&r|e&i|r&i:e^r^i}i(u,n),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,r=this._w,i=0|this._a,n=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),m=h(i)+c(d,n,o,s)+u+r[p]+a[d]|0;u=s,s=o,o=l(n),n=i,i=m}this._a=i+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},"7f7a":function(t,e,r){"use strict";const i=e;i.bignum=r("bc12"),i.define=r("ef3a").define,i.base=r("41df"),i.constants=r("0211"),i.decoders=r("20f6"),i.encoders=r("343e")},8:function(t,e){},"80af":function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(8).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"82f0":function(t,e,r){var i=r("39f5"),n=r("8707").Buffer,o=r("6430"),a=r("3fb5"),s=r("3f62"),u=r("8c8a"),h=r("bd9d");function l(t,e,r,a){o.call(this);var u=n.alloc(4,0);this._cipher=new i.AES(e);var l=this._cipher.encryptBlock(u);this._ghash=new s(l),r=function(t,e,r){if(12===e.length)return t._finID=n.concat([e,n.from([0,0,0,1])]),n.concat([e,n.from([0,0,0,2])]);var i=new s(r),o=e.length,a=o%16;i.update(e),a&&(a=16-a,i.update(n.alloc(a,0))),i.update(n.alloc(8,0));var u=8*o,l=n.alloc(8);l.writeUIntBE(u,0,8),i.update(l),t._finID=i.state;var c=n.from(t._finID);return h(c),c}(this,r,l),this._prev=n.from(r),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(l,o),l.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=n.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var i=Math.min(t.length,e.length),n=0;n<i;++n)r+=t[n]^e[n];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},l.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=l},8360:function(t,e,r){"use strict";const i=r("d1c8").Reporter,n=r("6283").EncoderBuffer,o=r("6283").DecoderBuffer,a=r("da3e"),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function h(t,e,r){const i={};this._baseState=i,i.name=r,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=h;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const t=this._baseState,e={};l.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},h.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},h.prototype._init=function(t){const e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),a.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(a(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const i=t[r];e[i]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){h.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),s.forEach((function(t){h.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(r),this}})),h.prototype.use=function(t){a(t);const e=this._baseState;return a(null===e.use),e.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){const e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){const e=this._baseState;return a(null===e.key),e.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){const e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){const e=this._baseState;return a(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let i,n=r.default,a=!0,s=null;if(null!==r.key&&(s=t.enterKey(r.key)),r.optional){let i=null;if(null!==r.explicit?i=r.explicit:null!==r.implicit?i=r.implicit:null!==r.tag&&(i=r.tag),null!==i||r.any){if(a=this._peekTag(t,i,r.any),t.isError(a))return a}else{const i=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(i)}}if(r.obj&&a&&(i=t.enterObject()),a){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const i=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const i=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(i))return i;r.any?n=t.raw(e):t=i}if(e&&e.track&&null!==r.tag&&e.track(t.path(),i,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(n=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(n))return n;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const i=new o(n);n=this._getUse(r.contains,t._reporterState.obj)._decode(i,e)}}return r.obj&&a&&(n=t.leaveObject(i)),null===r.key||null===n&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,r.key,n),n},h.prototype._decodeGeneric=function(t,e,r){const i=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,i.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&i.args?this._decodeObjid(e,i.args[0],i.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,i.args&&i.args[0],r):null!==i.use?this._getUse(i.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},h.prototype._decodeChoice=function(t,e){const r=this._baseState;let i=null,n=!1;return Object.keys(r.choice).some((function(o){const a=t.save(),s=r.choice[o];try{const r=s._decode(t,e);if(t.isError(r))return!1;i={type:o,value:r},n=!0}catch(e){return t.restore(a),!1}return!0}),this),n?i:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new n(t,this.reporter)},h.prototype._encode=function(t,e,r){const i=this._baseState;if(null!==i.default&&i.default===t)return;const n=this._encodeValue(t,e,r);return void 0===n||this._skipDefault(n,e,r)?void 0:n},h.prototype._encodeValue=function(t,e,r){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new i);let o=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default}let a=null,s=!1;if(n.any)o=this._createEncoderBuffer(t);else if(n.choice)o=this._encodeChoice(t,e);else if(n.contains)a=this._getUse(n.contains,r)._encode(t,e),s=!0;else if(n.children)a=n.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const i=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const n=r._encode(t[r._baseState.key],e,t);return e.leaveKey(i),n}),this).filter((function(t){return t})),a=this._createEncoderBuffer(a);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,a=this._createEncoderBuffer(t.map((function(r){const i=this._baseState;return this._getUse(i.args[0],t)._encode(r,e)}),r))}else null!==n.use?o=this._getUse(n.use,r)._encode(t,e):(a=this._encodePrimitive(n.tag,t),s=!0);if(!n.any&&null===n.choice){const t=null!==n.implicit?n.implicit:n.tag,r=null===n.implicit?"universal":"context";null===t?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(o=this._encodeComposite(t,s,r,a))}return null!==n.explicit&&(o=this._encodeComposite(n.explicit,!1,"context",o)),o},h.prototype._encodeChoice=function(t,e){const r=this._baseState,i=r.choice[t.type];return i||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),i._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},"83d5":function(t,e){t.exports=function(t,e){for(var r=t.length,i=-1;++i<r;)t[i]^=e[i];return t}},"85b3":function(t,e,r){"use strict";const i=r("3fb5"),n=r("3768");function o(t){n.call(this,t),this.enc="pem"}i(o,n),t.exports=o,o.prototype.encode=function(t,e){const r=n.prototype.encode.call(this,t).toString("base64"),i=["-----BEGIN "+e.label+"-----"];for(let t=0;t<r.length;t+=64)i.push(r.slice(t,t+64));return i.push("-----END "+e.label+"-----"),i.join("\n")}},8947:function(t,e,r){var i=r("bac2"),n=r("82f0"),o=r("8707").Buffer,a=r("09f5"),s=r("6430"),u=r("39f5"),h=r("ae84");function l(t,e,r){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r("3fb5")(l,s),l.prototype._update=function(t){var e,r;this._cache.add(t);for(var i=[];e=this._cache.get();)r=this._mode.encrypt(this,e),i.push(r);return o.concat(i)};var c=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function p(t,e,r){var s=i[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof r&&(r=o.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===s.type?new a(s.module,e,r):"auth"===s.type?new n(s.module,e,r):new l(s.module,e,r)}l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var r=i[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=h(e,!1,r.key,r.iv);return p(t,n.key,n.iv)}},"89ec":function(t,e,r){"use strict";var i=a(r("3f6b")),n=a(r("3d58")),o=a(r("5e38"));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var a={stripIgnoreTag:!0,stripIgnoreTagBody:["script","style","link","frame"]};a=!1===e?(0,i.default)(a,{whiteList:[]}):r?(0,i.default)(a,{onIgnoreTagAttr:function(t,e,r,i){if(n.default.attrWhiteListTest(e))return e+'="'+o.default.safeAttrValue(t,e,r||"",!1)+'"'},whiteList:{a:["href"]}}):(0,i.default)(a,{onIgnoreTagAttr:function(t,e,r,i){if(n.default.attrWhiteListTest(e))return e+'="'+o.default.safeAttrValue(t,e,r||"",!1)+'"'},whiteList:(0,i.default)(o.default.whiteList,{input:["type","placeholder","id"],audio:["controls","loop","preload","src"],video:["controls","loop","preload","src","height","width"]})});var s=(0,o.default)(n.default.formatLink(n.default.htmlDecode(t)),a);return s}return t}},"8b71":function(t,e,r){"use strict";function i(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const i=t[r];e[i]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i(e.tag)},"8b95":function(t,e,r){"use strict";var i=r("c3c0"),n=r("b525");function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,n),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},"8be6":function(t,e,r){var i=r("8707").Buffer;t.exports=function(t,e,r){if(i.isBuffer(t))return t;if("string"==typeof t)return i.from(t,e);if(ArrayBuffer.isView(t))return i.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},"8c8a":function(t,e,r){(function(e){t.exports=function(t,r){for(var i=Math.min(t.length,r.length),n=new e(i),o=0;o<i;++o)n[o]=t[o]^r[o];return n}}).call(this,r("1c35").Buffer)},"8df4":function(t,e,r){"use strict";var i=r("7a77");function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new i(t),e(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},"8df7":function(t,e,r){"use strict";const i=r("3fb5"),n=r("c591").Buffer,o=r("cfbd");function a(t){o.call(this,t),this.enc="pem"}i(a,o),t.exports=a,a.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),i=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,u=-1;for(let t=0;t<r.length;t++){const e=r[t].match(a);if(null!==e&&e[2]===i){if(-1!==s){if("END"!==e[1])break;u=t;break}if("BEGIN"!==e[1])break;s=t}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+i);const h=r.slice(s+1,u).join("");h.replace(/[^a-z0-9+/=]+/gi,"");const l=n.from(h,"base64");return o.prototype.decode.call(this,l,e)}},"8f76":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("00a2"),n=r("feb7");e.default=function(t,e,r){void 0===r&&(r={});var o=i.getCoord(t),a=i.getCoord(e),s=n.degreesToRadians(a[1]-o[1]),u=n.degreesToRadians(a[0]-o[0]),h=n.degreesToRadians(o[1]),l=n.degreesToRadians(a[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(h)*Math.cos(l);return n.radiansToLength(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r.units)}},9:function(t,e){},9019:function(t,e,r){"use strict";(function(e){function r(t,e){n(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(n,this,t)):e.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(i,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(i,a),o(t)):e.nextTick(i,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r("f28c"))},"919c":function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},"93e6":function(t,e,r){"use strict";var i=r("0632").Buffer,n=r("334a").Transform;function o(t){n.call(this),this._block=i.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r("3fb5")(o,n),o.prototype._transform=function(t,e,r){var i=null;try{this.update(t,e)}catch(t){i=t}r(i)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!i.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(t)||(t=i.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},"945d":function(t,e,r){"use strict";var i=r("7d92"),n=r("0cbb"),o=r("f3a3"),a=o.assert,s=o.parseBytes,u=r("380f"),h=r("44a3");function l(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof l))return new l(t);t=n[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=i.sha512}t.exports=l,l.prototype.sign=function(t,e){t=s(t);var r=this.keyFromSecret(e),i=this.hashInt(r.messagePrefix(),t),n=this.g.mul(i),o=this.encodePoint(n),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),u=i.add(a).umod(this.curve.n);return this.makeSignature({R:n,S:u,Rencoded:o})},l.prototype.verify=function(t,e,r){t=s(t),e=this.makeSignature(e);var i=this.keyFromPublic(r),n=this.hashInt(e.Rencoded(),i.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(i.pub().mul(n)).eq(o)},l.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},l.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},l.prototype.makeSignature=function(t){return t instanceof h?t:new h(this,t)},l.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},l.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),i=0!=(128&t[e]),n=o.intFromLE(r);return this.curve.pointFromY(n,i)},l.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(t){return o.intFromLE(t)},l.prototype.isPoint=function(t){return t instanceof this.pointClass}},"956a":function(t,e,r){var i=r("1e3c"),n=r("fda6"),o=r("bac2"),a=r("0be8"),s=r("ae84");function u(t,e,r){if(t=t.toLowerCase(),o[t])return n.createCipheriv(t,e,r);if(a[t])return new i({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function h(t,e,r){if(t=t.toLowerCase(),o[t])return n.createDecipheriv(t,e,r);if(a[t])return new i({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,i;if(t=t.toLowerCase(),o[t])r=o[t].key,i=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,i=a[t].iv}var n=s(e,!1,r,i);return u(t,n.key,n.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var r,i;if(t=t.toLowerCase(),o[t])r=o[t].key,i=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");r=8*a[t].key,i=a[t].iv}var n=s(e,!1,r,i);return h(t,n.key,n.iv)},e.createDecipheriv=e.Decipheriv=h,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(n.getCiphers())}},"96a5":function(t,e,r){"use strict";function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=r("1c35").Buffer,s=r(1).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,h;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,r,i,n=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,r=n,i=s,a.prototype.copy.call(e,r,i),s+=o.data.length,o=o.next;return n}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,i=e.data;for(t-=i.length;e=e.next;){var n=e.data,o=t>n.length?n.length:t;if(o===n.length?i+=n:i+=n.slice(0,t),0==(t-=o)){o===n.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(o));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,i=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var n=r.data,o=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,o),0==(t-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),h&&o(e,h),t}()},"980c":function(t,e,r){var i=r("39a9").Buffer,n=r("399f"),o=r("3337").ec,a=r("2aee"),s=r("cd91");function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,r,h,l){var c=a(r);if("ec"===c.type){if("ecdsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong public key type");return function(t,e,r){var i=s[r.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var n=new o(i),a=r.data.subjectPrivateKey.data;return n.verify(e,t,a)}(t,e,c)}if("dsa"===c.type){if("dsa"!==h)throw new Error("wrong public key type");return function(t,e,r){var i=r.data.p,o=r.data.q,s=r.data.g,h=r.data.pub_key,l=a.signature.decode(t,"der"),c=l.s,f=l.r;u(c,o),u(f,o);var p=n.mont(i),d=c.invm(o);return 0===s.toRed(p).redPow(new n(e).mul(d).mod(o)).fromRed().mul(h.toRed(p).redPow(f.mul(d).mod(o)).fromRed()).mod(i).mod(o).cmp(f)}(t,e,c)}if("rsa"!==h&&"ecdsa/rsa"!==h)throw new Error("wrong public key type");e=i.concat([l,e]);for(var f=c.modulus.byteLength(),p=[1],d=0;e.length+p.length+2<f;)p.push(255),d++;p.push(0);for(var m=-1;++m<e.length;)p.push(e[m]);p=i.from(p);var g=n.mont(c.modulus);t=(t=new n(t).toRed(g)).redPow(new n(c.publicExponent)),t=i.from(t.fromRed().toArray());var y=d<8?1:0;for(f=Math.min(t.length,p.length),t.length!==p.length&&(y=1),m=-1;++m<f;)y|=t[m]^p[m];return 0===y}},"98e6":function(t,e,r){"use strict";var i=r("3fb5"),n=r("f576"),o=r("b5ca"),a=r("69f2"),s=r("6430");function u(t){s.call(this,"digest"),this._hash=t}i(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new n:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},"9d28":function(t,e,r){"use strict";t.exports=n;var i=r("f1c8");function n(t){if(!(this instanceof n))return new n(t);i.call(this,t)}r("3fb5")(n,i),n.prototype._transform=function(t,e,r){r(null,t)}},"9d8a":function(t,e,r){"use strict";var i={};function n(t,e,r){r||(r=Error);var n=function(t){var r,i;function n(r,i,n){return t.call(this,function(t,r,i){return"string"==typeof e?e:e(t,r,i)}(r,i,n))||this}return i=t,(r=n).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i,n}(r);n.prototype.name=r.name,n.prototype.code=t,i[t]=n}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,n,a,s;if("string"==typeof e&&(n="not ",e.substr(!a||a<0?0:+a,n.length)===n)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(i," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(i," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},"9e1c":function(t,e,r){r("7d6d"),t.exports=r("584a").Object.values},"9f9d":function(t,e,r){(function(e){var r;if(e.browser)r="utf-8";else if(e.version){r=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";t.exports=r}).call(this,r("f28c"))},"9fc1":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UToc=void 0;var i=s(r("8827")),n=s(r("57ba")),o=s(r("df2f")),a=r("5c31");function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,i.default)(this,t),this.cFun=null,this.isReady=!1,this.onReadyFuncs=[],this.JS_URL="https://festatic.allhistory.com/marblemap/statics/js/qencrypt.10qp6xk5p.js",this._init()}return(0,n.default)(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),(0,n.default)(t,[{key:"_init",value:function(){var t=this;(0,a.loadLib)(this.JS_URL).then((function(){QEncrypt().then((function(e){t.cFun=e.ccall,t.isReady=!0,t.onReadyFuncs.forEach((function(t){return t.fn&&t.fn()})),t.onReadyFuncs.splice(0,t.onReadyFuncs.length)}))}))}},{key:"getUrl",value:function(t,e){var r=""+parseInt(1e8*Math.random()),i=(0,o.default)(t+e+r).toString(),n=new Array(5).fill("string");return this.cFun("qEncrypt","string",n,[t,e,"3600",r,i])}},{key:"calcUrl",value:function(t,e){return this.cFun?this.getUrl(t,e):""}}]),t}();e.UToc=u.getInstance()},"9fdf":function(t,e,r){"use strict";var i=o(r("3f6b")),n=o(r("1e9f"));function o(t){return t&&t.__esModule?t:{default:t}}var a=["zh","en","fr","es","jp"];t.exports={getLang:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="zh";t=(0,i.default)({lang:"",api:!1},t),window&&((0,n.default)(window),e=n.default.get("sys_lang")||"zh");try{e=window.location.host.match("^("+a.join("|")+").")[1]}catch(t){}try{e=window.location.search.match("lang=([^&]*$)")[1]}catch(t){}if(e=t.lang||e,t.api){var r={zh:"cn"};e=r[e]||e}return e}}},a099:function(t,e,r){e.pbkdf2=r("206d"),e.pbkdf2Sync=r("e07b")},a112:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(r("e1de")),n=f(r("41b2")),o=f(r("1907")),a=f(r("3f6b")),s=f(r("8827")),u=f(r("57ba")),h=f(r("bc3a")),l=r("b4e1"),c=r("f9e6");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e){(0,s.default)(this,t),(0,a.default)(this,{map:{},onYearChange:[],onStopSetMapYear:[]},e),this.cache={},this.noChangeLayers=["background","water_shadow","ADM_CON_S_NOW","location-layer","border_line_0_8","sketch-polygon","sketch-line","sketch-point","person-fill","person-fill-border","person-line","kgs-line","kgs-point-border","kgs-point"],this.moveLayersArr=["sketch-polygon","sketch-line","sketch-point","person-fill","person-fill-border","person-line","person-line","kgs-point-border","kgs-point","kgs-line","node-line"]}return(0,u.default)(t,[{key:"setHistoryLayer",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both",i=arguments[2];if(t>1990)this.onStopSetMapYear.forEach((function(t){return t.fn&&t.fn()}));else if(t=this.getNearYear(t,r)){var n=this._getYearName(t);return this.cache[t]?(this.cache[t].layers.length&&(this.hideAllYears(),this.showYear(t)),t):(this.cache[t]={yearName:n,sourceId:"source-"+n,layers:[],layersInfo:[]},this.getLayer(n,i).then((function(r){e.hideAllYears(),e._addLayer(t,r,e.cache[t])})),t)}}},{key:"getNearYear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both",r=l.MabState._get("mapYears");if(!(r.length<1)){if(r.indexOf(t)>-1)return t;var i=null,n=null,o=r.findIndex((function(e){return e>=t}));if(o<0){if("right"==e)return null;o=r.length}switch(n=r[o],i=r[o-1],e){case"left":return i;case"right":return n;case"both":return t-i>=n-t?n||i||null:i||n||null}}}},{key:"_addLayer",value:function(t,e,r){var i=this,a=this._getYearName(t);try{(0,o.default)(e.sources).forEach((function(t){"dlsgis_base"!==t&&i.map.addSource(r.sourceId+"-"+t,e.sources[t])})),e.layers.forEach((function(e){if(!(i.noChangeLayers.indexOf(e.id)>-1)&&"dlsgis_base"!==e.source){var o=e.id;e.originalId=o;var s=a+"-"+e.id;e.id=s,i.map.addLayer((0,n.default)({},e,{source:r.sourceId+"-"+e.source})),i.cache[t].layers.push(e.id),i.cache[t].layersInfo.push({id:s,originalId:o})}})),this.onYearChange.forEach((function(e){return e(t)})),this._moveLayersToTop(a)}catch(t){}}},{key:"_moveLayersToTop",value:function(t){var e=this,r=t+"-country_comb_line_hover";this.moveLayersArr.forEach((function(t){e.map.moveLayer(t,r)}))}},{key:"hideYear",value:function(t){var e=this,r=this.cache[t];try{r.layers.forEach((function(t){e.map.setLayoutProperty(t,"visibility","none")}))}catch(t){}}},{key:"hideAllYears",value:function(){for(var t in this.cache)this.hideYear(t)}},{key:"getCache",value:function(){return this.cache}},{key:"showYear",value:function(t){var e=this,r=this.cache[t];try{r.layers.forEach((function(t){e.map.setLayoutProperty(t,"visibility","visible")})),this.onYearChange.forEach((function(e){return e(t)}))}catch(t){}}},{key:"getAllYears",value:function(){return l.MabState._get("mapYears")}},{key:"_getYearName",value:function(t){return""+(t<0?"BC":"AD")+Math.abs(t)}},{key:"getLayer",value:function(t,e){var r=this;return new i.default((function(i){r.setLayer(t,e).then((function(t){i(t)}))}))}},{key:"setLayer",value:function(t,e){var r=l.MabState._get("mapApiUrls"),i=r.mapTileHost,n=r.mapYearStyle,o="";o=e?e.replace(/\[year\]/gi,t):n?n.replace(/\[year\]/gi,t):i+"/styles/dlsgis-his-regime-"+t+"/style.json";var a=(0,c.encryptUrl)(o).url;return h.default.get(a,{withCredentials:!1}).then((function(e){return(e=e.data)._id=t,e}))}}]),t}();e.default=p,t.exports=e.default},a255:function(t,e,r){var i=r("3fb5"),n=r("b672"),o=r("8707").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,n.call(this,64,56)}function h(t,e,r){return r^t&(e^r)}function l(t,e,r){return t&e|r&(t|e)}function c(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}i(u,n),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,r=this._w,i=0|this._a,n=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)r[y]=t.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((e=r[y-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[y-7]+p(r[y-15])+r[y-16];for(var v=0;v<64;++v){var _=g+f(u)+h(u,d,m)+a[v]+r[v]|0,b=c(i)+l(i,n,o)|0;g=m,m=d,d=u,u=s+_|0,s=o,o=n,n=i,i=_+b|0}this._a=i+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},a25c:function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(7).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},a316:function(t,e,r){"use strict";r.r(e);function i(t,e,r){if(!s(r=r||{}))throw new Error("options is invalid");var i=r.bbox,n=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&u(i),n&&h(n);var o={type:"Feature"};return n&&(o.id=n),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function n(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(t[0])||!a(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,r)}function o(t,e){if(!s(e=e||{}))throw new Error("options is invalid");var r=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&u(r),i&&h(i);var n={type:"FeatureCollection"};return i&&(n.id=i),r&&(n.bbox=r),n.features=t,n}function a(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function s(t){return!!t&&t.constructor===Object}function u(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!a(t))throw new Error("bbox must only contain numbers")}))}function h(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function l(t,e,r){if(null!==t)for(var i,n,o,a,s,u,h,c,f=0,p=0,d=t.type,m="FeatureCollection"===d,g="Feature"===d,y=m?t.features.length:1,v=0;v<y;v++){s=(c=!!(h=m?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<s;_++){var b=0,w=0;if(null!==(a=c?h.geometries[_]:h)){u=a.coordinates;var x=a.type;switch(f=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,p,v,b,w))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],p,v,b,w))return!1;p++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(n=0;n<u[i].length-f;n++){if(!1===e(u[i][n],p,v,b,w))return!1;p++}"MultiLineString"===x&&b++,"Polygon"===x&&w++}"Polygon"===x&&b++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===x&&(w=0),n=0;n<u[i].length;n++){for(o=0;o<u[i][n].length-f;o++){if(!1===e(u[i][n][o],p,v,b,w))return!1;p++}w++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===l(a.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}var f=function(t){var e=[];return"FeatureCollection"===t.type?c(t,(function(t){l(t,(function(r){e.push(n(r,t.properties))}))})):l(t,(function(r){e.push(n(r,t.properties))})),o(e)};function p(t,e,r){if(!g(r=r||{}))throw new Error("options is invalid");var i=r.bbox,n=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&y(i),n&&v(n);var o={type:"Feature"};return n&&(o.id=n),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function d(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!m(t[0])||!m(t[1]))throw new Error("coordinates must contain numbers");return p({type:"Point",coordinates:t},e,r)}function m(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function g(t){return!!t&&t.constructor===Object}function y(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!m(t))throw new Error("bbox must only contain numbers")}))}function v(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function _(t,e,r){if(null!==t)for(var i,n,o,a,s,u,h,l,c=0,f=0,p=t.type,d="FeatureCollection"===p,m="Feature"===p,g=d?t.features.length:1,y=0;y<g;y++){s=(l=!!(h=d?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var v=0;v<s;v++){var b=0,w=0;if(null!==(a=l?h.geometries[v]:h)){u=a.coordinates;var x=a.type;switch(c=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,y,b,w))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,y,b,w))return!1;f++,"MultiPoint"===x&&b++}"LineString"===x&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(n=0;n<u[i].length-c;n++){if(!1===e(u[i][n],f,y,b,w))return!1;f++}"MultiLineString"===x&&b++,"Polygon"===x&&w++}"Polygon"===x&&b++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===x&&(w=0),n=0;n<u[i].length;n++){for(o=0;o<u[i][n].length-c;o++){if(!1===e(u[i][n][o],f,y,b,w))return!1;f++}w++}b++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===_(a.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var b=function(t){var e=[1/0,1/0,-1/0,-1/0];return _(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e};var w=function(t,e){if(!g(e=e||{}))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var i=b(t);return d([(i[0]+i[2])/2,(i[1]+i[3])/2],r)};function x(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=function t(e){var r={};return e?(Object.keys(e).forEach((function(i){var n=e[i];"object"==typeof n?null===n?r[i]=null:n.length?r[i]=n.map((function(t){return t})):r[i]=t(n):r[i]=n})),r):r}(t.properties),e.geometry=M(t.geometry),e}function M(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return M(t)})),e):(e.coordinates=function t(e){if("object"!=typeof e[0])return e.slice();return e.map((function(e){return t(e)}))}(t.coordinates),e)}var S=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return x(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return x(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return M(t);default:throw new Error("unknown GeoJSON type")}},k={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function A(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=k[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function E(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function z(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var T=function(t,e,r){if(!z(r=r||{}))throw new Error("options is invalid");var i=r.units,n=I(t),o=I(e),a=E(o[1]-n[1]),s=E(o[0]-n[0]),u=E(n[1]),h=E(o[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(h);return A(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),i)};function P(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}var C=function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,i=1/0;return P(e,(function(e,n){var o=T(t,e);o<i&&((r=S(e)).properties.featureIndex=n,r.properties.distanceToPoint=o,i=o)})),r};function L(t,e,r){if(!j(r=r||{}))throw new Error("options is invalid");var i=r.bbox,n=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&O(i),n&&F(n);var o={type:"Feature"};return n&&(o.id=n),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function R(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!D(t[0])||!D(t[1]))throw new Error("coordinates must contain numbers");return L({type:"Point",coordinates:t},e,r)}function B(t,e){if(!j(e=e||{}))throw new Error("options is invalid");var r=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&O(r),i&&F(i);var n={type:"FeatureCollection"};return i&&(n.id=i),r&&(n.bbox=r),n.features=t,n}function D(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function j(t){return!!t&&t.constructor===Object}function O(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!D(t))throw new Error("bbox must only contain numbers")}))}function F(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function N(t,e,r){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,o=e.length-1;n<e.length;o=n++){var a=e[n][0],s=e[n][1],u=e[o][0],h=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+h*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(h-t[1])<=0)return!r;s>t[1]!=h>t[1]&&t[0]<(u-a)*(t[1]-s)/(h-s)+a&&(i=!i)}return i}var U=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var i=r.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,h=!1;u<o.length&&!h;u++)if(N(n,o[u][0],i)){for(var l=!1,c=1;c<o[u].length&&!l;)N(n,o[u][c],!i)&&(l=!0),c++;l||(h=!0)}return h};function q(t,e,r,i,n,o){return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))===Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))+Math.sqrt((n-t)*(n-t)+(o-e)*(o-e))}e.default=function(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?B([L(t)]):B([t]);return t}(t),r=w(e),i=!1,n=0;!i&&n<e.features.length;){var o,a=e.features[n].geometry,s=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(i=!0);else if("MultiPoint"===a.type){var u=!1;for(o=0;!u&&o<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[o][0]&&r.geometry.coordinates[1]===a.coordinates[o][1]&&(i=!0,u=!0),o++}else if("LineString"===a.type)for(o=0;!s&&o<a.coordinates.length-1;)q(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(s=!0,i=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){s=!1,o=0;for(var l=a.coordinates[h];!s&&o<l.length-1;)q(r.geometry.coordinates[0],r.geometry.coordinates[1],l[o][0],l[o][1],l[o+1][0],l[o+1][1])&&(s=!0,i=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||U(r,a)&&(i=!0);n++}if(i)return r;var c=B([]);for(n=0;n<e.features.length;n++)c.features=c.features.concat(f(e.features[n]).features);return R(C(r,c).geometry.coordinates)}},a717:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(r("3f6b")),n=u(r("8827")),o=u(r("57ba")),a=u(r("7e04")),s=r("a8a7");function u(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{$container:$("body"),map:{},comps:{}},e),this.currImageMapId="wms-test-layer",this.currImageMapIdLabel="wms-test-layer-label",this.tenLineLayerId="border_line_0_8",this._addJQueryFn(),this._render(),this._bind(),this._switchMap(),this.defaultMap()}return(0,o.default)(t,[{key:"_render",value:function(){this.$html=$((0,a.default)()),this.$container.append(this.$html)}},{key:"_addJQueryFn",value:function(){jQuery.fn.slideLeftHide=function(t,e){this.animate({width:"hide",paddingLeft:"hide",paddingRight:"hide",marginLeft:"hide",marginRight:"hide"},t,e)},jQuery.fn.slideLeftShow=function(t,e){this.animate({width:"show",paddingLeft:"show",paddingRight:"show",marginLeft:"show",marginRight:"show"},t,e)}}},{key:"_bind",value:function(){var t=this;this.baseMap=!0,this.lastMap=1;$(document).click((function(e){if(e.target.className.indexOf&&e.target.className.indexOf("check")<0&&e.target.className.indexOf("switch")<0&&!t.baseMap){t.baseMap=!t.baseMap;var r=t.$html.find(".small-map");r.addClass("hide-small-map"),r.slideLeftHide(200)}})),this.$container.find(".map-switch-base-map").on("click",(function(e){if(e.target.className.indexOf("check")<0)if(t.baseMap){t.baseMap=!t.baseMap;var r=t.$html.find(".small-map");r.removeClass("hide-small-map"),r.slideLeftShow(200)}else{t.baseMap=!t.baseMap;var i=t.$html.find(".small-map");i.addClass("hide-small-map"),i.slideLeftHide(200)}}))}},{key:"_switchMap",value:function(){var t=this;this.baseMap=!0,this.lastMap=1;this.$html.find("#google-satellite-tag").on("click",(function(e){2===Number((0,s.getStorageItem)("timemap","mapIndex","1"))&&(e.currentTarget.checked?t.map.getLayer(t.currImageMapIdLabel)&&t.map.setLayoutProperty(t.currImageMapIdLabel,"visibility","visible"):t.map.getLayer(t.currImageMapIdLabel)&&t.map.setLayoutProperty(t.currImageMapIdLabel,"visibility","none"))})),this.$html.find(".watercolor,.watercolor-bottom-text").bind("click",(function(){1!==Number((0,s.getStorageItem)("timemap","mapIndex","1"))&&t.normalSwitchMapOperation(1)})),this.$html.find(".satellite,.satellite-bottom-text").on("click",(function(){2!==Number((0,s.getStorageItem)("timemap","mapIndex","1"))&&t.normalSwitchMapOperation(2)})),this.$html.find(".google-map,.google-map-bottom-text").on("click",(function(){3!==Number((0,s.getStorageItem)("timemap","mapIndex","1"))&&t.normalSwitchMapOperation(3)})),this.$html.find(".terrain,.terrain-bottom-text").bind("click",(function(){4!==Number((0,s.getStorageItem)("timemap","mapIndex","1"))&&t.normalSwitchMapOperation(4)}))}},{key:"toggleTenLine",value:function(t){this.map.getLayer(this.tenLineLayerId)&&this.map.setLayoutProperty(this.tenLineLayerId,"visibility",t)}},{key:"visible",value:function(t){var e=this;["country","country-hover","countryborder","countryborder_hover","country_comb","country_comb_hover","country_comb_con","adminprovinceborder","admincityborder","admincountyborder","textpoint","textpoint-hover"].forEach((function(r){e.map.getLayer(r)&&e.map.setLayoutProperty(r,"visibility",t)}))}},{key:"normalSwitchMapOperation",value:function(t,e){(0,s.setStorageItem)("timemap","mapIndex",""+t),this.baseMap=!this.baseMap,this.changeMapIconStyle(t);var r=this.map.getLayer(this.currImageMapId);r&&this.map.removeLayer(this.currImageMapId),r&&this.map.removeSource(this.currImageMapId);var i=this.map.getLayer(this.currImageMapIdLabel);(i&&this.map.removeLayer(this.currImageMapIdLabel),i&&this.map.removeSource(this.currImageMapIdLabel),1===t&&this.simpleMap(),2===t&&this.satelliteMap(),3===t&&this.googleMap(),4===t&&this.terrainMap(),this.mapType=t,"true"===(e?""+!e:(0,s.getStorageItem)("timemap","showHistoryMap","true")))?(this.map.getLayer("country")?this.map.getLayer(this.currImageMapId)&&this.map.moveLayer(this.currImageMapId,"country"):this.moveBaseMapLayer(),this.visible("visible")):(this.moveBaseMapLayer(),this.visible("none"));this.lastMap=t}},{key:"moveBaseMapLayer",value:function(){this.map.getLayer("location-layer")&&(this.map.getLayer(this.currImageMapId)&&this.map.moveLayer(this.currImageMapId,"location-layer"),this.map.getLayer(this.currImageMapIdLabel)&&this.map.moveLayer(this.currImageMapIdLabel,"location-layer"),this.map.getLayer(this.tenLineLayerId)&&this.map.moveLayer(this.tenLineLayerId,"location-layer"))}},{key:"simpleMap",value:function(){this.baseMap=!this.baseMap,this.toggleTenLine("visible")}},{key:"satelliteMap",value:function(){var t=this;this.baseMap=!this.baseMap,this.map.addLayer({id:this.currImageMapId,type:"raster",source:{type:"raster",tiles:["//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png"],tileSize:256},paint:{"raster-fade-duration":0}}),this.map.addLayer({id:this.currImageMapIdLabel,type:"raster",source:{type:"raster",tiles:["//thematic.geoq.cn/arcgis/rest/services/StreetThematicMaps/Warm_Reference/MapServer/tile/{z}/{y}/{x}"],tileSize:256},paint:{}}),this.$html.find("#google-satellite-tag")[0].checked||this.map.setLayoutProperty(this.currImageMapIdLabel,"visibility","none"),this.map.moveLayer(this.currImageMapId,"location-layer"),this.map.moveLayer(this.currImageMapIdLabel,"location-layer"),setTimeout((function(){t.map.moveLayer(t.currImageMapId,t.currImageMapIdLabel)}),0),this.lastMap=2,this.toggleTenLine("visible")}},{key:"googleMap",value:function(){this.baseMap=!this.baseMap,this.map.addLayer({id:this.currImageMapId,type:"raster",source:{type:"raster",tiles:["//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}"],tileSize:256},paint:{}}),this.lastMap=1,this.toggleTenLine("none")}},{key:"terrainMap",value:function(){this.baseMap=!this.baseMap,this.map.addLayer({id:this.currImageMapId,type:"raster",source:{type:"raster",tiles:["//server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}.png"],tileSize:256},paint:{}}),this.lastMap=4,this.toggleTenLine("visible")}},{key:"watercolorMap",value:function(t){this.baseMap=!this.baseMap,this.map.addLayer({id:this.currImageMapId,type:"raster",source:{type:"raster",tiles:["//stamen-tiles-a.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg","//stamen-tiles-b.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg","//stamen-tiles-c.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"],tileSize:256},paint:{}}),t&&this.visible("none")}},{key:"changeMapIconStyle",value:function(t){var e=this;[".watercolor",".satellite",".google-map",".terrain"].forEach((function(r,i){t==i+1?e.$html.find(r).addClass("active"):e.$html.find(r).removeClass("active")}))}},{key:"defaultMap",value:function(t,e){if(t)this.normalSwitchMapOperation(t,e);else{var r=Number((0,s.getStorageItem)("timemap","mapIndex","1"));this.normalSwitchMapOperation(r)}"true"===(e?""+!e:(0,s.getStorageItem)("timemap","showHistoryMap","true"))?this.map.getLayer("country")||this.moveBaseMapLayer():this.moveBaseMapLayer()}}]),t}();e.default=h,t.exports=e.default},a7c7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAB_STATE=void 0;var i=u(r("1907")),n=u(r("8827")),o=u(r("57ba")),a=r("329b"),s=r("59b3");function u(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(){(0,n.default)(this,t),this._data=new a.Map,this._setDefaultState()}return(0,o.default)(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),(0,o.default)(t,[{key:"_setDefaultState",value:function(){var t=this;(0,i.default)(s.defaultState).forEach((function(e){t._data=t._data.set(e,(0,a.fromJS)(s.defaultState[e]))}))}},{key:"getMabState",value:function(){return this._data.toJS()}},{key:"get",value:function(t){var e=this._data.get(t);return"boolean"==typeof e?e:e&&e.toJS()}},{key:"getIn",value:function(t){var e=this._data.getIn(t);return"boolean"==typeof e?e:e&&e.toJS()}},{key:"update",value:function(t,e){return this._data=this._data.update(t,(function(t){return(0,a.fromJS)(e)})),this._data.toJS()}},{key:"updateIn",value:function(t,e){return this._data=this._data.updateIn(t,(function(t){return(0,a.fromJS)(e)})),this._data.toJS()}},{key:"reset",value:function(t){s.defaultState[t]&&(this._data=this._data.update(t,(function(e){return(0,a.fromJS)(s.defaultState[t])})))}},{key:"resetAll",value:function(t){var e=this;Array.isArray(t)?t.forEach((function(t){e.clear(t)})):this._setDefaultState()}}]),t}();e.MAB_STATE=h.getInstance()},a7c8:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(r("3f6b")),n=f(r("8827")),o=f(r("57ba")),a=f(r("dc73"));r("5c33");var s=f(r("75f2")),u=f(r("c450")),h=f(r("fb1f")),l=f(r("a717")),c=f(r("2089"));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e){var r=this;(0,n.default)(this,t),(0,i.default)(this,{$container:$("body"),map:{},comps:{},active:!1},e),this._render(),setTimeout((function(){r.addComponent()}),1e3)}return(0,o.default)(t,[{key:"_render",value:function(){this.$html=$((0,a.default)()),this.$container.append(this.$html)}},{key:"addComponent",value:function(){this.measureDistance=new s.default({$container:this.$html.find(".map-measure-distance"),map:this.map,comps:this.comps}),this.measureArea=new u.default({$container:this.$html.find(".map-measure-area"),map:this.map,comps:this.comps}),this.Selfposition=new h.default({$container:this.$html.find(".map-get-self-position"),map:this.map,comps:this.comps}),this.SwitchBasemap=new l.default({$container:this.$html.find(".map-switch-basemap"),map:this.map,comps:this.comps}),this.zoomController=new c.default({$container:this.$html.find(".map-zoom-controller"),map:this.map,comps:this.comps})}},{key:"showComponent",value:function(){this.$html.toggleClass("active",!0),this.active=!0}},{key:"toggleMoveLeft",value:function(t){this.$html.toggleClass("active",!t),this.$html.toggleClass("active-left",t),this.active=!t}},{key:"hideComponent",value:function(){this.$html.toggleClass("active",!1),this.active=!1}}]),t}();e.default=p,t.exports=e.default},a8b4:function(t,e,r){},a958:function(t,e,r){(function(e){var i=r("a25c"),n=r("11dc");function o(t,r){var n=function(t){var e=a(t);return{blinder:e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),o=r.modulus.byteLength(),s=(i.mont(r.modulus),new i(t).mul(n.blinder).umod(r.modulus)),u=s.toRed(i.mont(r.prime1)),h=s.toRed(i.mont(r.prime2)),l=r.coefficient,c=r.prime1,f=r.prime2,p=u.redPow(r.exponent1),d=h.redPow(r.exponent2);p=p.fromRed(),d=d.fromRed();var m=p.isub(d).imul(l).umod(c);return m.imul(f),d.iadd(m),new e(d.imul(n.unblinder).umod(r.modulus).toArray(!1,o))}function a(t){for(var e=t.modulus.byteLength(),r=new i(n(e));r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2);)r=new i(n(e));return r}t.exports=o,o.getr=a}).call(this,r("1c35").Buffer)},aa56:function(t,e,r){"use strict";var i=r("c3c0").rotr32;function n(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function a(t,e,r){return t^e^r}e.ft_1=function(t,e,r,i){return 0===t?n(e,r,i):1===t||3===t?a(e,r,i):2===t?o(e,r,i):void 0},e.ch32=n,e.maj32=o,e.p32=a,e.s0_256=function(t){return i(t,2)^i(t,13)^i(t,22)},e.s1_256=function(t){return i(t,6)^i(t,11)^i(t,25)},e.g0_256=function(t){return i(t,7)^i(t,18)^t>>>3},e.g1_256=function(t){return i(t,17)^i(t,19)^t>>>10}},abd2:function(t,e,r){"use strict";
/*!!!! created by LangPlugin !!!!*/t.exports={article:{articleType:{en:"Article Type",zh:"文章类型",jp:"文章のタイプ",fr:"Genres",es:"Tipo de artículos"},authorName:{en:"Author",zh:"作者名称",jp:"著者",fr:"Auteurs",es:"Autor"},siteName:{en:"Site Name",zh:"网站名称",jp:"サイトネーム",fr:"Nom de domaine",es:"Nombre de la página web"},originalURl:{en:"Original URL",zh:"原文链接",jp:"オリジナルURL",fr:"URL d'origine",es:"URL Original"},errorOUrl:{en:"Original URL is not validated.",zh:"请输入正确的原文链接",jp:"正確なオリジナルURLご入力ください",fr:"L'URL n'est pas valide.",es:"La URL original no está validada."},original:{en:"Original",zh:"原创",jp:"オリジナル",fr:"Original",es:"Original"},reprint:{en:"Reprint",zh:"转载",jp:"転載する",fr:"Reproduire",es:"Reproducir"},coverSaveTip:{en:"Please complete article cover",zh:"请完成封面配图"},singleImage:{en:"Singe",zh:"单图",jp:"単図",fr:"Monogramme",es:"Gráficoúnico"},threeImages:{en:"Three",zh:"三图",jp:"スリー図",fr:"Trois Monogramme",es:"Tres Monogramme"},automatic:{en:"Automatic",zh:"自动",jp:"自動",fr:"Automatique",es:"Automaticidad"},abstract:{en:"Abstract",zh:"摘要"},abstractTip:{en:"Limited words 100",zh:"可输入100字以内的摘要"},headImage:{en:"First Image",zh:"头图"},coverTip:{zh:"建议尺寸216 * 184，优质的封面有利于推荐，请使用清晰度较高的图片，避免使用GIF、带大量文字的图片",en:"Recommended size 216 * 184, high-quality cover is conducive to recommendation, please use high-definition pictures, avoid using GIF, with a large number of text pictures"},headImageTip:{zh:"建议尺寸1400 * 700，展示在文章头部，请使用清晰度较高的图片，避免使用GIF、带大量文字的图片",en:"Recommended size 1400 * 700, displayed in the header of the article, please use high definition pictures, avoid using GIF, with a large number of text pictures"},from:{zh:"来源",en:"from"},originalAuthor:{zh:"原作者",en:"Original Author"},addFrom:{zh:"从$k{0}添加",en:"Add from $k{0}"},copyInfo:{zh:"本文为该作者原创文章，由全历史进行编辑，经授权后发表。转载此文请标明出处，并附上本文链接$k{0}。未按照规范转载者，全历史保留追究相应责任的权利",en:"This article is the author's original article, edited by the whole history, and published after authorization. To reproduce this article, please indicate the source and attach the link to this article, $k{0}. Those who fail to reproduce in accordance with the norms shall retain the right to pursue corresponding responsibilities throughout history"},choseSize:{zh:"选择尺寸",en:"Chose Size"},writeArticle:{en:"Article Editor",zh:"写文章",jp:"文章を書く",fr:"Rédaction",es:"Editor de artículos"},normalArticle:{en:"Normal",zh:"普通文章",jp:"普通の文章",fr:"Article normal",es:"Normal"},themeArticle:{en:"Theme",zh:"主题文章",jp:"テーマ文章",fr:"Article thématique",es:"Tema"},savingDraft:{en:"Saving draft",zh:"保存草稿中",jp:"下書き保存中",fr:"le brouillon en cours de sauvegarde",es:"Guardando este borrador"},willDeleteArticle:{zh:"您确定要删除这篇文章么？",en:"Are you sure to delete this article?"}},book:{allbook:{en:"Books",zh:"全古籍"},allbookDesc:{zh:"全历史古籍收藏几十万全历史多种语言的古代，近现代书籍。特别是那些在人类历史上具有重要意义的古籍。给用户呈现国际化的最佳阅读体验，在全历史古籍，用英文去阅读中国古籍不再是障碍。",en:"Allhistory’s Antique Books is a channel that collect all ancient to pre-modern period books, especially those of importance in the history of human, the books span a very broad genres, covering global regions. The reading experience is also designed to be multi-lingual or international, if you speak English, reading a Chinese book with English translation would be nice, vice versa."},typeHistory:{en:"History",zh:"历史社会"},typeLaw:{en:"Law & War",zh:"法律军事"},typeBusiness:{zh:"经济管理",en:"Management"},typePhilosophy:{zh:"哲学宗教",en:"Philosophy"},typeScience:{zh:"科学技艺",en:"Philosophy"},typeArt:{zh:"文学艺术",en:"Art"},typeAncient:{zh:"古文字",en:"Ancient"},author:{en:"Author",zh:"作者",jp:"著者",fr:"Auteur",es:"Autor"},publisher:{en:"Press",zh:"出版社",jp:"出版社",fr:"Éditeur",es:"Prensa"},publishDate:{en:"Publication date",zh:"出版日期",jp:"出版日",fr:"Éditeur",es:"Fecha de publicación"},pageNumbers:{en:"Pages",zh:"页数",jp:"ページ数",fr:"Pages",es:"Páginas"},pageNumberShort:{en:"page$p{0,s,}",zh:"页",jp:"ページ",fr:"page$p{0,s,}",es:"página$p{0,s,}"},startRead:{en:"Read",zh:"开始阅读",jp:"読む",fr:"Lire",es:"Leer"},readBook:{en:"Read",zh:"阅读书籍"},readPhotocopy:{en:"Photocopy",zh:"阅读影印版"},bookDesc:{en:"Description",zh:"书籍简介",jp:"内容紹介",fr:"Description",es:"Descripción"},bookSearch:{en:"Book bookSearch",zh:"古籍搜索"},originalAppearance:{en:"Original appearance",zh:"古籍原貌"},bookLockAlert1:{en:"The book is being edited by ${0} and the entry has been locked.",zh:"${0}正在编辑该书籍，条目已锁定",jp:"当書籍がただいま${0}に編集されており、項目はロックされています。",fr:"Ce livre est en cours d'être rédigé par $ {0} et l'accès a été verrouillée.",es:"${0} está editando el libro y se ha bloqueado la entrada."},bookLockAlert2:{en:"The book is being reviewd and the entry has been locked.",zh:"该书籍正在审核中，条目已锁定",jp:"当書籍がただいま審査中、項目はロックされています。",fr:"Ce livre est en cours d'être examiné et l'accès a été verouillé.",es:"Se está revisando el libro y se ha bloqueado la entrada."},bookLockAlert3:{en:"The book is forbidden to edit",zh:"该书籍禁止编辑",jp:"当書籍は編集不可となります。",fr:"Il est interdit de modifier ce livre.",es:"Se prohibe editar este libro."},process:{en:"Processing",zh:"处理中",jp:"処理中",fr:"En traitement",es:"En proceso"},noContent:{en:"has no content!",zh:"暂无内容",jp:"表示する内容がありません。",fr:"Pas de contenu",es:"No hay contenido"},last:{en:"Previous",zh:"上一章",jp:"前章",fr:"Précédent",es:"Anterior"},next:{en:"Next",zh:"下一章",jp:"後章",fr:"Suivant",es:"Siguiente"},loading:{en:"Loading",zh:"读取中",jp:"読み込み中",fr:"En chargement",es:"Cargando"},notAvailable:{en:"not available",zh:"暂无可用版本",jp:"利用不可",fr:"Aucune version disponible",es:"no disponible"},requestError:{en:"Request error!",zh:"网络请求失败!",jp:"リクエストエラー",fr:"Requête échoué!",es:"¡Error de solicitud!"},invailablePage:{en:"Page invailable",zh:"页数无效",jp:"ページ数は無効となります",fr:"Page invalide",es:"Página inválida"},singleColumn:{en:"single",zh:"单栏",jp:"一列",fr:"seule",es:"sola"},doubleColumn:{en:"double",zh:"对照",jp:"対照",fr:"double",es:"doble"},bookformat:{en:"",zh:"版",jp:"フォーマット",fr:"format",es:""},menu:{en:"Menu",zh:"目录",jp:"目次",fr:"menu",es:"Menú"},fullScreen:{en:"fullScreen",zh:"全屏",jp:"全画面表示",fr:"plein écran",es:"Pantalla Completa"},lastPage:{en:"Previous",zh:"上一页",jp:"前のページ",fr:"Précédent",es:"Anterior"},nextPage:{en:"Next",zh:"下一页",jp:"次のページ",fr:"Suivant",es:"Siguiente"},bookTitle:{en:"Title",zh:"书籍名称",jp:"タイトル",fr:"Titre",es:"Título"},bookSubtitle:{en:"Subtitle",zh:"副标题",jp:"サブタイトル",fr:"sous-titre",es:"Subtítulo"},bookOriginalName:{en:"Original",zh:"原作名",jp:"オリジナル",fr:"Nom original du livre",es:"Original"},bookItemTips:{en:"The book is exists, please",zh:"书籍已存在，请",jp:"書籍は既に存在していますので、ください",fr:"Ce livre déjà existe, SVP",es:"Ha existido el libro, por favor"},bookAuthor:{en:"Author",zh:"原作者",jp:"著者",fr:"Auteur",es:"Autor"},bookTranslator:{en:"Translator",zh:"译者",jp:"翻訳者",fr:"Traducteur",es:"Traductor"},bookCreateTime:{en:"Create Time",zh:"创作时间",jp:"作成時間",fr:"Temps de création",es:"Tiempo de Crear"},bookBinding:{en:"Binding",zh:"装帧",jp:"装丁",fr:"Reliure",es:"Encuadernación"},paperback:{en:"Paperback",zh:"平装",jp:"並製",fr:"livre broché",es:"Libro de tapa blanda"},hardcover:{en:"Hardcover",zh:"精装",jp:"上製",fr:"livre relié",es:"Libro de tapa dura"},other:{en:"Others",zh:"其他",jp:"その他",fr:"D'autres",es:"otros"},language:{en:"Language",zh:"此版本语言",jp:"言語",fr:"langage",es:"Idioma"},pleaseEnterANumber:{en:"Please enter a number",zh:"请输入数字",jp:"数字を入力してください",fr:"Entrez le nombre, SVP",es:"Introduzca un número, por favor"},descriptionNoMoreThan600:{en:"Description can not exceed 600 words",zh:"请输入书籍内容简介，最多600字",jp:"書籍の内容紹介を1800文字以下ご入力ください",fr:"Veuillez entrer une description du livre moins de 600 mots",es:"La descripción no se puede exceder 3600 caracteres"},bookCover:{en:"Cover",zh:"书籍封面",jp:"書籍カバー",fr:"couverture",es:"Forro"},bookUpload:{en:"Upload",zh:"上传书籍",jp:"書籍をアップロードする",fr:"Télécharger",es:"Subir"},orAddANewBook:{en:"or add a new book",zh:"或添加其他书籍",JP:"あるいはほかの書籍追加する",fr:"ou ajouter un autre livre",es:"o añadir otro libro"},publisherPlaceholder:{en:"Publisher",zh:"请输入出版社名称，如新华出版社",JP:"出版社の名前ご入力ください。例：新華出版社",fr:"Éditeur",es:"Editorial"},titlePlaceholder:{en:"Title",zh:"请输入原作名称",JP:"タイトルご入力ください",fr:"Titre",es:"Título"},authorPlaceholder:{en:"Author",zh:"请输入原作者名称",JP:"著者の名前ご入力ください",fr:"Auteur",es:"Autor"},translatorPlaceholder:{en:"Translator",zh:"请输入译者名称",JP:"翻訳者の名前ご入力ください",fr:"Traducteur",es:"Traductor"},subtitlePlaceholder:{en:"Subtitle",zh:"请输入书籍副标题",JP:"サブタイトルご入力ください",fr:"sous-titre",es:"Subtítulo"},ISBNTips:{en:"ISBN can only be a combination of 10 or 13 digits and -",zh:"ISBN只能是10或13位数字和-的组合",JP:"ISBNは10あるいは13位の数字と-の組み合わせお願いします。",fr:"L'ISBN ne peut être qu'une combinaison de 10 ou 13 chiffres et -",es:"ISBN sólo se puede ser la combinación de 10 o 13 dígitos y -"},titleIsRequired:{en:"Title is required",zh:"请填写书籍名称！",JP:"書籍の名前ご入力ください",fr:"Entrez le titre, SVP",es:"Introduzca el título"},authorIsRequired:{en:"Author is required",zh:"请填写原作者！",JP:"著者ご入力ください",fr:"Entrez l'auteur, SVP",es:"Introduzca el autor"},reviewing:{en:"Your submission has been successful and is under review.",zh:"您此次的提交已成功，正在审核中",JP:"ご提出ありがとうございました。ただいま審査中となります。",fr:"Ce que vous avez soumis a été acceptée et est en cours de révision.",es:"La entrega se ha logrado y está en proceso de revisión."},saveSuccess:{en:"Save success",zh:"保存成功",jp:"保存済み",fr:"Réussir à sauvegarder",es:"Se ha guardado"},formatOriginal:{zh:"原文",en:"ORIG",jp:"原文",es:"ORIG",fr:"ORIG"},formatTranslate:{zh:"译文",en:"Trans.",jp:"訳文",es:"Trad.",fr:"Trad."},formatPhoto:{zh:"影印",en:"Photo",jp:"コピー",es:"Foto",fr:"Photo"},searchInAllBook:{zh:"在本书全文搜索",en:"Search for full text in this book"},bookAllTextSearchHeaderPartOne:{zh:"本章中命中关键词共有",en:"There are"},bookAllTextSearchHeaderPartTwo:{zh:"处，这是第",en:"keywords hit in this chapter, which is the"},bookAllTextSearchHeaderPartThree:{zh:"个",en:"."},lastPlace:{zh:"上一处",en:"Last place"},nextPlace:{zh:"下一处",en:"Next place"},lastChapter:{zh:"上一章",en:"Last chapter"},nextChapter:{zh:"下一章",en:"Next chapter"},allTheChaptersMentioned:{zh:"查看全部提及章节",en:"Look at all the chapters mentioned"},briefIntroduction:{zh:"简介",en:"brief introduction"},relatedItems:{zh:"关联条目",en:"Related items"},bookAllTextSearchResultPartOne:{zh:"全书有",en:"This conjunction appears in"},bookAllTextSearchResultPartTwo:{zh:"处出现该关联词，共计覆盖",en:"places in the book, covering"},bookAllTextSearchResultPartThree:{zh:"章节",en:"chapters altogether."},source:{zh:"来源",en:"source"}},common:{allhistoryDesc:{en:"Allhistory is powered by AI-Boosted Knowledge Graph, it aims to Build and Present Digital Humanities contents in a highly Time-Space-ish & Correlated Fashion, in doing so, users will be able to immerse themselves in the wonderland of AH.",zh:"全历史(Allhistory）以AI知识图谱为核心引擎，通过高度时空化、关联化数据的方式构造及展现数字人文内容，尤其是历史知识。让用户沉浸在纵横开阔、左图右史的（历史、人文、社科等）知识海洋中。"},allhistory:{en:"AllHistory",zh:"全历史",jp:"オールヒストリー",fr:"Toute l'hisoire",es:"Todas las historias"},abPath:{en:"AB Path",zh:"AB路径"},AofB:{en:"$k{0} of $k{1}",zh:"$k{1}的$k{0}",jp:"$k{1}の$k{0}",fr:"$k{0} de $k{1}",es:"$k{0} de $k{1}"},searchResult:{en:"Search result",zh:"搜索结果"},searchAllText:{zh:"搜全文",en:"Search the full text"},FileHasBeenRemoved:{en:"The file has been removed",zh:"您查看的资源已经被删除了"},AaboutB:{en:"$k{0} about $k{1}",zh:"$k{1}的$k{0}",jp:"$k{1}に関する$k{0}",fr:"$k{0} de $k{1}",es:"$k{0} sobre $k{1}"},about:{en:"About",zh:"关于",jp:"関する",fr:"sur",es:"sobre"},companyAbout:{en:"About",zh:"公司介绍"},achievement:{en:"Achievements",zh:"成就",jp:"成果",fr:"Réalisation",es:"Éxitos"},accuracy:{en:"",zh:"准确度",jp:"精度",fr:"",es:""},add:{en:"Add",zh:"添加",jp:"追加する",fr:"Ajouter",es:"Añadir"},addX:{en:"Add $k{0}",zh:"添加$k{0}",jp:"$k{0}を追加する",fr:"Ajouter $k{0}",es:"Añadir $k{0}"},addText:{en:"Text",zh:"添加文本",jp:"テキストを追加する",fr:"Ajouter le texte",es:"Texto"},attributes:{en:"Attributes",zh:"属性"},attributeValue:{en:"Value",zh:"属性值"},addTime:{en:"Time",zh:"添加时间",jp:"時間を追加する",fr:"Ajouter le temps",es:"Tiempo"},addGroup:{en:"Group",zh:"添加组",jp:"グループを追加する",fr:"Ajouter le groupe",es:"Grupo"},addTag:{en:"Add tag",zh:"添加标签",jp:"タグを追加する",fr:"Ajouter l'étiquette",es:"Añadir"},accountSecurity:{en:"Security",zh:"帐号安全",jp:"アカウントセキュリティ",fr:"Sécurité du compte",es:"Securidad"},all:{en:"All",zh:"全部",jp:"全部",fr:"Ensemble",es:"Todo"},approximately:{en:"Appr",zh:"大约",jp:"大体",fr:"Environ",es:"Alrededor de"},APPDownload:{en:"APP",zh:"APP下载"},ScanAndDownload:{en:"Download Allhistory",zh:"扫一扫下载全历史APP"},auditing:{en:"Auditing",zh:"审核中",jp:"審査中",fr:"En révision",es:"Examinando"},author:{en:"Author",zh:"作者"},avatar:{en:"Avatar",zh:"头像",jp:"プロフィール写真",fr:"Photo",es:"Foto de perfil"},article:{en:"Article",zh:"文章",jp:"文章",fr:"Article",es:"texto"},relatedArticle:{en:"RelatedArticle,",zh:"相关文章"},beseInfo:{en:"Basic Info",zh:"基本信息",jp:"基礎情報",fr:"Informations de base",es:"Información Básica"},book:{en:"Book",zh:"书籍",jp:"本",fr:"Livre",es:"Libro"},category:{en:"Category",zh:"分类",jp:"類型",fr:"Catégorie",es:"Categoría"},cancel:{en:"Cancel",zh:"取消",jp:"キャンセル",fr:"Annuler",es:"Cancelar"},commit:{en:"Commit",zh:"提交",jp:"提出する",fr:"Soumettre",es:"Presentación"},create:{en:"Create",zh:"创建",jp:"作成",fr:"Créer",es:"Crear"},creator:{en:"Creator",zh:"创建人",jp:"作成人",fr:"Créateur",es:"Creador"},clean:{en:"Clean",zh:"清空",jp:"クリア",fr:"Effacer",es:"Eliminar"},cleanHistoryRecord:{en:"Clean",zh:"清除记录",jp:"歴史をクリアする",fr:"Effacer l'historique",es:"Eliminar"},code:{en:"Code",zh:"代码",jp:"コード",fr:"Code",es:"Código"},content:{en:"Content",zh:"内容",jp:"内容",fr:"Contenu",es:"Contenido"},clusterTimeline:{en:"Cluster Timeline",zh:"行业时间线",jp:"クラスターのタイムライン",fr:"Chronologie de cluster",es:"Cronología del Racimo"},confirmDropEdit:{en:"Your edit will be dropped. Are you sure to leave?",zh:"要离开本页面吗？您的编辑内容尚未提交。",jp:"編集された内容が提出されていませんが、本ページに離れますか？",fr:"Votre modification sera supprimée. Êtes-vous sûr de partir?",es:"¿Vas a salir sin entregar tu edición?"},comment:{en:"Comment",zh:"评论",jp:"コメント",fr:"Commenter",es:"Enviar comentarios"},willDeleteComment:{en:"Are you sure to delete this comment?",zh:"您确定要删除这条评论么?"},justNow:{en:"Just now",zh:"刚刚"},beforeYesterday:{en:"The day before yesterday",zh:"前天"},yesterday:{en:"Yesterday",zh:"昨天"},hoursAgo:{en:"Hours ago",zh:"小时前"},minutesAgo:{en:"Minutes ago",zh:"分钟前"},contactUs:{en:"Contact Us",zh:"联系我们",jp:"お知らせください",fr:"Connectez-nous",es:"Contacto"},delete:{en:"Delete",zh:"删除",jp:"削除",fr:"Supprimer",es:"Eliminar"},deleteX:{en:"Delete $k{0}",zh:"删除$k{0}",jp:"$k{0}を削除する",fr:"Supprimer $k{0}",es:"Eliminar $k{0}"},desc:{en:"Description",zh:"描述",jp:"説明",fr:"Description",es:"Descripción"},descTooLong:{en:"Descrption too long",zh:"描述超长",jp:"説明が長すぎます",fr:"Description trop longu",es:"Descripción tan larga"},doubtful:{en:"Doubt",zh:"存疑",jp:"存疑",fr:"Douteux",es:"Incierto"},disambiguation:{en:"disambiguation",zh:"消歧义",jp:"曖昧さ回避",fr:"désambiguïsation",es:"desambiguación"},entry:{en:"Entry",zh:"词条",jp:"項目",fr:"Entrée",es:"Artículo"},edit:{en:"Edit",zh:"编辑",jp:"編集する",fr:"Rédiger",es:"Editar"},editX:{en:"Edit $k{0}",zh:"编辑$k{0}",jp:"$k{0}を編集する",fr:"Rédiger $k{0}",es:"Editar $k{0}"},endPointName:{zh:"终点条目名称",en:"end point"},exact:{en:"Exact",zh:"准确",jp:"正確",fr:"Exact",es:"Exacto"},exitX:{en:"Exit $k{0}",zh:"退出$k{0}",jp:"$k{0}を終了します",fr:"Quitter $k{0}",es:"Salir de $k{0}"},favor:{en:"Favorite",zh:"收藏",jp:"お気に入り",fr:"Favori",es:"Favorito"},familyTree:{en:"Family Tree",zh:"族谱",jp:"家系図",fr:"Arbre généalogique",es:"Árbol Genealógico"},failedTopass:{en:"Failed",zh:"未通过",jp:"未通過",fr:"Échoué",es:"No ha aprobado"},feedback:{en:"Feedback",zh:"投诉指引",jp:"フィードバック",fr:"Feed-back",es:"Comentario"},privacyLagency:{en:"Privacy",zh:"隐私政策"},cookieClaim:{en:"Cookie",zh:"Cookie声明"},behave:{en:"用户行为规范",zh:"用户行为规范"},topStartEndTime:{en:"End time must be later than start time",zh:"开始日期不得晚于结束日期",jp:"開始時間を終了時間の前に設定しなければならない",fr:"La date de fin doit être tard à la date de début",es:"La fecha de finalización debe ser posterior a la fecha de inicio"},filter:{en:"Filter",zh:"筛选",jp:"フィルター",fr:"Filtrer",es:"Filtrar"},group:{en:"Group",zh:"组",jp:"グループ",fr:"Groupe",es:"Grupo"},help:{en:"Help",zh:"帮助",jp:"ヘルプ",fr:"Aide",es:"Ayuda"},helpCenter:{en:"Help",zh:"帮助中心",jp:"ヘルプ",fr:"Aide",es:"Ayuda"},historyRecord:{en:"History",zh:"历史记录",jp:"歴史",fr:"Historique",es:"Historia"},image:{en:"Image",zh:"图片",jp:"写真",fr:"Image",es:"Imágenes"},art:{en:"art",zh:"艺术",jp:"芸術",fr:"Art",es:"Arte"},literature:{en:"literature",zh:"文学",jp:"文学",fr:"Littérature",es:"Literatura"},imageInfo:{en:"Image Info",zh:"图片信息",jp:"写真情報",fr:"Information de l'image",es:"Información de la imágen"},imageNamePh:{en:"Name",zh:"图片名称（${0}字）",jp:"写真名（${0}文字）",fr:"Nom de l'image",es:"Nombre"},imageNameReqired:{en:"Image name is required",zh:"图片名称不能为空",jp:"写真名ご入力ください",fr:"Le nom de l'image est requis",es:"Introduzca el nombre de la imagen"},inputX:{en:"Please Input $k{0}",zh:"请输入$k{0}",jp:"$k{0}ご入力ください",fr:"Entrez $k{0}，SVP",es:"Introduzca $k{0}, por favor"},mentionedBook:{en:"The name of the book mentioned",zh:"提及的书籍名称"},insert:{en:"Insert",zh:"插入",jp:"挿入する",fr:"Insérer",es:"Insertar"},insertX:{en:"Insert $k{0}",zh:"插入$k{0}",jp:"$k{0}を挿入する",fr:"Insérer $k{0}",es:"Insertar $k{0}"},insertLink:{en:"Insert Link",zh:"插入链接",jp:"リンクを挿入する",fr:"Insérer le lien",es:"Insertar el enlace"},insertRecord:{en:"Insert Record Book",zh:"添加提及条目"},insertRecordBook:{en:"Insert Record Book",zh:"添加提及书籍"},insertImage:{en:"Insert Image",zh:"插入图片",jp:"写真を挿入する",fr:"Insérer l'image",es:"Insertar imágenes"},innerlink:{en:"Internal Link",zh:"内链",jp:"インナーリンク",fr:"Insérer le lien intérieur",es:"Enlace interior"},outerlink:{en:"External Link",zh:"外链",jp:"アウターリンク",fr:"Insérer le lien extérieur",es:"Enlace exterior"},operation:{en:"Operation",zh:"操作",jp:"操作",fr:"Opération",es:"Operación"},option:{en:"Option",zh:"选项",jp:"オプション",fr:"Option",es:"Opción"},optional:{en:"Optional",zh:"选填",jp:"オプショナル",fr:"Optionnel",es:"Opcional"},productNlp:{zh:"由全历史自动生成",en:"Written by AI"},joinUs:{en:"Join Us",zh:"招聘信息",jp:"採用情報",fr:"Rejoignez-nous",es:"Trabaja con nosotros"},locate:{en:"Location",zh:"地点",jp:"場所",fr:"localiser",es:"Locación"},lessThanLength:{en:"$k{0} should be less than ${1}",zh:"$k{0}不超过${1}字",jp:"$k{0}は${1}文字以内お願いします",fr:"$k{0} doit être inférieur à ${1}",es:"$k{0} debe ser menos de ${1}"},like:{en:"Like",zh:"赞",jp:"いいね！",fr:"J'aime",es:"Me gusta"},notLogin:{en:"You are not Sign in",zh:"你尚未登录，"},interact:{en:" then articipate in interaction",zh:"后参与互动"},login:{en:"Sign in",zh:"登录"},logout:{en:"Logout",zh:"退出",jp:"ログアウト",fr:"Déconnexion",es:"Cerrar sesión"},painting:{en:"Painting",zh:"画作",jp:"絵画作品",fr:"Peintures",es:"Pinturas"},post:{en:"Post",zh:"帖子"},passed:{en:"Passed",zh:"已通过",jp:"通過",fr:"Passé",es:"Se ha aprobado"},password:{en:"Password",zh:"密码",jp:"パスワード",fr:"Le mot de passe",es:"Contraseña"},pian:{en:"",zh:"篇",jp:"篇",fr:"",es:""},publish:{en:"Publish",zh:"发布",jp:"発表する",fr:"Publier",es:"Publicar"},phoneNumber:{en:"phone number",zh:"手机号",jp:"電話番号",fr:"numéro de téléphone",es:"Número de teléfono"},search:{en:"Search",zh:"搜索",jp:"検索",fr:"Chercher",es:"Buscar"},searchBoxPlaceholder:{en:"Keywords",zh:"请输入条目名",jp:"キーワードご入力ください",fr:"Mot-clé",es:"Palabra clave"},summary:{en:"Summary",zh:"概述",jp:"概要",fr:"Résumé",es:"Resumen"},statistc:{en:"Statistics",zh:"统计",jp:"統計",fr:"Statistique",es:"Estadísticas"},mainText:{en:"Detail",zh:"正文",jp:"本文",fr:"texte principal",es:"Detalles"},modifyX:{en:"Modify $k{0}",zh:"修改$k{0}",jp:"$k{0}を変更する",fr:"Modifier $k{0}",es:"Modificar $k{0}"},mobile:{en:"Mobile",zh:"手机",jp:"携帯電話",fr:"Téléphone portable",es:"Móvil"},myContent:{en:"My Content",zh:"我的内容",jp:"私の内容",fr:"Mon contenu",es:"Mi contenido"},menu:{en:"Menu",zh:"目录",jp:"目次",fr:"Menu",es:"Menú"},media:{en:"Media",zh:"多媒体",jp:"メディア",fr:"Multimédia",es:"Medio de comunicación"},myFavor:{zh:"我的收藏",en:"My Favorite",jp:"お気に入り",fr:"Favori",es:"Favoritos"},msgCenter:{en:"Message Center",zh:"消息中心",jp:"通知センター",fr:"Centre de message",es:"Centro de notificaciones"},myMessage:{zh:"我的信息",en:"Message",jp:"メッセージ",fr:"Message",es:"Mensajes"},myDrafts:{en:"Drafts",zh:"草稿箱",jp:"下書き",fr:"Brouillons",es:"Borradores"},more:{en:"more",zh:"更多",jp:"もっと見る",fr:"plus",es:"más"},myX:{en:"My $k{0}",zh:"我的$k{0}",jp:"私の$k{0}",fr:"Mon $k{0}",es:"Mi $k{0}"},name:{en:"Name",zh:"名称",jp:"名称",fr:"Nom",es:"Nombre"},newX:{en:"New $k{0}",zh:"新建$k{0}",jp:"$k{0}を新規作成する",fr:"nouveau $k{0}",es:"Crear $k{0} de nuevo"},no:{en:"no",zh:"否",jp:"いいえ",fr:"non",es:"no"},node:{en:"Node",zh:"节点",jp:"ノード",fr:"Nœud",es:"Nodo"},note:{en:"Note",zh:"注释",jp:"ノート",fr:"Note",es:"Nota"},noMsg:{en:"No Message",zh:"还没有消息",jp:"メッセージはまだありません。",fr:"Pas de message",es:"No hay mensaje"},tips:{en:"Tips",zh:"提示",jp:"ティップス",fr:"Conseils",es:"Consejos"},timeline:{en:"Timeline",zh:"时间线",jp:"タイムライン",fr:"Chronologie",es:"Cronología"},timePoint:{en:"Point",zh:"时间点",jp:"ポイント",fr:"Point du temps",es:"Punto"},timePeriod:{en:"Period",zh:"时间段",jp:"期間",fr:"Période",es:"Período"},toNow:{en:"Curr.",zh:"至今",jp:"現在",fr:"Jusqu'à maintenant",es:"Corriente"},graph:{en:"Graph",zh:"图谱",jp:"図鑑",fr:"Carte",es:"Gráfico"},relationGraph:{en:"Relation Graph",zh:"关系图谱",jp:"関係図",fr:"carte de relation",es:"Gráfico de Relaciones"},relationGraphShortHand:{en:"Relation Graph",zh:"关系图",jp:"関係図",fr:"carte de relation",es:"Gráfico de Relaciones"},relationEntry:{en:"Relation Entry",zh:"关联条目",jp:"関連項目",fr:"Article corrélatif",es:"Artículos Relacionadas"},relation:{en:"Relation",zh:"关系",jp:"関係",fr:"Relation",es:"Relación"},redirect:{en:"Redirect",zh:"跳转",jp:"ジャンプ",fr:"Réorienter",es:"Redireccionar"},reference:{en:"Reference",zh:"参考资料",jp:"参考資料",fr:"Référence",es:"Referencias"},report:{en:"Report",zh:"报错",jp:"レポート",fr:"Rapport",es:"Informe"},reply:{en:"Reply",zh:"回复",jp:"返信",fr:"Réponse",es:"Responder"},required:{en:"Required",zh:"必填",jp:"必需",fr:"Requis",es:"Obligatorio"},readmore:{en:"More",zh:"阅读更多",jp:"続きを読む",fr:"Lire de plus",es:"Leer más"},readdetail:{en:"More",zh:"查看详情"},save:{en:"Save",zh:"保存",jp:"保存",fr:"Sauvegarder",es:"Guardar"},savenew:{en:"Save as",zh:"另存为"},saving:{en:"Save",zh:"保存",jp:"保存",fr:"En sauvegarde",es:"Guardar"},savingDraft:{en:"Saving",zh:"保存中",jp:"保存中",fr:"Brouillon en sauvegarde",es:"Guardando"},saveDraft:{en:"Save Draft",zh:"保存草稿",jp:"下書きを保存する",fr:"Brouillon sauvegardé",es:"Guardar borrador"},selectAll:{en:"Select All",zh:"全选",jp:"全選択",fr:"Tout sélectionner",es:"Seleccionar todo"},selectTimeNode:{en:"Select Time Nodes",zh:"选择时间节点",jp:"タイムノードを選ぶ",fr:"Sélectionner les noeuds horaires",es:"Seleccionar nodos temporales"},selectTimeMapCNode:{en:"Select Timemap Center node",zh:"选择时间节点",jp:"タイムノードを選ぶ",fr:"Sélectionner le noeud du Centre de la Carte-temporelle",es:"Seleccionar el nodo del mapa de tiempo"},selectVolumnName:{en:"Select Volumn Name",zh:"选择章节(分册)名称"},selectFile:{en:"Select Files",zh:"选择文件",jp:"ファイルを選択する",fr:"Sélectionner les fichiers",es:"Seleccionar Archivos"},setting:{en:"Settings",zh:"设置",jp:"設定",fr:"Paramètres",es:"Preferencias"},share:{en:"Share",zh:"分享",jp:"シェア",fr:"Partager",es:"Compartir"},systemNotify:{en:"Notification",zh:"系统通知",jp:"通知",fr:"Système",es:"Sistema"},submit:{en:"OK",zh:"确认",jp:"確定",fr:"Bon",es:"Sí"},success:{en:"Success",zh:"成功",jp:"成功",fr:"Succès",es:"Logro"},fail:{en:"Fail",zh:"失败",jp:"失败"},startPointName:{zh:"起点条目名称",en:"start point"},synonym:{en:"Synonym",zh:"同义词",jp:"類義語",fr:"Synonyme",es:"Sinónimo"},tags:{en:"Tags",zh:"标签",jp:"タグ",fr:"Étiquettes",es:"Etiquetas"},text:{en:"Text",zh:"文本",jp:"テキスト",fr:"Texte",es:"Textos"},time:{en:"Time",zh:"时间",jp:"時間",fr:"Temps",es:"Tiempo"},title:{en:"Title",zh:"标题",jp:"タイトル",fr:"Titre",es:"Título"},terms:{en:"Agreement",zh:"用户服务协议",jp:"利用規約",fr:"Termes",es:"Términos"},license:{en:"License",zh:"营业执照"},agreementPrivate:{en:"private",zh:"隐私协议"},timemap:{en:"Timemap",zh:"时空地图",jp:"タイムマップ",fr:"Carte de temps",es:"Mapa de tiempo"},to:{en:"to",zh:"至",jp:"へ",fr:"à",es:"a"},total:{en:"Total",zh:"总计",jp:"合計",fr:"Total",es:"En total"},updateTime:{en:"Update",zh:"更新时间",jp:"更新日時",fr:"Renouveler le temps",es:"Actualizar"},uploadFromMedia:{zh:"从图片库导入",en:"Import From Library",jp:"ライブラリーから導入する",fr:"Importer de la bibliothèque",es:"Importar desde la librería"},uploadFromArticle:{zh:"从正文导入",en:"Import From Article"},untitled:{en:"Untitled",zh:"未命名",jp:"無題",fr:"Innommé",es:"Sin título"},url:{en:"URL",zh:"链接地址",jp:"URL",fr:"URL",es:"URL"},usercenter:{en:"User Center",zh:"用户中心",jp:"ユーザ－センター",fr:"Centre d'utilisateurs",es:"Centro de Usuario"},userInfo:{en:"User Info",zh:"用户信息",jp:"ユーザー情報",fr:"Informations d'utilisateur",es:"Información de Usuario"},username:{en:"Username",zh:"用户名",jp:"ユーザー名",fr:"Nom d'utilisateur",es:"Nombre de Usuario"},view:{en:"View",zh:"查看",jp:"見る",fr:"Voir",es:"Leer"},viewX:{en:"View $k{0}",zh:"查看$k{0}",jp:"見る$k{0}",fr:"Voir $k{0}",es:"Leer $k{0}"},viewAll:{en:"View All",zh:"查看全部",jp:"全て見る",fr:"Voir tout",es:"Leer todo"},viewMore:{en:"View More",zh:"查看更多",jp:"全て見る",fr:"Voir tout",es:"Leer todo"},viewAllMessage:{en:"View All Messages",zh:"查看所有消息",jp:"メッセージを全部見る",fr:"Voir tous les messages",es:"Leer todos los mensajes"},video:{en:"Video",zh:"视频",jp:"ビデオ",fr:"Vidéo",es:"Vídeos"},visits:{en:"Visits",zh:"浏览次数",jp:"訪問",fr:"Visites",es:"Visitas"},XisRequired:{en:"$k{0} is required",zh:"请填写$k{0}",jp:"$k{0}ご入力ください",fr:"$k{0} est requis",es:"Introduzca $k{0}"},tipNoX:{en:"This entry doesn't has $k{0}",zh:"该条目暂无$k{0}",jp:"本項目には$k{0}がありません",fr:"Cette entrée n'a pas de $k{0}",es:"Esta artículo no contiene $k{0}"},tipImageDrag:{en:"or drag Image to upload",zh:"或拖拽图到框内上传",jp:"あるいは写真を枠の中に移動してアップロードします",fr:"ou tirer l'image pour la télécharger",es:"o arrastrar la imágen para subir"},tipImageUpload:{en:"Image shoud be larger than 100 × 50px, and less than 16MB. Use 'Ctrl' to select more images.",zh:"注意：选取的图片尺寸应大于100×50，大小应小于16MB, 按Ctrl键可支持多选，每次最多添加100张图片",jp:"写真のサイズは100×50以上、16MB以下にしなければなりません。コントロールキーを押すと、多選ができます。毎回多くとも写真百枚を追加することができます。",fr:"La taille de l'image doit être supérieure à 100 × 50 px et inférieure à 16 MB. Utilisez 'Ctrl' à sélectionner plus d'images.",es:"El tamaño de la imagen debe ser mayor a 100 × 50px, y menor a 16MB. Use 'Ctrl' para seleccionar más imágenes."},tipOtherUploadWay:{en:"Other",zh:"其他上传方式",jp:"その他",fr:"d'autres",es:"Otros"},tipVideoSupport:{en:"Currently support Youku, Tencent & Iqiyi sharing iframes",zh:"目前支持优酷、腾讯、爱奇艺",jp:"ただいまサポートするのはヨウク、テンセント、iQIYIです。",fr:"Soutenir actuellement Youku & Tencent & Iqiyi pour partager les iframes",es:"Por el momento se sportan Tencent, Youku y Iqiyi"},tipStartEndTime:{en:"End time must be later than start time.",zh:"开始日期不得晚于结束日期",jp:"開始時間を終了時間の前に設定しなければならない",fr:"L'heure de fin doit être tard à l'heure de débu.",es:"La fecha de finalización debe ser posterior a la fecha de inicio."},tipTimeinput:{en:"Time Description (ex: Kang Xi), less than 40 chars",zh:"时间描述，如康熙元年(不超过20字)",jp:"時間を説明する文字ご入力ください。例：康熙元年（20文字以内お願いします）",fr:"Description du temps (ex: KangXi), moins de 40 caractères",es:"Descripción de tiempo (ej: Kangxi), menos de 40 caracteres"},waiting:{en:"Waiting",zh:"等待中",jp:"お待ちください",fr:"En attente",es:"Esperando"},works:{en:"Works",zh:"作品",jp:"作品",fr:"Œuvres",es:"Obras"},worksAndMedia:{en:"WorksAndMedia,",zh:"作品/媒体"},wordsLeft:{en:"${0} left",zh:"还剩余${0}个字",jp:"まだ${0}が残っている",fr:"${0} reste",es:"quedan ${0}"},wordsBeyond:{en:"beyond ${0}",zh:"已超出${0}个字"},yes:{en:"yes",zh:"是",jp:"はい",fr:"oui",es:"sí"},myTimeMap:{en:"my Timemap",zh:"我的时空地图"},createNode:{en:"create Node",zh:"新建节点"},importNode:{en:"import Node",zh:"导入节点"},createSpecialTimeMap:{en:"create special Timemap",zh:"创建时空地图专题"},pleaseEnterSubjectDesc:{en:"please enter subject description",zh:"请输入专题描述"},pleaseEnterSubjectTitle:{en:"please enter subject title",zh:"请输入专题标题"},confirm:{en:"confirm",zh:"确定"},cover:{en:"cover",zh:"封面"},custom:{en:"custom",zh:"自定义"},pleaseEnterTitle:{en:"please enter title",zh:"请输入标题"},thereIsNoTimeMapInfoPleaseAdd:{en:"There is no Timemap information, please create them",zh:"还没有时空地图信息，请添加"},thereIsNoTimeMapInfo:{en:"There is no Timemap information",zh:"还没有时空地图信息"},pleaseEnterTheKeyWord:{en:"please enter the keyword",zh:"请输入搜索词"},noNodeInfo:{en:"there is no node info",zh:"没有节点信息"},import:{en:"import",zh:"导入"},thereIsNoSubjectPromote:{en:"there is no Timemap Subject recommend",zh:"暂无专题推荐"},westernLiterature:{zh:"西方文学",en:"western literature"},orientalLiterature:{zh:"东方文学",en:"oriental literature"},bookUnit:{zh:"本",en:"books"},pleaseInputKeywords:{zh:"请输入关键词",en:"Please input keywords"},pleaseEnterTheTitleOfTheBookOrAuthor:{zh:"请输入书名或作者名",en:"Please enter the title of the book or author"},pleaseInputPaintingNameOrPainterName:{zh:"请输入画名或画家名",en:"Please input painting name or painter's name"},hide:{zh:"隐藏",en:"Hide"},moduleEditingLock:{zh:"抱歉，该内容${0}正在编辑中，建议您稍后再次尝试。"},dangerousContentLock:{zh:"您提交的内容包含违规信息无法保存"},moduleCheckingByMyself:{zh:"您已经对当前条目存在待审核版本，如需修改此版本，请移至个人中心“待审核”列表进行编辑。"},moduleIsChecking:{zh:"您已提交的版本正在审核中，建议您稍后再次尝试。"},checkingBestEntry:{zh:"该条目正在进行加精审核，暂时无法编辑。"},moduleCheckingByOthers:{zh:"抱歉，该内容正在审核中，暂不支持编辑，建议您稍后再次尝试。"},bestEntryIsUneditable:{zh:"该条目为精品条目，暂不开放编辑。"},nodeItemLocking:{zh:"您提交的内容已存在（审核中）。"},lockedEntryUneditable:{zh:"该条目已锁定，暂不开放编辑。"},aNonexistentEntry:{zh:"抱歉，该条目不存在。",en:"A nonexistent entry"},contentAlreadyExists:{zh:"您所提交的内容已存在",en:"The content you submitted already exists"},worksAndContribution:{zh:"作品及贡献",en:"Works And Contribution"},cantFind:{zh:"抱歉，找不到您想找的相关$k{0}",en:"Sorry,Can't find related $k{0}."},noContent:{zh:"暂无相关内容",en:"No Content"},noComments:{zh:"暂无评论",en:"No Comments"},hotComments:{zh:"热门评论",en:"Hot Comments"},allComments:{zh:"全部评论",en:"All Comments"},commentSuccess:{zh:"评论成功",en:"Comment successful"},commentFailed:{zh:"评论失败",en:"Comment failed"},commentPlaceholder:{zh:"评论字数限$k{0}字",en:"The number of commentary words is limited to $k{0} words"},statement:{zh:"本文仅代表原作者观点，不代表平台立场",en:"This article only represents the original author's point of view, not the platform position"},wordsCount:{zh:"字数",en:"Words"},readingDuration:{zh:"阅读约$k{0}分钟",en:"Read for about $k{0} minutes"},limitedWords:{zh:"限制字数为$k{0},已超出",en:"Words should be less than $k{0}"},pleaseRefresh:{zh:"你懂的！刷新重试一下吧！",en:"Please refresh the page and try again."},pageNotExist:{zh:"您要找的页面不存在",en:"The page isn't Exist."},linkIncorrectReason:{zh:"可能是因为链接地址有误或该页面已被作者删除",en:"Maybe the link is incorrect or the page has been deleted by its author"},noBookSummary:{zh:"暂未收录改古籍简介！",en:"Not included the summary of the ancient books."},prevPage:{zh:"上一页",en:"Prev"},nextPage:{zh:"下一页",en:"Next"},PaintingTags:{zh:"画作标签",en:"Tag of paintings"},PaintingLocation:{zh:"收藏地图",en:"Painting Collection Map"},ATotalOf:{zh:"共有",en:"A total of"},Collections:{zh:"件藏品",en:"collections"},PictureInformation:{zh:"图片信息",en:"Picture information"},DescriptionOfPaintings:{zh:"画作描述",en:"Description of painting"},PaintingRecommendation:{zh:"画作推荐",en:"Painting recommendation"},WheelPlanting:{zh:"打开多媒体轮播",en:"Open Multimedia Roadcasting"},LookOver:{zh:"查看",en:"Look over"},AllPaintings:{zh:"的全部画作",en:"all paintings"},GoBack:{zh:"返回",en:"Go back to"},AllPaintingFirst:{zh:"全画作首页",en:"All Painting Home Page"},LastPage:{zh:"上一页",en:"previous page"},SearchResultsPage:{zh:"搜索结果页",en:"search results page"},LabelResultPage:{zh:"标签结果页",en:"Label Result Page"},register:{zh:"注册",en:"Register"},loginSuccess:{zh:"登录成功",en:"Login success"},unbindSuccess:{zh:"解绑成功",en:"Unbinding success"},bindSuccess:{zh:"绑定成功",en:"Binding success"},verifySuccess:{zh:"验证成功",en:"Verify success"},loginOrRegister:{zh:"登录/注册",en:"Login or Register"},loginOrRegisterBySMS:{zh:"短信登录/注册",en:"SMS"},bindingPhone:{zh:"绑定手机号",en:"Binding the phone number"},bindingNewPhone:{zh:"绑定新手机号",en:"Binding the new phone number"},verifyPhone:{zh:"验证手机号",en:"Verify the Phone"},sendSuccess:{en:"Successful Sending of SMS Code",zh:"短信验证码发送成功"},sendAgain:{zh:"$k{0}秒后重新发送",en:"Resend after $k{0} seconds"},sendAgainBtn:{zh:"重新发送",en:"Resend"},enterPhone:{zh:"请输入手机号",en:"Phone Number"},enterValidPhone:{zh:"请输入正确的手机号",en:"Invalid Phone Number"},enterVerificationCode:{zh:"输入手机验证码",en:"SMS Code"},enterCaptcha:{zh:"请输入图形验证码",en:"Enter the Captcha"},enterCorrectCaptcha:{zh:"请输入正确的图形验证码",en:"Invalid Captcha"},changeOne:{zh:"换一张",en:"Change"},getVerificationCode:{zh:"获取验证码",en:"Get SMS code"},noCode:{zh:"收不到验证码？",en:"Cannot receive SMS code?"},errorCode:{zh:"短信验证码错误",en:"SMS code error"},cancelResetPhone:{zh:"您取消了手机号修改",en:"You cancelled the phone number modification"},agreeAgreement:{zh:"表示同意",en:" means you agree to "},userAgreement:{zh:"《全历史用户协议》",en:"User Agreement"},privacyAgreement:{zh:"《隐私协议》",en:"privacy Agreement"},thirdparty:{zh:"第三方收集个人信息的情况",en:"Collection of personal information by third parties"},continueBind:{zh:"去绑定",en:"Binding"},jumpOver:{zh:"跳过",en:"Jump Over"},jumpBind:{zh:"暂不绑定，使用浏览模式",ne:"Jump Over"},continue:{zh:"继续",en:"Continue"},next:{zh:"下一步",en:"Next"},thirdLogin:{zh:"其他登录方式",en:"Sign in directly with a third party account"},enterAllhistory:{zh:"进入全历史",en:"Enter the Allhistory"},bindingPrompt:{zh:"为完成相关法律法规关于实名认证的要求，请您绑定手机号，否则仅能以浏览模式使用我们的服务。",en:"For better service, please bind your mobile phone number, otherwise you will not be able to use editing, commenting, etc."},and:{zh:"和",en:" and "},badRequest:{zh:"请求失败",en:"Bad Request"},error888Button:{zh:"我知道了",en:"OK"},error888Title:{zh:"服务器更新中，请稍后使用",en:"Oh, NO! Server is down."},loginWithPassword:{zh:"帐号密码登录",en:"Account"},forgetPassword:{zh:"忘记密码？",en:"Forget Password?"},inputUserName:{zh:"请输入用户名",en:"Enter your user name"},inputPassword:{zh:"请输入密码",en:"Enter your password"},setNewPassword:{zh:"设置新密码",en:"Set a New Password"},inputNewPassord:{zh:"输入新密码",en:"Enter a new password"},passwordRule:{zh:"8-24位字母数字组合",en:"8-24 digits combined with numbers"},setPasswordSuccess:{zh:"设置密码成功，请重新登录！",en:"Set the password successfully, please log in again!"},wrongPasswordFormat:{zh:"密码格式错误",en:"Wrong password format"},industryTimeline:{en:"timeline",zh:"的时间线"},CreateNewItem:{en:"New entry",zh:"新建词条"},CreateArticle:{en:"New article",zh:"发文章"},CreateVideo:{en:"New video",zh:"发视频"},CreateKnow:{en:"New know",zh:"知识天梯"},revoke:{en:"revoke",zh:"撤销"}},detail:{AofB:{en:"$k{0} of $k{1}",zh:"$k{1}的${0}",jp:"$k{1}の${0}",fr:"$k{0} de $k{1}",es:"$k{0} de $k{1}"},leftNavBar:{zh:"导航",en:"MENU"},alsoKnownAs:{en:"also known as",zh:"又称",jp:"とも呼ばれる。",fr:"appelé aussi",es:"se conoce también"},editMainText:{en:"Edit",zh:"编辑正文",jp:"編集する",fr:"Rédiger",es:"Editar"},entryBeVerify:{en:"Entry locked. This entry is under audit.",zh:"该条目正在审核中，条目已锁定",jp:"本項目は審査中、ロックされています。",fr:"Cette entrée est en cours de révision.",es:"El artículo está bajo revisión."},top:{en:"Top",zh:"顶部"},entryForbiddenEdit:{en:"The entry is not acceptable for editing.",zh:"此条目禁止编辑",jp:"本項目は編集不可となります。",fr:"Il est interdit de rédiger cette entrée;",es:"Se prohibe editar este artículo."},isEditingLock:{en:"is editing, the entry is locked!",zh:"正在编辑该条目，条目已锁定",jp:"本項目は編集されていますので、ロックされています。",fr:"en cours de rédaction, ce document est verrouillé!",es:"se está editando el artículo, se ha bloqueado el artículo!"},isReviewLock:{en:"is auditing, the entry is locked!",zh:"正在审核该条目，条目已锁定",jp:"本項目は審査中、ロックされています。",fr:"en cours de rédaction, ce document est verrouillé!",es:"se está examinando el artículo, se ha bloqueado el artículo!"},relativeSubject:{en:"Subjects",zh:"相关专题",jp:"関連テーマ",fr:"Sujets connexes",es:"Temas relacionados"},relativeArticle:{en:"Articles",zh:"相关文章",jp:"関連文章",fr:"Articles connexes",es:"Artículos"},relativeImage:{en:"Images",zh:"相关图片",jp:"関連写真",fr:"Images connexes",es:"Imágenes"},sameNameTips:{en:"The entry exists. Please add disambiguation.",zh:"已有同名条目，请添加消歧义项",jp:"同名項目が存在していますので、曖昧さ回避を追加してください。",fr:"Il existe cette entrée, ajoutez la désambiguïsation SVP.",es:"Ha existido el artículo del mismo nombre, añade la desambiguación por favor."},timeDec:{en:"Chronological",zh:"时间由近到远",jp:"時間は近くから遠くへ",fr:"Temps de près à loin",es:"Tiempo de cerca a lejos"},timeInc:{en:"Reverse Chronological",zh:"时间由远到近",jp:"時間は遠くから近くへ",fr:"Temps de loin à près",es:"Tiempo de lejos a cerca"},leftSideMainText:{en:"Detail",zh:"首页",jp:"本文紹介",fr:"Détail",es:"Detalle"},leftSideTimeline:{en:"Timeline",zh:"时间线",jp:"タイムライン",fr:"Chronologie",es:"Línea de tiempo"},leftSideTimemap:{en:"Timemap",zh:"时空地图",jp:"タイムマップ",fr:"Carte de temps",es:"Mapa de Tiempo"},leftSideGraph:{en:"Graphs",zh:"图谱",jp:"図鑑",fr:"Cartes",es:"Gráficos"},leftSideProduct:{en:"Works",zh:"作品",jp:"作品",fr:"Œuvres",es:"Obras"},leftSideArticle:{en:"Articles",zh:"相关文章",jp:"関連文章",fr:"Articles",es:"Artículos"},leftSideLibs:{en:"Library",zh:"资料库",jp:"ライブラリー",fr:"Librairie",es:"Librería"},currentCluster:{en:"Current cluster",zh:"当前行业"},polysemousTips:{en:"is a polysemous word (${0} polysemy $p{0,items,item})",zh:"是一个多义词，请在下列义项上选择浏览（共${0}个多义项)",jp:"は多義語で、項目お選びください。（合計${0}個）",fr:"est un mot polysémique (${0} polysémie $p{0, articles, article})",es:"es una palabra polisémica (${0} polisemia $p{0,artículos,artículo})"},submitInVerfy:{en:"Submission successful! Please wait for audit.",zh:"您此次的提交已成功，正在审核中",jp:"ご提出ありがとうございました。ただいま審査中となります。",fr:"Ce que vous avez soumis a été acceptée et est en cours de révision.",es:"La entrega se ha logrado y está en proceso de revisión."},saveZeroNodesTimeline:{en:"Are your sure to save a empty timeline?",zh:"您确定保存无节点的时间线么?"},viewTimes:{en:"Views:",zh:"浏览次数"},creator:{en:"Creator",zh:"创建者"},updateTime:{en:"Updated",zh:"更新时间"},lastAuthor:{en:"Last Author",zh:"最后编辑者"},historicalRecord:{en:"Historical Record",zh:"史料记载"},mapPickerErrorMsgNoPick:{en:"Please mark a position and try again.",zh:"请在地图上标注位置，打点后才允许提交。"},mapPickerMark:{en:"Mark",zh:"标记位置"},mapPickerSearchPlaceholder:{en:"Search with position name",zh:"按地图或位置名称搜索"},mapPickerPointname:{en:"Give a name",zh:"地点命名"},mapPickerErrorMsgNoName:{en:"A name is required",zh:"请输入地点名称"},mapPickerInputPlaceholder:{en:"Location name",zh:"请输入地理名称"},mapPickerErrorMsgCannotFind:{en:"No result, please try again or mark on the map directly",zh:"无相关地点，请更换搜索词或在地图标记位置"},mapPickerWrongMark:{en:"Wrong position? Please fix it",zh:"位置不对？请纠错"},productTitle:{en:"title",zh:"标题"},productAuthor:{en:"author",zh:"作者"},industryTimeline:{en:"timeline",zh:"的时间线"},earliest:{en:"earliest",zh:"最早"},latest:{en:"latest",zh:"最晚"},addingHistoricalRecords:{en:"Adding historical records",zh:"添加史料记载"},readMore:{en:"read more",zh:"阅读更多"},noPictures:{en:"No pictures available for the time being",zh:"暂时没有相关图片"},youAdd:{en:"Wait till you add it",zh:"等你来添加"}},family:{familyTreeDesc:{en:"Family Tree shows a person’s connections with other people through kinship (the family that he or she was born into, married into, or adopted into). Do you know that some Chinese and European royal families keep records of over 100 generations of records? Which spans over two thousand years. Family Tree is a great way to visualize such information, and it also merges with Butterfly Effect and Knowledge Graph, so that the user can have a most comprehensive way to consume knowledge.",zh:"你知道一些中国和欧洲王室家族族谱有100多代？ 跨越两千多年！ 族谱是这类家族信息最佳的可视化呈现，它与蝴蝶效应和关系图谱合并，以便用户可以拥有最全面的知识消费方式。"},jumpPrompt:{en:"jump prompt",zh:"跳转提示",jp:"ジャンププロンプト",fr:"Indiquer le saut",es:"aviso de salto"},jumpPromptContent:{en:"Leave the current genealogy,Into ${0}'s genealogy?",zh:"离开当前族谱，进入${0}的族谱？",jp:"当系図から離れて、${0}の家系図に入りますか？",fr:"Quitter la généalogie actuelle à la généalogie de ${0}?",es:"¿Salir de la genealogía avtual y entrar la genealogía de ${0}?"},birth:{en:"birth",zh:"生于",jp:"出身",fr:"Né",es:"nacimiento"},death:{en:"death",zh:"死于",jp:"死去",fr:"mort",es:"muerte"},prompt:{en:"prompt",zh:"提示",jp:"通知",fr:"indiquer",es:"aviso"},moveToOtherFamilyTree:{en:"move to ${0}'s family tree",zh:"移动到${0}的族谱信息？",jp:"${0}の家系図に移動しますか？",fr:"Déplacer à l'arbre généalogique de ${0}?",es:"moverse al árbol genealógico de ${0}"},saveSuccess:{en:"save success",zh:"保存成功",jp:"保存済み",fr:"Réussir à sauvegarder",es:"se ha guardado"},copySuccess:{en:"copy success",zh:"复制成功",jp:"コピー完了",fr:"Réussir à copier",es:"se ha copiado"},usersFamily:{en:"${0}'s family tree",zh:"${0}的族谱",jp:"${0}の家系図",fr:"arbre généalogique de ${0}",es:"´´el árbol genealógico de ${0}´´"},allhistoryFamily:{en:"Allhistory family tree",zh:"全历史 族谱",jp:"オールヒストリー　家系図",fr:"Toute l'histoire l'arbre généalogique",es:"´´el árbol genealógico de ${0}´´"},marriageTime:{en:"married in:",zh:"结婚时间：",jp:"結婚日：",fr:"date de mariage",es:"tiempo del matrimonio:"},divorceTime:{en:"divorced in:",zh:"离婚时间：",jp:"離婚日：",fr:"fate de divorce",es:"tiempo del divorcio:"},timeOfMarriageAndStop:{en:"start and stop times of marriage:",zh:"婚姻起止时间：",jp:"婚姻の始めと終わりの時間：",fr:"Début et fin du mariage:",es:"Tiempo del inicio y acabamiento del matrimonio:"},addParents:{en:"add parents",zh:"添加父母",jp:"両親を追加する",fr:"ajouter les parents",es:"añadir a los padres"},addSpouses:{en:"add spouses",zh:"添加配偶",jp:"配偶者を追加する",fr:"ajouter l'epoux(se)",es:"añadir al cónyuge"},addChildren:{en:"Add children",zh:"添加子女",jp:"子女を追加する",fr:"Ajouter les enfants",es:"Añadir a los niños"},theMemberHasAlreadyExisted:{en:"The member has already existed",zh:"该成员已存在",jp:"このメンバーが既に存在しています。",fr:"Le membre existe déjà",es:"Ha existido este miembro"},pleaseChooseTheRightMembers:{en:"Please choose the right members",zh:"请选择正确的成员",jp:"正しいメンバーお選びください。",fr:"Choisissez les membres corrects",es:"Seleccione los miembros correctos, por favor"},create:{en:"create",zh:"创建",jp:"作成する",fr:"créer",es:"crear"},genealogicalRelationship:{en:"Genealogical relationship",zh:"族谱关系",jp:"系図関係",fr:"Relation généalogique",es:"Parentesco Genealógico"},father:{en:"father",zh:"父亲",jp:"父親",fr:"père",es:"padre"},mother:{en:"mother",zh:"母亲",jp:"母親",fr:"mère",es:"madre"},memberName:{en:"member name",zh:"成员名称",jp:"メンバーネーム",fr:"nom de membre",es:"nombre del miembro"},pleaseEnterTheNameOfTheMember:{en:"Please enter the name of the member",zh:"请输入成员名称",jp:"メンバーネームご入力ください",fr:"Entrez le nom du membre",es:"Introduzca el nombre del miembro, por favor"},wife:{en:"wife",zh:"妻子",jp:"妻",fr:"femme",es:"esposa"},husband:{en:"husband",zh:"丈夫",jp:"夫",fr:"mari",es:"esposo"},theMarriageTime:{en:"married in",zh:"婚姻时间",jp:"結婚日",fr:"date de mariage",es:"tiempo del matrimonio"},son:{en:"son",zh:"儿子",jp:"息子",fr:"fils",es:"hijo"},daughter:{en:"daughter",zh:"女儿",jp:"娘",fr:"fille",es:"hija"},whetherOrNotToAdopt:{en:"adopted or not",zh:"是否收养",jp:"養子にしますか",fr:"adopter ou non",es:"si lo adoptan o no"},no:{en:"no",zh:"否",jp:"いいえ",fr:"non",es:"no"},yes:{en:"yes",zh:"是",jp:"はい",fr:"oui",es:"sí"},cancel:{en:"cancel",zh:"取消",jp:"キャンセル",fr:"annuler",es:"cancelar"},confirm:{en:"confirm",zh:"确定",jp:"確定",fr:"confirmer",es:"confirmar"},addMember:{en:"add member",zh:"添加成员",jp:"メンバーを追加する",fr:"ajouter le membre",es:"añadir al miembro"},expandMember:{en:"unfold the member",zh:"展开成员",jp:"全てのメンバー",fr:"étendre le membre",es:"expandir al miembro"},deleteMember:{en:"delete member",zh:"删除成员",jp:"メンバーを削除する",fr:"supprimer le membre",es:"eliminar al miembro"},editTheMemberOfGenealogical:{en:"edit the member of genealogical",zh:"编辑族谱成员",jp:"家系図のメンバーを編集する",fr:"rédiger les membres généalogiques",es:"editar al miembro de la genealogía"},editMode:{en:"edit mode",zh:"编辑模式",jp:"編集モード",fr:"modifier le mode",es:"modo de editar"},deletePrompt:{en:"delete prompt",zh:"删除提示",jp:"削除通知",fr:"indication de suppression",es:"aviso de eliminación"},youWantToDeleteThisMember:{en:"you want to delete this member?",zh:"确认删除该成员？",jp:"このメンバーを削除しますか？",fr:"voulez-vous supprimer ce membre?",es:"¿quiere eliminar a este miembro?"},theDeletedMembersAreBeingAudited:{en:"The deleted members are being audited",zh:"删除的成员正在审核中",jp:"削除するメンバーがただいま審査中となります。",fr:"Le membre supprimé est en cours de révision",es:"El miembro eliminado está en proceso de revisión"},notFoundTheMemberOfTheGenealogy:{en:"Not found the member of the genealogy",zh:"未找到该成员族谱",jp:"当メンバーの家系図が見つかりませんでした。",fr:"Ne pas trouver la généalogie de ce membre",es:"No ha encontrado la genealogía de este miembro"},pleaseSelectTheMembersFirst:{en:"Please select the members first",zh:"请先选择成员",jp:"メンバーお選びください",fr:"Choisissez d'abord les membres",es:"Seleccione a los miembros primero, por favor"},theMembersYouHaveAddedAreBeingAudited:{en:"The members you have added are being audited",zh:"您添加的成员正在审核中",jp:"追加したメンバーがただいま審査中となります",fr:"Le membre que vous avez ajouté est en cours de révision",es:"Los miembros que ha añadido están en proceso de revisión"},success:{zh:"添加成功"},edit:{en:"edit",zh:"编辑",jp:"編集する",fr:"rédiger",es:"editar"},modeSelection:{en:"mode selection",zh:"展开模式选择",jp:"モードお選びください",fr:"sélection de mode",es:"modo de selección"},expandMultiGeneration:{en:"unfold multi generations",zh:"展开多代",jp:"マルチ世代を開く",fr:"étendre plusieurs générations",es:"expandir las generaciones multiples"},unfoldOneGeneration:{en:"unfold one generation",zh:"展开一代",jp:"一世代を開く",fr:"étendre une génération",es:"expandir una generación"},positioningTheInitialFigure:{en:"Positioning the initial figure",zh:"定位初始人物",jp:"最初人物を位置づける",fr:"Loaliser la figure initiale",es:"Está localizando el personaje inicial"},illustrations:{en:"Illustrations",zh:"图例说明",jp:"イラストレーション",fr:"Illustrations",es:"Ilustrasiones"},marry:{en:"marry",zh:"结婚",jp:"結婚する",fr:"mariage",es:"casarse"},male:{en:"male",zh:"男性",jp:"男性",fr:"homme",es:"masculino"},female:{en:"female",zh:"女性",jp:"女性",fr:"femme",es:"femenino"},royalty:{en:"royalty",zh:"皇室",jp:"皇室",fr:"famille royale",es:"realeza"},expand:{en:"unfold",zh:"展开",jp:"展開する",fr:"étendre",es:"expandir"},collapse:{en:"fold",zh:"收起",jp:"閉じる",fr:"plier",es:"plegar"},share:{en:"share",zh:"分享",jp:"シェアする",fr:"partager",es:"compartir"},save:{en:"save",zh:"保存",jp:"保存する",fr:"sauvegarder",es:"guardar"},exitEdit:{en:"exit edit",zh:"退出编辑",jp:"編集を終了する",fr:"quitter la rédaction",es:"terminar la edición"},thereIsNoGenealogicalInformationForThePurpose:{en:"There is no genealogical information of the item.",zh:"还没有该条目的族谱信息",jp:"本項目の家系図情報がありません。",fr:"Il n'y a pas d'information généalogique sur cette entrée",es:"No hay la información genealógica para este artículo"},thereIsNoGenealogicalInformationForTheUser:{en:"There is no ${0}'s genealogical information",zh:"还没有<span>“${0}”</span>的族谱信息",jp:"<span>“${0}”</span>の家系図情報がまだありません。",fr:"Il n'y a pas d'information généalogique sur ${0}",es:"No hay la información genealógica de ${0}"},statistics:{en:"statistics",zh:"统计",jp:"統計",fr:"statistique",es:"estadísticas"},theGenerationsHaveBeenUnfolded:{en:"<span>${0}</span> generations have been unfolded",zh:"已经展开 <span>${0}</span> 代",jp:"<span>${0}</span> 世代が開きました。",fr:"les générations de <span>${0}</span> ont été dépliées",es:"Han expandido las generaciones <span>${0}</span>"},theNumberOfPerson:{en:"There are <span>${0}</span> people",zh:"有 <span>${0}</span> 人",jp:"<span>${0}</span> 人あります。",fr:"Il y a des personnes de <span> $ {0} </ span>",es:"Hay <span>${0}</span> personas"},pleaseEnterTheNameOfTheMap:{en:"Please enter the name of the map",zh:"请输入图谱名称",jp:"図鑑名ご入力ください",fr:"Entrez le nom de la carte",es:"Introducza el nombre del mapa, por favor"},saveMapPrompt:{en:"Your graph will be saved to My Graph in User Center.",zh:"您的图谱将会保存到您的个人中心，您可在“个人中心”中的“我的图谱”内看到。",jp:"ご図鑑はプロフィールに保存しました。「プロフィール」の「私の図鑑」で見られます。",fr:'Votre atlas sera enregistré dans votre centre personnel et vous pouvez le voir dans "ma carte" du "centre personnel".',es:"Su gráfico se guardará en Mi Gráfico del Centro Personal."},saving:{en:"saving",zh:"保存中",jp:"保存中",fr:"en sauvegarde",es:"guardando"},searchName:{en:"search name",zh:"搜人物名称",jp:"人物を検索する",fr:"chercher le nom",es:"buscar el nombre"},saveFailed:{en:"save failed",zh:"保存失败"},yourChangesAreBeingAudited:{en:"your changes are being audited",zh:"您的修改正在审核中"},saveFaileds:{en:"save failed",zh:"保存失败"}},help:{helpCenter:{en:"Help",zh:"帮助中心",jp:"ヘルプ",fr:"Aide",es:"Auyda"},helpSearchPlaceholder:{en:"Describe your question",zh:"请输入需要帮助的内容",jp:"内容ご入力ください",fr:"Décrire votre question",es:"Describa su pregunta"},thereAre:{en:"There are",zh:"共找到",jp:"を見つかりました",fr:"Il y a",es:"Hay"},tiao:{en:"",zh:"条",jp:"本",fr:"",es:""},relatedHelpInformation:{en:"related help information",zh:"相关帮助信息",jp:"関連するヘルプ情報",fr:"Informations d'aide connexes",es:"informaciones relacionadas de ayuda"}},index:{slideTitleTimeline:{en:"Cluster Timeline",zh:"聚类时间线",jp:"クラスターのタイムライン",fr:"Chronologie de cluster",es:"Cronología del Racimo"},slideTitleTimeMap:{en:"Timemap",zh:"时空地图",jp:"タイムマップ",fr:"Carte de temps",es:"Mapa de Tiempo"},slideTitleRelation:{en:"Relation Graph",zh:"关系图谱",jp:"関係図",fr:"Carte de relation",es:"Gráfico de Relaciones"},slideTitleTimespace:{en:"Timespace Cylinder",zh:"时空柱",jp:"タイムスペースシリンダ",fr:"Cylindre d'espace-temps",es:"Cilindro del espacio-tiempo"},allPerson:{en:"Person",zh:"全人物"},allAncientBooks:{en:"Ancient books",zh:"全古籍"},allWars:{en:"Wars",zh:"全战争"},allPainting:{en:"Painting",zh:"全画作"},allEmpire:{en:"Empire",zh:"全帝国"},allHistoricalSite:{en:"Historical site",zh:"全古迹"},paidConsultation:{en:"Paid consultation",zh:"付费资讯"},goRelationShip:{en:"Relations",zh:"关系图谱"},goTimeMap:{en:"Timemap",zh:"时空地图"},oldSubject:{en:"Previous topics",zh:"往期专题"}},painting:{allPainting:{zh:"全画作",en:"Painting"},allPaintingDesc:{zh:"无论是中世纪绘画还是成化年间瓷器，或是任何具有艺术价值的东西，都能在全艺术找到。 Allhistory提供几十万超高分辨率艺术作品图片，让你把全历史画廊和博物馆藏品尽现手中。",en:"Paintings, Antiques and anything of artistic values to show, Find Arts is a central place to browsing hundreds of thousands of pieces of artifacts around the world, especially those collected in the museums or renowned collectors. Allhistory’s Fine Arts provides the ultra high resolution images of these find arts pieces, it’s finer than your physically walking into any gallery or museum to gaze at the real piece"},paintingSearch:{zh:"画作搜索",en:"Painting Search"},paintingSearchImage:{zh:"以图搜图",en:"Search Painting By Image"},paintingTag:{zh:"画作标签",en:"Painting Tag"},homeSearchPlaceholder:{zh:"输入画作名称或作者等搜索",en:"Painting name or author name"},homePaintingTotal:{zh:"共${0}幅",en:"total: ${0"},homeRelative:{zh:"相关的画作",en:"Painting"},homeSearchTotal:{zh:"共找到${0}条${1}相关的搜索结果",en:"${0} results about ${1}"},homeSorry:{zh:"抱歉，找不到您想要的画作!",en:"sorry, not found."},homeCategorys:{zh:"全画作",en:"Painting"},homeTimeline:{zh:"所属时期",en:"Period"},homeFilter:{zh:"筛选",en:"Filter"},homeFilterTitle:{zh:"风格流派、题材、材质",en:"style, theme, material"},homeOpen:{zh:"展开",en:"unfold"},homeClose:{zh:"收起",en:"fold"},homeMapBtn:{zh:"画作收藏地点",en:"Locate"},paintingMap:{zh:"画作收藏地图",en:"Painting Map"}},relation:{relationDesc:{en:"Knowledge Graph is both a grand visualization of the human knowledge as well as a powerful engine -- enable you to find the missing dots between anything 2 things and more. How Genghis Khan had influenced Isaac Newton, did Black Death play a role in the becoming of Renaissance? Come and find answers in Allhistory’s Knowledge Graph.",zh:"世上万事万物皆关联，称为蝴蝶效应或N度分离。关系图谱是人类知识的宏观可视化呈现，或者说强大引擎，可以帮你找到任意两个实体之间的关联。比如成吉思汗是如何影响牛顿的，黑死病是否在文艺复兴时期发挥了作用？赶快来全历史关系图谱找到答案吧。"},eightRelation:{en:"Eight Types of Relations",zh:"八向关系图"},filterBoxBtn1:{en:"Relation Filter",zh:"关系筛选",jp:"関係で絞り込む",fr:"Filtrer la relation",es:"Filtro de Enlaces"},filterBoxBtn2:{en:"Relation List",zh:"关系列表",jp:"関係リスト",fr:"Liste de relation",es:"Lista de Enlaces"},relationSearchBoxTitle:{en:"Search",zh:"关系搜索"},expanding:{en:"Expanding",zh:"关系探索"},filterBoxPart1ColorRender:{en:"Use Color",zh:"开启着色",jp:"着色する",fr:"User la couleur",es:"Usar Colores"},filterBoxPart1TimeFilter:{en:"Time Filter",zh:"时间筛选",jp:"時間で絞り込む",fr:"Filtrer le temps",es:"Filtro de Tiempo"},filterBoxPart1ToFilter:{en:"Item Filter",zh:"客体筛选",jp:"対象で絞り込む",fr:"Filtrer l'article",es:"Filtro de Objetos"},graphName:{en:"Please enter the Graph Name",zh:"请输入图谱名称",jp:"図鑑名ご入力ください",fr:"Entrez le nom de carte,SVP",es:"Nombre del Gráfico"},abGraphName:{en:"Please enter the Graph Name",zh:"请输入AB路径名称",jp:"図鑑名ご入力ください",fr:"Entrez le nom de carte,SVP",es:"Nombre del Gráfico"},editModeTitle:{en:"Edit Mode",zh:"编辑模式",jp:"編集モード",fr:"Mode de rédaction",es:"Modo de Editar"},editBoxPart1ConfirmPlaceholder:{en:"Please enter the Node name",zh:"请输入节点名称",jp:"ノードの名前ご入力ください",fr:"Entrez le nom de nœud, SVP",es:"Nombre del Nodo"},editBoxPart1ConfirmAlert:{en:"Please select the correct node",zh:"请选择正确的节点",jp:"正しいノードお選びください",fr:"Sélectionnez le nœud correct",es:"Seleccione el nodo correcto, por favor"},direction:{en:"Direction",zh:"方向",jp:"方向",fr:"Direction",es:"Dirección"},attributes:{en:"Attributes",zh:"属性",jp:"プロパティ",fr:"Attributs",es:"Atributos"},chooseType:{en:"type",zh:"选择分类"},editBoxPart2TableHeader:{en:"Relations of ${0}",zh:"${0} 的关系",jp:"${0} の関係",fr:"Relations de ${0}",es:"Relaciones de ${0}"},editBoxPart2TableAlert1:{en:"Your submission has been successful and is  being audited.",zh:"您此次的提交已成功，正在审核中",jp:"ご提出ありがとうございまして、ただいま審査中となります。",fr:"Ce que vous avez soumis a été acceptée et est en cours de révision.",es:"La entrega se ha logrado y está en proceso de revisión."},editBoxPart2TableAlert2:{en:"Delete success",zh:"删除成功",jp:"削除済み",fr:"Réussir à supprimer",es:"Se ha eliminado"},editBoxPart2EditorItemInputPlaceholder:{en:"Please enter the item name",zh:"输入条目",jp:"項目ご入力ください",fr:"Entrez le nom d'article,SVP",es:"Nombre del artículo"},editBoxPart2EditorRelationAlertInfo:{en:"The relation word should be no more than 18 words",zh:"关系词需保持在18个字以内",jp:"関係詞は18文字以内お願いします",fr:"Le mot de relation doit être moins de 18 mots",es:"La palabra de relación debe ser menos de 18 palabras"},editBoxPart2EditorDescTextLeft1:{en:"There are",zh:"还可输入",jp:"入力できます",fr:"I y a",es:"Quedan"},editBoxPart2EditorDescTextLeft2:{en:"word left",zh:"个字",jp:"文字",fr:"mot reste",es:"palabras"},editBoxPart2EditorAddLocationBtn:{en:"Click to add location",zh:"点击添加地点",jp:"場所を添加する",fr:"Cliquez à ajouter le lieu",es:"Haz clic para añadir la localidad"},editBoxPart2EditorTitleForNew:{en:"Create a new relation for ${0}",zh:"为${0}新建关系",jp:"${0}の新しい関係を追加する",fr:"Créer une nouvelle relation pour ${0}",es:"Crear una nueva relación para ${0}"},editBoxPart2EditorEditLocationBtn:{en:"Click to edit the location",zh:"点击编辑地点",jp:"場所を編集する",fr:"Cliquez à rédiger le lieu",es:"Haz clic para editar la localidad"},editBoxPart2EditorLeftBoxTitle:{en:"The relation of ${0} and ${1}",zh:"${0}和${1}的关系",jp:"${0}と${1}の関係",fr:"La relation entré ${0} et ${1}",es:"La relación entre ${0} y ${1}"},editBoxPart2EditorLeftTitle:{en:"Relation Exists",zh:"已存在关系列表",jp:"存在している関係",fr:"Relation Existé",es:"Ha existido la relación"},editBoxPart2EditorValidatorMsg1:{en:"Entry does not exist",zh:"条目不存在",jp:"項目が存在していません",fr:"L'entrée n'existe pas",es:"No existe el artículo"},editBoxPart2EditorValidatorMsg2:{en:"please enter the entry",zh:"请输入条目",jp:"項目ご入力ください",fr:"Remplissez l'entrée, SVP",es:"El artículo no puede estar vacía"},editBoxPart2EditorValidatorMsg3:{en:"please enter the relation",zh:"请输入关系",jp:"関係ご入力ください",fr:"Remplissez la relation, SVP",es:"La relación no puede estar vacía"},editBoxPart2EditorValidatorMsg4:{en:"Property name can not be empty",zh:"关系词不能为空",jp:"プロパティネームご入力ください",fr:"Le nom de propriété ne peut pas être vide",es:"El nombre de propiedad no puede estar vacía"},editBoxPart2EditorValidatorMsg5:{en:"too many relation words",zh:"关系词超长",jp:"関係詞が長すぎます",fr:"Mots de relation trop long",es:"Palabras de relación son demasiado largas"},editBoxPart2EditorValidatorMsg6:{en:"too much description",zh:"描述超长",jp:"説明が長すぎます",fr:"Description trop long",es:"Descripción es demasiado largo"},editBoxPart2EditorValidatorMsg7:{en:"No Relation Type",zh:"关系类型为必选项",jp:"説明が長すぎます",fr:"Description trop long",es:"Descripción es demasiado largo"},editBoxPart2EditorValidatorMsg8:{en:"Property name can not be empty",zh:"属性的键值不能为空",jp:"プロパティネームご入力ください",fr:"Le nom de propriété ne peut pas être vide",es:"El nombre de propiedad no puede estar vacía"},editBoxPar2EditorSaveConfirmContent:{en:"save the relation?",zh:"确认要保存关系吗？",jp:"関係を保存しますか？",fr:"Êtes-vous sûr de sauvegarder la relation?",es:"¿Está seguro de guardar la relación?"},editBoxPar2EditorSaveConfirmAlert1:{en:"Your submission has been successful and is being audited.",zh:"您此次的提交已成功，正在审核中",jp:"ご提出ありがとうございました。ただしま審査中となります。",fr:"Ce que vous avez soumis a été acceptée et est en cours de révision.",es:"La entrega se ha logrado y está en proceso de revisión."},editBoxPar2EditorSaveConfirmAlert2:{en:"Save success",zh:"保存成功",jp:"保存済み",fr:"Réussir à sauvegarder",es:"Se ha guardado"},saveBoxNoInput:{en:"The name is required",zh:"图谱名称不能为空"},editBoxPar2EditorSaveConfirmAlert3:{en:"This entry has been locked, please try again later",zh:"词条已被锁定，请稍后重试",jp:"項目がロックされました。あとで再試行してください。",fr:"Cette entrée a été verrouillée, veuillez réessayer plus tard",es:"Se ha bloqueado el artículo, intente otra vez luego"},LeftBoxSearchPlaceholder:{en:"Search item relation",zh:"搜索条目关系",jp:"項目関係を検索する",fr:"Chercher la relation d'entrée",es:"Buscar la relación del artículo"},NodeSearchABPathPlaceholder:{zh:"搜索目标条目，找寻关系路径",en:"Search item relation"},LeftBoxSearhNoEntry:{en:"No entry for ${0}",zh:"没有找到关于${0}的条目",jp:"${0}に関する項目が見つかりませんでした。",fr:"Pas d'entrée sur ${0}",es:"No hay artículos relacionadas con ${0}"},copyUrl:{en:"Copy",zh:"复制链接",jp:"URLをコピーする",fr:"Copier",es:"Copiar"},shareToOthers:{en:"Share with your friends",zh:"扫一扫分享给好友",jp:"シェアする",fr:"Partager avec vos amis",es:"Compartir con sus amigos"},saveGraphTips:{en:"Your graph will be saved to My Graph in User Center.",zh:"您的图谱将会保存到您的个人中心，您可在“个人中心 - 我的内容 - 关系图谱”内看到。",jp:"ご図鑑はプロフィールに保存しました。「プロフィール」の「私の図鑑」で見られます。",fr:'Votre atlas sera sauvegardé dans votre centre personnel et vous pouvez le voir dans "ma carte" du "centre personnel".',es:"Su atlas se guardará en el centro personal, que puede verlo en el mapa del centro personal."},saveABGraphTips:{en:"Your graph will be saved to My Graph in User Center.",zh:"您的图谱将会保存到您的个人中心，您可在“个人中心 - 我的内容 - AB路径”内看到。",jp:"ご図鑑はプロフィールに保存しました。「プロフィール」の「私の図鑑」で見られます。",fr:'Votre atlas sera sauvegardé dans votre centre personnel et vous pouvez le voir dans "ma carte" du "centre personnel".',es:"Su atlas se guardará en el centro personal, que puede verlo en el mapa del centro personal."},lock:{en:"LK+",zh:"锁定",jp:"ロック",fr:"Verrouiller",es:"Bloquear"},unlock:{en:"LK-",zh:"解锁",jp:"アンロック",fr:"Déverrouiller",es:"Desbloquear"},hide:{en:"Hide",zh:"隐藏",jp:"隠す",fr:"Cacher",es:"Ocultar"},unfold:{en:"Unfold",zh:"展开关系",jp:"開く",fr:"Déplier",es:"Desplegar"},relationLengthLimit:{en:"limit 18",zh:"18个字以内"},descriptionLengthLimit:{en:"limit 600",zh:"600个字以内"},hideRelation:{en:"Hide",zh:"隐藏关系",jp:"隠す",fr:"Cacher",es:"Ocultar"},noRelationExsits:{en:"no relation",zh:"图中暂无关系"},clickNodeToCreateRelation:{en:"Click node to create a relation",zh:"点击节点创建关系",jp:"ノードをクリックして関係を作成する",fr:"Cliquez sur le noeud pour créer une relation",es:"Haz clic en el nodo para crear la relación"},clickEmptyToCancel:{en:"Click the blank or the right mouse button to cancel the creation",zh:"点击空白处或鼠标右键取消创建",jp:"空白箇所をクリックするあるいは右クリックして作成をキャンセルします。",fr:"Cliquez sur des espaces vides ou sur le bouton droit de la souris pour annuler la création",es:"Haz clic en el blanco o el botón derecho del ratón para cancelar la creación"},recommend:{en:"Recommend",zh:"端点推荐",jp:"リコメンド",fr:"Recommander",es:"Recomendación"},path:{en:"Path",zh:"路径",jp:"パス",fr:"Chemin",es:"Camino"},pathLength:{en:"Path length",zh:"路径长度",jp:"パスの長さ",fr:"Longueur de chemin",es:"Longitud de Camino"},route:{en:"path entries",zh:"途经条目",jp:"ルート",fr:"Route",es:"Ruta"},routeStart:{en:"Start entry",zh:"起点条目名称",jp:"ルートスタート",fr:"Route de démarrage",es:"Inicio"},routePass:{en:"Passed entry",zh:"途经条目名称"},routePassNotExists:{en:"Passed entry do not exists",zh:"途经条目不存在"},routeEnd:{en:"End entry",zh:"终点条目名称",jp:"ルートエンド",fr:"Route de fin",es:"Final"},routeNoFilter:{en:"All",zh:"综合结果",jp:"全て",fr:"Tout",es:"Todo"},routePersonFilter:{en:"Person only",zh:"仅途经人物",jp:"パーソンオンリー",fr:"Personne seulement",es:"Personajes sólo"},routeFamilyFilter:{en:"Family only",zh:"仅途经亲属"},relationLockAlert1:{en:"The relation is being edited by ${0} and the entry has been locked.",zh:"${0}正在编辑该关系，条目已锁定"},relationLockAlert2:{en:"The relation is being reviewd and the entry has been locked.",zh:"该关系正在审核中，条目已锁定"},relationLockAlert3:{en:"The relation is forbidden to edit",zh:"该关系禁止编辑"},relationTypeHumanHuman:{en:"human-human",zh:"人与人"},relationTypeHumanNohuman:{en:"human-nonhuman",zh:"人与非人"},relationTypeNohumanNohuman:{en:"nonhuman-nonhuman",zh:"非人与非人"},relationTypeNohumanHuman:{en:"nonhuman-human",zh:"非人与人"},relationTypeFamily:{en:"Family",zh:"亲情"},relationTypeLove:{en:"Love",zh:"爱情"},relationTypeFriendship:{en:"Friend",zh:"友情"},relationTypeCareer:{en:"Work",zh:"工作"},relationTypeInfluence:{en:"Influence",zh:"影响"},relationTypeEnemy:{en:"Enemy",zh:"对立"},relationTypeTeach:{en:"Teach",zh:"师从"},relationTypeExperience:{en:"Experience",zh:"亲历"},relationTypeAchievement:{en:"Achievement",zh:"成就"},relationTypeDestroy:{en:"Destroy",zh:"破坏"},relationTypeLocation:{en:"Location",zh:"地点"},relationTypeOther:{en:"Other",zh:"其他"},relationTypeAttribution:{en:"Attribution",zh:"归属"},relationTypeEvolution:{en:"Evolution",zh:"演变"},abPathNotFindErrorMsg:{en:"No path exists, please try again",zh:"没有搜索到相关路径，请重新搜索"},relationDeleteConfirm:{en:"Make sure to delete this link?",zh:"确认要删除关系么?"}},search:{noSearchResult:{en:"Sorry, there is no related content.",zh:"很抱歉，没有找到与您搜索词相关的内容",jp:"申し訳ございません。問い合わせに合致する検索結果はありませんでした",fr:"Votre recherche ne correspond à aucun document",es:"No hay ningún documento relacionado con su búsqueda"},noSearchResultAboutBook:{en:"Sorry, there is no related book.",zh:"很抱歉，没有找到与您搜索词相关的书籍",jp:"申し訳ございません。問い合わせに合致する書籍はありませんでした。",fr:"Votre recherche ne correspond à aucun livre.",es:"No hay ningún libro relacionado con su búsqueda."},noSearchResultAboutImage:{en:"Sorry, there is no related image.",zh:"很抱歉，没有找到与您搜索词相关的图片",jp:"申し訳ございません。問い合わせに合致する写真はありませんでした。",fr:"Votre recherche ne correspond à aucune image.",es:"No hay ninguna imagen relacionada con su búsqueda."},entryAbout:{en:"related Entries",zh:"相关条目",jp:"関連項目",fr:"Entrées relatifs à",es:"Artículos relacionados"},bookAbout:{en:"related Books",zh:"相关书籍",jp:"関連書籍",fr:"Livres relatifs à",es:"Libros relacionados"},articleAbout:{en:"related Articles",zh:"相关文章",jp:"関連記事",fr:"Articles relatifs à",es:"Artículos relacionados"},imagesAbout:{en:"related Images",zh:"相关图片",jp:"関連画像",fr:"Images relatifs à",es:"Imagenes relacionadas"},entryAboutX:{en:"related Entries",zh:"关于${0}的条目",jp:"${0}に関する項目",fr:"Entrées relatifs à ${0}",es:"Artículos relacionados"},bookAboutX:{en:"related Books",zh:"关于${0}的书籍",jp:"${0}に関する書籍",fr:"Livres relatifs à ${0}",es:"Libros relacionados"},articleAboutX:{en:"related Articles",zh:"关于${0}的文章",jp:"${0}に関する文章",fr:"Articles relatifs à ${0}",es:"Artículos relacionados"},imagesAboutX:{en:"related Images",zh:"关于${0}的图片",jp:"${0}に関する写真",fr:"Images relatifs à ${0}",es:"Imagenes relacionadas"},noSearchResultAboutArticle:{en:"Sorry, there is no related articles.",zh:"很抱歉，没有找到与您搜索词相关的文章",jp:"申し訳ございません。問い合わせに合致する文章はありませんでした。",fr:"Votre recherche ne correspond à aucun article.",es:"No hay ningún artículo relacionado con su búsqueda."},didYouMean:{en:"Are you searching for:",zh:"您要找的是不是：",jp:"もしかして：",fr:"Voulez-vous dire:",es:"Si lo que está buscando es:"},welcomeToCreate:{en:"Welcome to create and share information about this entry！",zh:"欢迎您来创建，与广大网友分享关于该条目的信息。",jp:"この項目に関する情報を皆さんとシェアしましょうか。",fr:"Bienvenue à créer et à partager des informations sur cette entrée!",es:"¡Bienvenidos a crear y compartir informaciones sobre el artículo！"},notFindEntry:{en:"unfound : ",zh:"尚未收录条目",jp:"この項目はまだ収録していません。",fr:"Ne pas trouver l'entrée",es:"No ha encontrado Artículo : "},IWillCreate:{zh:"我来创建",en:"Create",jp:"作成する",fr:"Créer",es:"Crear"},bookSource:{zh:"来源：",en:"From:",jp:"から",fr:"de:",es:"Desde:"},imageSource:{zh:"来源：",en:"From:"},checkMap:{zh:"查看族谱",en:"checkGenealogy",jp:"家系図を見る",fr:"Voir la généalogie",es:"Ver genealogía"},relationGraphAboutX:{zh:"${0}的关系图谱",en:"relationGraph of ${0}",jp:"関係マップ",fr:"Carte de relation",es:"Mapa de relaciones"},abAladinFootText1:{zh:"基于Allhistory图谱大数据计算结果",en:"Base on graph data from Allhistory"},abAladinFootText2:{zh:"重新选",en:"try"},abAladinFootText2HoverTip:{zh:"您可以重新选择关系连点两端",en:"You can try again with different both ends."},abAladinFormBtnAdd:{zh:"增加途经条目",en:"Add pass item"},abAladinFormBtnRemove:{zh:"删除途经条目",en:"Remove pass item"},abPathAladin:{zh:"关系路径",en:"AB Path"},correlationMap:{zh:"相关图谱",en:"Correlation Map"}},static:{t_nocode:{zh:"为什么收不到短信验证码?",en:"Why can not receive SMS verification code?"},appDownload:{zh:"下载全历史APP",en:"Download Allhistory APP"},bookinvite:{zh:"全古籍校对官招募",en:"Allhistory"},articleHelp:{zh:"文章发布帮助",en:"Article publishing help"}},timemap:{timemapDesc:{en:"Timemap or Temporal Map is a whole new way to consume and visualize knowledge -- by organically integrating the time factor and space factor. With Timemap, you can immerse yourself in it and browse for historical events, people, and much more on fully interactive maps that are dated, taking Marco Polo as an example, how he travels the seas and deserts to reach Xanadu from Venice, what was it like in the 13th century around the world, it’s all within Allhistory’s Timemap.",zh:"时空地图是一种全新知识可视化呈现形式，有机结合时间和空间两个维度。您可以沉浸其中浏览阅读历史事件，人物等，还可以在不同年份历史地图上进行交互操作。以马可波罗为例，探索他如何在海上旅行，从威尼斯到元大都，13世纪的世界地图是什么样的，尽在全历史的时空地图。"},searchBoxPlaceholder:{en:"Search locations, figures, events",zh:"搜地点、人物、事件"},popularSearch:{en:"Hot search",zh:"热门搜索"},currentTime:{en:"Current time",zh:"当前时间"},currentMap:{en:"Current map",zh:"当前地图"},backText:{en:"Return node list",zh:"返回节点列表"},itemInfo:{en:"Node information",zh:"节点信息"},sameTime:{en:"Meanwhile",zh:"与此同时"},nearBy:{en:"Near here",zh:"在这附近"},changeOneChange:{en:"refresh",zh:"换一换"},previousOne:{en:"The previous",zh:"上一个"},nextOne:{en:"The next",zh:"下一个"},few:{en:"pics",zh:"张"},lifeProcess:{en:"Life process",zh:"生命进程"},relatedArticles:{en:"Related articles",zh:"相关文章"},relatedBooks:{en:"Related books",zh:"相关书籍"},viewSpot:{en:"viewSpot",zh:"景点"},discussionGroup:{en:"Discussion group",zh:"讨论组"},displayResult:{en:"Display result",zh:"显示结果"},backResultList:{en:"return result list",zh:"返回结果列表"},notYet:{en:"not summary about",zh:"还没有"},summary:{en:"yet",zh:"的概述，请"},add:{en:"please add",zh:"添加"},noSpatioList:{en:"There are",zh:"暂无时空信息条目"},supplementaAddition:{en:"search results without time and space information,please add!",zh:"条，请补充添加"},relatedResult:{en:'There are $k{1} results found for "$k{0}"',zh:'"$k{0}"相关的结果$k{1}条'},item:{en:"",zh:"条"},backAllResultList:{en:"Return all result list",zh:"返回全部结果列表"},noSpatioAdd:{en:"There is nothing,please add!",zh:"还没有时空信息，请添加"},itemList:{en:"Item list",zh:"节点列表"},deletePrompt:{en:"Delete prompt",zh:"删除提示"},confirmDeletion:{en:"confirm deletion ?",zh:"确认删除？"},jumpPrompt:{en:"jump prompt",zh:"跳转提示"},jumpConform:{en:"jump confirm?",zh:"确认取消？"},historyMap:{en:"history map",zh:"历史地图"},askForPosition:{zh:"请在浏览器设置中，允许我们获取位置",en:"Please allow us to know your position."},year:{zh:"年",en:"year"},whatEraDoYouWantToGoTo:{zh:"你想前往哪个时代？",en:"What era do you want to go to?"},welcomeToCreate:{zh:"欢迎您来创建，与广大网友分享该条目。",en:"Welcome to create and share information about this entry！"},noSpatioResult:{en:"There are",zh:"暂无时空信息结果"},editNode:{en:"node edit",zh:"编辑节点"},nodeTime:{en:"node time",zh:"发生时间"},nodeAddress:{en:"node address",zh:"发生地点"},addImages:{en:"add images",zh:"添加图片"},sketchPoint:{en:"point sketch",zh:"示意点"},sketchLine:{en:"line sketch",zh:"示意线"},sketchPolygon:{en:"polygon sketch",zh:"示意面"},addPoint:{en:"add point",zh:"添加点"},addLine:{en:"add line",zh:"添加线"},addPolygon:{en:"add polygon",zh:"添加面"},edgeSnap:{en:"edge snap",zh:"接边"},split:{en:"split",zh:"拆分"},copy:{en:"copy",zh:"复制"},paste:{en:"paste",zh:"粘贴"},region:{en:"region",zh:"框选"},combine:{en:"combine",zh:"合并"},delete:{en:"delete",zh:"删除"},undo:{en:"undo",zh:"撤销"},redo:{en:"redo",zh:"重做"},back:{en:"back",zh:"返回"},addSketch:{en:"add sketch",zh:"添加示意图"},finish:{en:"finish",zh:"完成"},markAddress:{en:"mark address",zh:"标记地点"},changeAddress:{en:"change address",zh:"修改地点"},shortKeys:{en:"short keys",zh:"快捷键"},style:{en:"style",zh:"样式"},size:{en:"size",zh:"大小"},fill:{en:"fill",zh:"填充"},border:{en:"border",zh:"描边"},innerSnap:{en:"inner edge snap",zh:"内部接边"},outerSnap:{en:"outer edge snap",zh:"外部接边"},lineSplit:{en:"line split",zh:"线拆分"},polygonSplit:{en:"polygon split",zh:"面拆分"},confirmDeleteImage:{en:"confirm delete image?",zh:"确认删除图片？"},copySuccess:{en:"copy success",zh:"复制成功"},pasteSuccess:{en:"paste success",zh:"粘贴成功"},markLocation:{en:"please mark location",zh:"请标记地点"},completeAddressDesc:{en:"please complete location desc",zh:"请完善地点描述"},inputLocationDesc:{en:"input the location desc less than 50 letter",zh:"请输入地点描述/50字以内"},enterAAddressToSearch:{en:"Enter a address to search",zh:"请输入要搜索的地名"},confirmDeleteTheNode:{en:"Confirm to delete the node?",zh:"确定删除该节点？"},inputSketchDesc:{en:"Enter the desc less than 600 letter",zh:"请输入描述/300字以内"},inputNodeTitle:{en:"Please enter title(10-50 letter)",zh:"请输入标题/5-25字"},inputNodeDesc:{en:"Please enter desc(40-1200 letter)",zh:"请输入描述/20-600字"},TheTitleIsTooShort:{en:"The title at least 10 letter",zh:"标题至少5个字"},TheDescIsTooShort:{en:"The desc at least 40 letter",zh:"描述至少20个字"},TitleTooLong:{en:"The title is too long",zh:"标题太长"},periodOfTime:{en:"Period of time",zh:"时间段"},pointOfTime:{en:"Point of time",zh:"时间点"},saveSuccess:{en:"save success",zh:"保存成功"},submitSuccessAndUnderReview:{en:"your submit is successed, and it's under review",zh:"您此次的提交已成功，正在审核中！"},duplicateTitle:{en:"Duplicate title",zh:"标题重复"},TheModuleIsLockedByItsOwnCommitVersion:{en:"The module is locked by its own commit version",zh:"该模块被自己的提交版本锁住"},TheItemIsUnderCheckAndGoUserCenter:{en:'There are pending review, you can click "My Content" - "Under review" in the upper right corner to edit and modify.',zh:"您的该时空地图下存在待审核节点，可点击右上角进入“我的内容”-“审核中”进行编辑修改。"},TheModuleHasBeenLocked:{en:"The module has been locked",zh:"该模块已被锁定"},saveFailed:{en:"Save failed",zh:"Save failed"},ThisActionWillDeleteTheSchematic:{en:"This action will delete the schematic",zh:"该操作将删除示意图"},CancelWillNotSaveTheCurrentEditContent:{en:"Cancel will not save the current edit content.",zh:"取消将不保存当前编辑内容"},PleaseEnterATitle:{en:"Please enter a title",zh:"请输入标题"},accuracy:{en:"accuracy，",zh:"准确度"},PleaseSetTheTime:{en:"Please set the time",zh:"请设置时间"},ExitEditing:{en:"Exit editing",zh:"退出编辑"},DeleteGraphics:{en:"Delete graphics",zh:"删除图形"},FinishDrawing:{en:"Finish drawing",zh:"完成图形绘制"},DeleteGraphNode:{en:"Delete graph node",zh:"删除图形节点"},MergeGraphics:{en:"Crop and delete intersecting parts",zh:"裁剪并删除相交部分"},KeepIntersectingParts:{en:"Keep intersecting parts",zh:"仅保留相交部分"},Fusion:{en:"Fusion",zh:"融合"},MovingGraphics:{en:"Moving graphics,",zh:"移动图形"},StagingMenu:{en:"Staging menu",zh:"分期菜单"},RandomStaging:{en:"Random staging",zh:"随机分期"},NoResultsFound:{en:"No results found for this search term",zh:"没有找到与该搜索词相关的结果"},PleaseEnterTheYear:{en:"Please enter the year",zh:"请输入年份"},display:{en:"show",zh:"显示"},close:{en:"close",zh:"关闭"},HistoricalTerritory:{en:"territory",zh:"疆域时间："},NoMapOfThisYear:{en:"No map of this year",zh:"无此年份地图"},MeasuringArea:{en:"Measuring area",zh:"测面积"},MeasuringDistances:{en:"Measuring distances",zh:"测距离"},SwitchBaseMap:{en:"Switch base map",zh:"切换底图"},Label:{en:"Label",zh:"标注"},Zoom:{en:"Zoom",zh:"缩放"},ReturnNodeInformationList:{en:"Return node information list",zh:"返回节点信息列表"},age:{en:"age",zh:"年龄"},Details:{en:"Details",zh:"详情"},Chalcolithic:{en:"Copper Age",zh:"铜石并用时代"},BronzeAge:{en:"Bronze Age",zh:"青铜时代"},IronAge:{en:"Iron Age",zh:"铁器时代"},AgeOfDiscovery:{en:"Age of Exploration",zh:"大航海时代"},AgeOfSteam:{en:"Age of Steam",zh:"蒸汽时代"},AgeOfElectricity:{en:"Age of electricity",zh:"电气时代"},ContemporaryHistory:{en:"Contemporary History",zh:"科技时代"},Events:{en:"Events",zh:"事件"},MilitaryEvent:{en:"Military event",zh:"军事事件"},PoliticalEvent:{en:"Political event",zh:"政治事件"},SocialEvent:{en:"Social event",zh:"社会事件"},person:{en:"Personage",zh:"人物"},litterateur:{en:"litterateur",zh:"文学家"},SocialFigure:{en:"public figure",zh:"社会人物"},IndustryFigures:{en:"Industry figure",zh:"行业人物"},artist:{en:"artist",zh:"艺术家"},naturalist:{en:"scientist",zh:"自然科学家"},ReligiousFigure:{en:"Religious figure",zh:"宗教人物"},sociologist:{en:"sociologist",zh:"人文社会学家"},MilitaryFigure:{en:"Military figure",zh:"军事人物"},politician:{en:"politician",zh:"政治人物"},Satellite:{en:"Satellite",zh:"卫 星"},watercolor:{en:"Water-color",zh:"水 彩"},street:{en:"street",zh:"街 道"},terrain:{en:"terrain",zh:"地 形"},CopperAgeDesc:{en:"Copper Age, also known as Chalcolithic or Eneolithic, is an archaeological transition period between Neolithic and Bronze Age. In this period, a few copper tools appeared, but stones are still the main materials for making tools and weapons.",zh:"铜石并用时代，又称红铜时代，是新石器时代和青铜时代之间的过渡时期。这一时期人们的主要工具和武器仍为石器，但也出现了少量的红铜器。"},BronzeAgeDesc:{en:"Bronze Age, also known as Bronze Age Culture, is a historical period characterized by the use of bronze. People began to use copper and alloying with tin, arsenic, or other metals for making tools and weapons.",zh:"青铜时代，又称青铜器时代、青铜文明，这一时期的特色是青铜的广泛使用，即利用铜与锡、铅、锑或砷的合金制作工具和武器。"},IronAgeDesc:{en:"Iron Age, the final epoch of the three-age system of humankind, is after the Bronze Age and characterized by the production of iron tools.  During this period, the production of iron or steel tools have become more common due to their superiority over bronze equivalents therefore elevating societal productivity.",zh:"铁器时代是继青铜时代之后的又一个时代，以能够冶铁和制造铁器为主要标志。以铁器为主要的生产、生活工具，改善了农耕技术，极大地提升了生产力与生产效率。"},AgeOfDiscoveryDesc:{en:"Age of Exploration is also called Age of Discovery. From the 15th to the 18th century, in order to explore new trade routes and open new markets, the European countries started extensive ocean exploration. This period marked the rise of European colonialism, mercantilism and is considered the beginning of globalization.",zh:"15~18世纪，欧洲国家为了开辟新的贸易路线和市场，发展新生的资本主义，开始了远洋探索。通过航海探索，欧洲人发现了当时在欧洲不为人知的国家和地区，由此打破了以前世界闭塞的状态，世界真正成为一个互相联系的整体。"},AgeOfSteamDesc:{en:"Age of steam, also loosely called the Industrial Revolution, is characterized by the invention and rapid evolvement of steam engines. In this period, the machines, new chemical manufacturing and iron production processes kept replacing hand production methods, and the world population marked unprecedented growth.",zh:"蒸汽时代亦指第一次工业革命时期，因蒸汽机的发明为这一时期的标志而得名。这一时期人类生产出现了机器取代人力、工厂代替手工工场的变化，因而又被称为“机器时代”。"},AgeOfElectricityDesc:{en:"Age of Electricity, also known as the Second Industrial Revolution or Technological Revolution, is characterized by the use of  electrical power, and the invention of the electric lamps and telephones, and widespread deployment of railroads. The enormous expansion of rail and telegraph lines allowed unprecedented movement of people and ideas, which culminated in a new wave of globalization.",zh:"电气时代对应第二次工业革命时期，以电力的大规模运用、电灯发明为时代标志。这一时期新技术不断涌现，革命围绕着钢铁、铁路、电力、化学品不断发展。以西欧、北美为中心，英、德、法、美、日等国家工业飞速发展。"},ContemporaryHistoryDesc:{en:"After WWII, the wider adoption of the nuclear technology, space technology, computer and renewable energy technology became the symbol of the postwar era.  Science and technology jointly played a significant, if not dominating, role in many domains, the world has more interconnected with the ongoing globalization whereas there are continuous ideological conflicts arising from every corner of the world.",zh:"二战后，原子能技术、航天技术、计算机技术和可再生能源成为应用代表，科学技术在生产、传播、军事等多领域都发挥着举足轻重的作用，同时也成为衡量国力、影响世界格局的重要因素。"},TimeDescriptionA:{en:"a. If the country or region contains year number (i.e., Chinese era name, Japanese era name) in a specific period of time, the time description can be articulated as: Dynasty Name + Emperor Name + Regnal Year, for instance:  Qing Dynasty Kangxi Emperor Kangxi Fifty-Eighth Year.",zh:"a.如该国家或地区有年号（如中、日、韩等），可采用古代纪年法进行时间描述，中国需补上朝代。其余国家或地区应注明（如清康熙帝康熙十五年、日本后伏见天皇弘安八年等）。"},TimeDescriptionB:{en:"b. An internationally identifiable language may also be used to annotate the subject node, such as: Mid-fifteenth Century, Early Italian Renaissance Era, Post WWII, and etc..",zh:"b.也可使用国际通用表述性语言对该时间进行解释性描述（如十五世纪中期、文艺复兴时期、第二次世界大战后等）。"},AddressDescriptionTitle:{en:"When describing the location as an ancient administrative division, an ancient and modern comparison of the location is required.",zh:"当描述地点为古代行政区划时，需要对地点进行古今对照。"},AddressDescriptionA:{en:"a. When it comes to city-level names, write the city name followed by its ancient name in a pair of parenthesis, for instance: Chang-an (Now Xi’an). When multiple locations are necessary, make the appropriate location marking on the map sequentially and describe the nodes using a string with “, ” to separate different locations, for instance: San Francisco, Los Angeles, Seattle.",zh:"a.市级地名（包含地级市、县级市）直接写城市名称，如长安（今西安市）、临安（今杭州市）、金陵（今南京市）等。需要多个地点说明时，请按照节点内容描述的先后顺序依次进行打点说明，用“、”号隔开。"},AddressDescriptionB:{en:"b. When it comes to county-level and township-level place names (including municipal districts, counties, autonomous counties, townships, streets, etc.) . Please use the “provincial + county level” format, for example: Dongxing (Presently An-hui HanShan County).",zh:"b.县级、乡级地名（包含市辖区、县、自治县、乡、街道等）需要写省级+县级，如东兴（今安徽含山县）、宛城（今河南宛城区）。"},AddressDescriptionC:{en:"c. When it comes to international locations, the general norm to follow is: ancient place (Present  city’s name+country’s name), for example: Constantinople (Presently Istanbul, Turkey).",zh:"c.国外直接写国籍+城市，如君士坦丁堡（今土耳其伊斯坦布尔）。"},worksAndMedia:{en:"Works/Media",zh:"作品/媒体"},relatedArticle:{en:"RelatedArticle",zh:"相关文章"},onBeforeUnloadTips:{en:"Edits that have not been saved will be lost. Continue?",zh:"尚未保存的编辑内容将丢失，是否继续？"},PleaseEnterDesc:{en:"Please enter description",zh:"请添加描述"},simple:{en:"simple",zh:"简单"},showHumanEvents:{en:"human & events",zh:"显示人物事件"}},user:{liveAddress:{en:"Address",zh:"居住地",jp:"住所",fr:"Adresse",es:"Dirección"},allStatus:{en:"All Status",zh:"全部状态",jp:"全ての状態",fr:"Tout l'État",es:"Todos los estados"},allModule:{en:"All Modules",zh:"全部模块",jp:"全モジュール",fr:"Tout le Module",es:"Todos los modelos"},bindPhone:{en:"Bind Phone",zh:"绑定手机",jp:"スマホに紐付ける",fr:"Lier à téléphone",es:"Vincular Telefóno"},binded:{en:"Binded",zh:"已绑定",jp:"紐付き済み",fr:"Lié",es:"Vinculado"},commentMyImage:{en:"Comment - Image",zh:"评论了我的图片",jp:"私の写真がコメントされました。",fr:"Commenter - Image",es:"Comentario - Imágen"},notbind:{en:"Not Bound",zh:"未绑定",jp:"紐付きが完了していません",fr:"Non Lié",es:"No está vinculado"},rejectReason:{en:"reason",zh:"未通过原因",jp:"未通過の原因",fr:"Raison",es:"causa"},receiveMsg:{en:"receive",zh:"接受消息",JP:"通知をオンにする",fr:"recevoir le message",es:"aceptar"},rejectMsg:{en:"reject",zh:"不接受消息",jp:"通知をオフにする",fr:"rejeter le message",es:"rechazar"},auditTime:{en:"Audit Time",zh:"审核时间",jp:"審査時間",fr:"Temps de révision",es:"Tiempo de Revisión"},editReason:{en:"reason",zh:"修改原因",jp:"変更する原因",fr:"Raison",es:"causa"},industry:{en:"Industry",zh:"所在行业",jp:"業種",fr:"Industrie",es:"Industria"},tipUsername:{zh:"4-30个字符，仅限中文(一个中文占两个字符)，英文，数字，_或-。",en:"It should be between 4 and 30, including a-z A-Z 0-9 , and -",jp:"長さは4-30で、アルファベット、数字、_あるいは-お願いします。",fr:"La longueur devrait être entre 4 and 30, a-z, 0-9, _ and -",es:"La longitud debe estar entre 4 y 30, a-z A-Z 0-9, y -"},tipMsgSetting:{en:"You can change message settings exclude system notice.",zh:"可以在这里设置接收的消息类型。不支持关闭系统通知。",jp:"ここで受け取るメッセージのタイプを設定することができます。通知オフが推薦されていません。",fr:"Vous pouvez modifier les paramètres de message, la notice du système exclue.",es:"Puede cambiar la configuración del mensaje, excluyendo el aviso del sistema."},modifyByPhone:{en:"By Mobile",zh:"通过手机验证修改",jp:"スマホ認証で変更する",fr:"Par le téléphone",es:"A través del celular"},likeMyArticle:{en:"Like - Article",zh:"赞了我的文章",jp:"私の文章が「いいね！」されました。",fr:"J'aime - Articles",es:"Le gusta - Artículos"},likeMyComment:{en:"Like - Comments",zh:"赞了我的评论",jp:"私のコメントが「いいね!」されました。",fr:"J'aime - Commentaires",es:"Le gusta - Comentarios"},modifyByPassword:{en:"By Old Password",zh:"通过帐号密码修改",jp:"アカウントとパスワードで変更する",fr:"Par mot de passe",es:"A través de la contraseña antigua"},msgSetting:{en:"Settings",zh:"消息设置",jp:"お知らせの設定",fr:"Paramètres",es:"Configuración"},auditStatus:{en:"Status",zh:"审核状态",jp:"審査の状態",fr:"État de révision",es:"Estado"},addEntryType:{en:"Add entry type",zh:"添加条目类型",jp:"項目タイプを添加する",fr:"Ajouter le type d'entrée",es:"Añadir el tipo del artículo"},addEntryInfo:{en:"Add entry infos",zh:"添加条目信息",jp:"項目情報を添加する",fr:"Ajouter l'information d'entrée",es:"Añadir las informaciones del artículo"},selectDefault:{en:"Select",zh:"请选择",jp:"お選びでください",fr:"Sélectionner",es:"Seleccionar"},entryName:{en:"Title",zh:"条目名",jp:"項目名",fr:"Titre",es:"Título"},entryNamingRule:{en:"Naming rule",zh:"条目命名规则",jp:"項目名付けの規則",fr:"Règle à nommer l'entrée",es:"Regla de nombramiento"},addDisambigTips:{en:"Entry exists, please add disambig",zh:"已有同名条目，请添加消歧义项",jp:"同名の項目は既に存在していますので、曖昧さ回避してください。",fr:"L'entrée existe, veuillez ajouter une désambiguïsation",es:"Ha existido el artículo, añada la desambiguación, por favor"},addDisambig:{en:"add disambig",zh:"添加消歧义",jp:"曖昧さを回避する",fr:"ajouter une désambiguïsation",es:"añadir la desambiguación"},suggestionBottomList:{en:"it has been created as a polysemous word. Please check the meaning",zh:"已被创建且是一个多义词，您可以查看义项",jp:"既に作成されまして、多義語なので、意味を確認することができます。",fr:"a été créé et est un mot polysémique. Vous pouvez voir les sens",es:"Se ha creado y es una palabra polisémica. Puede leer los significados"},or:{en:"or",zh:"或",jp:"または",fr:"ou",es:"o"},disambig:{en:"Disambig",zh:"消歧义",jp:"曖昧さ回避",fr:"Désambiguïsation",es:"Desambiguación"},synonym:{en:"Synonym",zh:"同义词",jp:"義類語",fr:"Synonyme",es:"Sinónimo"},addSynonym:{en:"Add synonym",zh:"添加同义词",jp:"類義語を添加する",fr:"Ajouter le synonyme",es:"Añadir sinónimo"},addEntryPortrait:{en:"Add Portrait",zh:"添加条目头像",jp:"項目のプロフィール写真を添加する",fr:"Ajouter la photo",es:"Añadir la foto de perfil"},next:{en:"next",zh:"下一步",jp:"次へ",fr:"suivant",es:"siguiente"},versionHasBeenSubmitted:{en:"Your version has been successfully submitted",zh:"您的版本已经成功提交",jp:"ご提出ありがとうございました。",fr:"Votre version a réussi d'être déposé",es:"Se ha logrado entregar su versión"},versionReviewing:{en:"The system will take some time to check your version to ensure that it does not contain any content that violates laws and regulations. The entry compiled by you will be the latest if passed.",zh:"系统需要花费一段时间检查您的版本，以确保其中不包含任何违反法律法规的内容。您的版本在通过后将成为词条的最新版本",jp:"変更されたバーションは法律違反の内容があるかどうかと審査する必要があります。通過されると最新バーションとなりますので、審査済みまでお待ちください。",fr:"Le système mettra un certain temps à vérifier votre version pour s'assurer qu'elle ne contient aucun contenu violant les lois et les règlements. Votre version sera la dernière version dès son passage.",es:"El sistema llevará algún tiempo verificando su versión para asegurar de que no contenga ningún contenido que infrinja las leyes y reglas. la versión suya será la última si se aprueba."},waitReviewHasEntry:{en:'You can now check your auditing and passed entries in <span class="c-b mine-entry">my entry</span>, or <span class="c-b edit-entry">return entries</span>.',zh:'现在可以在<span class="c-b mine-entry">我的词条</span>中查看自己的待通过版本与已通过的版本，或者<span class="c-b edit-entry">返回词条</span>。',jp:'<span class="c-b mine-entry">私の項目</span>で審査中または審査通過のバーションを確認することができます。なお、項目に戻ることもできます。',fr:'Vous pouvez maintenant vérifier votre version en révision et la version passée dans <span class="c-b mine-entry"> mon entrée </span>, ou <span class="c-b edit-entry"> retourner aux entrées </span>.',es:'Ahora puede verificar su auditoría y los artículos aprobados en <span class = "c-b mine-entry"> mi artículo </ span>, o <span class = "c-b edit-entry"> volver al artículo </ span>.'},waitReviewNoEntry:{en:'You can now check your auditing and passed entries in <span class="c-b mine-entry">my entry</span>.',zh:'现在可以在<span class="c-b mine-entry">我的词条</span>中查看自己的待通过版本与已通过的版本。',jp:'<span class="c-b mine-entry">私の項目</span>で審査中または審査通過のバーションを確認することができます。',fr:'Vous pouvez maintenant vérifier votre version en révision et la version passée dans <span class="c-b mine-entry"> mon entrée </span>.',es:'Ahora puede verificar su auditoría y los artículos aprobados en <span class = "c-b mine-entry"> mi artículo </ span>.'},oldPassword:{en:"Old password",zh:"当前密码",jp:"ご使用中のパスワード",fr:"Ancien mot de passe",es:"Contraseña antigua"},oldPasswordRequired:{en:"Please enter the old password",zh:"请填写当前密码",jp:"ご使用中のパスワードご入力ください",fr:"L‘ancien mot de passe est requis.",es:"Introduzca la contraseña antigua"},passwordWrongFormat:{en:"There are illegal charactor",zh:"请输入正确的密码格式",jp:"形式が正しいパスワードご入力ください",fr:"Format de mot de passe incorrect",es:"Hay caracteres incorrectos"},newArticle:{en:"New",zh:"新建文章"},postings:{en:"Postings",zh:"发帖子"},newPassword:{en:"New password",zh:"新密码",jp:"新しいパスワード",fr:"Nouveau mot de passe",es:"Contraseña nueva"},setPassword:{en:"Set password",zh:"设置密码"},cancel:{zh:"取消",en:"Cancel"},confirmSettings:{zh:"确认设置",en:"Confirm Settings"},newPasswordStrict:{en:"(the number of Charactors is limited between 8 and 24, and only english and numbers are allowed)",zh:"（8-24 个字符，只允许英文和数字）",jp:"（8-24の文字で、アルファベットと数字お願いします）",fr:"(Le caractère est limité en 8 - 24, et seulement l'anglais et les nombres sont autorisés)",es:"(La contraseña debe contener de 8 a 24 caracteres, solo letras y números)"},newPasswordRequired:{en:"Please enter your new password",zh:"请填写新密码",jp:"新しいパスワードご入力ください",fr:"Nouveau mot de passe est requis.",es:"Introduzca la contraseña nueva"},newPasswordIsSameAsOld:{en:"New password can not be the same.",zh:"新旧密码重复",jp:"ご入力いただいた新しいパスワードは以前のパスワードと一致しています。",fr:"Le nouveau mot de passe ne peut pas être le même que l'ancien.",es:"La contraseña nueva no puede ser la misma."},confirmNewPassword:{en:"Confirm new password",zh:"确认新密码",jp:"新しいパスワードご確認ください",fr:"Confirmer le nouveau mot de passe",es:"Confirmar la contraseña nueva"},confirmNewPasswordIsRequired:{en:"Please confirm new password",zh:"请再次输入新密码",jp:"新しいパスワードを再び入力してください",fr:"Confirmer le nouveau mot de passe est requis.",es:"Introducza la contraseña nueva otra vez"},newPasswordIsDifferent:{en:"Two inputted password is inconsistent",zh:"两次输入的密码不一致",jp:"パスワードが確認用と不一致です",fr:"Les mots de passe entrés les deux fois sont incohérents",es:"Las contraseñas no coinciden"},toBeAudited:{en:"To be audited",zh:"待审核"},beingAudited:{en:"Being audited",zh:"审核中"},theFirstAudit:{en:"The first audit",zh:"一审中"},theSecondAudit:{en:"The second audit",zh:"二审中"},theThirdAudit:{en:"The third audit",zh:"三审中"},setAsBoutique:{en:"setting as boutique",zh:"加精中"},badRequest:{en:"Bad Request!",zh:"请求失败！"},addPasswordSuccess:{en:"Successful setup, please login again",zh:"设置密码成功，请重新登录"},bindPrompt:{en:"Please bind the phone number first",zh:"请先绑定手机号"},setPasswordBindPrompt:{en:"For your account security, please bind the phone number first",zh:"为了您的帐号安全，请先绑定手机号"},mapScripts:{en:"Map Scripts",zh:"地图剧本"},auditResult:{en:"audit result",zh:"审核结果"},agree:{en:"agree",zh:"同意"},disagree:{en:"disagree",zh:"不同意"},disagreeTips:{en:"You can't use the service until you agree to the agreement",zh:"同意后即可使用全历史服务"}}}},ac4f:function(t,e,r){"use strict";var i;var n=r("d113").codes,o=n.ERR_MISSING_ARGS,a=n.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,n,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===i&&(i=r("42a7")),i(t,{readable:e,writable:n},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function h(t){t()}function l(t,e){return t.pipe(e)}function c(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,n=c(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){i||(i=t),t&&a.forEach(h),o||(a.forEach(h),n(i))}))}));return e.reduce(l)}},ad25:function(t,e,r){var i=r("2aee"),n=r("11dc"),o=r("98e6"),a=r("f460"),s=r("83d5"),u=r("0106"),h=r("5291"),l=r("a958"),c=r("8707").Buffer;t.exports=function(t,e,r){var f;f=t.padding?t.padding:r?1:4;var p,d=i(t);if(4===f)p=function(t,e){var r=t.modulus.byteLength(),i=e.length,h=o("sha1").update(c.alloc(0)).digest(),l=h.length,f=2*l;if(i>r-f-2)throw new Error("message too long");var p=c.alloc(r-i-f-2),d=r-l-1,m=n(l),g=s(c.concat([h,p,c.alloc(1,1),e],d),a(m,d)),y=s(m,a(g,l));return new u(c.concat([c.alloc(1),y,g],r))}(d,e);else if(1===f)p=function(t,e,r){var i,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");i=r?c.alloc(a-o-3,255):function(t){var e,r=c.allocUnsafe(t),i=0,o=n(2*t),a=0;for(;i<t;)a===o.length&&(o=n(2*t),a=0),(e=o[a++])&&(r[i++]=e);return r}(a-o-3);return new u(c.concat([c.from([0,r?1:2]),i,c.alloc(1),e],a))}(d,e,r);else{if(3!==f)throw new Error("unknown padding");if((p=new u(e)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return r?l(p,d):h(p,d)}},ae84:function(t,e,r){var i=r("8707").Buffer,n=r("f576");t.exports=function(t,e,r,o){if(i.isBuffer(t)||(t=i.from(t,"binary")),e&&(i.isBuffer(e)||(e=i.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=r/8,s=i.alloc(a),u=i.alloc(o||0),h=i.alloc(0);a>0||o>0;){var l=new n;l.update(h),l.update(t),e&&l.update(e),h=l.digest();var c=0;if(a>0){var f=s.length-a;c=Math.min(a,h.length),h.copy(s,f,0,c),a-=c}if(c<h.length&&o>0){var p=u.length-o,d=Math.min(o,h.length-c);h.copy(u,p,c,c+d),o-=d}}return h.fill(0),{key:s,iv:u}}},b4e1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MabState=void 0;var i=a(r("8034")),n=a(r("8827")),o=a(r("57ba"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this._data={}}return(0,o.default)(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),(0,o.default)(t,[{key:"_get",value:function(t){return this._data[t]}},{key:"set",value:function(t,e){t&&(this._data[t]=e)}},{key:"get",value:function(t){return JSON.parse((0,i.default)(this._get(t)))}}]),t}();e.MabState=s.getInstance()},b4e8:function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},b50d:function(t,e,r){"use strict";var i=r("c532"),n=r("467f"),o=r("30b5"),a=r("c345"),s=r("3934"),u=r("2d83");t.exports=function(t){return new Promise((function(e,h){var l=t.data,c=t.headers;i.isFormData(l)&&delete c["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";c.Authorization="Basic "+btoa(p+":"+d)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:t,request:f};n(e,h,i),f=null}},f.onerror=function(){h(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){h(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var m=r("7aac"),g=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;g&&(c[t.xsrfHeaderName]=g)}if("setRequestHeader"in f&&i.forEach(c,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete c[e]:f.setRequestHeader(e,t)})),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),h(t),f=null)})),void 0===l&&(l=null),f.send(l)}))}},b525:function(t,e,r){"use strict";var i=r("c3c0"),n=r("edc9"),o=r("da3e"),a=i.rotr64_hi,s=i.rotr64_lo,u=i.shr64_hi,h=i.shr64_lo,l=i.sum64,c=i.sum64_hi,f=i.sum64_lo,p=i.sum64_4_hi,d=i.sum64_4_lo,m=i.sum64_5_hi,g=i.sum64_5_lo,y=n.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,i,n){var o=t&r^~t&n;return o<0&&(o+=4294967296),o}function w(t,e,r,i,n,o){var a=e&i^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,r,i,n){var o=t&r^t&n^r&n;return o<0&&(o+=4294967296),o}function M(t,e,r,i,n,o){var a=e&i^e&o^i&o;return a<0&&(a+=4294967296),a}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function k(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function A(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function E(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function z(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,1)^s(t,e,8)^h(t,e,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function P(t,e){var r=s(t,e,19)^s(e,t,29)^h(t,e,6);return r<0&&(r+=4294967296),r}i.inherits(_,y),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,i=0;i<32;i++)r[i]=t[e+i];for(;i<r.length;i+=2){var n=T(r[i-4],r[i-3]),o=P(r[i-4],r[i-3]),a=r[i-14],s=r[i-13],u=z(r[i-30],r[i-29]),h=I(r[i-30],r[i-29]),l=r[i-32],c=r[i-31];r[i]=p(n,o,a,s,u,h,l,c),r[i+1]=d(n,o,a,s,u,h,l,c)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,i=this.h[0],n=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],h=this.h[5],p=this.h[6],d=this.h[7],y=this.h[8],v=this.h[9],_=this.h[10],z=this.h[11],I=this.h[12],T=this.h[13],P=this.h[14],C=this.h[15];o(this.k.length===r.length);for(var L=0;L<r.length;L+=2){var R=P,B=C,D=A(y,v),j=E(y,v),O=b(y,v,_,z,I),F=w(y,v,_,z,I,T),N=this.k[L],U=this.k[L+1],q=r[L],V=r[L+1],Z=m(R,B,D,j,O,F,N,U,q,V),G=g(R,B,D,j,O,F,N,U,q,V);R=S(i,n),B=k(i,n),D=x(i,n,a,s,u),j=M(i,n,a,s,u,h);var J=c(R,B,D,j),H=f(R,B,D,j);P=I,C=T,I=_,T=z,_=y,z=v,y=c(p,d,Z,G),v=f(d,d,Z,G),p=u,d=h,u=a,h=s,a=i,s=n,i=c(Z,G,J,H),n=f(Z,G,J,H)}l(this.h,0,i,n),l(this.h,2,a,s),l(this.h,4,u,h),l(this.h,6,p,d),l(this.h,8,y,v),l(this.h,10,_,z),l(this.h,12,I,T),l(this.h,14,P,C)},_.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},b5ca:function(t,e,r){"use strict";var i=r("1c35").Buffer,n=r("3fb5"),o=r("93e6"),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function m(t,e,r,i,n,o,a,s){return d(t+(e^r^i)+o+a|0,s)+n|0}function g(t,e,r,i,n,o,a,s){return d(t+(e&r|~e&i)+o+a|0,s)+n|0}function y(t,e,r,i,n,o,a,s){return d(t+((e|~r)^i)+o+a|0,s)+n|0}function v(t,e,r,i,n,o,a,s){return d(t+(e&i|r&~i)+o+a|0,s)+n|0}function _(t,e,r,i,n,o,a,s){return d(t+(e^(r|~i))+o+a|0,s)+n|0}n(p,o),p.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,i=0|this._b,n=0|this._c,o=0|this._d,p=0|this._e,b=0|this._a,w=0|this._b,x=0|this._c,M=0|this._d,S=0|this._e,k=0;k<80;k+=1){var A,E;k<16?(A=m(r,i,n,o,p,t[s[k]],c[0],h[k]),E=_(b,w,x,M,S,t[u[k]],f[0],l[k])):k<32?(A=g(r,i,n,o,p,t[s[k]],c[1],h[k]),E=v(b,w,x,M,S,t[u[k]],f[1],l[k])):k<48?(A=y(r,i,n,o,p,t[s[k]],c[2],h[k]),E=y(b,w,x,M,S,t[u[k]],f[2],l[k])):k<64?(A=v(r,i,n,o,p,t[s[k]],c[3],h[k]),E=g(b,w,x,M,S,t[u[k]],f[3],l[k])):(A=_(r,i,n,o,p,t[s[k]],c[4],h[k]),E=m(b,w,x,M,S,t[u[k]],f[4],l[k])),r=p,p=o,o=d(n,10),n=i,i=A,b=S,S=M,M=d(x,10),x=w,w=E}var z=this._b+n+M|0;this._b=this._c+o+S|0,this._c=this._d+p+b|0,this._d=this._e+r+w|0,this._e=this._a+i+x|0,this._a=z},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=i.alloc?i.alloc(20):new i(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},b672:function(t,e,r){var i=r("8707").Buffer;function n(t,e){this._block=i.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}n.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=i.from(t,e));for(var r=this._block,n=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%n,h=Math.min(o-s,n-u),l=0;l<h;l++)r[u+l]=t[s+l];s+=h,(a+=h)%n==0&&this._update(r)}return this._len+=o,this},n.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0,n=(r-i)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n},b692:function(t,e,r){var i=r("39a9").Buffer,n=r("98e6"),o=r("34d5"),a=r("3fb5"),s=r("6fe7"),u=r("980c"),h=r("b4e8");function l(t){o.Writable.call(this);var e=h[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){o.Writable.call(this);var e=h[t];if(!e)throw new Error("Unknown message digest");this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new l(t)}function p(t){return new c(t)}Object.keys(h).forEach((function(t){h[t].id=i.from(h[t].id,"hex"),h[t.toLowerCase()]=h[t]})),a(l,o.Writable),l.prototype._write=function(t,e,r){this._hash.update(t),r()},l.prototype.update=function(t,e){return"string"==typeof t&&(t=i.from(t,e)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),i=s(r,t,this._hashType,this._signType,this._tag);return e?i.toString(e):i},a(c,o.Writable),c.prototype._write=function(t,e,r){this._hash.update(t),r()},c.prototype.update=function(t,e){return"string"==typeof t&&(t=i.from(t,e)),this._hash.update(t),this},c.prototype.verify=function(t,e,r){"string"==typeof e&&(e=i.from(e,r)),this.end();var n=this._hash.digest();return u(e,n,t,this._signType,this._tag)},t.exports={Sign:f,Verify:p,createSign:f,createVerify:p}},b73f:function(t,e,r){"use strict";var i=r("80af"),n=r("f3a3"),o=n.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var r=t[e.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;for(var n=0,o=0,a=e.place;o<i;o++,a++)n<<=8,n|=t[a],n>>>=0;return!(n<=127)&&(e.place=a,n)}function h(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=n.toArray(t,e);var r=new s;if(48!==t[r.place++])return!1;var o=u(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var a=u(t,r);if(!1===a)return!1;var h=t.slice(r.place,a+r.place);if(r.place+=a,2!==t[r.place++])return!1;var l=u(t,r);if(!1===l)return!1;if(t.length!==l+r.place)return!1;var c=t.slice(r.place,l+r.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new i(h),this.s=new i(c),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=h(e),r=h(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];l(i,e.length),(i=i.concat(e)).push(2),l(i,r.length);var o=i.concat(r),a=[48];return l(a,o.length),a=a.concat(o),n.encode(a,t)}},b837:function(t,e,r){var i=r("3fb5"),n=r("4fd1"),o=r("b672"),a=r("8707").Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}i(u,n),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,r,i){t.writeInt32BE(e,i),t.writeInt32BE(r,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},b9a8:function(t,e,r){"use strict";var i=r("80af"),n=r("6aa23"),o=r("f3a3"),a=r("0cbb"),s=r("fdac"),u=o.assert,h=r("bb34"),l=r("b73f");function c(t){if(!(this instanceof c))return new c(t);"string"==typeof t&&(u(a.hasOwnProperty(t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=c,c.prototype.keyPair=function(t){return new h(this,t)},c.prototype.keyFromPrivate=function(t,e){return h.fromPrivate(this,t,e)},c.prototype.keyFromPublic=function(t,e){return h.fromPublic(this,t,e)},c.prototype.genKeyPair=function(t){t||(t={});for(var e=new n({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new i(2));;){var a=new i(e.generate(r));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},c.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},c.prototype.sign=function(t,e,r,o){"object"==typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new i(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),h=new n({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),c=this.n.sub(new i(1)),f=0;;f++){var p=o.k?o.k(f):new i(h.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(c)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var m=d.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=p.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var v=(d.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),v^=1),new l({r:g,s:y,recoveryParam:v})}}}}}},c.prototype.verify=function(t,e,r,n){t=this._truncateToN(new i(t,16)),r=this.keyFromPublic(r,n);var o=(e=new l(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),h=u.mul(t).umod(this.n),c=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(h,r.getPublic(),c)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(h,r.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},c.prototype.recoverPubKey=function(t,e,r,n){u((3&r)===r,"The recovery param is more than two bits"),e=new l(e,n);var o=this.n,a=new i(t),s=e.r,h=e.s,c=1&r,f=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var p=e.r.invm(o),d=o.sub(a).mul(p).umod(o),m=h.mul(p).umod(o);return this.g.mulAdd(d,s,m)},c.prototype.getKeyRecoveryParam=function(t,e,r,i){if(null!==(e=new l(e,i)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(t,e,n)}catch(t){continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},b9b5:function(t,e,r){"use strict";var i=r("9d8a").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,n){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,n,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(n?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},bac2:function(t,e,r){var i={ECB:r("0145"),CBC:r("c119"),CFB:r("3505"),CFB8:r("62c9"),CFB1:r("5239"),OFB:r("5165"),CTR:r("6ade"),GCM:r("6ade")},n=r("e85f");for(var o in n)n[o].module=i[n[o].mode];t.exports=n},bb34:function(t,e,r){"use strict";var i=r("80af"),n=r("f3a3").assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new i(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?n(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},bb44:function(t,e,r){"use strict";var i=r("c3c0"),n=r("edc9"),o=i.rotl32,a=i.sum32,s=i.sum32_3,u=i.sum32_4,h=n.BlockHash;function l(){if(!(this instanceof l))return new l;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}i.inherits(l,h),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var r=this.h[0],i=this.h[1],n=this.h[2],h=this.h[3],l=this.h[4],v=r,_=i,b=n,w=h,x=l,M=0;M<80;M++){var S=a(o(u(r,c(M,i,n,h),t[d[M]+e],f(M)),g[M]),l);r=l,l=h,h=o(n,10),n=i,i=S,S=a(o(u(v,c(79-M,_,b,w),t[m[M]+e],p(M)),y[M]),x),v=x,x=w,w=o(b,10),b=_,_=S}S=s(this.h[1],n,w),this.h[1]=s(this.h[2],h,x),this.h[2]=s(this.h[3],l,v),this.h[3]=s(this.h[4],r,_),this.h[4]=s(this.h[0],i,b),this.h[0]=S},l.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},bc12:function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(10).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},bc3a:function(t,e,r){t.exports=r("cee4")},bd43:function(t,e,r){"use strict";(function(e,i){var n=s(r("3f6b")),o=s(r("8827")),a=s(r("57ba"));function s(t){return t&&t.__esModule?t:{default:t}}var u=r("abd2"),h=r("1e9f"),l=function(){function t(e){(0,o.default)(this,t),this.sys_lang="zh";try{window&&(h(window),this.sys_lang=h.get("sys_lang")||"zh")}catch(t){}(0,n.default)(this,{lang:this.sys_lang},e),this.loadedLanguage=u,this._load(),this.addGlobalFn()}return(0,a.default)(t,[{key:"_load",value:function(){try{this.loadedLanguage}catch(t){throw"All Language load failed"}}},{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"common",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.lang=this.sys_lang,"c"==e&&(e="common");try{if(!this.loadedLanguage[e]){if(i)return;throw"i18n: module "+e+" not founded"}if(!this.loadedLanguage[e][t]){if(i)return;throw"i18n: module "+e+", key "+t+" not founded"}if("string"!=typeof this.loadedLanguage[e][t][this.lang]){if(i)return;throw"i18n: module "+e+", key "+t+", lang "+this.lang+" not founded"}return this.loadedLanguage[e][t][this.lang]}catch(i){if(!r||"common"==e)return!1;this.find(t,"common",!1)}return!1}},{key:"addGlobalFn",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||window;r.getLang=r._L_=function(e,r){(r&&r.p&&(r.params=r.p),"string"==typeof r)&&(r={m:r});"string"==typeof(r=(0,n.default)({m:"common",params:[]},r))&&(r.m=r);var i=t.find(e,r.m);return i||""===i?(i=t.replaceVars(i,r.params),i=t.reuseLang(i,r.params),i=t.parsePlural(i,r.params)):"dict missed"}}},{key:"replaceVars",value:function(t,e){return e.forEach((function(e,r){var i=new RegExp("\\$\\{"+r+"\\}","ig");t=t.replace(i,e)})),t}},{key:"parsePlural",value:function(t,e){return e.length?(e.forEach((function(e,r){var i=new RegExp("\\$p\\{"+r+",([^\\s,\\}]*),([^\\s,\\}]*)}","ig");try{e=parseInt(e),t=e>1?t.replace(i,"$1"):t.replace(i,"$2")}catch(e){t=t.replace(i,"$2")}})),t):t}},{key:"reuseLang",value:function(t,e){var r=this;e.length||(e=[]),e.forEach((function(e,i){var n=new RegExp("\\$k\\{"+i+"}","ig");if(n.test(t)){var o=r.find(e,"c",!0,!0);o||(o=e),t=t.replace(n,o)}}));var i=new RegExp("\\$k\\{\\d+}","ig");return t=t.replace(i,"")}},{key:"setLang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zh";try{window&&(h(window),h.set("sys_lang",t))}catch(t){}this.sys_lang=t}}]),t}();try{window.i18n||(window.i18n=new l),t.exports=window.i18n}catch(t){}try{i.i18n||(i.i18n=new l),t.exports=i.i18n}catch(t){}}).call(this,r("c8ba"),r("f28c"))},bd9d:function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},c115:function(t,e,r){"use strict";var i=a(r("41b2")),n=a(r("3f6b")),o=r("49dc");function a(t){return t&&t.__esModule?t:{default:t}}var s=a(r("9fdf")).default.getLang({api:!0});t.exports={searchSuggestion:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:"",has_geo:"",has_time:""};return t.keyword=$.trim(t.name),(0,o.postJson)("/api/search/getSuggestion",t,{once:!0})},searchMapItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:"1",keyword:"",from:"",size:"",type:[],start:"",end:"",leftUpPoint:[],rightDownPoint:[]};return(0,o.postJson)("/api/search/mapItems",t,{once:!0})},searchMapStartEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startTime:"",endTime:"",from:"",size:""};return(0,o.postJson)("/api/search/map/timefilter",t)},searchMapPoint:function(t){return(0,o.getJson)("http://115.231.226.40:8888/dlsgis/api/search",t)},timefilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startTime:"",endTime:"",from:"",size:"",typeIds:"",leftUpPoint:"",rightDownPoint:""};return(0,o.postJson)("/api/search/map/timefilter",t)},searchGraphSql:function(t){return t={source:t.source,target:t.target,depth:t.depth||7,topK:t.topK||5},(0,o.postJson)("/api/search/graphsql",t)},articleScan:function(t){return t=(0,n.default)({currentPage:1,pageSize:2e3},t),(0,o.postJson)("/api/time/articlescan",t)},initData:function(t){var e=returnUrl("ip");return(0,o.getJson)(e+"/dlsgis/api/search",t)},searchData:function(t){var e=returnUrl("ip");return(0,o.getJson)(e+"/dlsgis/api/search",t)},getItems:function(t){return(0,o.postJson)("/api/search/getItems",t)},searchMapYear:function(t){var e=returnUrl("url");return $.post(e+"/dlsgis/api/math/curve",t)},getCurvePoint:function(t){return(0,o.postJson)("https://map.allhistory.com/dlsgis/api/math/curve",t)},searchTimeline:function(t){return(0,o.getJson)("https://map.allhistory.com/dlsgis/api/timeline",t)},testGalaxyData:function(t){return $.post("/galaxy/testApiGalaxy",{num:t})},getPosition:function(t){if(t){var e=returnUrl("ip");return(0,o.postJson)(e+"/dlsgis/api/task/objectlist",{oids:[t]})}},getTerritoryItem:function(t){return(0,o.postJson)("https://map.allhistory.com/dlsgis/api/task/objectlist",{oids:t,h:1,output:1})},getFitBoundsByYear:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,o.postJson)("https://map.allhistory.com/dlsgis/api/task/objectlist",{h:1,output:1,year:t,proj:"longlat",out:"gzip"},{once:e})},searchresult:function(t){return(0,o.postJson)("/api/map/search",t)},superSearch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return $.post("/api/supersearch",{keyword:t,size:r,from:e})},getRecommend:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"entry";return(0,o.getJson)("/api/suggestion/list/"+t+"/"+e+"/"+r+"/"+i,"",{changedomain:!0})},getMultiVariant:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return(0,o.getJson)("/api/search/namesake/"+e+"/"+t)},dynasty:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,o.getJson)("/api/search/dynasty/suggestion",{name:t},{once:!0})},findSVGData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return(0,o.getJson)("/api/item/clustering/"+r+"?id="+t+"&type="+e,"",{once:!0})},findListInColumn:function(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s;return(0,o.getJson)("/api/item/clustering/age/"+t+"/"+e+"/"+r+"/"+n+"/"+i,"",{once:!0})},findListByBestMan:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;return(0,o.getJson)("/api/item/clustering/age/"+t+"/"+r+"/"+e,"",{once:!0})},searchCluster:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:keyword};return t.keyword=$.trim(t.keyword),(0,o.postJson)("/api/item/clustering/search/",t,{once:!0})},searchImage:function(t){var e=(0,n.default)({keyword:"",page:1,size:60,itemId:""},t);return(0,o.postJson)("/api/search/mediaimage",e)},searchImageByImage:function(t){var e=t.keyword,r=void 0===e?"":e,i=t.itemId,n=void 0===i?"":i,a=t.page,s=void 0===a?1:a,u=t.size,h=void 0===u?60:u,l=t.imageType,c=void 0===l?1:l,f=t.scope,p={keyword:r,page:s,size:h,imageType:c,scope:void 0===f?2:f,itemId:n,language:t.lang};return(0,o.postJson)("https://www.allhistory.com/api/search/imageMatch_v2",p)},searchImageByText:function(t){var e=t.keyword,r=void 0===e?"":e,i=t.itemId,n=void 0===i?"":i,a=t.page,s=void 0===a?1:a,u=t.size,h={keyword:r,page:s,size:void 0===u?60:u,itemId:n};return(0,o.postJson)("/api/search/relatedPainting",h)},searchArticle:function(t){var e=(0,n.default)({keyword:"",page:1,size:30},t);return(0,o.postJson)("/api/search/article/v2",e)},searchBook:function(t){var e=(0,n.default)({keyword:"",page:1,size:30},t);return(0,o.postJson)("/api/search/relatedbook",e)},searchAll:function(t){t.keyword=t.keyword.length>38?t.keyword.substring(0,38):t.keyword;var e=(0,n.default)({keyword:"",page:1,size:30},t);return(0,o.postJson)("/api/search/all",e)},searchMedia:function(t){t.keyWords=t.keyWords&&t.keyWords.length>40?t.keyWords.substring(0,40):t.keyWords;var e=(0,n.default)({keyWords:"",tags:"",mediaType:1,page:1,pageSize:20},t);return(0,o.postJson)("/api/basic/media/search",e)},searchRecommend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return(0,o.getJson)("/api/suggestion/searchRecommend/"+e+"/"+t)},searchtimeMap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments[2];return(0,o.getJson)("/api/staticmap/"+e+"/"+t+"/"+r)},searchTypeAll:function(t){var e=(0,n.default)({keyword:"",from:0,size:30},t);return(0,o.postJson)("/api/search/typesearch",e)},searchRelationAll:function(t){return(0,o.postJson)("/api/search/familyRels",t)},getAtobRelation:function(t){var e=(0,n.default)({source:"",destination:"",depth:"",topK:""},t);return(0,o.postJson)("/api/ab_path",e)},getAtobAladin:function(t){var e=(0,n.default)({keyword:"",depth:7,topK:1},t);return(0,o.postJson)("/api/search/abPath/getInfo",e)},getBookDetailRecommend:function(t){return(0,o.getJson)("/api/search/recommend/book/"+t+"/"+s)},getBookDetailTopBook:function(t){var e=(0,i.default)({},t,{language:s});return(0,o.postJson)("/api/book/titlebar",e)},getAtobRelationForOne:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return(0,o.getJson)("/api/ab_path/"+e+"/"+t,"",{once:!0})},getAllRank:function(t){return(0,o.getJson)("/api/rankBoard/allSite/"+s)},getTagList:function(t){var e=(0,i.default)({},t,{language:s});return(0,o.postJson)("/api/search/tags",e)}}},c119:function(t,e,r){var i=r("8c8a");e.encrypt=function(t,e){var r=i(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return i(n,r)}},c24d:function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},c2aa:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.renderInDom(t)},t.exports=e.default},c345:function(t,e,r){"use strict";var i=r("c532"),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,a={};return t?(i.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),r=i.trim(t.substr(o+1)),e){if(a[e]&&n.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}})),a):a}},c3c0:function(t,e,r){"use strict";var i=r("da3e"),n=r("3fb5");function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var a=t.charCodeAt(n);a<128?r[i++]=a:a<2048?(r[i++]=a>>6|192,r[i++]=63&a|128):o(t,n)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++n)),r[i++]=a>>18|240,r[i++]=a>>12&63|128,r[i++]=a>>6&63|128,r[i++]=63&a|128):(r[i++]=a>>12|224,r[i++]=a>>6&63|128,r[i++]=63&a|128)}else for(n=0;n<t.length;n++)r[n]=0|t[n];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=s(t[r].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];"little"===e&&(n=a(n)),r+=u(n.toString(16))}return r},e.zero2=s,e.zero8=u,e.join32=function(t,e,r,n){var o=r-e;i(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var h;h="big"===n?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=h>>>0}return a},e.split32=function(t,e){for(var r=new Array(4*t.length),i=0,n=0;i<t.length;i++,n+=4){var o=t[i];"big"===e?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,i){return t+e+r+i>>>0},e.sum32_5=function(t,e,r,i,n){return t+e+r+i+n>>>0},e.sum64=function(t,e,r,i){var n=t[e],o=i+t[e+1]>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,i){return(e+i>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,i){return e+i>>>0},e.sum64_4_hi=function(t,e,r,i,n,o,a,s){var u=0,h=e;return u+=(h=h+i>>>0)<e?1:0,u+=(h=h+o>>>0)<o?1:0,t+r+n+a+(u+=(h=h+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,r,i,n,o,a,s){return e+i+o+s>>>0},e.sum64_5_hi=function(t,e,r,i,n,o,a,s,u,h){var l=0,c=e;return l+=(c=c+i>>>0)<e?1:0,l+=(c=c+o>>>0)<o?1:0,l+=(c=c+s>>>0)<s?1:0,t+r+n+a+u+(l+=(c=c+h>>>0)<h?1:0)>>>0},e.sum64_5_lo=function(t,e,r,i,n,o,a,s,u,h){return e+i+o+s+h>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},c401:function(t,e,r){"use strict";var i=r("c532");t.exports=function(t,e,r){return i.forEach(r,(function(r){t=r(t,e)})),t}},c450:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(r("9b57")),n=p(r("3f6b")),o=p(r("8827")),a=p(r("57ba")),s=p(r("1dc2"));r("f96f");var u=p(r("1d10")),h=r("feb7"),l=p(r("3b74")),c=p(r("a316")),f=r("a7c7");function p(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,o.default)(this,t),(0,n.default)(this,{$container:$("body"),map:{},comps:{}},e),this.mabState=f.MAB_STATE,this.currentStates=!1,this._render(),this._bind()}return(0,a.default)(t,[{key:"_render",value:function(){this.$html=$((0,s.default)()),this.$container.append(this.$html)}},{key:"_bind",value:function(){var t=this;$("body").on("click",this.clickOthers.bind(this)),this.$html.find(".right-but").on("click",this.measureArea.bind(this)),this.$html.find(".delete-area-btn").on("click",(function(){t.reSet()}))}},{key:"clickOthers",value:function(t){["right-but","mapboxgl-canvas","mcanvas"].findIndex((function(e){return t.target.classList.contains(e)}))<0&&this.currentStates&&(this.$html.find(".right-but").removeClass("active"),this.endIf=!0,this.reSet(),this.currentStates=!1,this.mabState.update("defMeasureAreaState",!1),this.map.gl.getCanvas().style.cursor="")}},{key:"measureArea",value:function(){if(this.currentStates)return this.$html.find(".right-but").removeClass("active"),this.endIf=!0,this.reSet(),this.mabState.update("defMeasureAreaState",!1),this.map.gl.getCanvas().style.cursor="",void(this.currentStates=!this.currentStates);this.currentStates=!this.currentStates,this.$html.find(".right-but").addClass("active"),this.setEmptyStatus(),this.endIf=!1,this.mouseMoveArr=[],this.mouseDownFunArr=[],this.mabState.update("defMeasureAreaState",!0),this.mouseMoveFun=this.mouseMoveMapFun.bind(this),this.mouseClickFun=this.mouseClickMapFun.bind(this),this.clickReset=this.reSet.bind(this),this.map.gl.on("mousemove",this.mouseMoveFun),this.map.gl.on("click",this.mouseClickFun),this.map.gl.on("drag",this.mouseClickFun),this.mouseEnterFun=this.mouseEnter.bind(this),this.map.gl.on("mouseenter","measure-area-points",this.mouseEnterFun),this.map.gl.on("mouseenter","measure-area-points-mid",this.mouseEnterFun),this.mouseLeaveFun=this.mouseLeave.bind(this),this.map.gl.on("mouseleave","measure-area-points",this.mouseLeaveFun),this.map.gl.on("mouseleave","measure-area-points-mid",this.mouseLeaveFun);var t=this.mouseDown.bind(this);this.mouseDownFunArr.push(t),this.map.gl.on("mousedown","measure-area-points",t)}},{key:"mouseEnter",value:function(){this.map.gl.getCanvas().style.cursor="move"}},{key:"mouseLeave",value:function(){this.map.gl.getCanvas().style.cursor=""}},{key:"mouseDown",value:function(t){t.preventDefault();var e=this.map.gl.queryRenderedFeatures(t.point,{layers:["measure-area-points"]});this.dragPoint=e[0],this.map.gl.getCanvas().style.cursor="grab";var r=this.onMove.bind(this);this.onUpInMap=this.onUp.bind(this),this.mouseMoveArr.push(r),this.map.gl.on("mousemove",r),this.map.gl.once("mouseup",this.onUpInMap)}},{key:"onMove",value:function(t){var e=this,r=t.lngLat;this.ifDrag=!0,this.map.gl.getCanvas().style.cursor="grabbing",this.pointGeoJson.features.forEach((function(t,i){t.properties&&t.properties.id&&t.properties.id===e.dragPoint.properties.id&&(e.pointGeoJson.features[i].geometry.coordinates=[r.lng,r.lat],e.linestring.geometry.coordinates[i]=[r.lng,r.lat],e.polygonGeoJson.geometry.coordinates[0][i]=[r.lng,r.lat],0===i&&(e.linestring.geometry.coordinates[e.linestring.geometry.coordinates.length-1]=[r.lng,r.lat],e.polygonGeoJson.geometry.coordinates[0][e.linestring.geometry.coordinates.length-1]=[r.lng,r.lat]))})),this.map.gl.getSource("measure-area-points").setData(this.pointGeoJson),this.map.gl.getSource("measure-area-points-mid").setData(this.pointGeoJson),this.map.gl.getSource("measure-area-line").setData(this.linestring),this.map.gl.getSource("measure-area-polygon").setData(this.polygonGeoJson),this.addAreaNum()}},{key:"onUp",value:function(t){var e=this;t.preventDefault();t.lngLat;setTimeout((function(){e.ifDrag=!1}),0),this.map.gl.getCanvas().style.cursor="",this.mouseMoveArr.forEach((function(t,r){e.map.gl.off("mousemove",t)})),this.mouseMoveArr=[]}},{key:"reSet",value:function(){var t=this;if(this.endIf&&!this.ifDrag){this.marker&&this.marker.remove(),this.map.gl.off("mousemove",this.mouseMoveFun),this.map.gl.off("click",this.mouseClickFun),this.map.gl.off("mouseleave",this.mouseLeaveFun),this.map.gl.off("mouseenter",this.mouseEnterFun),this.mabState.update("defMeasureAreaState",!1),this.mouseDownFunArr&&this.mouseDownFunArr.forEach((function(e,r){t.map.gl.off("mousedown",e)})),this.mouseDownFunArr=[],this.$html.find(".right-but").removeClass("active"),this.pointGeoJson={type:"FeatureCollection",features:[]},this.areaNum={type:"FeatureCollection",features:[]},this.linestring={type:"Feature",geometry:{type:"LineString",coordinates:[]}},this.dashLinestring={type:"Feature",geometry:{type:"LineString",coordinates:[]}},this.polygonGeoJson={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}};var e=this.map.gl.getLayer("measure-area-points"),r=this.map.gl.getLayer("measure-area-points-mid"),i=this.map.gl.getLayer("measure-area-line"),n=this.map.gl.getLayer("measure-area-dashline"),o=this.map.gl.getLayer("measure-area-polygon");r&&this.map.gl.removeLayer("measure-area-points-mid"),r&&this.map.gl.removeSource("measure-area-points-mid"),e&&this.map.gl.removeLayer("measure-area-points"),e&&this.map.gl.removeSource("measure-area-points"),i&&this.map.gl.removeLayer("measure-area-line"),i&&this.map.gl.removeSource("measure-area-line"),n&&this.map.gl.removeLayer("measure-area-dashline"),n&&this.map.gl.removeSource("measure-area-dashline"),o&&this.map.gl.removeLayer("measure-area-polygon"),o&&this.map.gl.removeSource("measure-area-polygon")}}},{key:"setEmptyStatus",value:function(){this.marker&&this.marker.remove(),this.pointGeoJson={type:"FeatureCollection",features:[]},this.linestring={type:"Feature",geometry:{type:"LineString",coordinates:[]}},this.dashLinestring={type:"Feature",geometry:{type:"LineString",coordinates:[]}},this.polygonGeoJson={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}};var t=this.map.gl.getLayer("measure-area-polygon");t&&this.map.gl.getSource("measure-area-polygon").setData(this.polygonGeoJson),!t&&this.map.gl.addLayer({id:"measure-area-polygon",type:"fill",source:{type:"geojson",data:this.polygonGeoJson},paint:{"fill-opacity":1,"fill-color":"#FFF0ED"}});var e=this.map.gl.getLayer("measure-area-line");e&&this.map.gl.getSource("measure-area-line").setData(this.linestring),!e&&this.map.gl.addLayer({id:"measure-area-line",type:"line",source:{type:"geojson",data:this.linestring},paint:{"line-width":2,"line-color":"#ff7963","line-dasharray":[2,2]}});var r=this.map.gl.getLayer("measure-area-points");r&&this.map.gl.getSource("measure-area-points").setData(this.pointGeoJson),!r&&this.map.gl.addLayer({id:"measure-area-points",type:"circle",source:{type:"geojson",data:this.pointGeoJson},paint:{"circle-radius":4,"circle-color":"#ff7963"},filter:["in","$type","Point"]});var i=this.map.gl.getLayer("measure-area-points-mid");i&&this.map.gl.getSource("measure-area-points-mid").setData(this.pointGeoJson),!i&&this.map.gl.addLayer({id:"measure-area-points-mid",type:"circle",source:{type:"geojson",data:this.pointGeoJson},paint:{"circle-radius":2,"circle-color":"#ffffff"},filter:["in","$type","Point"]});var n=this.map.gl.getLayer("measure-area-dashline");n&&this.map.gl.getSource("measure-area-dashline").setData(this.dashLinestring),!n&&this.map.gl.addLayer({id:"measure-area-dashline",type:"line",source:{type:"geojson",data:this.dashLinestring},paint:{"line-width":4,"line-color":"#ff7963","line-dasharray":[4,4]}})}},{key:"mouseClickMapFun",value:function(t){var e=this;if(!this.endIf&&!this.ifDrag){if("drag"===t.type){if(0===t.target.dragPan._inertia.length)return;if(t.target.dragPan._inertia.length>1&&Math.abs(t.target.dragPan._inertia[0][0]-t.target.dragPan._inertia[t.target.dragPan._inertia.length-1][0])>20)return;t.lngLat=this.map.gl.unproject(t.target.dragPan._inertia[0][1]),t.point=t.target.dragPan._inertia[0][1]}var r=this.map.gl.queryRenderedFeatures(t.point,{layers:["measure-area-points"]});if(r.length){var i=this.pointGeoJson.features.length-1,n=r[0].properties.id,o=2;this.pointGeoJson.features.filter((function(t,e){t.properties.id===n&&(o=e)})),0!==o&&o!==i||(this.linestring.geometry.coordinates.push(this.linestring.geometry.coordinates[0]),this.pointGeoJson.features.length>2&&(this.map.gl.getSource("measure-area-line").setData(this.linestring),setTimeout((function(){e.map.gl.off("mousemove",e.onMoveInMap),e.endIf=!0}),2)))}else{var a=[t.lngLat.lng,t.lngLat.lat];this.pointGeoJson.features.push({type:"Feature",geometry:{type:"Point",coordinates:a},properties:{id:String((new Date).getTime())}}),this.map.gl.getSource("measure-area-points").setData(this.pointGeoJson),this.map.gl.getSource("measure-area-points-mid").setData(this.pointGeoJson),this.linestring.geometry.coordinates.push(a),this.pointGeoJson.features.length>1&&this.map.gl.getSource("measure-area-line").setData(this.linestring),this.pointGeoJson.features.length>2?(2==this.polygonGeoJson.geometry.coordinates[0].length?(this.polygonGeoJson.geometry.coordinates[0].push(a),this.polygonGeoJson.geometry.coordinates[0].push(this.polygonGeoJson.geometry.coordinates[0][0])):(this.polygonGeoJson.geometry.coordinates[0].pop(),this.polygonGeoJson.geometry.coordinates[0].push(a),this.polygonGeoJson.geometry.coordinates[0].push(this.polygonGeoJson.geometry.coordinates[0][0])),this.addAreaNum(),this.map.gl.getSource("measure-area-polygon").setData(this.polygonGeoJson)):this.polygonGeoJson.geometry.coordinates[0].push(a)}}}},{key:"mouseMoveMapFun",value:function(t){if(this.endIf)this.map.gl.getCanvas().style.cursor="pointer";else{var e=this.map.gl.queryRenderedFeatures(t.point,{layers:["measure-area-points"]});this.map.gl.getCanvas().style.cursor=e.length?"pointer":"crosshair";var r=[t.lngLat.lng,t.lngLat.lat];if(this.pointGeoJson.features.length>1&&this.map.gl.getSource("measure-area-line").setData(this.linestring),this.pointGeoJson.features.length>1){var n={type:"Feature",geometry:{type:"Polygon",coordinates:[[].concat((0,i.default)(this.polygonGeoJson.geometry.coordinates[0]))]}};2==this.polygonGeoJson.geometry.coordinates[0].length?(n.geometry.coordinates[0].push(r),n.geometry.coordinates[0].push(n.geometry.coordinates[0][0])):(n.geometry.coordinates[0].pop(),n.geometry.coordinates[0].push(r),n.geometry.coordinates[0].push(n.geometry.coordinates[0][0])),this.addAreaNum(),this.map.gl.getSource("measure-area-polygon").setData(n)}else if(1===this.pointGeoJson.features.length){var o={type:"Feature",geometry:{type:"LineString",coordinates:[].concat((0,i.default)(this.linestring.geometry.coordinates))}};o.geometry.coordinates.push(r),this.map.gl.getSource("measure-area-line").setData(o)}}}},{key:"addAreaNum",value:function(){if(this.marker&&this.marker.remove(),!(this.polygonGeoJson.geometry.coordinates[0].length<4)){var t=(0,h.polygon)(this.polygonGeoJson.geometry.coordinates),e=(0,l.default)(t);e=e.toFixed(3),e=(parseFloat(e)/1e6).toFixed(3);var r=(0,c.default)(t),i=$((0,u.default)(e));this.$container.append(i);var n=new mapboxgl.Marker(i[0]).setLngLat(r.geometry.coordinates).addTo(this.map.gl);this.marker=n}}}]),t}();e.default=d,t.exports=e.default},c532:function(t,e,r){"use strict";var i=r("1d2b"),n=r("c7ce"),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:n,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function t(){var e={};function r(r,i){"object"==typeof e[i]&&"object"==typeof r?e[i]=t(e[i],r):e[i]=r}for(var i=0,n=arguments.length;i<n;i++)h(arguments[i],r);return e},extend:function(t,e,r){return h(e,(function(e,n){t[n]=r&&"function"==typeof e?i(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},c591:function(t,e,r){"use strict";(function(e){var i,n=r("1c35"),o=n.Buffer,a={};for(i in n)n.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=n[i]);var s=a.Buffer={};for(i in o)o.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(s[i]=o[i]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),s.alloc||(s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=o(t);return e&&0!==e.length?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i}),!a.kStringMaxLength)try{a.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,r("f28c"))},c7ce:function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},c8af:function(t,e,r){"use strict";var i=r("c532");t.exports=function(t,e){i.forEach(t,(function(r,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[i])}))}},c8c6:function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,r,i,n){return'\n<div class="map-self-position-icon">\n  <div class="position-icon"></div>\n</div>'},useData:!0})},ccd0:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFitBounds=e.getMarkerCoordinates=e.getPointFromGeometryData=e.getPointFromLocation=e.getAClosedPolygon=e.removeTheSamePointFromPolygon=void 0;var i=a(r("1907")),n=a(r("a316")),o=r("feb7");function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)t[e+1]&&t[e][0]===t[e+1][0]&&t[e][1]===t[e+1][1]&&(t.splice(e+1,1),e--);return t}},u=function(t){if(Array.isArray(t)&&!(t.length<3)){var e=t[0],r=t[t.length-1];return e[0]===r[0]&&e[1]===r[1]||t.push(e),t}};e.removeTheSamePointFromPolygon=s,e.getAClosedPolygon=u,e.getPointFromLocation=function(t){var e=void 0;switch(t.type){case"Point":e=t.coordinates;break;case"LineString":e=t.coordinates[0];break;case"Polygon":s(t.coordinates),u(t.coordinates);var r=(0,o.polygon)([t.coordinates]);e=(0,n.default)(r).geometry.coordinates}return e},e.getPointFromGeometryData=function(t){var e={};(0,i.default)(t).forEach((function(r){"geometry"!==r&&(e[r]=t[r])}));var r={type:"Point"},a=t.geometry.find((function(t){return"Point"===t.type}));if(a)r.coordinates=a.coordinates;else{var h=t.geometry.find((function(t){return"LineString"===t.type}));if(h)r.coordinates=h.coordinates[0];else{var l=t.geometry.find((function(t){return"Polygon"===t.type}));if(l){s(l.coordinates),u(l.coordinates);var c=(0,o.polygon)([l.coordinates]);r.coordinates=(0,n.default)(c).geometry.coordinates}}}return e.geometry=[r],r.coordinates?e:null},e.getMarkerCoordinates=function(t){var e=void 0,r=t.geometry.find((function(t){return"Point"===t.type}));if(r)e=r.coordinates;else{var i=t.geometry.find((function(t){return"LineString"===t.type}));if(i)e=i.coordinates[0];else{var a=t.geometry.find((function(t){return"Polygon"===t.type}));if(a){s(a.coordinates),u(a.coordinates);var h=(0,o.polygon)([a.coordinates]);e=(0,n.default)(h).geometry.coordinates}}}return e},e.getFitBounds=function(t){var e=[],r=[];t.forEach((function(t){e.push(t.x),r.push(t.y)}));var i=Math.min.apply(Math,e),n=Math.max.apply(Math,e);return[[i,Math.min.apply(Math,r)],[n,Math.max.apply(Math,r)]]}},cd91:function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},cee4:function(t,e,r){"use strict";var i=r("c532"),n=r("1d2b"),o=r("0a06"),a=r("2444");function s(t){var e=new o(t),r=n(o.prototype.request,e);return i.extend(r,o.prototype,e),i.extend(r,e),r}var u=s(a);u.Axios=o,u.create=function(t){return s(i.merge(a,t))},u.Cancel=r("7a77"),u.CancelToken=r("8df4"),u.isCancel=r("2e67"),u.all=function(t){return Promise.all(t)},u.spread=r("0df6"),t.exports=u,t.exports.default=u},cf35:function(t,e,r){"use strict";(function(e,i){var n;t.exports=k,k.ReadableState=S;r("7e25").EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r("f12a"),s=r("1c35").Buffer,u=e.Uint8Array||function(){};var h,l=r(5);h=l&&l.debuglog?l.debuglog("stream"):function(){};var c,f,p,d=r("22ab"),m=r("9019"),g=r("05f0").getHighWaterMark,y=r("d113").codes,v=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("3fb5")(k,a);var x=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(t,e,i){n=n||r("5e7d"),t=t||{},"boolean"!=typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(c||(c=r("7d72").StringDecoder),this.decoder=new c(t.encoding),this.encoding=t.encoding)}function k(t){if(n=n||r("5e7d"),!(this instanceof k))return new k(t);var e=this instanceof n;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,r,i,n){h("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(h("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,T(t)))}(t,a);else if(n||(o=function(t,e){var r;i=e,s.isBuffer(i)||i instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],e));var i;return r}(a,e)),o)x(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),i)a.endEmitted?x(t,new w):E(t,a,e,!0);else if(a.ended)x(t,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):P(t,a)):E(t,a,e,!1)}else i||(a.reading=!1,P(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function E(t,e,r,i){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&I(t)),P(t,e)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),k.prototype.destroy=m.destroy,k.prototype._undestroy=m.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=s.from(t,e),e=""),r=!0),A(this,t,e,!1,r)},k.prototype.unshift=function(t){return A(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){c||(c=r("7d72").StringDecoder);var e=new c(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};function z(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;h("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(T,t))}function T(t){var e=t._readableState;h("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,D(t)}function P(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(h("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function L(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){h("readable nexttick read 0"),t.read(0)}function B(t,e){h("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),D(t),e.flowing&&!e.reading&&t.read(0)}function D(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function O(t){var e=t._readableState;h("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick(F,e,t))}function F(t,e){if(h("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function N(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}k.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?O(this):I(this),null;if(0===(t=z(t,e))&&e.ended)return 0===e.length&&O(this),null;var i,n=e.needReadable;return h("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",n=!0),e.ended||e.reading?h("reading or ended",n=!1):n&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=z(r,e))),null===(i=t>0?j(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&O(this)),null!==i&&this.emit("data",i),i},k.prototype._read=function(t){x(this,new b("_read()"))},k.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,h("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?u:g;function s(e,i){h("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),t.removeListener("close",d),t.removeListener("finish",m),t.removeListener("drain",l),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",f),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function u(){h("onend"),t.end()}n.endEmitted?i.nextTick(a):r.once("end",a),t.on("unpipe",s);var l=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,D(t))}}(r);t.on("drain",l);var c=!1;function f(e){h("ondata");var i=t.write(e);h("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==N(n.pipes,t))&&!c&&(h("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(e){h("onerror",e),g(),t.removeListener("error",p),0===o(t,"error")&&x(t,e)}function d(){t.removeListener("finish",m),g()}function m(){h("onfinish"),t.removeListener("close",d),g()}function g(){h("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",p),t.once("close",d),t.once("finish",m),t.emit("pipe",r),n.flowing||(h("pipe resume"),r.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=N(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},k.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,h("on readable",n.length,n.reading),n.length?I(this):n.reading||i.nextTick(R,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick(L,this),r},k.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(L,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(B,t,e))}(this,t)),t.paused=!1,this},k.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;for(var n in t.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){(h("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(e.push(n)||(i=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){h("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r("57e2")),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(t,e){return void 0===p&&(p=r("f83c")),p(k,t,e)})}).call(this,r("c8ba"),r("f28c"))},cfbd:function(t,e,r){"use strict";const i=r("3fb5"),n=r("bc12"),o=r("6283").DecoderBuffer,a=r("8360"),s=r("8b71");function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}function h(t){a.call(this,"der",t)}function l(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const i=s.tagClass[r>>6],n=0==(32&r);if(31==(31&r)){let i=r;for(r=0;128==(128&i);){if(i=t.readUInt8(e),t.isError(i))return i;r<<=7,r|=127&i}}else r&=31;return{cls:i,primitive:n,tag:r,tagStr:s.tag[r]}}function c(t,e,r){let i=t.readUInt8(r);if(t.isError(i))return i;if(!e&&128===i)return null;if(0==(128&i))return i;const n=127&i;if(n>4)return t.error("length octect is too long");i=0;for(let e=0;e<n;e++){i<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;i|=e}return i}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},i(h,a),h.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const i=t.save(),n=l(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(i),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||r)},h.prototype._decodeTag=function(t,e,r){const i=l(t,'Failed to decode tag of "'+e+'"');if(t.isError(i))return i;let n=c(t,i.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!r&&i.tag!==e&&i.tagStr!==e&&i.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(i.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(n=t.offset-o.offset,t.restore(o),t.skip(n,'Failed to match body of: "'+e+'"'))},h.prototype._skipUntilEnd=function(t,e){for(;;){const r=l(t,e);if(t.isError(r))return r;const i=c(t,r.primitive,e);if(t.isError(i))return i;let n;if(n=r.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(n))return n;if("end"===r.tagStr)break}},h.prototype._decodeList=function(t,e,r,i){const n=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",i);if(t.isError(o)&&e)break;n.push(o)}return n},h.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},h.prototype._decodeObjid=function(t,e,r){let i;const n=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(n.push(o),o=0);128&a&&n.push(o);const s=n[0]/40|0,u=n[0]%40;if(i=r?n:[s,u].concat(n.slice(1)),e){let t=e[i.join(" ")];void 0===t&&(t=e[i.join(".")]),void 0!==t&&(i=t)}return i},h.prototype._decodeTime=function(t,e){const r=t.raw().toString();let i,n,o,a,s,u;if("gentime"===e)i=0|r.slice(0,4),n=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");i=0|r.slice(0,2),n=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,n-1,o,a,s,u,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},h.prototype._decodeInt=function(t,e){const r=t.raw();let i=new n(r);return e&&(i=e[i.toString(10)]||i),i},h.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},d0eb:function(t,e,r){(function(t){!function(t,e){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a=r(3).Buffer}catch(t){}function s(t,e,r){for(var i=0,n=Math.min(t.length,r),o=e;o<n;o++){var a=t.charCodeAt(o)-48;i<<=4,i|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return i}function u(t,e,r,i){for(var n=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&n++,16===e?this._parseHex(t,n):this._parseBase(t,e,n),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,a,s=0;if("be"===r)for(n=t.length-1,o=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(n=0,o=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,o=0;for(r=t.length-6,i=0;r>=e;r-=6)n=s(t,r,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,i++);r+6!==e&&(n=s(t,e,r+6),this.words[i]|=n<<o&67108863,this.words[i+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var o=t.length-r,a=o%i,s=Math.min(o,o-a)+r,h=0,l=r;l<s;l+=i)h=u(t,l,l+i,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var c=1;for(h=u(t,l,t.length,e),l=0;l<a;l++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var i=t.length+e.length|0;r.length=i,i=i-1|0;var n=0|t.words[0],o=0|e.words[0],a=n*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<i;h++){for(var l=u>>>26,c=67108863&u,f=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=f;p++){var d=h-p|0;l+=(a=(n=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}r.words[h]=0|c,u=0|l}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var n=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<n|o)).toString(16);r=0!==(o=s>>>24-n&16777215)||a!==this.length-1?h[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?m+r:h[f-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,h=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[s]=a;for(;s<o;s++)h[s]=0}else{for(s=0;s<o-n;s++)h[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),h[o-s-1]=a}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var i=0;i<r.length;i++)this.words[i]=e.words[i]^r.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var r=t/26|0,n=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(t){var e,r,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0,o=0;o<i.length;o++)e=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&e,n=e>>>26;for(;0!==n&&o<r.length;o++)e=(0|r.words[o])+n,this.words[o]=67108863&e,n=e>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=t):(r=t,i=this);for(var o=0,a=0;a<i.length;a++)o=(e=(0|r.words[a])-(0|i.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var i,n,o,a=t.words,s=e.words,u=r.words,h=0,l=0|a[0],c=8191&l,f=l>>>13,p=0|a[1],d=8191&p,m=p>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],A=8191&k,E=k>>>13,z=0|a[6],I=8191&z,T=z>>>13,P=0|a[7],C=8191&P,L=P>>>13,R=0|a[8],B=8191&R,D=R>>>13,j=0|a[9],O=8191&j,F=j>>>13,N=0|s[0],U=8191&N,q=N>>>13,V=0|s[1],Z=8191&V,G=V>>>13,J=0|s[2],H=8191&J,K=J>>>13,W=0|s[3],$=8191&W,X=W>>>13,Y=0|s[4],Q=8191&Y,tt=Y>>>13,et=0|s[5],rt=8191&et,it=et>>>13,nt=0|s[6],ot=8191&nt,at=nt>>>13,st=0|s[7],ut=8191&st,ht=st>>>13,lt=0|s[8],ct=8191&lt,ft=lt>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(h+(i=Math.imul(c,U))|0)+((8191&(n=(n=Math.imul(c,q))+Math.imul(f,U)|0))<<13)|0;h=((o=Math.imul(f,q))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,i=Math.imul(d,U),n=(n=Math.imul(d,q))+Math.imul(m,U)|0,o=Math.imul(m,q);var yt=(h+(i=i+Math.imul(c,Z)|0)|0)+((8191&(n=(n=n+Math.imul(c,G)|0)+Math.imul(f,Z)|0))<<13)|0;h=((o=o+Math.imul(f,G)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(y,U),n=(n=Math.imul(y,q))+Math.imul(v,U)|0,o=Math.imul(v,q),i=i+Math.imul(d,Z)|0,n=(n=n+Math.imul(d,G)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,G)|0;var vt=(h+(i=i+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,K)|0)+Math.imul(f,H)|0))<<13)|0;h=((o=o+Math.imul(f,K)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(b,U),n=(n=Math.imul(b,q))+Math.imul(w,U)|0,o=Math.imul(w,q),i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,G)|0,i=i+Math.imul(d,H)|0,n=(n=n+Math.imul(d,K)|0)+Math.imul(m,H)|0,o=o+Math.imul(m,K)|0;var _t=(h+(i=i+Math.imul(c,$)|0)|0)+((8191&(n=(n=n+Math.imul(c,X)|0)+Math.imul(f,$)|0))<<13)|0;h=((o=o+Math.imul(f,X)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(M,U),n=(n=Math.imul(M,q))+Math.imul(S,U)|0,o=Math.imul(S,q),i=i+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,G)|0,i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,i=i+Math.imul(d,$)|0,n=(n=n+Math.imul(d,X)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,X)|0;var bt=(h+(i=i+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;h=((o=o+Math.imul(f,tt)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(A,U),n=(n=Math.imul(A,q))+Math.imul(E,U)|0,o=Math.imul(E,q),i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,G)|0,i=i+Math.imul(b,H)|0,n=(n=n+Math.imul(b,K)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,K)|0,i=i+Math.imul(y,$)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,X)|0,i=i+Math.imul(d,Q)|0,n=(n=n+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var wt=(h+(i=i+Math.imul(c,rt)|0)|0)+((8191&(n=(n=n+Math.imul(c,it)|0)+Math.imul(f,rt)|0))<<13)|0;h=((o=o+Math.imul(f,it)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(I,U),n=(n=Math.imul(I,q))+Math.imul(T,U)|0,o=Math.imul(T,q),i=i+Math.imul(A,Z)|0,n=(n=n+Math.imul(A,G)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,G)|0,i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,K)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,K)|0,i=i+Math.imul(b,$)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,X)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,i=i+Math.imul(d,rt)|0,n=(n=n+Math.imul(d,it)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,it)|0;var xt=(h+(i=i+Math.imul(c,ot)|0)|0)+((8191&(n=(n=n+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;h=((o=o+Math.imul(f,at)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,i=Math.imul(C,U),n=(n=Math.imul(C,q))+Math.imul(L,U)|0,o=Math.imul(L,q),i=i+Math.imul(I,Z)|0,n=(n=n+Math.imul(I,G)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,G)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,X)|0,i=i+Math.imul(b,Q)|0,n=(n=n+Math.imul(b,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,i=i+Math.imul(y,rt)|0,n=(n=n+Math.imul(y,it)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,it)|0,i=i+Math.imul(d,ot)|0,n=(n=n+Math.imul(d,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0;var Mt=(h+(i=i+Math.imul(c,ut)|0)|0)+((8191&(n=(n=n+Math.imul(c,ht)|0)+Math.imul(f,ut)|0))<<13)|0;h=((o=o+Math.imul(f,ht)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(B,U),n=(n=Math.imul(B,q))+Math.imul(D,U)|0,o=Math.imul(D,q),i=i+Math.imul(C,Z)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,G)|0,i=i+Math.imul(I,H)|0,n=(n=n+Math.imul(I,K)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,K)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,X)|0,i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,i=i+Math.imul(b,rt)|0,n=(n=n+Math.imul(b,it)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,it)|0,i=i+Math.imul(y,ot)|0,n=(n=n+Math.imul(y,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0,i=i+Math.imul(d,ut)|0,n=(n=n+Math.imul(d,ht)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ht)|0;var St=(h+(i=i+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;h=((o=o+Math.imul(f,ft)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(O,U),n=(n=Math.imul(O,q))+Math.imul(F,U)|0,o=Math.imul(F,q),i=i+Math.imul(B,Z)|0,n=(n=n+Math.imul(B,G)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,G)|0,i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,K)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,K)|0,i=i+Math.imul(I,$)|0,n=(n=n+Math.imul(I,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,it)|0,i=i+Math.imul(b,ot)|0,n=(n=n+Math.imul(b,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,i=i+Math.imul(y,ut)|0,n=(n=n+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,i=i+Math.imul(d,ct)|0,n=(n=n+Math.imul(d,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(h+(i=i+Math.imul(c,dt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,dt)|0))<<13)|0;h=((o=o+Math.imul(f,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,Z),n=(n=Math.imul(O,G))+Math.imul(F,Z)|0,o=Math.imul(F,G),i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,K)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,K)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,X)|0,i=i+Math.imul(I,Q)|0,n=(n=n+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,i=i+Math.imul(A,rt)|0,n=(n=n+Math.imul(A,it)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,it)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,i=i+Math.imul(b,ut)|0,n=(n=n+Math.imul(b,ht)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ht)|0,i=i+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(v,ct)|0,o=o+Math.imul(v,ft)|0;var At=(h+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;h=((o=o+Math.imul(m,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,H),n=(n=Math.imul(O,K))+Math.imul(F,H)|0,o=Math.imul(F,K),i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,X)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,i=i+Math.imul(I,rt)|0,n=(n=n+Math.imul(I,it)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,it)|0,i=i+Math.imul(A,ot)|0,n=(n=n+Math.imul(A,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,i=i+Math.imul(M,ut)|0,n=(n=n+Math.imul(M,ht)|0)+Math.imul(S,ut)|0,o=o+Math.imul(S,ht)|0,i=i+Math.imul(b,ct)|0,n=(n=n+Math.imul(b,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Et=(h+(i=i+Math.imul(y,dt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,X))+Math.imul(F,$)|0,o=Math.imul(F,X),i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,it)|0,i=i+Math.imul(I,ot)|0,n=(n=n+Math.imul(I,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,i=i+Math.imul(A,ut)|0,n=(n=n+Math.imul(A,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,ft)|0)+Math.imul(S,ct)|0,o=o+Math.imul(S,ft)|0;var zt=(h+(i=i+Math.imul(b,dt)|0)|0)+((8191&(n=(n=n+Math.imul(b,mt)|0)+Math.imul(w,dt)|0))<<13)|0;h=((o=o+Math.imul(w,mt)|0)+(n>>>13)|0)+(zt>>>26)|0,zt&=67108863,i=Math.imul(O,Q),n=(n=Math.imul(O,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),i=i+Math.imul(B,rt)|0,n=(n=n+Math.imul(B,it)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,it)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,i=i+Math.imul(I,ut)|0,n=(n=n+Math.imul(I,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0,i=i+Math.imul(A,ct)|0,n=(n=n+Math.imul(A,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var It=(h+(i=i+Math.imul(M,dt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,dt)|0))<<13)|0;h=((o=o+Math.imul(S,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,it))+Math.imul(F,rt)|0,o=Math.imul(F,it),i=i+Math.imul(B,ot)|0,n=(n=n+Math.imul(B,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,i=i+Math.imul(C,ut)|0,n=(n=n+Math.imul(C,ht)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ht)|0,i=i+Math.imul(I,ct)|0,n=(n=n+Math.imul(I,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var Tt=(h+(i=i+Math.imul(A,dt)|0)|0)+((8191&(n=(n=n+Math.imul(A,mt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),i=i+Math.imul(B,ut)|0,n=(n=n+Math.imul(B,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Pt=(h+(i=i+Math.imul(I,dt)|0)|0)+((8191&(n=(n=n+Math.imul(I,mt)|0)+Math.imul(T,dt)|0))<<13)|0;h=((o=o+Math.imul(T,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,ut),n=(n=Math.imul(O,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),i=i+Math.imul(B,ct)|0,n=(n=n+Math.imul(B,ft)|0)+Math.imul(D,ct)|0,o=o+Math.imul(D,ft)|0;var Ct=(h+(i=i+Math.imul(C,dt)|0)|0)+((8191&(n=(n=n+Math.imul(C,mt)|0)+Math.imul(L,dt)|0))<<13)|0;h=((o=o+Math.imul(L,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,ft))+Math.imul(F,ct)|0,o=Math.imul(F,ft);var Lt=(h+(i=i+Math.imul(B,dt)|0)|0)+((8191&(n=(n=n+Math.imul(B,mt)|0)+Math.imul(D,dt)|0))<<13)|0;h=((o=o+Math.imul(D,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Rt=(h+(i=Math.imul(O,dt))|0)+((8191&(n=(n=Math.imul(O,mt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,mt))+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=yt,u[2]=vt,u[3]=_t,u[4]=bt,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=At,u[11]=Et,u[12]=zt,u[13]=It,u[14]=Tt,u[15]=Pt,u[16]=Ct,u[17]=Lt,u[18]=Rt,0!==h&&(u[19]=h,r.length++),r};function d(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var a=n;n=0;for(var s=67108863&i,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var l=o-h,c=(0|t.words[l])*(0|e.words[h]),f=67108863&c;s=67108863&(f=f+s|0),n+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=s,i=a,a=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},m.prototype.permute=function(t,e,r,i,n,o){for(var a=0;a<o;a++)i[a]=e[t[a]],n[a]=r[t[a]]},m.prototype.transform=function(t,e,r,i,n,o){this.permute(o,t,e,r,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),l=0;l<n;l+=s)for(var c=u,f=h,p=0;p<a;p++){var d=r[l+p],m=i[l+p],g=r[l+p+a],y=i[l+p+a],v=c*g-f*y;y=c*y+f*g,g=v,r[l+p]=d+g,i[l+p]=m+y,r[l+p+a]=d-g,i[l+p+a]=m-y,p!==s&&(v=u*c-h*f,f=u*f+h*c,c=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=t[i];t[i]=t[r-i-1],t[r-i-1]=n,n=e[i],e[i]=-e[r-i-1],e[r-i-1]=-n}},m.prototype.normalize13b=function(t,e){for(var r=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+r;t[i]=67108863&n,r=n<67108864?0:n/67108864|0}return t},m.prototype.convert13b=function(t,e,r,n){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<n;++a)r[a]=0;i(0===o),i(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),o=this.stub(i),a=new Array(i),s=new Array(i),u=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),f=r.words;f.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,h,i),this.transform(a,o,s,u,i,n),this.transform(h,o,l,c,i,n);for(var p=0;p<i;p++){var d=s[p]*l[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*l[p],s[p]=d}return this.conjugate(s,u,i),this.transform(s,u,f,o,i,n),this.conjugate(f,o,i),this.normalize13b(f,i),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),d(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var i=r/26|0,n=r%26;e[r]=(t.words[i]&1<<n)>>>n}return e}(t);if(0===e.length)return new o(1);for(var r=this,i=0;i<e.length&&0===e[i];i++,r=r.sqr());if(++i<e.length)for(var n=r.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,r=t%26,n=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(n-=a,n=Math.max(0,n),u){for(var h=0;h<a;h++)u.words[h]=this.words[h];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,h=0;h<this.length;h++)this.words[h]=this.words[h+a];else this.words[0]=0,this.length=1;var l=0;for(h=this.length-1;h>=0&&(0!==l||h>=n);h--){var c=0|this.words[h];this.words[h]=l<<26-o|c>>>o,l=c&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return i(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,n=1<<e;return!(this.length<=r)&&!!(this.words[r]&n)},o.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var n,o,a=t.length+r;this._expand(a);var s=0;for(n=0;n<t.length;n++){o=(0|this.words[n+r])+s;var u=(0|t.words[n])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)s=(o=(0|this.words[n+r])+s)>>26,this.words[n+r]=67108863&o;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(o=-(0|this.words[n])+s)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!==(r=26-this._countBits(a))&&(n=n.ushln(r),i.iushln(r),a=0|n.words[n.length-1]);var s,u=i.length-n.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var h=0;h<s.length;h++)s.words[h]=0}var l=i.clone()._ishlnsubmul(n,1,u);0===l.negative&&(i=l,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|i.words[n.length+c])+(0|i.words[n.length+c-1]);for(f=Math.min(f/a|0,67108863),i._ishlnsubmul(n,f,c);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(n,1,c),i.isZero()||(i.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),i.strip(),"div"!==e&&0!==r&&i.iushrn(r),{div:s||null,mod:i}},o.prototype.divmod=function(t,e,r){return i(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(e*r+(0|this.words[n]))%t;return r},o.prototype.idivn=function(t){i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*e;this.words[r]=n/t|0,e=n%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var l=r.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(l),a.isub(c)),n.iushrn(1),a.iushrn(1);for(var d=0,m=1;0==(r.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),n.isub(s),a.isub(u)):(r.isub(e),s.isub(n),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new o(1),s=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,l=1;0==(e.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(e.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(r.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var i=0;e.isEven()&&r.isEven();i++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=e.cmp(r);if(n<0){var o=e;e=r,r=o}else if(0===n||0===r.cmpn(1))break;e.isub(r)}return r.iushln(i)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,r=(t-e)/26,n=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|t.words[r];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new x(t)},o.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(4194303&o)<<4|n>>>22,n=o}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var i=0|t.words[r];e+=977*i,t.words[r]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(b,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var i=19*(0|t.words[r])+e,n=67108863&i;i>>>=26,t.words[r]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return g[t]=e,e},x.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,h).cmp(u);)l.redIAdd(u);for(var c=this.pow(l,n),f=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),d=a;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();i(g<d);var y=this.pow(c,new o(1).iushln(d-g-1));f=f.redMul(y),c=y.redSqr(),p=p.redMul(c),d=g}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var n=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=u-1;l>=0;l--){var c=h>>l&1;n!==r[0]&&(n=this.sqr(n)),0!==c||0!==a?(a<<=1,a|=c,(4===++s||0===i&&0===l)&&(n=this.mul(n,r[a]),s=0,a=0)):s=0}u=26}return n},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},n(M,x),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},d113:function(t,e,r){"use strict";var i={};function n(t,e,r){r||(r=Error);var n=function(t){var r,i;function n(r,i,n){return t.call(this,function(t,r,i){return"string"==typeof e?e:e(t,r,i)}(r,i,n))||this}return i=t,(r=n).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i,n}(r);n.prototype.name=r.name,n.prototype.code=t,i[t]=n}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,n,a,s;if("string"==typeof e&&(n="not ",e.substr(!a||a<0?0:+a,n.length)===n)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(i," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(i," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},d1c8:function(t,e,r){"use strict";const i=r("3fb5");function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=n,n.prototype.isError=function(t){return t instanceof o},n.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,r){const i=this._reporterState;this.exitKey(t),null!==i.obj&&(i.obj[e]=r)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},n.prototype.error=function(t){let e;const r=this._reporterState,i=t instanceof o;if(e=i?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return i||r.errors.push(e),e},n.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},i(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},d331:function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,o){return'<div class="map-zoom-controller-list" title="'+t.escapeExpression((a=r("dfab"),a&&(a.__esModule?a.default:a)).call(null!=e?e:t.nullContext||{},"Zoom","timemap",{name:"lang",hash:{},data:o,loc:{start:{line:1,column:45},end:{line:1,column:70}}}))+'">\n  <div class="zoom-in-icon"></div>\n  <div class="divider"></div>\n  <div class="zoom-out-icon"></div>\n</div>';var a},useData:!0})},d424:function(t,e,r){"use strict";var i=r("3fb5"),n=r("8707").Buffer,o=r("6430"),a=n.alloc(128);function s(t,e){o.call(this,"digest"),"string"==typeof e&&(e=n.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=n.concat([e,a],64));for(var r=this._ipad=n.allocUnsafe(64),i=this._opad=n.allocUnsafe(64),s=0;s<64;s++)r[s]=54^e[s],i[s]=92^e[s];this._hash=[r]}i(s,o),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,t]))},t.exports=s},d70e:function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},d925:function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},da3e:function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},dc73:function(t,e,r){var i=r("dcef");t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,r,i,n){return'\n\n<div class="map-bottom-right-components mapBottomRightContainer">\n  <ul>\n    <li class="map-measure-distance cp"></li>\n    <li class="map-measure-area cp"></li>\n    <li class="map-switch-basemap cp"></li>\n    <li class="map-get-self-position cp"></li>\n    <li class="map-zoom-controller cp"></li>\n  </ul>\n</div>'},useData:!0})},df2f:function(t,e,r){var i,n,o,a,s,u,h,l;t.exports=(l=r("21bf"),n=(i=l).lib,o=n.WordArray,a=n.Hasher,s=i.algo,u=[],h=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],h=0;h<80;h++){if(h<16)u[h]=0|t[e+h];else{var l=u[h-3]^u[h-8]^u[h-14]^u[h-16];u[h]=l<<1|l>>>31}var c=(i<<5|i>>>27)+s+u[h];c+=h<20?1518500249+(n&o|~n&a):h<40?1859775393+(n^o^a):h<60?(n&o|n&a|o&a)-1894007588:(n^o^a)-899497514,s=a,a=o,o=n<<30|n>>>2,n=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),e[15+(i+64>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),i.SHA1=a._createHelper(h),i.HmacSHA1=a._createHmacHelper(h),l.SHA1)},dfab:function(t,e,r){"use strict";n(r("bd43"));var i=n(r("89ec"));function n(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"common";"string"!=typeof e&&(e="common");for(var r=[],n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return o.forEach((function(t){"string"!=typeof t&&"number"!=typeof t||r.push(t+"")})),(0,i.default)(window.getLang(t,{m:e,params:r}))}},e07b:function(t,e,r){var i=r("5a76"),n=r("b5ca"),o=r("69f2"),a=r("8707").Buffer,s=r("7d2a"),u=r("9f9d"),h=r("8be6"),l=a.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var s=function(t){function e(e){return o(t).update(e).digest()}return"rmd160"===t||"ripemd160"===t?function(t){return(new n).update(t).digest()}:"md5"===t?i:e}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,l],u));for(var h=a.allocUnsafe(u+c[t]),f=a.allocUnsafe(u+c[t]),p=0;p<u;p++)h[p]=54^e[p],f[p]=92^e[p];var d=a.allocUnsafe(u+r+4);h.copy(d,0,0,u),this.ipad1=d,this.ipad2=h,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=c[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,i,n){s(r,i);var o=new f(n=n||"sha1",t=h(t,u,"Password"),(e=h(e,u,"Salt")).length),l=a.allocUnsafe(i),p=a.allocUnsafe(e.length+4);e.copy(p,0,0,e.length);for(var d=0,m=c[n],g=Math.ceil(i/m),y=1;y<=g;y++){p.writeUInt32BE(y,e.length);for(var v=o.run(p,o.ipad1),_=v,b=1;b<r;b++){_=o.run(_,o.ipad2);for(var w=0;w<m;w++)v[w]^=_[w]}v.copy(l,d),d+=m}return l}},e192:function(t,e,r){t.exports=function(){"use strict";var t,e,r;function i(i,n){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),r=n(a),"undefined"!=typeof window&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=n;else t=n}return i(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=i;function i(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var r,i,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(r=0))return r;if(n>(i=1))return i;for(;r<i;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?r=n:i=n,n=.5*(i-r)+r}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),i=Math.sin(t),n=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-i*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function u(t,e,i,n){var o=new r(t,e,i,n);return function(t){return o.solve(t)}}var h=u(.25,.1,.25,1);function l(t,e,r){return Math.min(r,Math.max(e,t))}function c(t,e,r){var i=r-e,n=((t-e)%i+i)%i+e;return n===e?r:n}function f(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t}var p=1;function d(){return p++}function m(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function g(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function y(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function _(t,e,r){var i={};for(var n in t)i[n]=e.call(r||this,t[n],n,t);return i}function b(t,e,r){var i={};for(var n in t)e.call(r||this,t[n],n,t)&&(i[n]=t[n]);return i}function w(t){return Array.isArray(t)?t.map(w):"object"==typeof t&&t?_(t,w):t}var x={};function M(t){x[t]||(x[t]=!0)}function S(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function k(t){for(var e=0,r=0,i=t.length,n=i-1,o=void 0,a=void 0;r<i;n=r++)e+=((a=t[n]).x-(o=t[r]).x)*(o.y+a.y);return e}function A(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function E(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,r,i,n){var o=i||n;return e[r]=!o||o.toLowerCase(),""})),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}var z=null;function I(t){if(null==z){var e=t.navigator?t.navigator.userAgent:null;z=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return z}function T(t){try{var e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var P,C,L,R,B=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now.bind(Date),D=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,j=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame,O={now:B,frame:function(t){var e=D(t);return{cancel:function(){return j(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=a.document.createElement("canvas"),i=r.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return P||(P=a.document.createElement("a")),P.href=t,P.href},hardwareConcurrency:a.navigator&&a.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==C&&(C=a.matchMedia("(prefers-reduced-motion: reduce)")),C.matches)}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},N={supported:!1,testSupport:function(t){!U&&R&&(q?V(t):L=t)}},U=!1,q=!1;function V(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;N.supported=!0}catch(t){}t.deleteTexture(e),U=!0}a.document&&((R=a.document.createElement("img")).onload=function(){L&&V(L),L=null,q=!0},R.onerror=function(){U=!0,L=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Z="01",G=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function J(t){return 0===t.indexOf("mapbox:")}G.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Z,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},G.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},G.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},G.prototype.normalizeStyleURL=function(t,e){if(!J(t))return t;var r=$(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeGlyphsURL=function(t,e){if(!J(t))return t;var r=$(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeSourceURL=function(t,e){if(!J(t))return t;var r=$(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeSpriteURL=function(t,e,r,i){var n=$(t);return J(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+r,this._makeAPIURL(n,this._customAccessToken||i)):(n.path+=""+e+r,X(n))},G.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!J(t))return t;var r=$(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(O.devicePixelRatio>=2||512===e?"@2x":"")+(N.supported?".webp":"$1")),r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/v4"+r.path;var i=this._customAccessToken||function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(r.params)||F.ACCESS_TOKEN;return F.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,i)},G.prototype.canonicalizeTileURL=function(t,e){var r=$(t);if(!r.path.match(/(^\/v4\/)/)||!r.path.match(/\.[\w]+$/))return t;var i="mapbox://tiles/";i+=r.path.replace("/v4/","");var n=r.params;return e&&(n=n.filter((function(t){return!t.match(/^access_token=/)}))),n.length&&(i+="?"+n.join("&")),i},G.prototype.canonicalizeTileset=function(t,e){for(var r=!!e&&J(e),i=[],n=0,o=t.tiles||[];n<o.length;n+=1){var a=o[n];K(a)?i.push(this.canonicalizeTileURL(a,r)):i.push(a)}return i},G.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=$(F.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!F.REQUIRE_ACCESS_TOKEN)return X(t);if(!(e=e||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),X(t)};var H=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function K(t){return H.test(t)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $(t){var e=t.match(W);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function X(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Y(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,r=Y(F.ACCESS_TOKEN);return e=r&&r.u?a.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):F.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=T("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var i=a.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var n=a.localStorage.getItem(r);n&&(this.anonId=n)}catch(t){M("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=T("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){M("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(t){},Q.prototype.postEvent=function(t,e,r,i){var n=this;if(F.EVENTS_URL){var o=$(F.EVENTS_URL);o.params.push("access_token="+(i||F.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:Z,userId:this.anonId},s=e?f(a,e):a,u={url:X(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=wt(u,(function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests(i)}))}},Q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,rt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,i){this.skuToken=r,(F.EVENTS_URL&&i||F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return J(t)||K(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),i=r.id,n=r.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=m()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||i&&(e.success[i]=!0)}),t))}},e}(Q),it=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return J(t)||K(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=Y(F.ACCESS_TOKEN),i=r?r.u:F.ACCESS_TOKEN,n=i!==this.eventData.tokenU;g(this.anonId)||(this.anonId=m(),n=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;n=n||u>=1||u<-1||a.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=i)}),t)}},e}(Q)),nt=it.postTurnstileEvent.bind(it),ot=new rt,at=ot.postMapLoadEvent.bind(ot),st=500,ut=50;function ht(){a.caches&&!tt&&(tt=a.caches.open("mapbox-tiles"))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ct,ft=1/0;function pt(){return null==ct&&(ct=a.OffscreenCanvas&&new a.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof a.createImageBitmap),ct}var dt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(dt);var mt,gt,yt=function(t){function e(e,r,i){401===r&&K(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),vt=A()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===a.location.protocol?a.parent:a).location.href},_t=function(t,e){if(!(/^file:/.test(r=t.url)||/^file:/.test(vt())&&!/^\w+:/.test(r))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){var r,i=new a.AbortController,n=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:vt(),signal:i.signal}),o=!1,s=!1,u=(r=n.url).indexOf("sku=")>0&&K(r);"json"===t.type&&n.headers.set("Accept","application/json");var h=function(r,i,o){if(!s){if(r&&"SecurityError"!==r.message&&M(r),i&&o)return l(i);var h=Date.now();a.fetch(n).then((function(r){if(r.ok){var i=u?r.clone():null;return l(r,i,h)}return e(new yt(r.statusText,r.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(r,i,u){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then((function(t){s||(i&&u&&function(t,e,r){if(ht(),tt){var i={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach((function(t,e){return i.headers.set(e,t)}));var n=E(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&i.headers.set("Expires",new Date(r+1e3*n["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-r<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var r=new a.Response(e,i);ht(),tt&&tt.then((function(e){return e.put(lt(t.url),r)})).catch((function(t){return M(t.message)}))})))}}(n,i,u),o=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return u?function(t,e){if(ht(),!tt)return e(null);var r=lt(t.url);tt.then((function(t){t.match(r).then((function(i){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),r=E(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(i);t.delete(r),n&&t.put(r,i.clone()),e(null,i,n)})).catch(e)})).catch(e)}(n,h):h(null,null),{cancel:function(){s=!0,o||i.abort()}}}(t,e);if(A()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(t,e){var r=new a.XMLHttpRequest;for(var i in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var i=r.response;if("json"===t.type)try{i=JSON.parse(r.response)}catch(t){return e(t)}e(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new yt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},bt=function(t,e){return _t(f(t,{type:"arrayBuffer"}),e)},wt=function(t,e){return _t(f(t,{method:"POST"}),e)};mt=[],gt=0;var xt=function(t,e){if(N.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),gt>=F.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return mt.push(r),r}gt++;var i=!1,n=function(){if(!i)for(i=!0,gt--;mt.length&&gt<F.MAX_PARALLEL_IMAGE_REQUESTS;){var t=mt.shift();t.cancelled||(t.cancel=xt(t.requestParameters,t.callback).cancel)}},o=bt(t,(function(t,r,i,o){n(),t?e(t):r&&(pt()?function(t,e){var r=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(r).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(r,e):function(t,e,r,i){var n=new a.Image,o=a.URL;n.onload=function(){e(null,n),o.revokeObjectURL(n.src)},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new a.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=r,n.expires=i,n.src=t.byteLength?o.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(r,e,i,o))}));return{cancel:function(){o.cancel(),n()}}};function Mt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function St(t,e,r){if(r&&r[t]){var i=r[t].indexOf(e);-1!==i&&r[t].splice(i,1)}}var kt=function(t,e){void 0===e&&(e={}),f(this,e),this.type=t},At=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",f({error:e},r))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(kt),Et=function(){};Et.prototype.on=function(t,e){return this._listeners=this._listeners||{},Mt(t,e,this._listeners),this},Et.prototype.off=function(t,e){return St(t,e,this._listeners),St(t,e,this._oneTimeListeners),this},Et.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Mt(t,e,this._oneTimeListeners),this},Et.prototype.fire=function(t,e){"string"==typeof t&&(t=new kt(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var i=0,n=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];i<n.length;i+=1)n[i].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];o<a.length;o+=1){var s=a[o];St(r,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(f(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}return this},Et.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Et.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var zt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},It=function(t,e,r,i){this.message=(t?t+": ":"")+r,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function Tt(t){var e=t.value;return e?[new It(t.key,e,"constants have been deprecated as of v8")]:[]}function Pt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t}function Ct(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Lt(t){if(Array.isArray(t))return t.map(Lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=Lt(t[r]);return e}return Ct(t)}var Rt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Bt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var n=i[r];this.bindings[n[0]]=n[1]}};Bt.prototype.concat=function(t){return new Bt(this,t)},Bt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Bt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Dt={kind:"null"},jt={kind:"number"},Ot={kind:"string"},Ft={kind:"boolean"},Nt={kind:"color"},Ut={kind:"object"},qt={kind:"value"},Vt={kind:"collator"},Zt={kind:"formatted"},Gt={kind:"resolvedImage"};function Jt(t,e){return{kind:"array",itemType:t,N:e}}function Ht(t){if("array"===t.kind){var e=Ht(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Kt=[Dt,jt,Ot,Ft,Nt,Zt,Ut,Jt(qt),Gt];function Wt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Wt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,i=Kt;r<i.length;r+=1)if(!Wt(i[r],e))return null}return"Expected "+Ht(t)+" but found "+Ht(e)+" instead."}function $t(t,e){return e.some((function(e){return e.kind===t.kind}))}function Xt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Yt=e((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in r)return r[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),h=s.indexOf(")");if(-1!==u&&h+1===s.length){var l=s.substr(0,u),c=s.substr(u+1,h-(u+1)).split(","),f=1;switch(l){case"rgba":if(4!==c.length)return null;f=o(c.pop());case"rgb":return 3!==c.length?null:[n(c[0]),n(c[1]),n(c[2]),f];case"hsla":if(4!==c.length)return null;f=o(c.pop());case"hsl":if(3!==c.length)return null;var p=(parseFloat(c[0])%360+360)%360/360,d=o(c[1]),m=o(c[2]),g=m<=.5?m*(d+1):m+d-m*d,y=2*m-g;return[i(255*a(y,g,p+1/3)),i(255*a(y,g,p)),i(255*a(y,g,p-1/3)),f];default:return null}}return null}}catch(t){}})).parseCSSColor,Qt=function(t,e,r,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i};Qt.parse=function(t){if(t){if(t instanceof Qt)return t;if("string"==typeof t){var e=Yt(t);if(e)return new Qt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Qt.prototype.toString=function(){var t=this.toArray(),e=t[1],r=t[2],i=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(r)+","+i+")"},Qt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Qt.black=new Qt(0,0,0,1),Qt.white=new Qt(1,1,1,1),Qt.transparent=new Qt(0,0,0,0),Qt.red=new Qt(1,0,0,1);var te=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};te.prototype.compare=function(t,e){return this.collator.compare(t,e)},te.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ee=function(t,e,r,i,n){this.text=t,this.image=e,this.scale=r,this.fontStack=i,this.textColor=n},re=function(t){this.sections=t};re.fromString=function(t){return new re([new ee(t,null,null,null,null)])},re.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},re.factory=function(t){return t instanceof re?t:re.fromString(t)},re.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},re.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var n={};i.fontStack&&(n["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(n["font-scale"]=i.scale),i.textColor&&(n["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(n)}}return t};var ie=function(t){this.name=t.name,this.available=t.available};function ne(t,e,r,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,r,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,r,i]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function oe(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Qt)return!0;if(t instanceof te)return!0;if(t instanceof re)return!0;if(t instanceof ie)return!0;if(Array.isArray(t)){for(var e=0,r=t;e<r.length;e+=1)if(!oe(r[e]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!oe(t[i]))return!1;return!0}return!1}function ae(t){if(null===t)return Dt;if("string"==typeof t)return Ot;if("boolean"==typeof t)return Ft;if("number"==typeof t)return jt;if(t instanceof Qt)return Nt;if(t instanceof te)return Vt;if(t instanceof re)return Zt;if(t instanceof ie)return Gt;if(Array.isArray(t)){for(var e,r=t.length,i=0,n=t;i<n.length;i+=1){var o=ae(n[i]);if(e){if(e===o)continue;e=qt;break}e=o}return Jt(e||qt,r)}return Ut}function se(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Qt||t instanceof re||t instanceof ie?t.toString():JSON.stringify(t)}ie.prototype.toString=function(){return this.name},ie.fromString=function(t){return t?new ie({name:t,available:!1}):null},ie.prototype.serialize=function(){return["image",this.name]};var ue=function(t,e){this.type=t,this.value=e};ue.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!oe(t[1]))return e.error("invalid value");var r=t[1],i=ae(r),n=e.expectedType;return"array"!==i.kind||0!==i.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(i=n),new ue(i,r)},ue.prototype.evaluate=function(){return this.value},ue.prototype.eachChild=function(){},ue.prototype.outputDefined=function(){return!0},ue.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Qt?["rgba"].concat(this.value.toArray()):this.value instanceof re?this.value.serialize():this.value};var he=function(t){this.name="ExpressionEvaluationError",this.message=t};he.prototype.toJSON=function(){return this.message};var le={string:Ot,number:jt,boolean:Ft,object:Ut},ce=function(t,e){this.type=t,this.args=e};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,i=1,n=t[0];if("array"===n){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=le[s],i++}else o=qt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}r=Jt(o,a)}else r=le[n];for(var u=[];i<t.length;i++){var h=e.parse(t[i],i,qt);if(!h)return null;u.push(h)}return new ce(r,u)},ce.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Wt(this.type,ae(r)))return r;if(e===this.args.length-1)throw new he("Expected value to be of type "+Ht(this.type)+", but found "+Ht(ae(r))+" instead.")}return null},ce.prototype.eachChild=function(t){this.args.forEach(t)},ce.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ce.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var fe=function(t){this.type=Zt,this.sections=t};fe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");for(var i=[],n=!1,o=1;o<=t.length-1;++o){var a=t[o];if(n&&"object"==typeof a&&!Array.isArray(a)){n=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,jt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Jt(Ot))))return null;var h=null;if(a["text-color"]&&!(h=e.parse(a["text-color"],1,Nt)))return null;var l=i[i.length-1];l.scale=s,l.font=u,l.textColor=h}else{var c=e.parse(t[o],1,qt);if(!c)return null;var f=c.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,i.push({content:c,scale:null,font:null,textColor:null})}}return new fe(i)},fe.prototype.evaluate=function(t){return new re(this.sections.map((function(e){var r=e.content.evaluate(t);return ae(r)===Gt?new ee("",r,null,null,null):new ee(se(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},fe.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},fe.prototype.outputDefined=function(){return!1},fe.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t.push(i.content.serialize());var n={};i.scale&&(n["font-scale"]=i.scale.serialize()),i.font&&(n["text-font"]=i.font.serialize()),i.textColor&&(n["text-color"]=i.textColor.serialize()),t.push(n)}return t};var pe=function(t){this.type=Gt,this.input=t};pe.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Ot);return r?new pe(r):e.error("No image name provided.")},pe.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=ie.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r},pe.prototype.eachChild=function(t){t(this.input)},pe.prototype.outputDefined=function(){return!1},pe.prototype.serialize=function(){return["image",this.input.serialize()]};var de={"to-boolean":Ft,"to-color":Nt,"to-number":jt,"to-string":Ot},me=function(t,e){this.type=t,this.args=e};me.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var i=de[r],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,qt);if(!a)return null;n.push(a)}return new me(i,n)},me.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,i=0,n=this.args;i<n.length;i+=1){if(r=null,(e=n[i].evaluate(t))instanceof Qt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ne(e[0],e[1],e[2],e[3])))return new Qt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new he(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var h=Number(a);if(!isNaN(h))return h}throw new he("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?re.fromString(se(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ie.fromString(se(this.args[0].evaluate(t))):se(this.args[0].evaluate(t))},me.prototype.eachChild=function(t){this.args.forEach(t)},me.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},me.prototype.serialize=function(){if("formatted"===this.type.kind)return new fe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new pe(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var ge=["Unknown","Point","LineString","Polygon"],ye=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ye.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ye.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ge[this.feature.type]:this.feature.type:null},ye.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ye.prototype.canonicalID=function(){return this.canonical},ye.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ye.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Qt.parse(t)),e};var ve=function(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ve.parse=function(t,e){var r,i=t[0],n=ve.definitions[i];if(!n)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1})),u=null,h=0,l=s;h<l.length;h+=1){var c=l[h],f=c[0],p=c[1];u=new Ne(e.registry,e.path,null,e.scope);for(var d=[],m=!1,g=1;g<t.length;g++){var y=t[g],v=Array.isArray(f)?f[g-1]:f.type,_=u.parse(y,1+d.length,v);if(!_){m=!0;break}d.push(_)}if(!m)if(Array.isArray(f)&&f.length!==d.length)u.error("Expected "+f.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var w=Array.isArray(f)?f[b]:f.type,x=d[b];u.concat(b+1).checkSubtype(w,x.type)}if(0===u.errors.length)return new ve(i,o,p,d)}}if(1===s.length)(r=e.errors).push.apply(r,u.errors);else{for(var M=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Ht).join(", ")+")":"("+Ht(e.type)+"...)"})).join(" | "),S=[],k=1;k<t.length;k++){var A=e.parse(t[k],1+S.length);if(!A)return null;S.push(Ht(A.type))}e.error("Expected arguments of type "+M+", but found ("+S.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var r in ve.definitions=e,e)t[r]=ve};var _e=function(t,e,r){this.type=Vt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function we(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function xe(t,e){var r=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(r*n*8192),Math.round(i*n*8192)]}function Me(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Se(t,e){for(var r,i,n,o,a,s,u,h=!1,l=0,c=e.length;l<c;l++)for(var f=e[l],p=0,d=f.length;p<d-1;p++){if((o=(r=t)[0]-(i=f[p])[0])*(u=r[1]-(n=f[p+1])[1])-(s=r[0]-n[0])*(a=r[1]-i[1])==0&&o*s<=0&&a*u<=0)return!1;Me(t,f[p],f[p+1])&&(h=!h)}return h}function ke(t,e){for(var r=0;r<e.length;r++)if(Se(t,e[r]))return!0;return!1}function Ae(t,e,r,i){var n=i[0]-r[0],o=i[1]-r[1],a=(t[0]-r[0])*o-n*(t[1]-r[1]),s=(e[0]-r[0])*o-n*(e[1]-r[1]);return a>0&&s<0||a<0&&s>0}function Ee(t,e,r){for(var i=0,n=r;i<n.length;i+=1)for(var o=n[i],a=0;a<o.length-1;++a)if(0!=(c=[(l=o[a+1])[0]-(h=o[a])[0],l[1]-h[1]])[0]*(f=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-c[1]*f[0]&&Ae(s,u,h,l)&&Ae(h,l,s,u))return!0;var s,u,h,l,c,f;return!1}function ze(t,e){for(var r=0;r<t.length;++r)if(!Se(t[r],e))return!1;for(var i=0;i<t.length-1;++i)if(Ee(t[i],t[i+1],e))return!1;return!0}function Ie(t,e){for(var r=0;r<e.length;r++)if(ze(t,e[r]))return!0;return!1}function Te(t,e,r){for(var i=[],n=0;n<t.length;n++){for(var o=[],a=0;a<t[n].length;a++){var s=xe(t[n][a],r);be(e,s),o.push(s)}i.push(o)}return i}function Pe(t,e,r){for(var i=[],n=0;n<t.length;n++){var o=Te(t[n],e,r);i.push(o)}return i}function Ce(t,e,r,i){if(t[0]<r[0]||t[0]>r[2]){var n=.5*i,o=t[0]-r[0]>n?-i:r[0]-t[0]>n?i:0;0===o&&(o=t[0]-r[2]>n?-i:r[2]-t[0]>n?i:0),t[0]+=o}be(e,t)}function Le(t,e,r,i){for(var n=8192*Math.pow(2,i.z),o=[8192*i.x,8192*i.y],a=[],s=0,u=t;s<u.length;s+=1)for(var h=0,l=u[s];h<l.length;h+=1){var c=l[h],f=[c.x+o[0],c.y+o[1]];Ce(f,e,r,n),a.push(f)}return a}function Re(t,e,r,i){for(var n,o=8192*Math.pow(2,i.z),a=[8192*i.x,8192*i.y],s=[],u=0,h=t;u<h.length;u+=1){for(var l=[],c=0,f=h[u];c<f.length;c+=1){var p=f[c],d=[p.x+a[0],p.y+a[1]];be(e,d),l.push(d)}s.push(l)}if(e[2]-e[0]<=o/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var m=0,g=s;m<g.length;m+=1)for(var y=0,v=g[m];y<v.length;y+=1)Ce(v[y],e,r,o)}return s}_e.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ft);if(!i)return null;var n=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ft);if(!n)return null;var o=null;return r.locale&&!(o=e.parse(r.locale,1,Ot))?null:new _e(i,n,o)},_e.prototype.evaluate=function(t){return new te(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},_e.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Be=function(t,e){this.type=Ft,this.geojson=t,this.geometries=e};function De(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Be)return!1;var e=!0;return t.eachChild((function(t){e&&!De(t)&&(e=!1)})),e}function je(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!je(t)&&(e=!1)})),e}function Oe(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!Oe(t,e)&&(r=!1)})),r}Be.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(oe(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var n=r.features[i].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Be(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Be(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new Be(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Be.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Te(e.coordinates,i,n),a=Le(t.geometry(),r,i,n);if(!we(r,i))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!Se(u[s],o))return!1}if("MultiPolygon"===e.type){var h=Pe(e.coordinates,i,n),l=Le(t.geometry(),r,i,n);if(!we(r,i))return!1;for(var c=0,f=l;c<f.length;c+=1)if(!ke(f[c],h))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var o=Te(e.coordinates,i,n),a=Re(t.geometry(),r,i,n);if(!we(r,i))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!ze(u[s],o))return!1}if("MultiPolygon"===e.type){var h=Pe(e.coordinates,i,n),l=Re(t.geometry(),r,i,n);if(!we(r,i))return!1;for(var c=0,f=l;c<f.length;c+=1)if(!Ie(f[c],h))return!1}return!0}(t,this.geometries)}return!1},Be.prototype.eachChild=function(){},Be.prototype.outputDefined=function(){return!0},Be.prototype.serialize=function(){return["within",this.geojson]};var Fe=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Fe.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new Fe(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},Fe.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Fe.prototype.eachChild=function(){},Fe.prototype.outputDefined=function(){return!1},Fe.prototype.serialize=function(){return["var",this.name]};var Ne=function(t,e,r,i,n){void 0===e&&(e=[]),void 0===i&&(i=new Bt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=i,this.errors=n,this.expectedType=r};function Ue(t,e){for(var r,i=t.length-1,n=0,o=i,a=0;n<=o;)if((r=t[a=Math.floor((n+o)/2)])<=e){if(a===i||e<t[a+1])return a;n=a+1}else{if(!(r>e))throw new he("Input is not a number.");o=a-1}return 0}Ne.prototype.parse=function(t,e,r,i,n){return void 0===n&&(n={}),e?this.concat(e,r,i)._parse(t,n):this._parse(t,n)},Ne.prototype._parse=function(t,e){function r(t,e,r){return"assert"===r?new ce(e,[t]):"coerce"===r?new me(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[i];if(n){var o=n.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,e.typeAnnotation||"coerce");else o=r(o,a,e.typeAnnotation||"assert")}if(!(o instanceof ue)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Fe)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof _e)return!1;if(e instanceof Be)return!1;var r=e instanceof me||e instanceof ce,i=!0;return e.eachChild((function(e){i=r?i&&t(e):i&&e instanceof ue})),!!i&&De(e)&&Oe(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new ye;try{o=new ue(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ne.prototype.concat=function(t,e,r){var i="number"==typeof t?this.path.concat(t):this.path,n=r?this.scope.concat(r):this.scope;return new Ne(this.registry,i,e||null,n,this.errors)},Ne.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Rt(i,t))},Ne.prototype.checkSubtype=function(t,e){var r=Wt(t,e);return r&&this.error(r),r};var qe=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,n=r;i<n.length;i+=1){var o=n[i],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function Ve(t,e,r){return t*(1-r)+e*r}qe.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,jt);if(!r)return null;var i=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,h=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var l=e.parse(s,h,n);if(!l)return null;n=n||l.type,i.push([a,l])}return new qe(n,r,i)},qe.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;return i>=e[n-1]?r[n-1].evaluate(t):r[Ue(e,i)].evaluate(t)},qe.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},qe.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},qe.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ze=Object.freeze({__proto__:null,number:Ve,color:function(t,e,r){return new Qt(Ve(t.r,e.r,r),Ve(t.g,e.g,r),Ve(t.b,e.b,r),Ve(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,i){return Ve(t,e[i],r)}))}}),Ge=6/29*3*(6/29),Je=Math.PI/180,He=180/Math.PI;function Ke(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ge+4/29}function We(t){return t>6/29?t*t*t:Ge*(t-4/29)}function $e(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Xe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ye(t){var e=Xe(t.r),r=Xe(t.g),i=Xe(t.b),n=Ke((.4124564*e+.3575761*r+.1804375*i)/.95047),o=Ke((.2126729*e+.7151522*r+.072175*i)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-Ke((.0193339*e+.119192*r+.9503041*i)/1.08883)),alpha:t.a}}function Qe(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*We(e),r=.95047*We(r),i=1.08883*We(i),new Qt($e(3.2404542*r-1.5371385*e-.4985314*i),$e(-.969266*r+1.8760108*e+.041556*i),$e(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}function tr(t,e,r){var i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}var er={forward:Ye,reverse:Qe,interpolate:function(t,e,r){return{l:Ve(t.l,e.l,r),a:Ve(t.a,e.a,r),b:Ve(t.b,e.b,r),alpha:Ve(t.alpha,e.alpha,r)}}},rr={forward:function(t){var e=Ye(t),r=e.l,i=e.a,n=e.b,o=Math.atan2(n,i)*He;return{h:o<0?o+360:o,c:Math.sqrt(i*i+n*n),l:r,alpha:t.a}},reverse:function(t){var e=t.h*Je,r=t.c;return Qe({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:tr(t.h,e.h,r),c:Ve(t.c,e.c,r),l:Ve(t.l,e.l,r),alpha:Ve(t.alpha,e.alpha,r)}}},ir=Object.freeze({__proto__:null,lab:er,hcl:rr}),nr=function(t,e,r,i,n){this.type=t,this.operator=e,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function or(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}nr.interpolationFactor=function(t,e,i,n){var o=0;if("exponential"===t.name)o=or(e,t.base,i,n);else if("linear"===t.name)o=or(e,1,i,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new r(a[0],a[1],a[2],a[3]).solve(or(e,1,i,n))}return o},nr.parse=function(t,e){var r=t[0],i=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,jt)))return null;var u=[],h=null;"interpolate-hcl"===r||"interpolate-lab"===r?h=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(h=e.expectedType);for(var l=0;l<o.length;l+=2){var c=o[l],f=o[l+1],p=l+3,d=l+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(u.length&&u[u.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var m=e.parse(f,d,h);if(!m)return null;h=h||m.type,u.push([c,m])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new nr(h,r,i,n,u):e.error("Type "+Ht(h)+" is not interpolatable.")},nr.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;if(i>=e[n-1])return r[n-1].evaluate(t);var o=Ue(e,i),a=nr.interpolationFactor(this.interpolation,i,e[o],e[o+1]),s=r[o].evaluate(t),u=r[o+1].evaluate(t);return"interpolate"===this.operator?Ze[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?rr.reverse(rr.interpolate(rr.forward(s),rr.forward(u),a)):er.reverse(er.interpolate(er.forward(s),er.forward(u),a))},nr.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},nr.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},nr.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var ar=function(t,e){this.type=t,this.args=e};ar.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,i=e.expectedType;i&&"value"!==i.kind&&(r=i);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+n.length,r,void 0,{typeAnnotation:"omit"});if(!s)return null;r=r||s.type,n.push(s)}var u=i&&n.some((function(t){return Wt(i,t.type)}));return new ar(u?qt:r,n)},ar.prototype.evaluate=function(t){for(var e,r=null,i=0,n=0,o=this.args;n<o.length&&(i++,(r=o[n].evaluate(t))&&r instanceof ie&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null===r);n+=1);return r},ar.prototype.eachChild=function(t){this.args.forEach(t)},ar.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ar.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var sr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};sr.prototype.evaluate=function(t){return this.result.evaluate(t)},sr.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},sr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],i=1;i<t.length-1;i+=2){var n=t[i];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",i);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=e.parse(t[i+1],i+1);if(!o)return null;r.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return a?new sr(r,a):null},sr.prototype.outputDefined=function(){return this.result.outputDefined()},sr.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var i=r[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var ur=function(t,e,r){this.type=t,this.index=e,this.input=r};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,jt),i=e.parse(t[2],2,Jt(e.expectedType||qt));return r&&i?new ur(i.type.itemType,r,i):null},ur.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new he("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new he("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new he("Array index must be an integer, but found "+e+" instead.");return r[e]},ur.prototype.eachChild=function(t){t(this.index),t(this.input)},ur.prototype.outputDefined=function(){return!1},ur.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var hr=function(t,e){this.type=Ft,this.needle=t,this.haystack=e};hr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,qt),i=e.parse(t[2],2,qt);return r&&i?$t(r.type,[Ft,Ot,jt,Dt,qt])?new hr(r,i):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(r.type)+" instead"):null},hr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!Xt(e,["boolean","string","number","null"]))throw new he("Expected first argument to be of type boolean, string, number or null, but found "+Ht(ae(e))+" instead.");if(!Xt(r,["string","array"]))throw new he("Expected second argument to be of type array or string, but found "+Ht(ae(r))+" instead.");return r.indexOf(e)>=0},hr.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},hr.prototype.outputDefined=function(){return!0},hr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var lr=function(t,e,r){this.type=jt,this.needle=t,this.haystack=e,this.fromIndex=r};lr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,qt),i=e.parse(t[2],2,qt);if(!r||!i)return null;if(!$t(r.type,[Ft,Ot,jt,Dt,qt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Ht(r.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,jt);return n?new lr(r,i,n):null}return new lr(r,i)},lr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Xt(e,["boolean","string","number","null"]))throw new he("Expected first argument to be of type boolean, string, number or null, but found "+Ht(ae(e))+" instead.");if(!Xt(r,["string","array"]))throw new he("Expected second argument to be of type array or string, but found "+Ht(ae(r))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return r.indexOf(e,i)}return r.indexOf(e)},lr.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var cr=function(t,e,r,i,n,o){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=n,this.otherwise=o};cr.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var h=e.concat(a);if(0===s.length)return h.error("Expected at least one branch label.");for(var l=0,c=s;l<c.length;l+=1){var f=c[l];if("number"!=typeof f&&"string"!=typeof f)return h.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof f&&Math.floor(f)!==f)return h.error("Numeric branch labels must be integer values.");if(r){if(h.checkSubtype(r,ae(f)))return null}else r=ae(f);if(void 0!==n[String(f)])return h.error("Branch labels must be unique.");n[String(f)]=o.length}var p=e.parse(u,a,i);if(!p)return null;i=i||p.type,o.push(p)}var d=e.parse(t[1],1,qt);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(r,d.type)?null:new cr(r,i,d,n,o,m):null},cr.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},cr.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},cr.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},cr.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],i={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(c=i[this.cases[a]])?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[c][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,h=r;u<h.length;u+=1){var l=h[u],c=l[0],f=l[1];e.push(1===f.length?s(f[0]):f.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var fr=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};fr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,Ft);if(!o)return null;var a=e.parse(t[n+1],n+1,r);if(!a)return null;i.push([o,a]),r=r||a.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new fr(r,i,s):null},fr.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[1];if(i[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},fr.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[1];t(i[0]),t(n)}t(this.otherwise)},fr.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},fr.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var pr=function(t,e,r,i){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=i};function dr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function mr(t,e,r,i){return 0===i.compare(e,r)}function gr(t,e,r){var i="=="!==t&&"!="!==t;return function(){function n(t,e,r){this.type=Ft,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],o=e.parse(t[1],1,qt);if(!o)return null;if(!dr(r,o.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Ht(o.type)+"'.");var a=e.parse(t[2],2,qt);if(!a)return null;if(!dr(r,a.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Ht(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Ht(o.type)+"' and '"+Ht(a.type)+"'.");i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ce(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ce(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Vt)))return null}return new n(o,a,s)},n.prototype.evaluate=function(n){var o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(i&&this.hasUntypedArgument){var s=ae(o),u=ae(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new he('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var h=ae(o),l=ae(a);if("string"!==h.kind||"string"!==l.kind)return e(n,o,a)}return this.collator?r(n,o,a,this.collator.evaluate(n)):e(n,o,a)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}pr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,qt),i=e.parse(t[2],2,jt);if(!r||!i)return null;if(!$t(r.type,[Jt(qt),Ot,qt]))return e.error("Expected first argument to be of type array or string, but found "+Ht(r.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,jt);return n?new pr(r.type,r,i,n):null}return new pr(r.type,r,i)},pr.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!Xt(e,["string","array"]))throw new he("Expected first argument to be of type array or string, but found "+Ht(ae(e))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return e.slice(r,i)}return e.slice(r)},pr.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},pr.prototype.outputDefined=function(){return!1},pr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var yr=gr("==",(function(t,e,r){return e===r}),mr),vr=gr("!=",(function(t,e,r){return e!==r}),(function(t,e,r,i){return!mr(0,e,r,i)})),_r=gr("<",(function(t,e,r){return e<r}),(function(t,e,r,i){return i.compare(e,r)<0})),br=gr(">",(function(t,e,r){return e>r}),(function(t,e,r,i){return i.compare(e,r)>0})),wr=gr("<=",(function(t,e,r){return e<=r}),(function(t,e,r,i){return i.compare(e,r)<=0})),xr=gr(">=",(function(t,e,r){return e>=r}),(function(t,e,r,i){return i.compare(e,r)>=0})),Mr=function(t,e,r,i,n){this.type=Ot,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=n};Mr.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,jt);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var n=null;if(i.locale&&!(n=e.parse(i.locale,1,Ot)))return null;var o=null;if(i.currency&&!(o=e.parse(i.currency,1,Ot)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,jt)))return null;var s=null;return i["max-fraction-digits"]&&!(s=e.parse(i["max-fraction-digits"],1,jt))?null:new Mr(r,n,o,a,s)},Mr.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Mr.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Mr.prototype.outputDefined=function(){return!1},Mr.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Sr=function(t){this.type=jt,this.input=t};Sr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Ht(r.type)+" instead."):new Sr(r):null},Sr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new he("Expected value to be of type string or array, but found "+Ht(ae(e))+" instead.")},Sr.prototype.eachChild=function(t){t(this.input)},Sr.prototype.outputDefined=function(){return!1},Sr.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var kr={"==":yr,"!=":vr,">":br,"<":_r,">=":xr,"<=":wr,array:ce,at:ur,boolean:ce,case:fr,coalesce:ar,collator:_e,format:fe,image:pe,in:hr,"index-of":lr,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Sr,let:sr,literal:ue,match:cr,number:ce,"number-format":Mr,object:ce,slice:pr,step:qe,string:ce,"to-boolean":me,"to-color":me,"to-number":me,"to-string":me,var:Fe,within:Be};function Ar(t,e){var r=e[0],i=e[1],n=e[2],o=e[3];r=r.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=ne(r,i,n,a);if(s)throw new he(s);return new Qt(r/255*a,i/255*a,n/255*a,a)}function Er(t,e){return t in e}function zr(t,e){var r=e[t];return void 0===r?null:r}function Ir(t){return{type:t}}function Tr(t){return{result:"success",value:t}}function Pr(t){return{result:"error",value:t}}function Cr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Lr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Rr(t){return!!t.expression&&t.expression.interpolated}function Br(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Dr(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function jr(t){return t}function Or(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Fr(t,e,r,i,n){return Or(typeof r===n?i[r]:void 0,t.default,e.default)}function Nr(t,e,r){if("number"!==Br(r))return Or(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var n=Ue(t.stops.map((function(t){return t[0]})),r);return t.stops[n][1]}function Ur(t,e,r){var i=void 0!==t.base?t.base:1;if("number"!==Br(r))return Or(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var o=Ue(t.stops.map((function(t){return t[0]})),r),a=function(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(r,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],h=Ze[e.type]||jr;if(t.colorSpace&&"rgb"!==t.colorSpace){var l=ir[t.colorSpace];h=function(t,e){return l.reverse(l.interpolate(l.forward(t),l.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return h(r,i,a)}}:h(s,u,a)}function qr(t,e,r){return"color"===e.type?r=Qt.parse(r):"formatted"===e.type?r=re.fromString(r.toString()):"resolvedImage"===e.type?r=ie.fromString(r.toString()):Br(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Or(r,t.default,e.default)}ve.register(kr,{error:[{kind:"error"},[Ot],function(t,e){throw new he(e[0].evaluate(t))}],typeof:[Ot,[qt],function(t,e){return Ht(ae(e[0].evaluate(t)))}],"to-rgba":[Jt(jt,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[jt,jt,jt],Ar],rgba:[Nt,[jt,jt,jt,jt],Ar],has:{type:Ft,overloads:[[[Ot],function(t,e){return Er(e[0].evaluate(t),t.properties())}],[[Ot,Ut],function(t,e){var r=e[1];return Er(e[0].evaluate(t),r.evaluate(t))}]]},get:{type:qt,overloads:[[[Ot],function(t,e){return zr(e[0].evaluate(t),t.properties())}],[[Ot,Ut],function(t,e){var r=e[1];return zr(e[0].evaluate(t),r.evaluate(t))}]]},"feature-state":[qt,[Ot],function(t,e){return zr(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Ot,[],function(t){return t.geometryType()}],id:[qt,[],function(t){return t.id()}],zoom:[jt,[],function(t){return t.globals.zoom}],"heatmap-density":[jt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[jt,[],function(t){return t.globals.lineProgress||0}],accumulated:[qt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[jt,Ir(jt),function(t,e){for(var r=0,i=0,n=e;i<n.length;i+=1)r+=n[i].evaluate(t);return r}],"*":[jt,Ir(jt),function(t,e){for(var r=1,i=0,n=e;i<n.length;i+=1)r*=n[i].evaluate(t);return r}],"-":{type:jt,overloads:[[[jt,jt],function(t,e){var r=e[1];return e[0].evaluate(t)-r.evaluate(t)}],[[jt],function(t,e){return-e[0].evaluate(t)}]]},"/":[jt,[jt,jt],function(t,e){var r=e[1];return e[0].evaluate(t)/r.evaluate(t)}],"%":[jt,[jt,jt],function(t,e){var r=e[1];return e[0].evaluate(t)%r.evaluate(t)}],ln2:[jt,[],function(){return Math.LN2}],pi:[jt,[],function(){return Math.PI}],e:[jt,[],function(){return Math.E}],"^":[jt,[jt,jt],function(t,e){var r=e[1];return Math.pow(e[0].evaluate(t),r.evaluate(t))}],sqrt:[jt,[jt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[jt,[jt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[jt,[jt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[jt,[jt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[jt,[jt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[jt,[jt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[jt,[jt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[jt,[jt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[jt,[jt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[jt,[jt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[jt,Ir(jt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[jt,Ir(jt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[jt,[jt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[jt,[jt],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[jt,[jt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[jt,[jt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Ft,[Ot,qt],function(t,e){var r=e[0],i=e[1];return t.properties()[r.value]===i.value}],"filter-id-==":[Ft,[qt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Ft,[Ot],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Ft,[Ot,qt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n<o}],"filter-id-<":[Ft,[qt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<n}],"filter->":[Ft,[Ot,qt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n>o}],"filter-id->":[Ft,[qt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>n}],"filter-<=":[Ft,[Ot,qt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[Ft,[qt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i<=n}],"filter->=":[Ft,[Ot,qt],function(t,e){var r=e[0],i=e[1],n=t.properties()[r.value],o=i.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[Ft,[qt],function(t,e){var r=e[0],i=t.id(),n=r.value;return typeof i==typeof n&&i>=n}],"filter-has":[Ft,[qt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Ft,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Ft,[Jt(Ot)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Ft,[Jt(qt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Ft,[Ot,Jt(qt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Ft,[Ot,Jt(qt)],function(t,e){var r=e[0],i=e[1];return function(t,e,r,i){for(;r<=i;){var n=r+i>>1;if(e[n]===t)return!0;e[n]>t?i=n-1:r=n+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var r=e[1];return e[0].evaluate(t)&&r.evaluate(t)}],[Ir(Ft),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(!i[r].evaluate(t))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],function(t,e){var r=e[1];return e[0].evaluate(t)||r.evaluate(t)}],[Ir(Ft),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(i[r].evaluate(t))return!0;return!1}]]},"!":[Ft,[Ft],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Ft,[Ot],function(t,e){var r=t.globals&&t.globals.isSupportedScript;return!r||r(e[0].evaluate(t))}],upcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ot,[Ot],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ot,Ir(qt),function(t,e){return e.map((function(e){return se(e.evaluate(t))})).join("")}],"resolved-locale":[Ot,[Vt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Vr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new ye,this._defaultValue=e?function(t){return"color"===t.type&&Dr(t.default)?new Qt(0,0,0,0):"color"===t.type?Qt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Zr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in kr}function Gr(t,e){var r=new Ne(kr,[],e?function(t){var e={color:Nt,string:Ot,number:jt,enum:Ot,boolean:Ft,formatted:Zt,resolvedImage:Gt};return"array"===t.type?Jt(e[t.value]||qt,t.length):e[t.type]}(e):void 0),i=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Tr(new Vr(i,e)):Pr(r.errors)}Vr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Vr.prototype.evaluate=function(t,e,r,i,n,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new he("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0),this._defaultValue}};var Jr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!je(e.expression)};Jr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n,o)},Jr.prototype.evaluate=function(t,e,r,i,n,o){return this._styleExpression.evaluate(t,e,r,i,n,o)};var Hr=function(t,e,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!je(e.expression),this.interpolationType=i};function Kr(t,e){if("error"===(t=Gr(t,e)).result)return t;var r=t.value.expression,i=De(r);if(!i&&!Cr(e))return Pr([new Rt("","data expressions not supported")]);var n=Oe(r,["zoom"]);if(!n&&!Lr(e))return Pr([new Rt("","zoom expressions not supported")]);var o=function t(e){var r=null;if(e instanceof sr)r=t(e.result);else if(e instanceof ar)for(var i=0,n=e.args;i<n.length&&!(r=t(n[i]));i+=1);else(e instanceof qe||e instanceof nr)&&e.input instanceof ve&&"zoom"===e.input.name&&(r=e);return r instanceof Rt||e.eachChild((function(e){var i=t(e);i instanceof Rt?r=i:!r&&i?r=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&i&&r!==i&&(r=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}(r);return o||n?o instanceof Rt?Pr([o]):o instanceof nr&&!Rr(e)?Pr([new Rt("",'"interpolate" expressions cannot be used with this property')]):Tr(o?new Hr(i?"camera":"composite",t.value,o.labels,o instanceof nr?o.interpolation:void 0):new Jr(i?"constant":"source",t.value)):Pr([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Hr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n,o)},Hr.prototype.evaluate=function(t,e,r,i,n,o){return this._styleExpression.evaluate(t,e,r,i,n,o)},Hr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?nr.interpolationFactor(this.interpolationType,t,e,r):0};var Wr=function(t,e){this._parameters=t,this._specification=e,Pt(this,function t(e,r){var i,n,o,a="color"===r.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),h=e.type||(Rr(r)?"exponential":"interval");if(a&&((e=Pt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Qt.parse(t[1])]}))),e.default=Qt.parse(e.default?e.default:r.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ir[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===h)i=Ur;else if("interval"===h)i=Nr;else if("categorical"===h){i=Fr,n=Object.create(null);for(var l=0,c=e.stops;l<c.length;l+=1){var f=c[l];n[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==h)throw new Error('Unknown function type "'+h+'"');i=qr}if(s){for(var p={},d=[],m=0;m<e.stops.length;m++){var g=e.stops[m],y=g[0].zoom;void 0===p[y]&&(p[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),p[y].stops.push([g[0].value,g[1]])}for(var v=[],_=0,b=d;_<b.length;_+=1){var w=b[_];v.push([p[w].zoom,t(p[w],r)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:nr.interpolationFactor.bind(void 0,x),zoomStops:v.map((function(t){return t[0]})),evaluate:function(t,i){var n=t.zoom;return Ur({stops:v,base:e.base},r,n).evaluate(n,i)}}}if(u){var M="exponential"===h?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:nr.interpolationFactor.bind(void 0,M),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return i(e,r,t.zoom,n,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Or(e.default,r.default):i(e,r,s,n,o)}}}(this._parameters,this._specification))};function $r(t){var e=t.key,r=t.value,i=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Br(r);if("object"!==u)return[new It(e,r,"object expected, "+u+" found")];for(var h in r){var l=h.split(".")[0],c=i[l]||i["*"],f=void 0;if(n[l])f=n[l];else if(i[l])f=wi;else if(n["*"])f=n["*"];else{if(!i["*"]){s.push(new It(e,r[h],'unknown property "'+h+'"'));continue}f=wi}s=s.concat(f({key:(e?e+".":e)+h,value:r[h],valueSpec:c,style:o,styleSpec:a,object:r,objectKey:h},r))}for(var p in i)n[p]||i[p].required&&void 0===i[p].default&&void 0===r[p]&&s.push(new It(e,r,'missing required property "'+p+'"'));return s}function Xr(t){var e=t.value,r=t.valueSpec,i=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||wi;if("array"!==Br(e))return[new It(o,e,"array expected, "+Br(e)+" found")];if(r.length&&e.length!==r.length)return[new It(o,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new It(o,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===Br(r.value)&&(s=r.value);for(var u=[],h=0;h<e.length;h++)u=u.concat(a({array:e,arrayIndex:h,value:e[h],valueSpec:s,style:i,styleSpec:n,key:o+"["+h+"]"}));return u}function Yr(t){var e=t.key,r=t.value,i=t.valueSpec,n=Br(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new It(e,r,"number expected, "+n+" found")]:"minimum"in i&&r<i.minimum?[new It(e,r,r+" is less than the minimum value "+i.minimum)]:"maximum"in i&&r>i.maximum?[new It(e,r,r+" is greater than the maximum value "+i.maximum)]:[]}function Qr(t){var e,r,i,n=t.valueSpec,o=Ct(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,h="array"===Br(t.value.stops)&&"array"===Br(t.value.stops[0])&&"object"===Br(t.value.stops[0][0]),l=$r({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new It(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Xr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:c})),"array"===Br(r)&&0===r.length&&e.push(new It(t.key,r,"array must have at least one stop")),e},default:function(t){return wi({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&l.push(new It(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||l.push(new It(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Rr(t.valueSpec)&&l.push(new It(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Cr(t.valueSpec)?l.push(new It(t.key,t.value,"property functions not supported")):s&&!Lr(t.valueSpec)&&l.push(new It(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!h||void 0!==t.value.property||l.push(new It(t.key,t.value,'"property" property is required')),l;function c(t){var e=[],o=t.value,s=t.key;if("array"!==Br(o))return[new It(s,o,"array expected, "+Br(o)+" found")];if(2!==o.length)return[new It(s,o,"array length 2 expected, length "+o.length+" found")];if(h){if("object"!==Br(o[0]))return[new It(s,o,"object expected, "+Br(o[0])+" found")];if(void 0===o[0].zoom)return[new It(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new It(s,o,"object stop key must have value")];if(i&&i>Ct(o[0].zoom))return[new It(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ct(o[0].zoom)!==i&&(i=Ct(o[0].zoom),r=void 0,a={}),e=e.concat($r({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Yr,value:f}}))}else e=e.concat(f({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Zr(Lt(o[1]))?e.concat([new It(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(wi({key:s+"[1]",value:o[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function f(t,i){var s=Br(t.value),u=Ct(t.value),h=null!==t.value?t.value:i;if(e){if(s!==e)return[new It(t.key,h,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new It(t.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var l="number expected, "+s+" found";return Cr(n)&&void 0===o&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(t.key,h,l)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==r&&u<r?[new It(t.key,h,"stop domain values must appear in ascending order")]:(r=u,"categorical"===o&&u in a?[new It(t.key,h,"stop domain values must be unique")]:(a[u]=!0,[])):[new It(t.key,h,"integer expected, found "+u)]}}function ti(t){var e=("property"===t.expressionContext?Kr:Gr)(Lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new It(""+t.key+e.key,t.value,e.message)}));var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new It(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!je(r))return[new It(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!je(r))return[new It(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Oe(r,["zoom","feature-state"]))return[new It(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!De(r))return[new It(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(t){var e=t.key,r=t.value,i=t.valueSpec,n=[];return Array.isArray(i.values)?-1===i.values.indexOf(Ct(r))&&n.push(new It(e,r,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(i.values).indexOf(Ct(r))&&n.push(new It(e,r,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(r)+" found")),n}function ri(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var i=r[e];if(!ri(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Wr.deserialize=function(t){return new Wr(t._parameters,t._specification)},Wr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ii={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ni(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ri(t)||(t=ai(t));var e=Gr(t,ii);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,r,i){return e.value.evaluate(t,r,{},i)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var r=1;r<e.length;r++)if(t(e[r]))return!0;return!1}(t)}}function oi(t,e){return t<e?-1:t>e?1:0}function ai(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?si(t[1],t[2],"=="):"!="===r?li(si(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?si(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(ai))):"all"===r?["all"].concat(t.slice(1).map(ai)):"none"===r?["all"].concat(t.slice(1).map(ai).map(li)):"in"===r?ui(t[1],t.slice(2)):"!in"===r?li(ui(t[1],t.slice(2))):"has"===r?hi(t[1]):"!has"===r?li(hi(t[1])):"within"!==r||t}function si(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function ui(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(oi)]]:["filter-in-small",t,["literal",e]]}}function hi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function li(t){return["!",t]}function ci(t){return ri(Lt(t.value))?ti(Pt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,i=e.key;if("array"!==Br(r))return[new It(i,r,"array expected, "+Br(r)+" found")];var n,o=e.styleSpec,a=[];if(r.length<1)return[new It(i,r,"filter array must have at least 1 element")];switch(a=a.concat(ei({key:i+"[0]",value:r[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ct(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Ct(r[1])&&a.push(new It(i,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&a.push(new It(i,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(n=Br(r[1]))&&a.push(new It(i+"[1]",r[1],"string expected, "+n+" found"));for(var s=2;s<r.length;s++)n=Br(r[s]),"$type"===Ct(r[1])?a=a.concat(ei({key:i+"["+s+"]",value:r[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new It(i+"["+s+"]",r[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var u=1;u<r.length;u++)a=a.concat(t({key:i+"["+u+"]",value:r[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Br(r[1]),2!==r.length?a.push(new It(i,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new It(i+"[1]",r[1],"string expected, "+n+" found"));break;case"within":n=Br(r[1]),2!==r.length?a.push(new It(i,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"object"!==n&&a.push(new It(i+"[1]",r[1],"object expected, "+n+" found"))}return a}(t)}function fi(t,e){var r=t.key,i=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return wi({key:r,value:o,valueSpec:n.transition,style:i,styleSpec:n});var h,l=t.valueSpec||s[a];if(!l)return[new It(r,o,'unknown property "'+a+'"')];if("string"===Br(o)&&Cr(l)&&!l.tokens&&(h=/^{([^}]+)}$/.exec(o)))return[new It(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(h[1])+" }`.")];var c=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&c.push(new It(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Dr(Lt(o))&&"identity"===Ct(o.type)&&c.push(new It(r,o,'"text-font" does not support identity functions'))),c.concat(wi({key:t.key,value:o,valueSpec:l,style:i,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function pi(t){return fi(t,"paint")}function di(t){return fi(t,"layout")}function mi(t){var e=[],r=t.value,i=t.key,n=t.style,o=t.styleSpec;r.type||r.ref||e.push(new It(i,r,'either "type" or "ref" is required'));var a,s=Ct(r.type),u=Ct(r.ref);if(r.id)for(var h=Ct(r.id),l=0;l<t.arrayIndex;l++){var c=n.layers[l];Ct(c.id)===h&&e.push(new It(i,r.id,'duplicate layer id "'+r.id+'", previously used at line '+c.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach((function(t){t in r&&e.push(new It(i,r[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){Ct(t.id)===u&&(a=t)})),a?a.ref?e.push(new It(i,r.ref,"ref cannot reference another ref layer")):s=Ct(a.type):e.push(new It(i,r.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(r.source){var f=n.sources&&n.sources[r.source],p=f&&Ct(f.type);f?"vector"===p&&"raster"===s?e.push(new It(i,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new It(i,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==p||r["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new It(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===p&&f.lineMetrics||e.push(new It(i,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new It(i,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new It(i,r.source,'source "'+r.source+'" not found'))}else e.push(new It(i,r,'missing required property "source"'));return e=e.concat($r({key:i,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wi({key:i+".type",value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:ci,layout:function(t){return $r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return di(Pt({layerType:s},t))}}})},paint:function(t){return $r({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return pi(Pt({layerType:s},t))}}})}}}))}function gi(t){var e=t.value,r=t.key,i=Br(e);return"string"!==i?[new It(r,e,"string expected, "+i+" found")]:[]}var yi={promoteId:function(t){var e=t.key,r=t.value;if("string"===Br(r))return gi({key:e,value:r});var i=[];for(var n in r)i.push.apply(i,gi({key:e+"."+n,value:r[n]}));return i}};function vi(t){var e=t.value,r=t.key,i=t.styleSpec,n=t.style;if(!e.type)return[new It(r,e,'"type" is required')];var o,a=Ct(e.type);switch(a){case"vector":case"raster":case"raster-dem":return $r({key:r,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i,objectElementValidators:yi});case"geojson":if(o=$r({key:r,value:e,valueSpec:i.source_geojson,style:n,styleSpec:i,objectElementValidators:yi}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],h=u[0],l="string"==typeof h?[h,["accumulated"],["get",s]]:h;o.push.apply(o,ti({key:r+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,ti({key:r+"."+s+".reduce",value:l,expressionContext:"cluster-reduce"}))}return o;case"video":return $r({key:r,value:e,valueSpec:i.source_video,style:n,styleSpec:i});case"image":return $r({key:r,value:e,valueSpec:i.source_image,style:n,styleSpec:i});case"canvas":return[new It(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:i})}}function _i(t){var e=t.value,r=t.styleSpec,i=r.light,n=t.style,o=[],a=Br(e);if(void 0===e)return o;if("object"!==a)return o.concat([new It("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&i[u[1]]&&i[u[1]].transition?wi({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?wi({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r}):[new It(s,e[s],'unknown property "'+s+'"')])}return o}var bi={"*":function(){return[]},array:Xr,boolean:function(t){var e=t.value,r=t.key,i=Br(e);return"boolean"!==i?[new It(r,e,"boolean expected, "+i+" found")]:[]},number:Yr,color:function(t){var e=t.key,r=t.value,i=Br(r);return"string"!==i?[new It(e,r,"color expected, "+i+" found")]:null===Yt(r)?[new It(e,r,'color expected, "'+r+'" found')]:[]},constants:Tt,enum:ei,filter:ci,function:Qr,layer:mi,object:$r,source:vi,light:_i,string:gi,formatted:function(t){return 0===gi(t).length?[]:ti(t)},resolvedImage:function(t){return 0===gi(t).length?[]:ti(t)}};function wi(t){var e=t.value,r=t.valueSpec,i=t.styleSpec;return r.expression&&Dr(Ct(e))?Qr(t):r.expression&&Zr(Lt(e))?ti(t):r.type&&bi[r.type]?bi[r.type](t):$r(Pt({},t,{valueSpec:r.type?i[r.type]:r}))}function xi(t){var e=t.value,r=t.key,i=gi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new It(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new It(r,e,'"glyphs" url must include a "{range}" token'))),i}function Mi(t,e){void 0===e&&(e=zt);var r=[];return r=r.concat(wi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:xi,"*":function(){return[]}}})),t.constants&&(r=r.concat(Tt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Si(r)}function Si(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function ki(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return Si(t.apply(this,e))}}Mi.source=ki(vi),Mi.light=ki(_i),Mi.layer=ki(mi),Mi.filter=ki(ci),Mi.paintProperty=ki(pi),Mi.layoutProperty=ki(di);var Ai=Mi,Ei=Ai.light,zi=Ai.paintProperty,Ii=Ai.layoutProperty;function Ti(t,e){var r=!1;if(e&&e.length)for(var i=0,n=e;i<n.length;i+=1)t.fire(new At(new Error(n[i].message))),r=!0;return r}var Pi=Ci;function Ci(t,e,r){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(r=n[2]);for(var o=0;o<this.d*this.d;o++){var a=n[3+o],s=n[3+o+1];i.push(a===s?null:n.subarray(a,s))}var u=n[3+i.length+1];this.keys=n.subarray(n[3+i.length],u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var h=0;h<this.d*this.d;h++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var l=r/e*t;this.min=-l,this.max=t+l}Ci.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},Ci.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ci.prototype._insertCell=function(t,e,r,i,n,o){this.cells[n].push(o)},Ci.prototype.query=function(t,e,r,i,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=r&&a<=i&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,i,this._queryCell,s,{},n),s},Ci.prototype._queryCell=function(t,e,r,i,n,o,a,s){var u=this.cells[n];if(null!==u)for(var h=this.keys,l=this.bboxes,c=0;c<u.length;c++){var f=u[c];if(void 0===a[f]){var p=4*f;(s?s(l[p+0],l[p+1],l[p+2],l[p+3]):t<=l[p+2]&&e<=l[p+3]&&r>=l[p+0]&&i>=l[p+1])?(a[f]=!0,o.push(h[f])):a[f]=!1}}},Ci.prototype._forEachCell=function(t,e,r,i,n,o,a,s){for(var u=this._convertToCellCoord(t),h=this._convertToCellCoord(e),l=this._convertToCellCoord(r),c=this._convertToCellCoord(i),f=u;f<=l;f++)for(var p=h;p<=c;p++){var d=this.d*p+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&n.call(this,t,e,r,i,d,o,a,s))return}},Ci.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Ci.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ci.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var n=new Int32Array(e+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[3+a]=o,n.set(s,o),o+=s.length}return n[3+t.length]=o,n.set(this.keys,o),n[3+t.length+1]=o+=this.keys.length,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var Li=a.ImageData,Ri=a.ImageBitmap,Bi={};function Di(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Bi[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var ji in Di("Object",Object),Pi.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},Pi.deserialize=function(t){return new Pi(t.buffer)},Di("Grid",Pi),Di("Color",Qt),Di("Error",Error),Di("ResolvedImage",ie),Di("StylePropertyFunction",Wr),Di("StyleExpression",Vr,{omit:["_evaluator"]}),Di("ZoomDependentExpression",Hr),Di("ZoomConstantExpression",Jr),Di("CompoundExpression",ve,{omit:["_evaluate"]}),kr)kr[ji]._classRegistryKey||Di("Expression_"+ji,kr[ji]);function Oi(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Fi(t){return Ri&&t instanceof Ri}function Ni(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Oi(t)||Fi(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof Li)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],n=0,o=t;n<o.length;n+=1)i.push(Ni(o[n],e));return i}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var h in t)if(t.hasOwnProperty(h)&&!(Bi[s].omit.indexOf(h)>=0)){var l=t[h];u[h]=Bi[s].shallow.indexOf(h)>=0?l:Ni(l,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Ui(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Oi(t)||Fi(t)||ArrayBuffer.isView(t)||t instanceof Li)return t;if(Array.isArray(t))return t.map(Ui);if("object"==typeof t){var e=t.$name||"Object",r=Bi[e].klass;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.deserialize)return r.deserialize(t);for(var i=Object.create(r.prototype),n=0,o=Object.keys(t);n<o.length;n+=1){var a=o[n];if("$name"!==a){var s=t[a];i[a]=Bi[e].shallow.indexOf(a)>=0?s:Ui(s)}}return i}throw new Error("can't deserialize object of type "+typeof t)}var qi=function(){this.first=!0};qi.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Vi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Zi(t){for(var e=0,r=t;e<r.length;e+=1)if(Gi(r[e].charCodeAt(0)))return!0;return!1}function Gi(t){return!(746!==t&&747!==t&&(t<4352||!(Vi["Bopomofo Extended"](t)||Vi.Bopomofo(t)||Vi["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Vi["CJK Compatibility Ideographs"](t)||Vi["CJK Compatibility"](t)||Vi["CJK Radicals Supplement"](t)||Vi["CJK Strokes"](t)||!(!Vi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Vi["CJK Unified Ideographs Extension A"](t)||Vi["CJK Unified Ideographs"](t)||Vi["Enclosed CJK Letters and Months"](t)||Vi["Hangul Compatibility Jamo"](t)||Vi["Hangul Jamo Extended-A"](t)||Vi["Hangul Jamo Extended-B"](t)||Vi["Hangul Jamo"](t)||Vi["Hangul Syllables"](t)||Vi.Hiragana(t)||Vi["Ideographic Description Characters"](t)||Vi.Kanbun(t)||Vi["Kangxi Radicals"](t)||Vi["Katakana Phonetic Extensions"](t)||Vi.Katakana(t)&&12540!==t||!(!Vi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Vi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Vi["Unified Canadian Aboriginal Syllabics"](t)||Vi["Unified Canadian Aboriginal Syllabics Extended"](t)||Vi["Vertical Forms"](t)||Vi["Yijing Hexagram Symbols"](t)||Vi["Yi Syllables"](t)||Vi["Yi Radicals"](t))))}function Ji(t){return!(Gi(t)||function(t){return!!(Vi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Vi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Vi["Letterlike Symbols"](t)||Vi["Number Forms"](t)||Vi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Vi["Control Pictures"](t)&&9251!==t||Vi["Optical Character Recognition"](t)||Vi["Enclosed Alphanumerics"](t)||Vi["Geometric Shapes"](t)||Vi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Vi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Vi["CJK Symbols and Punctuation"](t)||Vi.Katakana(t)||Vi["Private Use Area"](t)||Vi["CJK Compatibility Forms"](t)||Vi["Small Form Variants"](t)||Vi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Hi(t){return t>=1424&&t<=2303||Vi["Arabic Presentation Forms-A"](t)||Vi["Arabic Presentation Forms-B"](t)}function Ki(t,e){return!(!e&&Hi(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Vi.Khmer(t))}function Wi(t){for(var e=0,r=t;e<r.length;e+=1)if(Hi(r[e].charCodeAt(0)))return!0;return!1}var $i=null,Xi="unavailable",Yi=null,Qi=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Xi="error"),$i&&$i(t)};function tn(){en.fire(new kt("pluginStateChange",{pluginStatus:Xi,pluginURL:Yi}))}var en=new Et,rn=function(){return Xi},nn=function(){if("deferred"!==Xi||!Yi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xi="loading",tn(),Yi&&bt({url:Yi},(function(t){t?Qi(t):(Xi="loaded",tn())}))},on={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Xi||null!=on.applyArabicShaping},isLoading:function(){return"loading"===Xi},setState:function(t){Xi=t.pluginStatus,Yi=t.pluginURL},isParsed:function(){return null!=on.applyArabicShaping&&null!=on.processBidirectionalText&&null!=on.processStyledBidirectionalText},getPluginURL:function(){return Yi}},an=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qi,this.transition={})};an.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,i=t;r<i.length;r+=1)if(!Ki(i[r].charCodeAt(0),e))return!1;return!0}(t,on.isLoaded())},an.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},an.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var sn=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Dr(t))return new Wr(t,e);if(Zr(t)){var r=Kr(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return t.key+": "+t.message})).join(", "));return r.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Qt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};sn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},sn.prototype.possiblyEvaluate=function(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)};var un=function(t){this.property=t,this.value=new sn(t,void 0)};un.prototype.transitioned=function(t,e){return new ln(this.property,this.value,e,f({},t.transition,this.transition),t.now)},un.prototype.untransitioned=function(){return new ln(this.property,this.value,null,{},0)};var hn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};hn.prototype.getValue=function(t){return w(this._values[t].value.value)},hn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new un(this._values[t].property)),this._values[t].value=new sn(this._values[t].property,null===e?void 0:w(e))},hn.prototype.getTransition=function(t){return w(this._values[t].transition)},hn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new un(this._values[t].property)),this._values[t].transition=w(e)||void 0},hn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n);var o=this.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},hn.prototype.transitioned=function(t,e){for(var r=new cn(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var o=n[i];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},hn.prototype.untransitioned=function(){for(var t=new cn(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e];t._values[i]=this._values[i].untransitioned()}return t};var ln=function(t,e,r,i,n){this.property=t,this.value=e,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)};ln.prototype.possiblyEvaluate=function(t,e,r){var i=t.now||0,n=this.value.possiblyEvaluate(t,e,r),o=this.prior;if(o){if(i>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(i<this.begin)return o.possiblyEvaluate(t,e,r);var a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,r),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}(a))}return n};var cn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};cn.prototype.possiblyEvaluate=function(t,e,r){for(var i=new dn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];i._values[a]=this._values[a].possiblyEvaluate(t,e,r)}return i},cn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var fn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};fn.prototype.getValue=function(t){return w(this._values[t].value)},fn.prototype.setValue=function(t,e){this._values[t]=new sn(this._values[t].property,null===e?void 0:w(e))},fn.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n)}return t},fn.prototype.possiblyEvaluate=function(t,e,r){for(var i=new dn(this._properties),n=0,o=Object.keys(this._values);n<o.length;n+=1){var a=o[n];i._values[a]=this._values[a].possiblyEvaluate(t,e,r)}return i};var pn=function(t,e,r){this.property=t,this.value=e,this.parameters=r};pn.prototype.isConstant=function(){return"constant"===this.value.kind},pn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},pn.prototype.evaluate=function(t,e,r,i){return this.property.evaluate(this.value,this.parameters,t,e,r,i)};var dn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};dn.prototype.get=function(t){return this._values[t]};var mn=function(t){this.specification=t};mn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},mn.prototype.interpolate=function(t,e,r){var i=Ze[this.specification.type];return i?i(t,e,r):t};var gn=function(t,e){this.specification=t,this.overrides=e};gn.prototype.possiblyEvaluate=function(t,e,r,i){return new pn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,i)}:t.expression,e)},gn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new pn(this,{kind:"constant",value:void 0},t.parameters);var i=Ze[this.specification.type];return i?new pn(this,{kind:"constant",value:i(t.value.value,e.value.value,r)},t.parameters):t},gn.prototype.evaluate=function(t,e,r,i,n,o){return"constant"===t.kind?t.value:t.evaluate(e,r,i,n,o)};var yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,r,i){if(void 0===t.value)return new pn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,e);return new pn(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new pn(this,{kind:"constant",value:s},e)}return new pn(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,i,n,o){if("source"===t.kind){var a=t.evaluate(e,r,i,n,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,i),t.evaluate({zoom:Math.floor(e.zoom)},r,i),t.evaluate({zoom:Math.floor(e.zoom)+1},r,i),e):t.value},e.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(gn),vn=function(t){this.specification=t};vn.prototype.possiblyEvaluate=function(t,e,r,i){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},r,i);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new an(Math.floor(e.zoom-1),e)),t.expression.evaluate(new an(Math.floor(e.zoom),e)),t.expression.evaluate(new an(Math.floor(e.zoom+1),e)),e)}},vn.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},vn.prototype.interpolate=function(t){return t};var _n=function(t){this.specification=t};_n.prototype.possiblyEvaluate=function(t,e,r,i){return!!t.expression.evaluate(e,null,{},r,i)},_n.prototype.interpolate=function(){return!1};var bn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new sn(r,void 0),n=this.defaultTransitionablePropertyValues[e]=new un(r);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};Di("DataDrivenProperty",gn),Di("DataConstantProperty",mn),Di("CrossFadedDataDrivenProperty",yn),Di("CrossFadedProperty",vn),Di("ColorRampProperty",_n);var wn=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new fn(r.layout)),r.paint)){for(var i in this._transitionablePaint=new hn(r.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dn(r.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){void 0===r&&(r={}),null!=e&&this._validate(Ii,"layers."+this.id+".layout."+t,t,e,r)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e&&this._validate(zi,"layers."+this.id+".paint."+t,t,e,r))return!1;if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t],n="cross-faded-data-driven"===i.property.specification["property-type"],o=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||n||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),b(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,r,i,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Ti(this,t.call(Ai,{key:e,layerType:this.type,objectKey:r,value:i,styleSpec:zt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof pn&&Cr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Et),xn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Mn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Sn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function kn(t,e){void 0===e&&(e=1);var r=0,i=0;return{members:t.map((function(t){var n=xn[t.type].BYTES_PER_ELEMENT,o=r=An(r,Math.max(e,n)),a=t.components||1;return i=Math.max(i,n),r+=n*a,{name:t.name,type:t.type,components:a,offset:o}})),size:An(r,Math.max(i,e)),alignment:e}}function An(t,e){return Math.ceil(t/e)*e}Sn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Sn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Sn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Sn.prototype.clear=function(){this.length=0},Sn.prototype.resize=function(t){this.reserve(t),this.length=t},Sn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Sn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=r,t},e}(Sn);En.prototype.bytesPerElement=4,Di("StructArrayLayout2i4",En);var zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=i,this.int16[o+3]=n,t},e}(Sn);zn.prototype.bytesPerElement=8,Di("StructArrayLayout4i8",zn);var In=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Sn);In.prototype.bytesPerElement=12,Di("StructArrayLayout2i4i12",In);var Tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[u+4]=i,this.uint8[u+5]=n,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Sn);Tn.prototype.bytesPerElement=8,Di("StructArrayLayout2i4ub8",Tn);var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=r,t},e}(Sn);Pn.prototype.bytesPerElement=8,Di("StructArrayLayout2f8",Pn);var Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,u,h){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,i,n,o,a,s,u,h)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,u,h,l){var c=10*t;return this.uint16[c+0]=e,this.uint16[c+1]=r,this.uint16[c+2]=i,this.uint16[c+3]=n,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=u,this.uint16[c+8]=h,this.uint16[c+9]=l,t},e}(Sn);Cn.prototype.bytesPerElement=20,Di("StructArrayLayout10ui20",Cn);var Ln=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,u,h,l,c){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,r,i,n,o,a,s,u,h,l,c)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,u,h,l,c,f){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=r,this.int16[p+2]=i,this.int16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.int16[p+8]=h,this.int16[p+9]=l,this.int16[p+10]=c,this.int16[p+11]=f,t},e}(Sn);Ln.prototype.bytesPerElement=24,Di("StructArrayLayout4i4ui4i24",Ln);var Rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=r,this.float32[n+2]=i,t},e}(Sn);Rn.prototype.bytesPerElement=12,Di("StructArrayLayout3f12",Rn);var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Sn);Bn.prototype.bytesPerElement=4,Di("StructArrayLayout1ul4",Bn);var Dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,u){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,i,n,o,a,s,u)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,u,h){var l=10*t,c=5*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=i,this.int16[l+3]=n,this.int16[l+4]=o,this.int16[l+5]=a,this.uint32[c+3]=s,this.uint16[l+8]=u,this.uint16[l+9]=h,t},e}(Sn);Dn.prototype.bytesPerElement=20,Di("StructArrayLayout6i1ul2ui20",Dn);var jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Sn);jn.prototype.bytesPerElement=12,Di("StructArrayLayout2i2i2i12",jn);var On=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,i,n)},e.prototype.emplace=function(t,e,r,i,n,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=i,this.int16[s+6]=n,this.int16[s+7]=o,t},e}(Sn);On.prototype.bytesPerElement=16,Di("StructArrayLayout2f1f2i16",On);var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[a+1]=i,this.float32[a+2]=n,t},e}(Sn);Fn.prototype.bytesPerElement=12,Di("StructArrayLayout2ub2f12",Fn);var Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,this.uint16[n+2]=i,t},e}(Sn);Nn.prototype.bytesPerElement=6,Di("StructArrayLayout3ui6",Nn);var Un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g,y){var v=24*t,_=12*t,b=48*t;return this.int16[v+0]=e,this.int16[v+1]=r,this.uint16[v+2]=i,this.uint16[v+3]=n,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=u,this.uint16[v+11]=h,this.uint16[v+12]=l,this.float32[_+7]=c,this.float32[_+8]=f,this.uint8[b+36]=p,this.uint8[b+37]=d,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,t},e}(Sn);Un.prototype.bytesPerElement=48,Di("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Un);var qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g,y,v,_,b,w,x,M,S,k,A,E){var z=this.length;return this.resize(z+1),this.emplace(z,t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g,y,v,_,b,w,x,M,S,k,A,E)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g,y,v,_,b,w,x,M,S,k,A,E,z){var I=34*t,T=17*t;return this.int16[I+0]=e,this.int16[I+1]=r,this.int16[I+2]=i,this.int16[I+3]=n,this.int16[I+4]=o,this.int16[I+5]=a,this.int16[I+6]=s,this.int16[I+7]=u,this.uint16[I+8]=h,this.uint16[I+9]=l,this.uint16[I+10]=c,this.uint16[I+11]=f,this.uint16[I+12]=p,this.uint16[I+13]=d,this.uint16[I+14]=m,this.uint16[I+15]=g,this.uint16[I+16]=y,this.uint16[I+17]=v,this.uint16[I+18]=_,this.uint16[I+19]=b,this.uint16[I+20]=w,this.uint16[I+21]=x,this.uint16[I+22]=M,this.uint32[T+12]=S,this.float32[T+13]=k,this.float32[T+14]=A,this.float32[T+15]=E,this.float32[T+16]=z,t},e}(Sn);qn.prototype.bytesPerElement=68,Di("StructArrayLayout8i15ui1ul4f68",qn);var Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Sn);Vn.prototype.bytesPerElement=4,Di("StructArrayLayout1f4",Vn);var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=r,this.int16[n+2]=i,t},e}(Sn);Zn.prototype.bytesPerElement=6,Di("StructArrayLayout3i6",Zn);var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=r,this.uint16[n+3]=i,t},e}(Sn);Gn.prototype.bytesPerElement=8,Di("StructArrayLayout1ul2ui8",Gn);var Jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,t},e}(Sn);Jn.prototype.bytesPerElement=4,Di("StructArrayLayout2ui4",Jn);var Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Sn);Hn.prototype.bytesPerElement=2,Di("StructArrayLayout1ui2",Hn);var Kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=i,this.float32[o+3]=n,t},e}(Sn);Kn.prototype.bytesPerElement=16,Di("StructArrayLayout4f16",Kn);var Wn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(Mn);Wn.prototype.size=20;var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Wn(this,t)},e}(Dn);Di("CollisionBoxArray",$n);var Xn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,r),e}(Mn);Xn.prototype.size=48;var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Xn(this,t)},e}(Un);Di("PlacedSymbolArray",Yn);var Qn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},r.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,r),e}(Mn);Qn.prototype.size=68;var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Qn(this,t)},e}(qn);Di("SymbolInstanceArray",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Vn);Di("GlyphOffsetArray",eo);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Zn);Di("SymbolLineVertexArray",ro);var io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,r),e}(Mn);io.prototype.size=8;var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new io(this,t)},e}(Gn);Di("FeatureIndexArray",no);var oo=kn([{name:"a_pos",components:2,type:"Int16"}],4).members,ao=function(t){void 0===t&&(t=[]),this.segments=t};function so(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}ao.prototype.prepareSegment=function(t,e,r,i){var n=this.segments[this.segments.length-1];return t>ao.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+ao.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>ao.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==i)&&(n={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(n.sortKey=i),this.segments.push(n)),n},ao.prototype.get=function(){return this.segments},ao.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var i in r.vaos)r.vaos[i].destroy()}},ao.simpleSegment=function(t,e,r,i){return new ao([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])},ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Di("SegmentVector",ao);var uo=kn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ho=e((function(t){t.exports=function(t,e){var r,i,n,o,a,s,u,h;for(i=t.length-(r=3&t.length),n=e,a=3432918353,s=461845907,h=0;h<i;)u=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24,++h,n=27492+(65535&(o=5*(65535&(n=(n^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&t.charCodeAt(h+2))<<16;case 2:u^=(255&t.charCodeAt(h+1))<<8;case 1:n^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(h)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),lo=e((function(t){t.exports=function(t,e){for(var r,i=t.length,n=e^i,o=0;i>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),co=ho,fo=lo;co.murmur3=ho,co.murmur2=fo;var po=function(){this.ids=[],this.positions=[],this.indexed=!1};po.prototype.add=function(t,e,r,i){this.ids.push(go(t)),this.positions.push(e,r,i)},po.prototype.getPositions=function(t){for(var e=go(t),r=0,i=this.ids.length-1;r<i;){var n=r+i>>1;this.ids[n]>=e?i=n:r=n+1}for(var o=[];this.ids[r]===e;)o.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return o},po.serialize=function(t,e){var r=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,r,i,n){for(;i<n;){for(var o=e[i+n>>1],a=i-1,s=n+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;yo(e,a,s),yo(r,3*a,3*s),yo(r,3*a+1,3*s+1),yo(r,3*a+2,3*s+2)}s-i<n-s?(t(e,r,i,s),i=s+1):(t(e,r,s+1,n),n=s)}}(r,i,0,r.length-1),e&&e.push(r.buffer,i.buffer),{ids:r,positions:i}},po.deserialize=function(t){var e=new po;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var mo=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=mo?e:co(String(t))}function yo(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}Di("FeaturePositionMap",po);var vo=function(t,e){this.gl=t.gl,this.location=e},_o=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(vo),bo=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(vo),wo=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(vo),xo=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(vo),Mo=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(vo),So=function(t){function e(e,r){t.call(this,e,r),this.current=Qt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(vo),ko=new Float32Array(16),Ao=function(t){function e(e,r){t.call(this,e,r),this.current=ko}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(vo);function Eo(t){return[so(255*t.r,255*t.g),so(255*t.b,255*t.a)]}var zo=function(t,e,r){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=r};zo.prototype.setUniform=function(t,e,r){t.set(r.constantOr(this.value))},zo.prototype.getBinding=function(t,e,r){return"color"===this.type?new So(t,e):new bo(t,e)};var Io=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Io.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Io.prototype.setUniform=function(t,e,r,i){var n="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;n&&t.set(n)},Io.prototype.getBinding=function(t,e,r){return"u_pattern"===r.substr(0,9)?new Mo(t,e):new bo(t,e)};var To=function(t,e,r,i){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i};To.prototype.populatePaintArray=function(t,e,r,i,n){var o=this.paintVertexArray.length,a=this.expression.evaluate(new an(0),e,{},i,[],n);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},To.prototype.updatePaintArray=function(t,e,r,i){var n=this.expression.evaluate({zoom:0},r,i);this._setPaintValue(t,e,n)},To.prototype._setPaintValue=function(t,e,r){if("color"===this.type)for(var i=Eo(r),n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}},To.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},To.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Po=function(t,e,r,i,n,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=r,this.useIntegerZoom=i,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o};Po.prototype.populatePaintArray=function(t,e,r,i,n){var o=this.expression.evaluate(new an(this.zoom),e,{},i,[],n),a=this.expression.evaluate(new an(this.zoom+1),e,{},i,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},Po.prototype.updatePaintArray=function(t,e,r,i){var n=this.expression.evaluate({zoom:this.zoom},r,i),o=this.expression.evaluate({zoom:this.zoom+1},r,i);this._setPaintValue(t,e,n,o)},Po.prototype._setPaintValue=function(t,e,r,i){if("color"===this.type)for(var n=Eo(r),o=Eo(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,r,i);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(i))}},Po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Po.prototype.setUniform=function(t,e){var r=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=l(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);t.set(i)},Po.prototype.getBinding=function(t,e,r){return new bo(t,e)};var Co=function(t,e,r,i,n,o){this.expression=t,this.type=e,this.useIntegerZoom=r,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};Co.prototype.populatePaintArray=function(t,e,r){var i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],r)},Co.prototype.updatePaintArray=function(t,e,r,i,n){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],n)},Co.prototype._setPaintValues=function(t,e,r,i){if(i&&r){var n=i[r.min],o=i[r.mid],a=i[r.max];if(n&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],o.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},Co.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,uo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,uo.members,this.expression.isStateDependent))},Co.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Lo=function(t,e,r){this.binders={},this._buffers=[];var i=[];for(var n in t.paint._values)if(r(n)){var o=t.paint.get(n);if(o instanceof pn&&Cr(o.property.specification)){var a=Bo(n,t.type),s=o.value,u=o.property.specification.type,h=o.property.useIntegerZoom,l=o.property.specification["property-type"],c="cross-faded"===l||"cross-faded-data-driven"===l;if("constant"===s.kind)this.binders[n]=c?new Io(s.value,a):new zo(s.value,a,u),i.push("/u_"+n);else if("source"===s.kind||c){var f=Do(n,u,"source");this.binders[n]=c?new Co(s,u,h,e,f,t.id):new To(s,a,u,f),i.push("/a_"+n)}else{var p=Do(n,u,"composite");this.binders[n]=new Po(s,a,u,h,e,p),i.push("/z_"+n)}}}this.cacheKey=i.sort().join("")};Lo.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof To||e instanceof Po?e.maxValue:0},Lo.prototype.populatePaintArrays=function(t,e,r,i,n){for(var o in this.binders){var a=this.binders[o];(a instanceof To||a instanceof Po||a instanceof Co)&&a.populatePaintArray(t,e,r,i,n)}},Lo.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders){var i=this.binders[r];i instanceof Io&&i.setConstantPatternPositions(t,e)}},Lo.prototype.updatePaintArrays=function(t,e,r,i,n){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var h=u[s],l=r.feature(h.index);for(var c in this.binders){var f=this.binders[c];if((f instanceof To||f instanceof Po||f instanceof Co)&&!0===f.expression.isStateDependent){var p=i.paint.get(c);f.expression=p.value,f.updatePaintArray(h.start,h.end,l,t[a],n),o=!0}}}return o},Lo.prototype.defines=function(){var t=[];for(var e in this.binders){var r=this.binders[e];(r instanceof zo||r instanceof Io)&&t.push.apply(t,r.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Lo.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof To||r instanceof Po)for(var i=0;i<r.paintVertexAttributes.length;i++)t.push(r.paintVertexAttributes[i].name);else if(r instanceof Co)for(var n=0;n<uo.members.length;n++)t.push(uo.members[n].name)}return t},Lo.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var r=this.binders[e];if(r instanceof zo||r instanceof Io||r instanceof Po)for(var i=0,n=r.uniformNames;i<n.length;i+=1)t.push(n[i])}return t},Lo.prototype.getPaintVertexBuffers=function(){return this._buffers},Lo.prototype.getUniforms=function(t,e){var r=[];for(var i in this.binders){var n=this.binders[i];if(n instanceof zo||n instanceof Io||n instanceof Po)for(var o=0,a=n.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=n.getBinding(t,e[s],s);r.push({name:s,property:i,binding:u})}}}return r},Lo.prototype.setUniforms=function(t,e,r,i){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,i,r.get(u),s)}},Lo.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var r=this.binders[e];if(t&&r instanceof Co){var i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(r instanceof To||r instanceof Po)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}},Lo.prototype.upload=function(t){for(var e in this.binders){var r=this.binders[e];(r instanceof To||r instanceof Po||r instanceof Co)&&r.upload(t)}this.updatePaintBuffers()},Lo.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof To||e instanceof Po||e instanceof Co)&&e.destroy()}};var Ro=function(t,e,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,n=t;i<n.length;i+=1){var o=n[i];this.programConfigurations[o.id]=new Lo(o,e,r)}this.needsUpload=!1,this._featureMap=new po,this._bufferOffset=0};function Bo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Do(t,e,r){var i={color:{source:Pn,composite:Kn},number:{source:Vn,composite:Pn}},n=function(t){return{"line-pattern":{source:Cn,composite:Cn},"fill-pattern":{source:Cn,composite:Cn},"fill-extrusion-pattern":{source:Cn,composite:Cn}}[t]}(t);return n&&n[r]||i[e][r]}Ro.prototype.populatePaintArrays=function(t,e,r,i,n,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,i,n,o);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Ro.prototype.updatePaintArrays=function(t,e,r,i){for(var n=0,o=r;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},Ro.prototype.get=function(t){return this.programConfigurations[t]},Ro.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Ro.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Di("ConstantBinder",zo),Di("CrossFadedConstantBinder",Io),Di("SourceExpressionBinder",To),Di("CrossFadedCompositeBinder",Co),Di("CompositeExpressionBinder",Po),Di("ProgramConfiguration",Lo,{omit:["_buffers"]}),Di("ProgramConfigurationSet",Ro);var jo=Math.pow(2,14)-1,Oo=-jo-1;function Fo(t){for(var e=8192/t.extent,r=t.loadGeometry(),i=0;i<r.length;i++)for(var n=r[i],o=0;o<n.length;o++){var a=n[o],s=Math.round(a.x*e),u=Math.round(a.y*e);a.x=l(s,Oo,jo),a.y=l(u,Oo,jo),(s<a.x||s>a.x+1||u<a.y||u>a.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return r}function No(t,e,r,i,n){t.emplaceBack(2*e+(i+1)/2,2*r+(n+1)/2)}var Uo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new En,this.indexArray=new Nn,this.segments=new ao,this.programConfigurations=new Ro(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function qo(t,e){for(var r=0;r<t.length;r++)if(Xo(e,t[r]))return!0;for(var i=0;i<e.length;i++)if(Xo(t,e[i]))return!0;return!!Jo(t,e)}function Vo(t,e,r){return!!Xo(t,e)||!!Ko(e,t,r)}function Zo(t,e){if(1===t.length)return $o(e,t[0]);for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;n++)if(Xo(t,i[n]))return!0;for(var o=0;o<t.length;o++)if($o(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(Jo(t,e[a]))return!0;return!1}function Go(t,e,r){if(t.length>1){if(Jo(t,e))return!0;for(var i=0;i<e.length;i++)if(Ko(e[i],t,r))return!0}for(var n=0;n<t.length;n++)if(Ko(t[n],e,r))return!0;return!1}function Jo(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var i=t[r],n=t[r+1],o=0;o<e.length-1;o++)if(Ho(i,n,e[o],e[o+1]))return!0;return!1}function Ho(t,e,r,i){return S(t,r,i)!==S(e,r,i)&&S(t,e,r)!==S(t,e,i)}function Ko(t,e,r){var i=r*r;if(1===e.length)return t.distSqr(e[0])<i;for(var n=1;n<e.length;n++)if(Wo(t,e[n-1],e[n])<i)return!0;return!1}function Wo(t,e,r){var i=e.distSqr(r);if(0===i)return t.distSqr(e);var n=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/i;return t.distSqr(n<0?e:n>1?r:r.sub(e)._mult(n)._add(e))}function $o(t,e){for(var r,i,n,o=!1,a=0;a<t.length;a++)for(var s=0,u=(r=t[a]).length-1;s<r.length;u=s++)(i=r[s]).y>e.y!=(n=r[u]).y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(o=!o);return o}function Xo(t,e){for(var r=!1,i=0,n=t.length-1;i<t.length;n=i++){var o=t[i],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function Yo(t,e,r){var i=r[0],n=r[2];if(t.x<i.x&&e.x<i.x||t.x>n.x&&e.x>n.x||t.y<i.y&&e.y<i.y||t.y>n.y&&e.y>n.y)return!1;var o=S(t,e,r[0]);return o!==S(t,e,r[1])||o!==S(t,e,r[2])||o!==S(t,e,r[3])}function Qo(t,e,r){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:r.programConfigurations.get(e.id).getMaxValue(t)}function ta(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ea(t,e,r,i,o){if(!e[0]&&!e[1])return t;var a=n.convert(e)._mult(o);"viewport"===r&&a._rotate(-i);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}Uo.prototype.populate=function(t,e,r){var i=this.layers[0],n=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],h=u.feature,l=u.id,c=u.index,f=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:h.type,id:l,properties:h.properties,geometry:p?Fo(h):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),d,r)){p||(d.geometry=Fo(h));var m=o?o.evaluate(d,{},r):void 0;n.push({id:l,properties:h.properties,type:h.type,sourceLayerIndex:f,index:c,geometry:d.geometry,patterns:{},sortKey:m})}}o&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var g=0,y=n;g<y.length;g+=1){var v=y[g],_=v.geometry,b=v.index,w=v.sourceLayerIndex,x=t[b].feature;this.addFeature(v,_,b,r),e.featureIndex.insert(x,_,b,w,this.index)}},Uo.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Uo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Uo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,oo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Uo.prototype.addFeature=function(t,e,r,i){for(var n=0,o=e;n<o.length;n+=1)for(var a=0,s=o[n];a<s.length;a+=1){var u=s[a],h=u.x,l=u.y;if(!(h<0||h>=8192||l<0||l>=8192)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),f=c.vertexLength;No(this.layoutVertexArray,h,l,-1,-1),No(this.layoutVertexArray,h,l,1,-1),No(this.layoutVertexArray,h,l,1,1),No(this.layoutVertexArray,h,l,-1,1),this.indexArray.emplaceBack(f,f+1,f+2),this.indexArray.emplaceBack(f,f+3,f+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},i)},Di("CircleBucket",Uo,{omit:["layers"]});var ra=new bn({"circle-sort-key":new gn(zt.layout_circle["circle-sort-key"])}),ia={paint:new bn({"circle-radius":new gn(zt.paint_circle["circle-radius"]),"circle-color":new gn(zt.paint_circle["circle-color"]),"circle-blur":new gn(zt.paint_circle["circle-blur"]),"circle-opacity":new gn(zt.paint_circle["circle-opacity"]),"circle-translate":new mn(zt.paint_circle["circle-translate"]),"circle-translate-anchor":new mn(zt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mn(zt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mn(zt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gn(zt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gn(zt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gn(zt.paint_circle["circle-stroke-opacity"])}),layout:ra},na="undefined"!=typeof Float32Array?Float32Array:Array;function oa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function aa(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],l=e[7],c=e[8],f=e[9],p=e[10],d=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=r[0],b=r[1],w=r[2],x=r[3];return t[0]=_*i+b*s+w*c+x*m,t[1]=_*n+b*u+w*f+x*g,t[2]=_*o+b*h+w*p+x*y,t[3]=_*a+b*l+w*d+x*v,t[4]=(_=r[4])*i+(b=r[5])*s+(w=r[6])*c+(x=r[7])*m,t[5]=_*n+b*u+w*f+x*g,t[6]=_*o+b*h+w*p+x*y,t[7]=_*a+b*l+w*d+x*v,t[8]=(_=r[8])*i+(b=r[9])*s+(w=r[10])*c+(x=r[11])*m,t[9]=_*n+b*u+w*f+x*g,t[10]=_*o+b*h+w*p+x*y,t[11]=_*a+b*l+w*d+x*v,t[12]=(_=r[12])*i+(b=r[13])*s+(w=r[14])*c+(x=r[15])*m,t[13]=_*n+b*u+w*f+x*g,t[14]=_*o+b*h+w*p+x*y,t[15]=_*a+b*l+w*d+x*v,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)});var sa,ua=aa;function ha(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,t[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,t[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,t[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,t}sa=new na(3),na!=Float32Array&&(sa[0]=0,sa[1]=0,sa[2]=0),function(){var t=new na(4);na!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var la=(function(){var t=new na(2);na!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,ia)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Uo(t)},e.prototype.queryRadius=function(t){var e=t;return Qo("circle-radius",this,e)+Qo("circle-stroke-width",this,e)+ta(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,o,a,s){for(var u=ea(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),h=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),l="map"===this.paint.get("circle-pitch-alignment"),c=l?u:function(t,e){return t.map((function(t){return ca(t,e)}))}(u,s),f=l?h*a:h,p=0,d=i;p<d.length;p+=1)for(var m=0,g=d[p];m<g.length;m+=1){var y=g[m],v=l?y:ca(y,s),_=f,b=ha([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),Vo(c,v,_))return!0}return!1},e}(wn));function ca(t,e){var r=ha([],[t.x,t.y,0,1],e);return new n(r[0]/r[3],r[1]/r[3])}var fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Uo);function pa(t,e,r,i){var n=e.width,o=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==n*o*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(n*o*r);return t.width=n,t.height=o,t.data=i,t}function da(t,e,r){var i=e.width,n=e.height;if(i!==t.width||n!==t.height){var o=pa({},{width:i,height:n},r);ma(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,n)},r),t.width=i,t.height=n,t.data=o.data}}function ma(t,e,r,i,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<n.height;u++)for(var h=((r.y+u)*t.width+r.x)*o,l=((i.y+u)*e.width+i.x)*o,c=0;c<n.width*o;c++)s[l+c]=a[h+c];return e}Di("HeatmapBucket",fa,{omit:["layers"]});var ga=function(t,e){pa(this,t,1,e)};ga.prototype.resize=function(t){da(this,t,1)},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(t,e,r,i,n){ma(t,e,r,i,n,1)};var ya=function(t,e){pa(this,t,4,e)};ya.prototype.resize=function(t){da(this,t,4)},ya.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},ya.prototype.clone=function(){return new ya({width:this.width,height:this.height},new Uint8Array(this.data))},ya.copy=function(t,e,r,i,n){ma(t,e,r,i,n,4)},Di("AlphaImage",ga),Di("RGBAImage",ya);var va={paint:new bn({"heatmap-radius":new gn(zt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gn(zt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mn(zt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _n(zt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mn(zt.paint_heatmap["heatmap-opacity"])})};function _a(t){var e={},r=t.resolution||256,i=t.clips?t.clips.length:1,n=t.image||new ya({width:r,height:i}),o=function(r,i,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);n.data[r+i+0]=Math.floor(255*a.r/a.a),n.data[r+i+1]=Math.floor(255*a.g/a.a),n.data[r+i+2]=Math.floor(255*a.b/a.a),n.data[r+i+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<i;++a,s+=4*r)for(var u=0,h=0;u<r;u++,h+=4){var l=u/(r-1),c=t.clips[a];o(s,h,c.start*(1-l)+c.end*l)}else for(var f=0,p=0;f<r;f++,p+=4)o(0,p,f/(r-1));return n}var ba=function(t){function e(e){t.call(this,e,va),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new fa(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=_a({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(wn),wa={paint:new bn({"hillshade-illumination-direction":new mn(zt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mn(zt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mn(zt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mn(zt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mn(zt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mn(zt.paint_hillshade["hillshade-accent-color"])})},xa=function(t){function e(e){t.call(this,e,wa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(wn),Ma=kn([{name:"a_pos",components:2,type:"Int16"}],4).members,Sa=Aa,ka=Aa;function Aa(t,e,r){r=r||2;var i,n,o,a,s,u,h,l=e&&e.length,c=l?e[0]*r:t.length,f=Ea(t,0,c,r,!0),p=[];if(!f||f.next===f.prev)return p;if(l&&(f=function(t,e,r,i){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=Ea(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(Oa(a));for(s.sort(Ra),n=0;n<s.length;n++)Ba(s[n],r),r=za(r,r.next);return r}(t,e,f,r)),t.length>80*r){i=o=t[0],n=a=t[1];for(var d=r;d<c;d+=r)(s=t[d])<i&&(i=s),(u=t[d+1])<n&&(n=u),s>o&&(o=s),u>a&&(a=u);h=0!==(h=Math.max(o-i,a-n))?1/h:0}return Ia(f,p,r,i,n,h),p}function Ea(t,e,r,i,n){var o,a;if(n===Xa(t,e,r,i)>0)for(o=e;o<r;o+=i)a=Ka(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=Ka(o,t[o],t[o+1],a);return a&&qa(a,a.next)&&(Wa(a),a=a.next),a}function za(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!qa(i,i.next)&&0!==Ua(i.prev,i,i.next))i=i.next;else{if(Wa(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function Ia(t,e,r,i,n,o,a){if(t){!a&&o&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=ja(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,a,s,u,h=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<h&&(s++,i=i.nextZ);e++);for(u=h;s>0||u>0&&i;)0!==s&&(0===u||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,h*=2}while(a>1)}(n)}(t,i,n,o);for(var s,u,h=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Pa(t,i,n,o):Ta(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),Wa(t),t=u.next,h=u.next;else if((t=u)===h){a?1===a?Ia(t=Ca(za(t),e,r),e,r,i,n,o,2):2===a&&La(t,e,r,i,n,o):Ia(za(t),e,r,i,n,o,1);break}}}function Ta(t){var e=t.prev,r=t,i=t.next;if(Ua(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Fa(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Ua(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Pa(t,e,r,i){var n=t.prev,o=t,a=t.next;if(Ua(n,o,a)>=0)return!1;for(var s=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,u=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,h=ja(n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,e,r,i),l=ja(s,u,e,r,i),c=t.prevZ,f=t.nextZ;c&&c.z>=h&&f&&f.z<=l;){if(c!==t.prev&&c!==t.next&&Fa(n.x,n.y,o.x,o.y,a.x,a.y,c.x,c.y)&&Ua(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,f!==t.prev&&f!==t.next&&Fa(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ua(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;c&&c.z>=h;){if(c!==t.prev&&c!==t.next&&Fa(n.x,n.y,o.x,o.y,a.x,a.y,c.x,c.y)&&Ua(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;f&&f.z<=l;){if(f!==t.prev&&f!==t.next&&Fa(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ua(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ca(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!qa(n,o)&&Va(n,i,i.next,o)&&Ja(n,o)&&Ja(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),Wa(i),Wa(i.next),i=t=o),i=i.next}while(i!==t);return za(i)}function La(t,e,r,i,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Na(a,s)){var u=Ha(a,s);return a=za(a,a.next),u=za(u,u.next),Ia(a,e,r,i,n,o),void Ia(u,e,r,i,n,o)}s=s.next}a=a.next}while(a!==t)}function Ra(t,e){return t.x-e.x}function Ba(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r;var u,h=r,l=r.x,c=r.y,f=1/0;i=r;do{n>=i.x&&i.x>=l&&n!==i.x&&Fa(o<c?n:a,o,l,c,o<c?a:n,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(n-i.x),Ja(i,t)&&(u<f||u===f&&(i.x>r.x||i.x===r.x&&Da(r,i)))&&(r=i,f=u)),i=i.next}while(i!==h);return r}(t,e)){var r=Ha(e,t);za(e,e.next),za(r,r.next)}}function Da(t,e){return Ua(t.prev,t,e.prev)<0&&Ua(e.next,t,t.next)<0}function ja(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Oa(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Fa(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function Na(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Va(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Ja(t,e)&&Ja(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(Ua(t.prev,t,e.prev)||Ua(t,e.prev,e))||qa(t,e)&&Ua(t.prev,t,t.next)>0&&Ua(e.prev,e,e.next)>0)}function Ua(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function qa(t,e){return t.x===e.x&&t.y===e.y}function Va(t,e,r,i){var n=Ga(Ua(t,e,r)),o=Ga(Ua(t,e,i)),a=Ga(Ua(r,i,t)),s=Ga(Ua(r,i,e));return n!==o&&a!==s||!(0!==n||!Za(t,r,e))||!(0!==o||!Za(t,i,e))||!(0!==a||!Za(r,t,i))||!(0!==s||!Za(r,e,i))}function Za(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ga(t){return t>0?1:t<0?-1:0}function Ja(t,e){return Ua(t.prev,t,t.next)<0?Ua(t,e,t.next)>=0&&Ua(t,t.prev,e)>=0:Ua(t,e,t.prev)<0||Ua(t,t.next,e)<0}function Ha(t,e){var r=new $a(t.i,t.x,t.y),i=new $a(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function Ka(t,e,r,i){var n=new $a(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Wa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function $a(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xa(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function Ya(t,e,r,i,n){!function t(e,r,i,n,o){for(;n>i;){if(n-i>600){var a=n-i+1,s=r-i+1,u=Math.log(a),h=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*h*(a-h)/a)*(s-a/2<0?-1:1);t(e,r,Math.max(i,Math.floor(r-s*h/a+l)),Math.min(n,Math.floor(r+(a-s)*h/a+l)),o)}var c=e[r],f=i,p=n;for(Qa(e,i,r),o(e[n],c)>0&&Qa(e,i,n);f<p;){for(Qa(e,f,p),f++,p--;o(e[f],c)<0;)f++;for(;o(e[p],c)>0;)p--}0===o(e[i],c)?Qa(e,i,p):Qa(e,++p,n),p<=r&&(i=p+1),r<=p&&(n=p-1)}}(t,e,r||0,i||t.length-1,n||ts)}function Qa(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function ts(t,e){return t<e?-1:t>e?1:0}function es(t,e){var r=t.length;if(r<=1)return[t];for(var i,n,o=[],a=0;a<r;a++){var s=k(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Ya(o[u],e,1,o[u].length-1,rs),o[u]=o[u].slice(0,e));return o}function rs(t,e){return e.area-t.area}function is(t,e,r){for(var i=r.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var u=s.constantOr(null);u&&(n=!0,i[u.to]=!0,i[u.from]=!0)}return n}function ns(t,e,r,i,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],h=u.paint.get(t+"-pattern").value;if("constant"!==h.kind){var l=h.evaluate({zoom:i-1},r,{},n.availableImages),c=h.evaluate({zoom:i},r,{},n.availableImages),f=h.evaluate({zoom:i+1},r,{},n.availableImages);c=c&&c.name?c.name:c,f=f&&f.name?f.name:f,o[l=l&&l.name?l.name:l]=!0,o[c]=!0,o[f]=!0,r.patterns[u.id]={min:l,mid:c,max:f}}}return r}Aa.deviation=function(t,e,r,i){var n=e&&e.length,o=Math.abs(Xa(t,0,n?e[0]*r:t.length,r));if(n)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Xa(t,e[a]*r,a<s-1?e[a+1]*r:t.length,r));var u=0;for(a=0;a<i.length;a+=3){var h=i[a]*r,l=i[a+1]*r,c=i[a+2]*r;u+=Math.abs((t[h]-t[c])*(t[l+1]-t[h+1])-(t[h]-t[l])*(t[c+1]-t[h+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&r.holes.push(i+=t[n-1].length)}return r},Sa.default=ka;var os=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new En,this.indexArray=new Nn,this.indexArray2=new Jn,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ao,this.segments2=new ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};os.prototype.populate=function(t,e,r){this.hasPattern=is("fill",this.layers,e);for(var i=this.layers[0].layout.get("fill-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,h=s.id,l=s.index,c=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,p={type:u.type,id:h,properties:u.properties,geometry:f?Fo(u):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),p,r)){f||(p.geometry=Fo(u));var d=i?i.evaluate(p,{},r,e.availableImages):void 0;n.push({id:h,properties:u.properties,type:u.type,sourceLayerIndex:c,index:l,geometry:p.geometry,patterns:{},sortKey:d})}}i&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=n;m<g.length;m+=1){var y=g[m],v=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var w=ns("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,v,_,r,{});e.featureIndex.insert(t[_].feature,v,_,b,this.index)}},os.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},os.prototype.addFeatures=function(t,e,r){for(var i=0,n=this.patternFeatures;i<n.length;i+=1){var o=n[i];this.addFeature(o,o.geometry,o.index,e,r)}},os.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},os.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ma),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},os.prototype.addFeature=function(t,e,r,i,n){for(var o=0,a=es(e,500);o<a.length;o+=1){for(var s=a[o],u=0,h=0,l=s;h<l.length;h+=1)u+=l[h].length;for(var c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),f=c.vertexLength,p=[],d=[],m=0,g=s;m<g.length;m+=1){var y=g[m];if(0!==y.length){y!==s[0]&&d.push(p.length/2);var v=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),_=v.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(_+y.length-1,_),p.push(y[0].x),p.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),p.push(y[b].x),p.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var w=Sa(p,d),x=0;x<w.length;x+=3)this.indexArray.emplaceBack(f+w[x],f+w[x+1],f+w[x+2]);c.vertexLength+=u,c.primitiveLength+=w.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n,i)},Di("FillBucket",os,{omit:["layers","patternFeatures"]});var as=new bn({"fill-sort-key":new gn(zt.layout_fill["fill-sort-key"])}),ss={paint:new bn({"fill-antialias":new mn(zt.paint_fill["fill-antialias"]),"fill-opacity":new gn(zt.paint_fill["fill-opacity"]),"fill-color":new gn(zt.paint_fill["fill-color"]),"fill-outline-color":new gn(zt.paint_fill["fill-outline-color"]),"fill-translate":new mn(zt.paint_fill["fill-translate"]),"fill-translate-anchor":new mn(zt.paint_fill["fill-translate-anchor"]),"fill-pattern":new yn(zt.paint_fill["fill-pattern"])}),layout:as},us=function(t){function e(e){t.call(this,e,ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new os(t)},e.prototype.queryRadius=function(){return ta(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,o,a){return Zo(ea(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(wn),hs=kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ls=cs;function cs(t,e,r,i,n){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=n,t.readFields(fs,this,e)}function fs(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var i=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[i]=n}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function ps(t){for(var e,r,i=0,n=0,o=t.length,a=o-1;n<o;a=n++)i+=((r=t[a]).x-(e=t[n]).x)*(e.y+r.y);return i}cs.types=["Unknown","Point","LineString","Polygon"],cs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,u=[];t.pos<r;){if(o<=0){var h=t.readVarint();i=7&h,o=h>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&u.push(e),e=[]),e.push(new n(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&u.push(e),u},cs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,i=0,n=0,o=0,a=1/0,s=-1/0,u=1/0,h=-1/0;t.pos<e;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<u&&(u=o),o>h&&(h=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,u,s,h]},cs.prototype.toGeoJSON=function(t,e,r){var i,n,o=this.extent*Math.pow(2,r),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),h=cs.types[this.type];function l(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(i=0;i<u.length;i++)c[i]=u[i][0];l(u=c);break;case 2:for(i=0;i<u.length;i++)l(u[i]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var r,i,n=[],o=0;o<e;o++){var a=ps(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(r&&n.push(r),r=[t[o]]):r.push(t[o]))}return r&&n.push(r),n}(u),i=0;i<u.length;i++)for(n=0;n<u[i].length;n++)l(u[i][n])}1===u.length?u=u[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var ds=ms;function ms(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gs,this,e),this.length=this._features.length}function gs(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(r))}function ys(t,e,r){if(3===t){var i=new ds(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}ms.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ls(this._pbf,e,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(ys,{},e)},VectorTileFeature:ls,VectorTileLayer:ds},_s=vs.VectorTileFeature.types,bs=Math.pow(2,13);function ws(t,e,r,i,n,o,a,s){t.emplaceBack(e,r,2*Math.floor(i*bs)+a,n*bs*2,o*bs*2,Math.round(s))}var xs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new In,this.indexArray=new Nn,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ao,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Ms(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}xs.prototype.populate=function(t,e,r){this.features=[],this.hasPattern=is("fill-extrusion",this.layers,e);for(var i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.feature,s=o.id,u=o.index,h=o.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,c={type:a.type,id:s,properties:a.properties,geometry:l?Fo(a):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),c,r)){var f={id:s,sourceLayerIndex:h,index:u,geometry:l?c.geometry:Fo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,f,this.zoom,e)):this.addFeature(f,f.geometry,u,r,{}),e.featureIndex.insert(a,f.geometry,u,h,this.index,!0)}}},xs.prototype.addFeatures=function(t,e,r){for(var i=0,n=this.features;i<n.length;i+=1){var o=n[i];this.addFeature(o,o.geometry,o.index,e,r)}},xs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},xs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},xs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xs.prototype.addFeature=function(t,e,r,i,n){for(var o=0,a=es(e,500);o<a.length;o+=1){for(var s=a[o],u=0,h=0,l=s;h<l.length;h+=1)u+=l[h].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),f=0,p=s;f<p.length;f+=1){var d=p[f];if(0!==d.length&&!((C=d).every((function(t){return t.x<0}))||C.every((function(t){return t.x>8192}))||C.every((function(t){return t.y<0}))||C.every((function(t){return t.y>8192}))))for(var m=0,g=0;g<d.length;g++){var y=d[g];if(g>=1){var v=d[g-1];if(!Ms(y,v)){c.vertexLength+4>ao.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=y.sub(v)._perp()._unit(),b=v.dist(y);m+b>32768&&(m=0),ws(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,m),ws(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,m),ws(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,0,m+=b),ws(this.layoutVertexArray,v.x,v.y,_.x,_.y,0,1,m);var w=c.vertexLength;this.indexArray.emplaceBack(w,w+2,w+1),this.indexArray.emplaceBack(w+1,w+2,w+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+u>ao.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===_s[t.type]){for(var x=[],M=[],S=c.vertexLength,k=0,A=s;k<A.length;k+=1){var E=A[k];if(0!==E.length){E!==s[0]&&M.push(x.length/2);for(var z=0;z<E.length;z++){var I=E[z];ws(this.layoutVertexArray,I.x,I.y,0,0,1,1,0),x.push(I.x),x.push(I.y)}}}for(var T=Sa(x,M),P=0;P<T.length;P+=3)this.indexArray.emplaceBack(S+T[P],S+T[P+2],S+T[P+1]);c.primitiveLength+=T.length/3,c.vertexLength+=u}}var C;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n,i)},Di("FillExtrusionBucket",xs,{omit:["layers","features"]});var Ss={paint:new bn({"fill-extrusion-opacity":new mn(zt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gn(zt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mn(zt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mn(zt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yn(zt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gn(zt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gn(zt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mn(zt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ks=function(t){function e(e){t.call(this,e,Ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new xs(t)},e.prototype.queryRadius=function(){return ta(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,i,o,a,s,u){var h=ea(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),l=this.paint.get("fill-extrusion-height").evaluate(e,r),c=this.paint.get("fill-extrusion-base").evaluate(e,r),f=function(t,e,r,i){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],h=[u.x,u.y,0,1];ha(h,h,e),o.push(new n(h[0]/h[3],h[1]/h[3]))}return o}(h,u),p=function(t,e,r,i){for(var o=[],a=[],s=i[8]*e,u=i[9]*e,h=i[10]*e,l=i[11]*e,c=i[8]*r,f=i[9]*r,p=i[10]*r,d=i[11]*r,m=0,g=t;m<g.length;m+=1){for(var y=[],v=[],_=0,b=g[m];_<b.length;_+=1){var w=b[_],x=w.x,M=w.y,S=i[0]*x+i[4]*M+i[12],k=i[1]*x+i[5]*M+i[13],A=i[2]*x+i[6]*M+i[14],E=i[3]*x+i[7]*M+i[15],z=A+h,I=E+l,T=S+c,P=k+f,C=A+p,L=E+d,R=new n((S+s)/I,(k+u)/I);R.z=z/I,y.push(R);var B=new n(T/L,P/L);B.z=C/L,v.push(B)}o.push(y),a.push(v)}return[o,a]}(i,c,l,u);return function(t,e,r){var i=1/0;Zo(r,e)&&(i=Es(r,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var u=o[s],h=[u,o[s+1],a[s+1],a[s],u];qo(r,h)&&(i=Math.min(i,Es(r,h)))}return i!==1/0&&i}(p[0],p[1],f)},e}(wn);function As(t,e){return t.x*e.x+t.y*e.y}function Es(t,e){if(1===t.length){for(var r,i=0,n=e[i++];!r||n.equals(r);)if(!(r=e[i++]))return 1/0;for(;i<e.length;i++){var o=e[i],a=t[0],s=r.sub(n),u=o.sub(n),h=a.sub(n),l=As(s,s),c=As(s,u),f=As(u,u),p=As(h,s),d=As(h,u),m=l*f-c*c,g=(f*p-c*d)/m,y=(l*d-c*p)/m,v=n.z*(1-g-y)+r.z*g+o.z*y;if(isFinite(v))return v}return 1/0}for(var _=1/0,b=0,w=e;b<w.length;b+=1)_=Math.min(_,w[b].z);return _}var zs=kn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Is=kn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ts=vs.VectorTileFeature.types,Ps=Math.cos(Math.PI/180*37.5),Cs=Math.pow(2,14)/.5,Ls=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new Tn,this.layoutVertexArray2=new Pn,this.indexArray=new Nn,this.programConfigurations=new Ro(t.layers,t.zoom),this.segments=new ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Ls.prototype.populate=function(t,e,r){this.hasPattern=is("line",this.layers,e);for(var i=this.layers[0].layout.get("line-sort-key"),n=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,h=s.id,l=s.index,c=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,p={type:u.type,id:h,properties:u.properties,geometry:f?Fo(u):[]};if(this.layers[0]._featureFilter.filter(new an(this.zoom),p,r)){f||(p.geometry=Fo(u));var d=i?i.evaluate(p,{},r):void 0;n.push({id:h,properties:u.properties,type:u.type,sourceLayerIndex:c,index:l,geometry:p.geometry,patterns:{},sortKey:d})}}i&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,g=n;m<g.length;m+=1){var y=g[m],v=y.geometry,_=y.index,b=y.sourceLayerIndex;if(this.hasPattern){var w=ns("line",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,v,_,r,{});e.featureIndex.insert(t[_].feature,v,_,b,this.index)}},Ls.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Ls.prototype.addFeatures=function(t,e,r){for(var i=0,n=this.patternFeatures;i<n.length;i+=1){var o=n[i];this.addFeature(o,o.geometry,o.index,e,r)}},Ls.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ls.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ls.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Is)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ls.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ls.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ls.prototype.addFeature=function(t,e,r,i,n){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),h=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var l=0,c=e;l<c.length;l+=1)this.addLine(c[l],t,a,s,u,h);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,n,i)},Ls.prototype.addLine=function(t,e,r,i,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ts[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var h=0;h<u-1&&t[h].equals(t[h+1]);)h++;if(!(u<(s?3:2))){"bevel"===r&&(n=1.05);var l,c=this.overscaling<=16?122880/(512*this.overscaling):0,f=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),p=void 0,d=void 0,m=void 0,g=void 0;this.e1=this.e2=-1,s&&(g=t[h].sub(l=t[u-2])._unit()._perp());for(var y=h;y<u;y++)if(!(d=y===u-1?s?t[h+1]:void 0:t[y+1])||!t[y].equals(d)){g&&(m=g),l&&(p=l),l=t[y],g=d?d.sub(l)._unit()._perp():m;var v=(m=m||g).add(g);0===v.x&&0===v.y||v._unit();var _=m.x*g.x+m.y*g.y,b=v.x*g.x+v.y*g.y,w=0!==b?1/b:1/0,x=2*Math.sqrt(2-2*b),M=b<Ps&&p&&d,S=m.x*g.y-m.y*g.x>0;if(M&&y>h){var k=l.dist(p);if(k>2*c){var A=l.sub(l.sub(p)._mult(c/k)._round());this.updateDistance(p,A),this.addCurrentVertex(A,m,0,0,f),p=A}}var E=p&&d,z=E?r:s?"butt":i;if(E&&"round"===z&&(w<o?z="miter":w<=2&&(z="fakeround")),"miter"===z&&w>n&&(z="bevel"),"bevel"===z&&(w>2&&(z="flipbevel"),w<n&&(z="miter")),p&&this.updateDistance(p,l),"miter"===z)v._mult(w),this.addCurrentVertex(l,v,0,0,f);else if("flipbevel"===z){if(w>100)v=g.mult(-1);else{var I=w*m.add(g).mag()/m.sub(g).mag();v._perp()._mult(I*(S?-1:1))}this.addCurrentVertex(l,v,0,0,f),this.addCurrentVertex(l,v.mult(-1),0,0,f)}else if("bevel"===z||"fakeround"===z){var T=-Math.sqrt(w*w-1),P=S?T:0,C=S?0:T;if(p&&this.addCurrentVertex(l,m,P,C,f),"fakeround"===z)for(var L=Math.round(180*x/Math.PI/20),R=1;R<L;R++){var B=R/L;if(.5!==B){var D=B-.5;B+=B*D*(B-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var j=g.sub(m)._mult(B)._add(m)._unit()._mult(S?-1:1);this.addHalfVertex(l,j.x,j.y,!1,S,0,f)}d&&this.addCurrentVertex(l,g,-P,-C,f)}else if("butt"===z)this.addCurrentVertex(l,v,0,0,f);else if("square"===z){var O=p?1:-1;this.addCurrentVertex(l,v,O,O,f)}else"round"===z&&(p&&(this.addCurrentVertex(l,m,0,0,f),this.addCurrentVertex(l,m,1,1,f,!0)),d&&(this.addCurrentVertex(l,g,-1,-1,f,!0),this.addCurrentVertex(l,g,0,0,f)));if(M&&y<u-1){var F=l.dist(d);if(F>2*c){var N=l.add(d.sub(l)._mult(c/F)._round());this.updateDistance(l,N),this.addCurrentVertex(N,g,0,0,f),l=N}}}}},Ls.prototype.addCurrentVertex=function(t,e,r,i,n,o){void 0===o&&(o=!1);var a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,o,!1,r,n),this.addHalfVertex(t,a,s,o,!0,-i,n),this.distance>Cs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,i,n,o))},Ls.prototype.addHalfVertex=function(t,e,r,i,n,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Cs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(i?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u},Ls.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ls.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Di("LineBucket",Ls,{omit:["layers","patternFeatures"]});var Rs=new bn({"line-cap":new mn(zt.layout_line["line-cap"]),"line-join":new gn(zt.layout_line["line-join"]),"line-miter-limit":new mn(zt.layout_line["line-miter-limit"]),"line-round-limit":new mn(zt.layout_line["line-round-limit"]),"line-sort-key":new gn(zt.layout_line["line-sort-key"])}),Bs={paint:new bn({"line-opacity":new gn(zt.paint_line["line-opacity"]),"line-color":new gn(zt.paint_line["line-color"]),"line-translate":new mn(zt.paint_line["line-translate"]),"line-translate-anchor":new mn(zt.paint_line["line-translate-anchor"]),"line-width":new gn(zt.paint_line["line-width"]),"line-gap-width":new gn(zt.paint_line["line-gap-width"]),"line-offset":new gn(zt.paint_line["line-offset"]),"line-blur":new gn(zt.paint_line["line-blur"]),"line-dasharray":new vn(zt.paint_line["line-dasharray"]),"line-pattern":new yn(zt.paint_line["line-pattern"]),"line-gradient":new _n(zt.paint_line["line-gradient"])}),layout:Rs},Ds=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new an(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,i,n){return r=f({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,i,n)},e}(gn))(Bs.paint.properties["line-width"].specification);Ds.useIntegerZoom=!0;var js=function(t){function e(e){t.call(this,e,Bs),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qe,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=Ds.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Ls(t)},e.prototype.queryRadius=function(t){var e=t,r=Os(Qo("line-width",this,e),Qo("line-gap-width",this,e)),i=Qo("line-offset",this,e);return r/2+Math.abs(i)+ta(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,o,a,s){var u=ea(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),h=s/2*Os(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),l=this.paint.get("line-offset").evaluate(e,r);return l&&(i=function(t,e){for(var r=[],i=new n(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var h=a[u],l=a[u+1],c=0===u?i:h.sub(a[u-1])._unit()._perp(),f=u===a.length-1?i:l.sub(h)._unit()._perp(),p=c._add(f)._unit();p._mult(1/(p.x*f.x+p.y*f.y)),s.push(p._mult(e)._add(h))}r.push(s)}return r}(i,l*s)),function(t,e,r){for(var i=0;i<e.length;i++){var n=e[i];if(t.length>=3)for(var o=0;o<n.length;o++)if(Xo(t,n[o]))return!0;if(Go(t,n,r))return!0}return!1}(u,i,h)},e.prototype.isTileClipped=function(){return!0},e}(wn);function Os(t,e){return e>0?e+2*t:t}var Fs=kn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ns=kn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Us=(kn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),kn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),qs=(kn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Vs=kn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zs(t,e,r){return t.sections.forEach((function(t){t.text=function(t,e,r){var i=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),on.applyArabicShaping&&(t=on.applyArabicShaping(t)),t}(t.text,e,r)})),t}kn([{name:"triangle",components:3,type:"Uint16"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kn([{type:"Float32",name:"offsetX"}]),kn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Gs={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Js=function(t,e,r,i,n){var o,a,s=8*n-i-1,u=(1<<s)-1,h=u>>1,l=-7,c=r?n-1:0,f=r?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+c],c+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=256*a+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=h}return(p?-1:1)*a*Math.pow(2,o-i)},Hs=function(t,e,r,i,n,o){var a,s,u,h=8*o-n-1,l=(1<<h)-1,c=l>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=l?(s=0,a=l):a+c>=1?(s=(e*u-1)*Math.pow(2,n),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;t[r+p]=255&s,p+=d,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;t[r+p]=255&a,p+=d,a/=256,h-=8);t[r+p-d]|=128*m},Ks=Ws;function Ws(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Ws.Varint=0,Ws.Fixed64=1,Ws.Bytes=2,Ws.Fixed32=5;var $s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Xs(t){return t.type===Ws.Bytes?t.readVarint()+t.pos:t.pos+1}function Ys(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Qs(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function tu(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function eu(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function ru(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function iu(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function nu(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function ou(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function au(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function su(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function uu(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function hu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function lu(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function cu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function fu(t,e,r){1===t&&r.readMessage(pu,e)}function pu(t,e,r){if(3===t){var i=r.readMessage(du,{}),n=i.width,o=i.height,a=i.left,s=i.top,u=i.advance;e.push({id:i.id,bitmap:new ga({width:n+6,height:o+6},i.bitmap),metrics:{width:n,height:o,left:a,top:s,advance:u}})}}function du(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function mu(t){for(var e=0,r=0,i=0,n=t;i<n.length;i+=1){var o=n[i];e+=o.w*o.h,r=Math.max(r,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,u=0,h=0,l=t;h<l.length;h+=1)for(var c=l[h],f=a.length-1;f>=0;f--){var p=a[f];if(!(c.w>p.w||c.h>p.h)){if(c.x=p.x,c.y=p.y,u=Math.max(u,c.y+c.h),s=Math.max(s,c.x+c.w),c.w===p.w&&c.h===p.h){var d=a.pop();f<a.length&&(a[f]=d)}else c.h===p.h?(p.x+=c.w,p.w-=c.w):c.w===p.w?(p.y+=c.h,p.h-=c.h):(a.push({x:p.x+c.w,y:p.y,w:p.w-c.w,h:c.h}),p.y+=c.h,p.h-=c.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}Ws.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,t(n,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=hu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=cu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=hu(this.buf,this.pos)+4294967296*hu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=hu(this.buf,this.pos)+4294967296*cu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Js(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Js(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return Ys(t,i,e);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return Ys(t,i,e);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return Ys(t,i,e);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return Ys(t,i,e);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return Ys(t,i,e);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return Ys(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&$s?function(t,e,r){return $s.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var i="",n=e;n<r;){var o,a,s,u=t[n],h=null,l=u>239?4:u>223?3:u>191?2:1;if(n+l>r)break;1===l?u<128&&(h=u):2===l?128==(192&(o=t[n+1]))&&(h=(31&u)<<6|63&o)<=127&&(h=null):3===l?(a=t[n+2],128==(192&(o=t[n+1]))&&128==(192&a)&&((h=(15&u)<<12|(63&o)<<6|63&a)<=2047||h>=55296&&h<=57343)&&(h=null)):4===l&&(a=t[n+2],s=t[n+3],128==(192&(o=t[n+1]))&&128==(192&a)&&128==(192&s)&&((h=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,l=1):h>65535&&(h-=65536,i+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),i+=String.fromCharCode(h),n+=l}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Ws.Bytes)return t.push(this.readVarint(e));var r=Xs(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSVarint());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Ws.Bytes)return t.push(this.readBoolean());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFloat());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Ws.Bytes)return t.push(this.readDouble());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFixed32());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSFixed32());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFixed64());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSFixed64());var e=Xs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ws.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ws.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ws.Fixed32)this.pos+=4;else{if(e!==Ws.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),lu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),lu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),lu(this.buf,-1&t,this.pos),lu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),lu(this.buf,-1&t,this.pos),lu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7)}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Qs(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Hs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Hs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&Qs(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,Ws.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,tu,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,ou,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,su,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,uu,e)},writeBytesField:function(t,e){this.writeTag(t,Ws.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ws.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ws.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ws.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gu=function(t,e){var r=e.pixelRatio,i=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=r,this.stretchX=n,this.stretchY=o,this.content=a,this.version=i},yu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};yu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},yu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},yu.tlbr.get=function(){return this.tl.concat(this.br)},yu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gu.prototype,yu);var vu=function(t,e){var r={},i={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,r,n),this.addImages(e,i,n);var o=mu(n),a=new ya({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],h=r[s].paddedRect;ya.copy(u.data,a,{x:0,y:0},{x:h.x+1,y:h.y+1},u.data)}for(var l in e){var c=e[l],f=i[l].paddedRect,p=f.x+1,d=f.y+1,m=c.data.width,g=c.data.height;ya.copy(c.data,a,{x:0,y:0},{x:p,y:d},c.data),ya.copy(c.data,a,{x:0,y:g-1},{x:p,y:d-1},{width:m,height:1}),ya.copy(c.data,a,{x:0,y:0},{x:p,y:d+g},{width:m,height:1}),ya.copy(c.data,a,{x:m-1,y:0},{x:p-1,y:d},{width:1,height:g}),ya.copy(c.data,a,{x:0,y:0},{x:p+m,y:d},{width:1,height:g})}this.image=a,this.iconPositions=r,this.patternPositions=i};vu.prototype.addImages=function(t,e,r){for(var i in t){var n=t[i],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};r.push(o),e[i]=new gu(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},vu.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},vu.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl;r.update(e.data,void 0,{x:i[0],y:i[1]})}},Di("ImagePosition",gu),Di("ImageAtlas",vu);var _u={horizontal:1,vertical:2,horizontalOnly:3},bu=function(){this.scale=1,this.fontStack="",this.imageName=null};bu.forText=function(t,e){var r=new bu;return r.scale=t||1,r.fontStack=e,r},bu.forImage=function(t){var e=new bu;return e.imageName=t,e};var wu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xu(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m){var g,y=wu.fromFeature(t,n);c===_u.vertical&&y.verticalizePunctuation();var v=on.processBidirectionalText,_=on.processStyledBidirectionalText;if(v&&1===y.sections.length){g=[];for(var b=0,w=v(y.toString(),Iu(y,h,o,e,i,p,d));b<w.length;b+=1){var x=w[b],M=new wu;M.text=x,M.sections=y.sections;for(var S=0;S<x.length;S++)M.sectionIndex.push(0);g.push(M)}}else if(_){g=[];for(var k=0,A=_(y.text,y.sectionIndex,Iu(y,h,o,e,i,p,d));k<A.length;k+=1){var E=A[k],z=new wu;z.text=E[0],z.sectionIndex=E[1],z.sections=y.sections,g.push(z)}}else g=function(t,e){for(var r=[],i=t.text,n=0,o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(t.substring(n,s)),n=s}return n<i.length&&r.push(t.substring(n,i.length)),r}(y,Iu(y,h,o,e,i,p,d));var I=[],T={positionedLines:I,text:y.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:c,iconsInText:!1,verticalizable:!1};return function(t,e,r,i,n,o,a,s,u,h,l,c){for(var f=0,p=-17,d=0,m=0,g="right"===s?1:"left"===s?0:.5,y=0,v=0,_=n;v<_.length;v+=1){var b=_[v];b.trim();var w=b.getMaxScale(),x=24*(w-1),M={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=M;var S=M.positionedGlyphs,k=0;if(b.length()){for(var A=0;A<b.length();A++){var E=b.getSection(A),z=b.getSectionIndex(A),I=b.getCharCode(A),T=0,P=null,C=null,L=null,R=24,B=!(u===_u.horizontal||!l&&!Gi(I)||l&&(Mu[I]||(Z=I,Vi.Arabic(Z)||Vi["Arabic Supplement"](Z)||Vi["Arabic Extended-A"](Z)||Vi["Arabic Presentation Forms-A"](Z)||Vi["Arabic Presentation Forms-B"](Z))));if(E.imageName){var D=i[E.imageName];if(!D)continue;L=E.imageName,t.iconsInText=t.iconsInText||!0,C=D.paddedRect;var j=D.displaySize;E.scale=24*E.scale/c,T=x+(24-j[1]*E.scale),R=(P={width:j[0],height:j[1],left:1,top:-3,advance:B?j[1]:j[0]}).advance;var O=B?j[0]*E.scale-24*w:j[1]*E.scale-24*w;O>0&&O>k&&(k=O)}else{var F=r[E.fontStack],N=F&&F[I];if(N&&N.rect)C=N.rect,P=N.metrics;else{var U=e[E.fontStack],q=U&&U[I];if(!q)continue;P=q.metrics}T=24*(w-E.scale)}B?(t.verticalizable=!0,S.push({glyph:I,imageName:L,x:f,y:p+T,vertical:B,scale:E.scale,fontStack:E.fontStack,sectionIndex:z,metrics:P,rect:C}),f+=R*E.scale+h):(S.push({glyph:I,imageName:L,x:f,y:p+T,vertical:B,scale:E.scale,fontStack:E.fontStack,sectionIndex:z,metrics:P,rect:C}),f+=P.advance*E.scale+h)}0!==S.length&&(d=Math.max(f-h,d),Pu(S,0,S.length-1,g,k)),f=0;var V=o*w+k;M.lineOffset=Math.max(k,x),p+=V,m=Math.max(V,m),++y}else p+=o,++y}var Z,G=p- -17,J=Tu(a),H=J.horizontalAlign,K=J.verticalAlign;(function(t,e,r,i,n,o,a,s,u){var h,l=(e-r)*n;h=o!==a?-s*i- -17:(-i*u+.5)*a;for(var c=0,f=t;c<f.length;c+=1)for(var p=0,d=f[c].positionedGlyphs;p<d.length;p+=1){var m=d[p];m.x+=l,m.y+=h}})(t.positionedLines,g,H,K,d,m,o,G,n.length),t.top+=-K*G,t.bottom=t.top+G,t.left+=-H*d,t.right=t.left+d}(T,e,r,i,g,a,s,u,c,h,f,m),!function(t){for(var e=0,r=t;e<r.length;e+=1)if(0!==r[e].positionedGlyphs.length)return!1;return!0}(I)&&T}wu.fromFeature=function(t,e){for(var r=new wu,i=0;i<t.sections.length;i++){var n=t.sections[i];n.image?r.addImageSection(n):r.addTextSection(n,e)}return r},wu.prototype.length=function(){return this.text.length},wu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},wu.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},wu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},wu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var i=t.charCodeAt(r+1)||null,n=t.charCodeAt(r-1)||null;e+=i&&Ji(i)&&!Gs[t[r+1]]||n&&Ji(n)&&!Gs[t[r-1]]||!Gs[t[r]]?t[r]:Gs[t[r]]}return e}(this.text)},wu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Mu[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,i=this.text.length-1;i>=0&&i>=t&&Mu[this.text.charCodeAt(i)];i--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},wu.prototype.substring=function(t,e){var r=new wu;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},wu.prototype.toString=function(){return this.text},wu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,r){return Math.max(e,t.sections[r].scale)}),0)},wu.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(bu.forText(t.scale,t.fontStack||e));for(var r=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(r)},wu.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(bu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},wu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Mu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Su={};function ku(t,e,r,i,n,o){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*24/o+n:0}var s=r[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+n:0}function Au(t,e,r,i){var n=Math.pow(t-e,2);return i?t<e?n/2:2*n:n+Math.abs(r)*r}function Eu(t,e,r){var i=0;return 10===t&&(i-=1e4),r&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function zu(t,e,r,i,n,o){for(var a=null,s=Au(e,r,n,o),u=0,h=i;u<h.length;u+=1){var l=h[u],c=Au(e-l.x,r,n,o)+l.badness;c<=s&&(a=l,s=c)}return{index:t,x:e,priorBreak:a,badness:s}}function Iu(t,e,r,i,n,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],h=function(t,e,r,i,n,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=ku(t.getCharCode(s),u,i,n,e,o)}return a/Math.max(1,Math.ceil(a/r))}(t,e,r,i,n,a),l=t.text.indexOf("​")>=0,c=0,f=0;f<t.length();f++){var p=t.getSection(f),d=t.getCharCode(f);if(Mu[d]||(c+=ku(d,p,i,n,e,a)),f<t.length()-1){var m=!((s=d)<11904||!(Vi["Bopomofo Extended"](s)||Vi.Bopomofo(s)||Vi["CJK Compatibility Forms"](s)||Vi["CJK Compatibility Ideographs"](s)||Vi["CJK Compatibility"](s)||Vi["CJK Radicals Supplement"](s)||Vi["CJK Strokes"](s)||Vi["CJK Symbols and Punctuation"](s)||Vi["CJK Unified Ideographs Extension A"](s)||Vi["CJK Unified Ideographs"](s)||Vi["Enclosed CJK Letters and Months"](s)||Vi["Halfwidth and Fullwidth Forms"](s)||Vi.Hiragana(s)||Vi["Ideographic Description Characters"](s)||Vi["Kangxi Radicals"](s)||Vi["Katakana Phonetic Extensions"](s)||Vi.Katakana(s)||Vi["Vertical Forms"](s)||Vi["Yi Radicals"](s)||Vi["Yi Syllables"](s)));(Su[d]||m||p.imageName)&&u.push(zu(f+1,c,h,u,Eu(d,t.getCharCode(f+1),m&&l),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(zu(t.length(),c,h,u,0,!0))}function Tu(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Pu(t,e,r,i,n){if(i||n)for(var o=t[r],a=(t[r].x+o.metrics.advance*o.scale)*i,s=e;s<=r;s++)t[s].x-=a,t[s].y+=n}function Cu(t,e,r,i,n,o){var a,s=t.image;if(s.content){var u=s.content,h=s.pixelRatio||1;a=[u[0]/h,u[1]/h,s.displaySize[0]-u[2]/h,s.displaySize[1]-u[3]/h]}var l,c,f,p,d=e.left*o,m=e.right*o;"width"===r||"both"===r?(p=n[0]+d-i[3],c=n[0]+m+i[1]):c=(p=n[0]+(d+m-s.displaySize[0])/2)+s.displaySize[0];var g=e.top*o,y=e.bottom*o;return"height"===r||"both"===r?(l=n[1]+g-i[0],f=n[1]+y+i[2]):f=(l=n[1]+(g+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:l,right:c,bottom:f,left:p,collisionPadding:a}}Su[10]=!0,Su[32]=!0,Su[38]=!0,Su[40]=!0,Su[41]=!0,Su[43]=!0,Su[45]=!0,Su[47]=!0,Su[173]=!0,Su[183]=!0,Su[8203]=!0,Su[8208]=!0,Su[8211]=!0,Su[8231]=!0;var Lu=function(t){function e(e,r,i,n){t.call(this,e,r),this.angle=i,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n);function Ru(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new an(t+1))};if("source"===r.kind)return{kind:"source"};for(var i=r.zoomStops,n=r.interpolationType,o=0;o<i.length&&i[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[o],u=i[a];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:u,minSize:r.evaluate(new an(s)),maxSize:r.evaluate(new an(u)),interpolationType:n}}function Bu(t,e,r){var i=e.uSize,n=r.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?Ve(n/128,r.upperSize/128,e.uSizeT):i}function Du(t,e){var r=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,o=n?l(nr.interpolationFactor(n,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?i=Ve(t.minSize,t.maxSize,o):r=o}return{uSizeT:r,uSize:i}}Di("Anchor",Lu);var ju=Object.freeze({__proto__:null,getSizeData:Ru,evaluateSizeForFeature:Bu,evaluateSizeForZoom:Du,SIZE_PACK_FACTOR:128});function Ou(t,e,r,i,n){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],h=0;s<r/2;){var l=t[a],c=t[a+1];if(!c)return!1;var f=t[a-1].angleTo(l)-l.angleTo(c);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),h+=f;s-u[0].distance>i;)h-=u.shift().angleDelta;if(h>n)return!1;a++,s+=l.dist(c)}return!0}function Fu(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Nu(t,e,r){return t?.6*e*r:0}function Uu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function qu(t,e,r,i,n,o){for(var a=Nu(r,n,o),s=Uu(r,i)*o,u=0,h=Fu(t)/2,l=0;l<t.length-1;l++){var c=t[l],f=t[l+1],p=c.dist(f);if(u+p>h){var d=(h-u)/p,m=Ve(c.x,f.x,d),g=Ve(c.y,f.y,d),y=new Lu(m,g,f.angleTo(c),l);return y._round(),!a||Ou(t,y,s,a,e)?y:void 0}u+=p}}function Vu(t,e,r,i,n,o,a,s,u){var h=Nu(i,o,a),l=Uu(i,n),c=l*a,f=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-c<e/4&&(e=c+e/4),function t(e,r,i,n,o,a,s,u,h){for(var l=a/2,c=Fu(e),f=0,p=r-i,d=[],m=0;m<e.length-1;m++){for(var g=e[m],y=e[m+1],v=g.dist(y),_=y.angleTo(g);p+i<f+v;){var b=((p+=i)-f)/v,w=Ve(g.x,y.x,b),x=Ve(g.y,y.y,b);if(w>=0&&w<h&&x>=0&&x<h&&p-l>=0&&p+l<=c){var M=new Lu(w,x,_,m);M._round(),n&&!Ou(e,M,a,n,o)||d.push(M)}}f+=v}return u||d.length||s||(d=t(e,f/2,i,n,o,a,s,!0,h)),d}(t,f?e/2*s%e:(l/2+2*o)*a*s%e,e,h,r,c,f,!1,u)}function Zu(t,e,r,i,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],h=void 0,l=0;l<u.length-1;l++){var c=u[l],f=u[l+1];c.x<e&&f.x<e||(c.x<e?c=new n(e,c.y+(e-c.x)/(f.x-c.x)*(f.y-c.y))._round():f.x<e&&(f=new n(e,c.y+(e-c.x)/(f.x-c.x)*(f.y-c.y))._round()),c.y<r&&f.y<r||(c.y<r?c=new n(c.x+(r-c.y)/(f.y-c.y)*(f.x-c.x),r)._round():f.y<r&&(f=new n(c.x+(r-c.y)/(f.y-c.y)*(f.x-c.x),r)._round()),c.x>=i&&f.x>=i||(c.x>=i?c=new n(i,c.y+(i-c.x)/(f.x-c.x)*(f.y-c.y))._round():f.x>=i&&(f=new n(i,c.y+(i-c.x)/(f.x-c.x)*(f.y-c.y))._round()),c.y>=o&&f.y>=o||(c.y>=o?c=new n(c.x+(o-c.y)/(f.y-c.y)*(f.x-c.x),o)._round():f.y>=o&&(f=new n(c.x+(o-c.y)/(f.y-c.y)*(f.x-c.x),o)._round()),h&&c.equals(h[h.length-1])||a.push(h=[c]),h.push(f)))))}return a}function Gu(t,e,r,i){var o=[],a=t.image,s=a.pixelRatio,u=a.paddedRect.w-2,h=a.paddedRect.h-2,l=t.right-t.left,c=t.bottom-t.top,f=a.stretchX||[[0,u]],p=a.stretchY||[[0,h]],d=function(t,e){return t+e[1]-e[0]},m=f.reduce(d,0),g=p.reduce(d,0),y=u-m,v=h-g,_=0,b=m,w=0,x=g,M=0,S=y,k=0,A=v;if(a.content&&i){var E=a.content;_=Ju(f,0,E[0]),w=Ju(p,0,E[1]),b=Ju(f,E[0],E[2]),x=Ju(p,E[1],E[3]),M=E[0]-_,k=E[1]-w,S=E[2]-E[0]-b,A=E[3]-E[1]-x}var z=function(i,o,u,h){var f=Ku(i.stretch-_,b,l,t.left),p=Wu(i.fixed-M,S,i.stretch,m),d=Ku(o.stretch-w,x,c,t.top),y=Wu(o.fixed-k,A,o.stretch,g),v=Ku(u.stretch-_,b,l,t.left),E=Wu(u.fixed-M,S,u.stretch,m),z=Ku(h.stretch-w,x,c,t.top),I=Wu(h.fixed-k,A,h.stretch,g),T=new n(f,d),P=new n(v,d),C=new n(v,z),L=new n(f,z),R=new n(p/s,y/s),B=new n(E/s,I/s),D=e*Math.PI/180;if(D){var j=Math.sin(D),O=Math.cos(D),F=[O,-j,j,O];T._matMult(F),P._matMult(F),L._matMult(F),C._matMult(F)}var N=i.stretch+i.fixed,U=o.stretch+o.fixed;return{tl:T,tr:P,bl:L,br:C,tex:{x:a.paddedRect.x+1+N,y:a.paddedRect.y+1+U,w:u.stretch+u.fixed-N,h:h.stretch+h.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:B,minFontScaleX:S/s/l,minFontScaleY:A/s/c,isSDF:r}};if(i&&(a.stretchX||a.stretchY))for(var I=Hu(f,y,m),T=Hu(p,v,g),P=0;P<I.length-1;P++)for(var C=I[P],L=I[P+1],R=0;R<T.length-1;R++)o.push(z(C,T[R],L,T[R+1]));else o.push(z({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:h+1}));return o}function Ju(t,e,r){for(var i=0,n=0,o=t;n<o.length;n+=1){var a=o[n];i+=Math.max(e,Math.min(r,a[1]))-Math.max(e,Math.min(r,a[0]))}return i}function Hu(t,e,r){for(var i=[{fixed:-1,stretch:0}],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a[0],u=a[1],h=i[i.length-1];i.push({fixed:s-h.stretch,stretch:h.stretch}),i.push({fixed:s-h.stretch,stretch:h.stretch+(u-s)})}return i.push({fixed:e+1,stretch:r}),i}function Ku(t,e,r,i){return t/e*r+i}function Wu(t,e,r,i){return t-e*r/i}var $u=function(t,e,r,i,o,a,s,u,h,l){if(this.boxStartIndex=t.length,h){var c=a.top,f=a.bottom,p=a.collisionPadding;p&&(c-=p[1],f+=p[3]);var d=f-c;d>0&&(d=Math.max(10,d),this.circleDiameter=d)}else{var m=a.top*s-u,g=a.bottom*s+u,y=a.left*s-u,v=a.right*s+u,_=a.collisionPadding;if(_&&(y-=_[0]*s,m-=_[1]*s,v+=_[2]*s,g+=_[3]*s),l){var b=new n(y,m),w=new n(v,m),x=new n(y,g),M=new n(v,g),S=l*Math.PI/180;b._rotate(S),w._rotate(S),x._rotate(S),M._rotate(S),y=Math.min(b.x,w.x,x.x,M.x),v=Math.max(b.x,w.x,x.x,M.x),m=Math.min(b.y,w.y,x.y,M.y),g=Math.max(b.y,w.y,x.y,M.y)}t.emplaceBack(e.x,e.y,y,m,v,g,r,i,o)}this.boxEndIndex=t.length},Xu=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Yu),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function Yu(t,e){return t<e?-1:t>e?1:0}function Qu(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],h=0;h<u.length;h++){var l=u[h];(!h||l.x<i)&&(i=l.x),(!h||l.y<o)&&(o=l.y),(!h||l.x>a)&&(a=l.x),(!h||l.y>s)&&(s=l.y)}var c=Math.min(a-i,s-o),f=c/2,p=new Xu([],th);if(0===c)return new n(i,o);for(var d=i;d<a;d+=c)for(var m=o;m<s;m+=c)p.push(new eh(d+f,m+f,f,t));var g=function(t){for(var e=0,r=0,i=0,n=t[0],o=0,a=n.length,s=a-1;o<a;s=o++){var u=n[o],h=n[s],l=u.x*h.y-h.x*u.y;r+=(u.x+h.x)*l,i+=(u.y+h.y)*l,e+=3*l}return new eh(r/e,i/e,0,t)}(t);for(p.length;p.length;){var y=p.pop();(y.d>g.d||!g.d)&&(g=y),y.max-g.d<=e||(p.push(new eh(y.p.x-(f=y.h/2),y.p.y-f,f,t)),p.push(new eh(y.p.x+f,y.p.y-f,f,t)),p.push(new eh(y.p.x-f,y.p.y+f,f,t)),p.push(new eh(y.p.x+f,y.p.y+f,f,t)))}return g.p}function th(t,e){return e.max-t.max}function eh(t,e,r,i){this.p=new n(t,e),this.h=r,this.d=function(t,e){for(var r=!1,i=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,s=o.length,u=s-1;a<s;u=a++){var h=o[a],l=o[u];h.y>t.y!=l.y>t.y&&t.x<(l.x-h.x)*(t.y-h.y)/(l.y-h.y)+h.x&&(r=!r),i=Math.min(i,Wo(t,h,l))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Xu.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Xu.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Xu.prototype.peek=function(){return this.data[0]},Xu.prototype._up=function(t){for(var e=this.data,r=this.compare,i=e[t];t>0;){var n=t-1>>1,o=e[n];if(r(i,o)>=0)break;e[t]=o,t=n}e[t]=i},Xu.prototype._down=function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,n)>=0)break;e[t]=a,t=o}e[t]=n};var rh=Number.POSITIVE_INFINITY;function ih(t,e){return e[1]!==rh?function(t,e,r){var i=0,n=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":n=r-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-r}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,n]}(t,e[0],e[1]):function(t,e){var r=0,i=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=n-7;break;case"bottom-right":case"bottom-left":i=7-n;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=e;break;case"right":r=-e}return[r,i]}(t,e[0])}function nh(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oh(t,e,r,i,o,a,s,u,h,l,c,f,p,d,m){var g=function(t,e,r,i,o,a,s,u){for(var h=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,l=[],c=0,f=e.positionedLines;c<f.length;c+=1)for(var p=f[c],d=0,m=p.positionedGlyphs;d<m.length;d+=1){var g=m[d];if(g.rect){var y=g.rect||{},v=4,_=!0,b=1,w=0,x=(o||u)&&g.vertical,M=g.metrics.advance*g.scale/2;if(u&&e.verticalizable&&(w=p.lineOffset/2-(g.imageName?-(24-g.metrics.width*g.scale)/2:24*(g.scale-1))),g.imageName){var S=s[g.imageName];_=S.sdf,v=1/(b=S.pixelRatio)}var k=o?[g.x+M,g.y]:[0,0],A=o?[0,0]:[g.x+M+r[0],g.y+r[1]-w],E=[0,0];x&&(E=A,A=[0,0]);var z=(g.metrics.left-v)*g.scale-M+A[0],I=(-g.metrics.top-v)*g.scale+A[1],T=z+y.w*g.scale/b,P=I+y.h*g.scale/b,C=new n(z,I),L=new n(T,I),R=new n(z,P),B=new n(T,P);if(x){var D=new n(-M,M- -17),j=-Math.PI/2,O=12-M,F=new n(22-O,-(g.imageName?O:0)),N=new(Function.prototype.bind.apply(n,[null].concat(E)));C._rotateAround(j,D)._add(F)._add(N),L._rotateAround(j,D)._add(F)._add(N),R._rotateAround(j,D)._add(F)._add(N),B._rotateAround(j,D)._add(F)._add(N)}if(h){var U=Math.sin(h),q=Math.cos(h),V=[q,-U,U,q];C._matMult(V),L._matMult(V),R._matMult(V),B._matMult(V)}var Z=new n(0,0),G=new n(0,0);l.push({tl:C,tr:L,bl:R,br:B,tex:y,writingMode:e.writingMode,glyphOffset:k,sectionIndex:g.sectionIndex,isSDF:_,pixelOffsetTL:Z,pixelOffsetBR:G,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,u,o,a,s,i,t.allowVerticalPlacement),y=t.textSizeData,v=null;"source"===y.kind?(v=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&M(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===y.kind&&((v=[128*d.compositeTextSizes[0].evaluate(s,{},m),128*d.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||v[1]>32640)&&M(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,g,v,u,a,s,l,e,h.lineStartIndex,h.lineLength,p,m);for(var _=0,b=c;_<b.length;_+=1)f[b[_]]=t.text.placedSymbolArray.length-1;return 4*g.length}function ah(t){for(var e in t)return t[e];return null}function sh(t,e,r,i){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<r)return!0}else n[e]=[];return n[e].push(i),!1}var uh=vs.VectorTileFeature.types,hh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lh(t,e,r,i,n,o,a,s,u,h,l,c,f){var p=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(32*i),Math.round(32*n),o,a,(p<<1)+(u?1:0),d,16*h,16*l,256*c,256*f)}function ch(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function fh(t){for(var e=0,r=t.sections;e<r.length;e+=1)if(Wi(r[e].text))return!0;return!1}var ph=function(t){this.layoutVertexArray=new Ln,this.indexArray=new Nn,this.programConfigurations=t,this.segments=new ao,this.dynamicLayoutVertexArray=new Rn,this.opacityVertexArray=new Bn,this.placedSymbolArray=new Yn};ph.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},ph.prototype.upload=function(t,e,r,i){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ns.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hh,!0),this.opacityVertexBuffer.itemSize=1),(r||i)&&this.programConfigurations.upload(t))},ph.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Di("SymbolBuffers",ph);var dh=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new ao,this.collisionVertexArray=new Fn};dh.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Us.members,!0)},dh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Di("CollisionBuffers",dh);var mh=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oa([]),this.placementViewportMatrix=oa([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ru(this.zoom,e["text-size"]),this.iconSizeData=Ru(this.zoom,e["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),n=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(t){return _u[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};mh.prototype.createArrays=function(){this.text=new ph(new Ro(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new ph(new Ro(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new eo,this.lineVertexArray=new ro,this.symbolInstances=new to},mh.prototype.calculateGlyphDependencies=function(t,e,r,i,n){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(r||i)&&n){var a=Gs[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},mh.prototype.populate=function(t,e,r){var i=this.layers[0],n=i.layout,o=n.get("text-font"),a=n.get("text-field"),s=n.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof re&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),h="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,l=n.get("symbol-sort-key");if(this.features=[],u||h){for(var c=e.iconDependencies,f=e.glyphDependencies,p=e.availableImages,d=new an(this.zoom),m=0,g=t;m<g.length;m+=1){var y=g[m],v=y.feature,_=y.id,b=y.index,w=y.sourceLayerIndex,x=i._featureFilter.needGeometry,M={type:v.type,id:_,properties:v.properties,geometry:x?Fo(v):[]};if(i._featureFilter.filter(d,M,r)){x||(M.geometry=Fo(v));var S=void 0;if(u){var k=i.getValueAndResolveTokens("text-field",M,r,p),A=re.factory(k);fh(A)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===rn()||this.hasRTLText&&on.isParsed())&&(S=Zs(A,i,M))}var E=void 0;if(h){var z=i.getValueAndResolveTokens("icon-image",M,r,p);E=z instanceof ie?z:ie.fromString(z)}if(S||E){var I=this.sortFeaturesByKey?l.evaluate(M,{},r):void 0,T={id:_,text:S,icon:E,index:b,sourceLayerIndex:w,geometry:Fo(v),properties:v.properties,type:uh[v.type],sortKey:I};if(this.features.push(T),E&&(c[E.name]=!0),S){var P=o.evaluate(M,{},r).join(","),C="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_u.vertical)>=0;for(var L=0,R=S.sections;L<R.length;L+=1){var B=R[L];if(B.image)c[B.image.name]=!0;else{var D=Zi(S.toString()),j=B.fontStack||P,O=f[j]=f[j]||{};this.calculateGlyphDependencies(B.text,O,C,this.allowVerticalPlacement,D)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},r={},i=[],n=0;function o(e){i.push(t[e]),n++}function a(t,e,n){var o=r[t];return delete r[t],r[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(n[0]),o}function s(t,r,n){var o=e[r];return delete e[r],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=n[0].concat(i[o].geometry[0]),o}function u(t,e,r){var i=r?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var h=0;h<t.length;h++){var l=t[h],c=l.geometry,f=l.text?l.text.toString():null;if(f){var p=u(f,c),d=u(f,c,!0);if(p in r&&d in e&&r[p]!==e[d]){var m=s(p,d,c),g=a(p,d,i[m].geometry);delete e[p],delete r[d],r[u(f,i[g].geometry,!0)]=g,i[m].geometry=null}else p in r?a(p,d,c):d in e?s(p,d,c):(o(h),e[p]=n-1,r[d]=n-1)}else o(h)}return i.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},mh.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},mh.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},mh.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},mh.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},mh.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},mh.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},mh.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var h=o[u];this.lineVertexArray.emplaceBack(h.x,h.y,h.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},mh.prototype.addSymbols=function(t,e,r,i,n,o,a,s,u,h,l,c){for(var f=t.indexArray,p=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,p,f,o.sortKey),m=this.glyphOffsetArray.length,g=d.vertexLength,y=this.allowVerticalPlacement&&a===_u.vertical?Math.PI/2:0,v=o.text&&o.text.sections,_=0;_<e.length;_++){var b=e[_],w=b.tl,x=b.tr,M=b.bl,S=b.br,k=b.tex,A=b.pixelOffsetTL,E=b.pixelOffsetBR,z=b.minFontScaleX,I=b.minFontScaleY,T=b.glyphOffset,P=b.isSDF,C=b.sectionIndex,L=d.vertexLength,R=T[1];lh(p,s.x,s.y,w.x,R+w.y,k.x,k.y,r,P,A.x,A.y,z,I),lh(p,s.x,s.y,x.x,R+x.y,k.x+k.w,k.y,r,P,E.x,A.y,z,I),lh(p,s.x,s.y,M.x,R+M.y,k.x,k.y+k.h,r,P,A.x,E.y,z,I),lh(p,s.x,s.y,S.x,R+S.y,k.x+k.w,k.y+k.h,r,P,E.x,E.y,z,I),ch(t.dynamicLayoutVertexArray,s,y),f.emplaceBack(L,L+1,L+2),f.emplaceBack(L+1,L+2,L+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(T[0]),_!==e.length-1&&C===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},c,v&&v[C])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,u,h,s.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],a,0,!1,0,l)},mh.prototype._addCollisionDebugVertex=function(t,e,r,i,n,o){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,i,n,Math.round(o.x),Math.round(o.y))},mh.prototype.addCollisionDebugVertices=function(t,e,r,i,o,a,s){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),h=u.vertexLength,l=o.layoutVertexArray,c=o.collisionVertexArray,f=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(l,c,a,f,p,new n(t,e)),this._addCollisionDebugVertex(l,c,a,f,p,new n(r,e)),this._addCollisionDebugVertex(l,c,a,f,p,new n(r,i)),this._addCollisionDebugVertex(l,c,a,f,p,new n(t,i)),u.vertexLength+=4;var d=o.indexArray;d.emplaceBack(h,h+1),d.emplaceBack(h+1,h+2),d.emplaceBack(h+2,h+3),d.emplaceBack(h+3,h),u.primitiveLength+=4},mh.prototype.addDebugCollisionBoxes=function(t,e,r,i){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,i?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,r)}},mh.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dh(jn,qs.members,Jn),this.iconCollisionBox=new dh(jn,qs.members,Jn);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},mh.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,i,n,o,a,s,u){for(var h={},l=e;l<r;l++){var c=t.get(l);h.textBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},h.textFeatureIndex=c.featureIndex;break}for(var f=i;f<n;f++){var p=t.get(f);h.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},h.verticalTextFeatureIndex=p.featureIndex;break}for(var d=o;d<a;d++){var m=t.get(d);h.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},h.iconFeatureIndex=m.featureIndex;break}for(var g=s;g<u;g++){var y=t.get(g);h.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},h.verticalIconFeatureIndex=y.featureIndex;break}return h},mh.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},mh.prototype.hasTextData=function(){return this.text.segments.get().length>0},mh.prototype.hasIconData=function(){return this.icon.segments.get().length>0},mh.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},mh.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},mh.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},mh.prototype.addIndicesForPlacedSymbol=function(t,e){for(var r=t.placedSymbolArray.get(e),i=r.vertexStartIndex+4*r.numGlyphs,n=r.vertexStartIndex;n<i;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},mh.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),i=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+r*s.anchorY)),n.push(s.featureIndex)}return o.sort((function(t,e){return i[t]-i[e]||n[e]-n[t]})),o},mh.prototype.addToSortKeyRanges=function(t,e){var r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},mh.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,i=this.symbolInstanceIndexes;r<i.length;r+=1){var n=this.symbolInstances.get(i[r]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(t,r,i){t>=0&&i.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Di("SymbolBucket",mh,{omit:["layers","collisionBoxArray","features","compareText"]}),mh.MAX_GLYPHS=65535,mh.addDynamicAttributes=ch;var gh=new bn({"symbol-placement":new mn(zt.layout_symbol["symbol-placement"]),"symbol-spacing":new mn(zt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mn(zt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gn(zt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mn(zt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mn(zt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mn(zt.layout_symbol["icon-ignore-placement"]),"icon-optional":new mn(zt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mn(zt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gn(zt.layout_symbol["icon-size"]),"icon-text-fit":new mn(zt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mn(zt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gn(zt.layout_symbol["icon-image"]),"icon-rotate":new gn(zt.layout_symbol["icon-rotate"]),"icon-padding":new mn(zt.layout_symbol["icon-padding"]),"icon-keep-upright":new mn(zt.layout_symbol["icon-keep-upright"]),"icon-offset":new gn(zt.layout_symbol["icon-offset"]),"icon-anchor":new gn(zt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mn(zt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mn(zt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mn(zt.layout_symbol["text-rotation-alignment"]),"text-field":new gn(zt.layout_symbol["text-field"]),"text-font":new gn(zt.layout_symbol["text-font"]),"text-size":new gn(zt.layout_symbol["text-size"]),"text-max-width":new gn(zt.layout_symbol["text-max-width"]),"text-line-height":new mn(zt.layout_symbol["text-line-height"]),"text-letter-spacing":new gn(zt.layout_symbol["text-letter-spacing"]),"text-justify":new gn(zt.layout_symbol["text-justify"]),"text-radial-offset":new gn(zt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mn(zt.layout_symbol["text-variable-anchor"]),"text-anchor":new gn(zt.layout_symbol["text-anchor"]),"text-max-angle":new mn(zt.layout_symbol["text-max-angle"]),"text-writing-mode":new mn(zt.layout_symbol["text-writing-mode"]),"text-rotate":new gn(zt.layout_symbol["text-rotate"]),"text-padding":new mn(zt.layout_symbol["text-padding"]),"text-keep-upright":new mn(zt.layout_symbol["text-keep-upright"]),"text-transform":new gn(zt.layout_symbol["text-transform"]),"text-offset":new gn(zt.layout_symbol["text-offset"]),"text-allow-overlap":new mn(zt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mn(zt.layout_symbol["text-ignore-placement"]),"text-optional":new mn(zt.layout_symbol["text-optional"])}),yh={paint:new bn({"icon-opacity":new gn(zt.paint_symbol["icon-opacity"]),"icon-color":new gn(zt.paint_symbol["icon-color"]),"icon-halo-color":new gn(zt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gn(zt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gn(zt.paint_symbol["icon-halo-blur"]),"icon-translate":new mn(zt.paint_symbol["icon-translate"]),"icon-translate-anchor":new mn(zt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gn(zt.paint_symbol["text-opacity"]),"text-color":new gn(zt.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new gn(zt.paint_symbol["text-halo-color"]),"text-halo-width":new gn(zt.paint_symbol["text-halo-width"]),"text-halo-blur":new gn(zt.paint_symbol["text-halo-blur"]),"text-translate":new mn(zt.paint_symbol["text-translate"]),"text-translate-anchor":new mn(zt.paint_symbol["text-translate-anchor"])}),layout:gh},vh=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Dt,this.defaultValue=t};vh.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},vh.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},vh.prototype.outputDefined=function(){return!1},vh.prototype.serialize=function(){return null},Di("FormatSectionOverride",vh,{omit:["defaultValue"]});var _h=function(t){function e(e){t.call(this,e,yh)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var n=[],o=0,a=i;o<a.length;o+=1){var s=a[o];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r,i){var n=this.layout.get(t).evaluate(e,{},r,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Zr(o.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?String(t[r]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new mh(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=yh.paint.overridableProperties;t<r.length;t+=1){var i=r[t];if(e.hasPaintOverride(this.layout,i)){var n,o=this.paint.get(i),a=new vh(o),s=new Vr(a,o.property.specification);n="constant"===o.value.kind||"source"===o.value.kind?new Jr("source",s):new Hr("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new pn(o.property,n,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,i){return!(!this.layout||r.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),i=yh.paint.properties[e],n=!1,o=function(t){for(var e=0,r=t;e<r.length;e+=1)if(i.overrides&&i.overrides.hasOverride(r[e]))return void(n=!0)};if("constant"===r.value.kind&&r.value.value instanceof re)o(r.value.value.sections);else if("source"===r.value.kind){var a=function(t){n||(t instanceof ue&&ae(t.value)===Zt?o(t.value.sections):t instanceof fe?o(t.sections):t.eachChild(a))},s=r.value;s._styleExpression&&a(s._styleExpression.expression)}return n},e}(wn),bh={paint:new bn({"background-color":new mn(zt.paint_background["background-color"]),"background-pattern":new vn(zt.paint_background["background-pattern"]),"background-opacity":new mn(zt.paint_background["background-opacity"])})},wh=function(t){function e(e){t.call(this,e,bh)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wn),xh={paint:new bn({"raster-opacity":new mn(zt.paint_raster["raster-opacity"]),"raster-hue-rotate":new mn(zt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mn(zt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mn(zt.paint_raster["raster-brightness-max"]),"raster-saturation":new mn(zt.paint_raster["raster-saturation"]),"raster-contrast":new mn(zt.paint_raster["raster-contrast"]),"raster-resampling":new mn(zt.paint_raster["raster-resampling"]),"raster-fade-duration":new mn(zt.paint_raster["raster-fade-duration"])})},Mh=function(t){function e(e){t.call(this,e,xh)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wn),Sh=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(wn),kh={circle:la,heatmap:ba,hillshade:xa,fill:us,"fill-extrusion":ks,line:js,symbol:_h,background:wh,raster:Mh},Ah=a.HTMLImageElement,Eh=a.HTMLCanvasElement,zh=a.HTMLVideoElement,Ih=a.ImageData,Th=a.ImageBitmap,Ph=function(t,e,r,i){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,i)};Ph.prototype.update=function(t,e,r){var i=t.width,n=t.height,o=!(this.size&&this.size[0]===i&&this.size[1]===n||r),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,n],t instanceof Ah||t instanceof Eh||t instanceof zh||t instanceof Ih||Th&&t instanceof Th?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=r||{x:0,y:0},h=u.x,l=u.y;t instanceof Ah||t instanceof Eh||t instanceof zh||t instanceof Ih||Th&&t instanceof Th?s.texSubImage2D(s.TEXTURE_2D,0,h,l,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,h,l,i,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ph.prototype.bind=function(t,e,r){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},Ph.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ph.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ch=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Ch.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Ch.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Lh=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Ch(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=A()?t:a};function Rh(t,e,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Lh.prototype.send=function(t,e,r,i,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var s=I(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:i,mustQueue:n,sourceMapId:this.mapId,data:Ni(e,s)},s),{cancel:function(){r&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:o.mapId})}}},Lh.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i()}else A()||e.mustQueue?(this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,e)},Lh.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Lh.prototype.processTask=function(t,e){var r=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Ui(e.error)):i(null,Ui(e.data)))}else{var n=!1,o=I(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){n=!0,delete r.cancelCallbacks[t],r.target.postMessage({id:t,type:"<response>",sourceMapId:r.mapId,error:e?Ni(e):null,data:Ni(i,o)},o)}:function(t){n=!0},s=null,u=Ui(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var h=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,h[0],u.source)[h[1]](u,a)}else a(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Lh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bh=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bh.prototype.setNorthEast=function(t){return this._ne=t instanceof Dh?new Dh(t.lng,t.lat):Dh.convert(t),this},Bh.prototype.setSouthWest=function(t){return this._sw=t instanceof Dh?new Dh(t.lng,t.lat):Dh.convert(t),this},Bh.prototype.extend=function(t){var e,r,i=this._sw,n=this._ne;if(t instanceof Dh)e=t,r=t;else{if(!(t instanceof Bh))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Bh.convert(t)):this.extend(Dh.convert(t)):this;if(r=t._ne,!(e=t._sw)||!r)return this}return i||n?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Dh(e.lng,e.lat),this._ne=new Dh(r.lng,r.lat)),this},Bh.prototype.getCenter=function(){return new Dh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bh.prototype.getSouthWest=function(){return this._sw},Bh.prototype.getNorthEast=function(){return this._ne},Bh.prototype.getNorthWest=function(){return new Dh(this.getWest(),this.getNorth())},Bh.prototype.getSouthEast=function(){return new Dh(this.getEast(),this.getSouth())},Bh.prototype.getWest=function(){return this._sw.lng},Bh.prototype.getSouth=function(){return this._sw.lat},Bh.prototype.getEast=function(){return this._ne.lng},Bh.prototype.getNorth=function(){return this._ne.lat},Bh.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bh.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bh.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bh.prototype.contains=function(t){var e=Dh.convert(t),r=e.lng,i=e.lat,n=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n},Bh.convert=function(t){return!t||t instanceof Bh?t:new Bh(t)};var Dh=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dh.prototype.wrap=function(){return new Dh(c(this.lng,-180,180),this.lat)},Dh.prototype.toArray=function(){return[this.lng,this.lat]},Dh.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dh.prototype.distanceTo=function(t){var e=Math.PI/180,r=this.lat*e,i=t.lat*e,n=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},Dh.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Bh(new Dh(this.lng-r,this.lat-e),new Dh(this.lng+r,this.lat+e))},Dh.convert=function(t){if(t instanceof Dh)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Dh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Dh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var jh=2*Math.PI*6371008.8;function Oh(t){return jh*Math.cos(t*Math.PI/180)}function Fh(t){return(180+t)/360}function Nh(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Uh(t,e){return t/Oh(e)}function qh(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Vh=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};Vh.fromLngLat=function(t,e){void 0===e&&(e=0);var r=Dh.convert(t);return new Vh(Fh(r.lng),Nh(r.lat),Uh(e,r.lat))},Vh.prototype.toLngLat=function(){return new Dh(360*this.x-180,qh(this.y))},Vh.prototype.toAltitude=function(){return this.z*Oh(qh(this.y))},Vh.prototype.meterInMercatorCoordinateUnits=function(){return 1/jh*(t=qh(this.y),1/Math.cos(t*Math.PI/180));var t};var Zh=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Hh(0,t,t,e,r)};Zh.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Zh.prototype.url=function(t,e){var r,i,n,o,a,s=(i=this.y,n=this.z,o=Rh(256*(r=this.x),256*(i=Math.pow(2,n)-i-1),n),a=Rh(256*(r+1),256*(i+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,r){for(var i,n="",o=t;o>0;o--)n+=(e&(i=1<<o-1)?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Zh.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Zh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gh=function(t,e){this.wrap=t,this.canonical=e,this.key=Hh(t,e.z,e.z,e.x,e.y)},Jh=function(t,e,r,i,n){this.overscaledZ=t,this.wrap=e,this.canonical=new Zh(r,+i,+n),this.key=Hh(e,t,r,i,n)};function Hh(t,e,r,i,n){(t*=2)<0&&(t=-1*t-1);var o=1<<r;return(o*o*t+o*n+i).toString(36)+r.toString(36)+e.toString(36)}Jh.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Jh.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Jh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Jh.prototype.calculateScaledKey=function(t,e){var r=this.canonical.z-t;return t>this.canonical.z?Hh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Hh(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)},Jh.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Jh.prototype.children=function(t){if(this.overscaledZ>=t)return[new Jh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new Jh(e,this.wrap,e,r,i),new Jh(e,this.wrap,e,r+1,i),new Jh(e,this.wrap,e,r,i+1),new Jh(e,this.wrap,e,r+1,i+1)]},Jh.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Jh.prototype.wrapped=function(){return new Jh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Jh.prototype.unwrapTo=function(t){return new Jh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Jh.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Jh.prototype.toUnwrapped=function(){return new Gh(this.wrap,this.canonical)},Jh.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Jh.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Vh(t.x-this.wrap,t.y))},Di("CanonicalTileID",Zh),Di("OverscaledTileID",Jh,{omit:["posMatrix"]});var Kh=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return M('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var n=0;n<i;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(i,n)]=this.data[this._idx(i-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,i)]=this.data[this._idx(n,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};Kh.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])},Kh.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Kh.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Kh.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Kh.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Kh.prototype.getPixels=function(){return new ya({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Kh.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,n=e*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:i=n-1;break;case 1:n=i+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-r*this.dim,h=o;h<a;h++)for(var l=i;l<n;l++)this.data[this._idx(l,h)]=t.data[this._idx(l+s,h+u)]},Di("DEMData",Kh);var Wh=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};Wh.prototype.encode=function(t){return this._stringToNumber[t]},Wh.prototype.decode=function(t){return this._numberToString[t]};var $h=function(t,e,r,i,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=i,this.properties=t.properties,this.id=n},Xh={geometry:{configurable:!0}};Xh.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xh.geometry.set=function(t){this._geometry=t},$h.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties($h.prototype,Xh);var Yh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yh.prototype.updateState=function(t,e,r){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},f(this.stateChanges[t][i],r),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==i&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var o in this.deletedStates[t][i]={},this.state[t][i])r[o]||(this.deletedStates[t][i][o]=null);else for(var a in r)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},Yh.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(r in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][r]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},Yh.prototype.getState=function(t,e){var r=String(e),i=f({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var o in n)delete i[o]}return i},Yh.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Yh.prototype.coalesceChanges=function(t,e){var r={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var n={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),f(this.state[i][o],this.stateChanges[i][o]),n[o]=this.state[i][o];r[i]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var h in this.deletedStates[a]){if(null===this.deletedStates[a][h])this.state[a][h]={};else for(var l=0,c=Object.keys(this.deletedStates[a][h]);l<c.length;l+=1)delete this.state[a][h][c[l]];s[h]=this.state[a][h]}r[a]=r[a]||{},f(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var p in t)t[p].setFeatureState(r,e)};var Qh=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Pi(8192,16,0),this.grid3D=new Pi(8192,16,0),this.featureIndexArray=new no,this.promoteId=e};function tl(t,e,r,i,n){return _(t,(function(t,o){var a=e instanceof dn?e.get(o):null;return a&&a.evaluate?a.evaluate(r,i,n):a}))}function el(t){for(var e=1/0,r=1/0,i=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),n=Math.max(n,s.y)}return{minX:e,minY:r,maxX:i,maxY:n}}function rl(t,e){return e-t}Qh.prototype.insert=function(t,e,r,i,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var h=e[u],l=[1/0,1/0,-1/0,-1/0],c=0;c<h.length;c++){var f=h[c];l[0]=Math.min(l[0],f.x),l[1]=Math.min(l[1],f.y),l[2]=Math.max(l[2],f.x),l[3]=Math.max(l[3],f.y)}l[0]<8192&&l[1]<8192&&l[2]>=0&&l[3]>=0&&s.insert(a,l[0],l[1],l[2],l[3])}},Qh.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new Ks(this.rawTileData)).layers,this.sourceLayerCoder=new Wh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Qh.prototype.query=function(t,e,r,i){var o=this;this.loadVTLayers();for(var a=t.params||{},s=8192/t.tileSize/t.scale,u=ni(a.filter),h=t.queryGeometry,l=t.queryPadding*s,c=el(h),f=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),p=el(t.cameraQueryGeometry),d=0,m=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,(function(e,r,i,o){return function(t,e,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&r<=u.y&&i>=u.x&&o>=u.y)return!0}var h=[new n(e,r),new n(e,o),new n(i,o),new n(i,r)];if(t.length>2)for(var l=0,c=h;l<c.length;l+=1)if(Xo(t,c[l]))return!0;for(var f=0;f<t.length-1;f++)if(Yo(t[f],t[f+1],h))return!0;return!1}(t.cameraQueryGeometry,e-l,r-l,i+l,o+l)}));d<m.length;d+=1)f.push(m[d]);f.sort(rl);for(var g,y={},v=function(n){var l=f[n];if(l!==g){g=l;var c=o.featureIndexArray.get(l),p=null;o.loadMatchingFeature(y,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,u,a.layers,a.availableImages,e,r,i,(function(e,r,i){return p||(p=Fo(e)),r.queryIntersectsFeature(h,e,i,p,o.z,t.transform,s,t.pixelPosMatrix)}))}},_=0;_<f.length;_++)v(_);return y},Qh.prototype.loadMatchingFeature=function(t,e,r,i,n,o,a,s,u,h,l){var c=this.bucketLayerIDs[e];if(!o||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(o,c)){var f=this.sourceLayerCoder.decode(r),p=this.vtLayers[f].feature(i);if(n.filter(new an(this.tileID.overscaledZ),p))for(var d=this.getId(p,f),m=0;m<c.length;m++){var g=c[m];if(!(o&&o.indexOf(g)<0)){var y=s[g];if(y){var v={};void 0!==d&&h&&(v=h.getState(y.sourceLayer||"_geojsonTileLayer",d));var _=u[g];_.paint=tl(_.paint,y.paint,p,v,a),_.layout=tl(_.layout,y.layout,p,v,a);var b=!l||l(p,y,v);if(b){var w=new $h(p,this.z,this.x,this.y,d);w.layer=_;var x=t[g];void 0===x&&(x=t[g]=[]),x.push({featureIndex:i,feature:w,intersectionZ:b})}}}}}},Qh.prototype.lookupSymbolFeatures=function(t,e,r,i,n,o,a,s){var u={};this.loadVTLayers();for(var h=ni(n),l=0,c=t;l<c.length;l+=1)this.loadMatchingFeature(u,r,i,c[l],h,o,a,s,e);return u},Qh.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var i=0,n=r[e];i<n.length;i+=1)if(t===n[i])return!0;return!1},Qh.prototype.getId=function(t,e){var r=t.id;return this.promoteId&&"boolean"==typeof(r=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(r=Number(r)),r},Di("FeatureIndex",Qh,{omit:["rawTileData","sourceLayerCoder"]});var il=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};il.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<O.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},il.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},il.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var i=function(){var t=o[n],i=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return i.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=i;a<s.length;a+=1)r[s[a].id]=t}},n=0,o=t;n<o.length;n+=1)i();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[i];if(n instanceof mh){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof mh&&a.hasRTLText){this.hasRTLText=!0,on.isLoading()||on.isLoaded()||"deferred"!==rn()||nn();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new $n},il.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},il.prototype.getBucket=function(t){return this.buckets[t.id]},il.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ph(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ph(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},il.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},il.prototype.queryRenderedFeatures=function(t,e,r,i,n,o,a,s,u,h){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:h,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,r):{}},il.prototype.querySourceFeatures=function(t,e){var r=this.latestFeatureIndex;if(r&&r.rawTileData){var i=r.loadVTLayers(),n=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[n];if(o)for(var a=ni(e&&e.filter),s=this.tileID.canonical,u=s.z,h=s.x,l=s.y,c={z:u,x:h,y:l},f=0;f<o.length;f++){var p=o.feature(f);if(a.filter(new an(this.tileID.overscaledZ),p)){var d=r.getId(p,n),m=new $h(p,u,h,l,d);m.tile=c,t.push(m)}}}},il.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},il.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},il.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=E(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),n=!1;if(this.expirationTime>i)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=i+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},il.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},il.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets)if(e.style.hasLayer(i)){var n=this.buckets[i],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(n)))}}}},il.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},il.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()},il.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},il.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=O.now()+t},il.prototype.setDependencies=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1)r[n[i]]=!0;this.dependencies[t]=r},il.prototype.hasDependency=function(t,e){for(var r=0,i=t;r<i.length;r+=1){var n=this.dependencies[i[r]];if(n)for(var o=0,a=e;o<a.length;o+=1)if(n[a[o]])return!0}return!1};var nl=a.performance,ol=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},nl.mark(this._marks.start)};ol.prototype.finish=function(){nl.mark(this._marks.end);var t=nl.getEntriesByName(this._marks.measure);return 0===t.length&&(nl.measure(this._marks.measure,this._marks.start,this._marks.end),t=nl.getEntriesByName(this._marks.measure),nl.clearMarks(this._marks.start),nl.clearMarks(this._marks.end),nl.clearMeasures(this._marks.measure)),t},t.Actor=Lh,t.AlphaImage=ga,t.CanonicalTileID=Zh,t.CollisionBoxArray=$n,t.Color=Qt,t.DEMData=Kh,t.DataConstantProperty=mn,t.DictionaryCoder=Wh,t.EXTENT=8192,t.ErrorEvent=At,t.EvaluationParameters=an,t.Event=kt,t.Evented=Et,t.FeatureIndex=Qh,t.FillBucket=os,t.FillExtrusionBucket=xs,t.ImageAtlas=vu,t.ImagePosition=gu,t.LineBucket=Ls,t.LngLat=Dh,t.LngLatBounds=Bh,t.MercatorCoordinate=Vh,t.ONE_EM=24,t.OverscaledTileID=Jh,t.Point=n,t.Point$1=n,t.Properties=bn,t.Protobuf=Ks,t.RGBAImage=ya,t.RequestManager=G,t.RequestPerformance=ol,t.ResourceType=dt,t.SegmentVector=ao,t.SourceFeatureState=Yh,t.StructArrayLayout1ui2=Hn,t.StructArrayLayout2f1f2i16=On,t.StructArrayLayout2i4=En,t.StructArrayLayout3ui6=Nn,t.StructArrayLayout4i8=zn,t.SymbolBucket=mh,t.Texture=Ph,t.Tile=il,t.Transitionable=hn,t.Uniform1f=bo,t.Uniform1i=_o,t.Uniform2f=wo,t.Uniform3f=xo,t.Uniform4f=Mo,t.UniformColor=So,t.UniformMatrix4f=Ao,t.UnwrappedTileID=Gh,t.ValidationError=It,t.WritingMode=_u,t.ZoomHistory=qi,t.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},t.addDynamicAttributes=ch,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var i=t.length,n=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),n[a]=e,0==--i&&r(o,n)}))}))},t.bezier=u,t.bindAll=y,t.browser=O,t.cacheEntryPossiblyAdded=function(t){++ft>ut&&(t.getActor().send("enforceCacheSizeLimit",st),ft=0)},t.clamp=l,t.clearTileCache=function(t){var e=a.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Zu,t.clone=function(t){var e=new na(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=w,t.clone$2=function(t){var e=new na(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Vs,t.config=F,t.create=function(){var t=new na(16);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new na(9);return na!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new na(4);return na!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Gr,t.createLayout=kn,t.createStyleLayer=function(t){return"custom"===t.type?new Sh(t):new kh[t.type](t)},t.cross=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=n*u-o*s,t[1]=o*a-i*u,t[2]=i*s-n*a,t},t.deepEqual=function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],r[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var n in e)if(!t(e[n],r[n]))return!1;return!0}return e===r},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=h,t.emitValidationErrors=Ti,t.endsWith=v,t.enforceCacheSizeLimit=function(t){ht(),tt&&tt.then((function(e){e.keys().then((function(r){for(var i=0;i<r.length-t;i++)e.delete(r[i])}))}))},t.evaluateSizeForFeature=Bu,t.evaluateSizeForZoom=Du,t.evaluateVariableOffset=ih,t.evented=en,t.extend=f,t.featureFilter=ni,t.filterObject=b,t.fromRotation=function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Tu,t.getAnchorJustification=nh,t.getArrayBuffer=bt,t.getImage=xt,t.getJSON=function(t,e){return _t(f(t,{type:"json"}),e)},t.getRTLTextPluginStatus=rn,t.getReferrer=vt,t.getVideo=function(t,e){var r,i,n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var s=a.document.createElement("source");r=t[o],i=void 0,(i=a.document.createElement("a")).href=r,(i.protocol!==a.document.location.protocol||i.host!==a.document.location.host)&&(n.crossOrigin="Anonymous"),s.src=t[o],n.appendChild(s)}return{cancel:function(){}}},t.identity=oa,t.invert=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],l=e[8],c=e[9],f=e[10],p=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=r*s-i*a,_=r*u-n*a,b=r*h-o*a,w=i*u-n*s,x=i*h-o*s,M=n*h-o*u,S=l*m-c*d,k=l*g-f*d,A=l*y-p*d,E=c*g-f*m,z=c*y-p*m,I=f*y-p*g,T=v*I-_*z+b*E+w*A-x*k+M*S;return T?(t[0]=(s*I-u*z+h*E)*(T=1/T),t[1]=(n*z-i*I-o*E)*T,t[2]=(m*M-g*x+y*w)*T,t[3]=(f*x-c*M-p*w)*T,t[4]=(u*A-a*I-h*k)*T,t[5]=(r*I-n*A+o*k)*T,t[6]=(g*b-d*M-y*_)*T,t[7]=(l*M-f*b+p*_)*T,t[8]=(a*z-s*A+h*S)*T,t[9]=(i*A-r*z-o*S)*T,t[10]=(d*x-m*b+y*v)*T,t[11]=(c*b-l*x-p*v)*T,t[12]=(s*k-a*E-u*S)*T,t[13]=(r*E-i*k+n*S)*T,t[14]=(m*_-d*w-g*v)*T,t[15]=(l*w-c*_+f*v)*T,t):null},t.isChar=Vi,t.isMapboxURL=J,t.keysDifference=function(t,e){var r=[];for(var i in t)i in e||r.push(i);return r},t.makeRequest=_t,t.mapObject=_,t.mercatorXfromLng=Fh,t.mercatorYfromLat=Nh,t.mercatorZfromAltitude=Uh,t.mul=ua,t.multiply=aa,t.mvt=vs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var r=e[0],i=e[1],n=e[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ve,t.offscreenCanvasSupported=pt,t.ortho=function(t,e,r,i,n,o,a){var s=1/(e-r),u=1/(i-n),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*u,t[14]=(a+o)*h,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ks(t).readFields(fu,[])},t.pbf=Ks,t.performSymbolLayout=function(t,e,r,i,n,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.kind){var l=t.textSizeData,c=l.maxZoom;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new an(l.minZoom),a),u["text-size"].possiblyEvaluate(new an(c),a)]}if("composite"===t.iconSizeData.kind){var f=t.iconSizeData,p=f.maxZoom;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new an(f.minZoom),a),u["icon-size"].possiblyEvaluate(new an(p),a)]}h.layoutTextSize=u["text-size"].possiblyEvaluate(new an(t.zoom+1),a),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new an(t.zoom+1),a),h.textMaxSize=u["text-size"].possiblyEvaluate(new an(18));for(var d=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),y=s.get("text-size"),v=function(){var o=b[_],u=s.get("text-font").evaluate(o,{},a).join(","),l=y.evaluate(o,{},a),c=h.layoutTextSize.evaluate(o,{},a),f=h.layoutIconSize.evaluate(o,{},a),p={horizontal:{},vertical:void 0},v=o.text,w=[0,0];if(v){var x=v.toString(),S=24*s.get("text-letter-spacing").evaluate(o,{},a),k=function(t){for(var e=0,r=t;e<r.length;e+=1)if(i=r[e].charCodeAt(0),Vi.Arabic(i)||Vi["Arabic Supplement"](i)||Vi["Arabic Extended-A"](i)||Vi["Arabic Presentation Forms-A"](i)||Vi["Arabic Presentation Forms-B"](i))return!1;var i;return!0}(x)?S:0,A=s.get("text-anchor").evaluate(o,{},a),E=s.get("text-variable-anchor");if(!E){var z=s.get("text-radial-offset").evaluate(o,{},a);w=z?ih(A,[24*z,rh]):s.get("text-offset").evaluate(o,{},a).map((function(t){return 24*t}))}var I=m?"center":s.get("text-justify").evaluate(o,{},a),T=s.get("symbol-placement"),P="point"===T?24*s.get("text-max-width").evaluate(o,{},a):0,C=function(){t.allowVerticalPlacement&&Zi(x)&&(p.vertical=xu(v,e,r,n,u,P,d,A,"left",k,w,_u.vertical,!0,T,c,l))};if(!m&&E){for(var L="auto"===I?E.map((function(t){return nh(t)})):[I],R=!1,B=0;B<L.length;B++){var D=L[B];if(!p.horizontal[D])if(R)p.horizontal[D]=p.horizontal[0];else{var j=xu(v,e,r,n,u,P,d,"center",D,k,w,_u.horizontal,!1,T,c,l);j&&(p.horizontal[D]=j,R=1===j.positionedLines.length)}}C()}else{"auto"===I&&(I=nh(A));var O=xu(v,e,r,n,u,P,d,A,I,k,w,_u.horizontal,!1,T,c,l);O&&(p.horizontal[I]=O),C(),Zi(x)&&m&&g&&(p.vertical=xu(v,e,r,n,u,P,d,A,I,k,w,_u.vertical,!1,T,c,l))}}var F=void 0,N=!1;if(o.icon&&o.icon.name){var U=i[o.icon.name];U&&(F=function(t,e,r){var i=Tu(r),n=e[0]-t.displaySize[0]*i.horizontalAlign,o=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:n,right:n+t.displaySize[0]}}(n[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),N=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var q=ah(p.horizontal)||p.vertical;t.iconsInText=!!q&&q.iconsInText,(q||F)&&function(t,e,r,i,n,o,a,s,u,h,l){var c=o.textMaxSize.evaluate(e,{});void 0===c&&(c=a);var f,p=t.layers[0].layout,d=p.get("icon-offset").evaluate(e,{},l),m=ah(r.horizontal),g=a/24,y=t.tilePixelRatio*g,v=t.tilePixelRatio*c/24,_=t.tilePixelRatio*s,b=t.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*t.tilePixelRatio,x=p.get("icon-padding")*t.tilePixelRatio,S=p.get("text-max-angle")/180*Math.PI,k="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),A="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),E=p.get("symbol-placement"),z=b/2,I=p.get("icon-text-fit");i&&"none"!==I&&(t.allowVerticalPlacement&&r.vertical&&(f=Cu(i,r.vertical,I,p.get("icon-text-fit-padding"),d,g)),m&&(i=Cu(i,m,I,p.get("icon-text-fit-padding"),d,g)));var T=function(s,c){c.x<0||c.x>=8192||c.y<0||c.y>=8192||function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m,g,y,v,_,b,w,x,S,k){var A,E,z,I,T,P=t.addToLineVertexArray(e,r),C=0,L=0,R=0,B=0,D=-1,j=-1,O={},F=co(""),N=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(N=(A=s.layout.get("text-offset").evaluate(b,{},S).map((function(t){return 24*t})))[0],U=A[1]):(N=24*s.layout.get("text-radial-offset").evaluate(b,{},S),U=rh),t.allowVerticalPlacement&&i.vertical){var q=s.layout.get("text-rotate").evaluate(b,{},S)+90;I=new $u(u,e,h,l,c,i.vertical,f,p,d,q),a&&(T=new $u(u,e,h,l,c,a,g,y,d,q))}if(n){var V=s.layout.get("icon-rotate").evaluate(b,{}),Z="none"!==s.layout.get("icon-text-fit"),G=Gu(n,V,x,Z),J=a?Gu(a,V,x,Z):void 0;z=new $u(u,e,h,l,c,n,g,y,!1,V),C=4*G.length;var H=t.iconSizeData,K=null;"source"===H.kind?(K=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&M(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===H.kind&&((K=[128*w.compositeIconSizes[0].evaluate(b,{},S),128*w.compositeIconSizes[1].evaluate(b,{},S)])[0]>32640||K[1]>32640)&&M(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,G,K,_,v,b,!1,e,P.lineStartIndex,P.lineLength,-1,S),D=t.icon.placedSymbolArray.length-1,J&&(L=4*J.length,t.addSymbols(t.icon,J,K,_,v,b,_u.vertical,e,P.lineStartIndex,P.lineLength,-1,S),j=t.icon.placedSymbolArray.length-1)}for(var W in i.horizontal){var $=i.horizontal[W];if(!E){F=co($.text);var X=s.layout.get("text-rotate").evaluate(b,{},S);E=new $u(u,e,h,l,c,$,f,p,d,X)}var Y=1===$.positionedLines.length;if(R+=oh(t,e,$,o,s,d,b,m,P,i.vertical?_u.horizontal:_u.horizontalOnly,Y?Object.keys(i.horizontal):[W],O,D,w,S),Y)break}i.vertical&&(B+=oh(t,e,i.vertical,o,s,d,b,m,P,_u.vertical,["vertical"],O,j,w,S));var Q=E?E.boxStartIndex:t.collisionBoxArray.length,tt=E?E.boxEndIndex:t.collisionBoxArray.length,et=I?I.boxStartIndex:t.collisionBoxArray.length,rt=I?I.boxEndIndex:t.collisionBoxArray.length,it=z?z.boxStartIndex:t.collisionBoxArray.length,nt=z?z.boxEndIndex:t.collisionBoxArray.length,ot=T?T.boxStartIndex:t.collisionBoxArray.length,at=T?T.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(E,st),st=ut(I,st),st=ut(z,st);var ht=(st=ut(T,st))>-1?1:0;ht&&(st*=k/24),t.glyphOffsetArray.length>=mh.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,D,j,F,Q,tt,et,rt,it,nt,ot,at,h,R,B,C,L,ht,0,f,N,U,st)}(t,c,s,r,i,n,f,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,w,k,u,_,x,A,d,e,o,h,l,a)};if("line"===E)for(var P=0,C=Zu(e.geometry,0,0,8192,8192);P<C.length;P+=1)for(var L=C[P],R=0,B=Vu(L,b,S,r.vertical||m,i,24,v,t.overscaling,8192);R<B.length;R+=1){var D=B[R];m&&sh(t,m.text,z,D)||T(L,D)}else if("line-center"===E)for(var j=0,O=e.geometry;j<O.length;j+=1){var F=O[j];if(F.length>1){var N=qu(F,S,r.vertical||m,i,24,v);N&&T(F,N)}}else if("Polygon"===e.type)for(var U=0,q=es(e.geometry,0);U<q.length;U+=1){var V=q[U],Z=Qu(V,16);T(V[0],new Lu(Z.x,Z.y,0))}else if("LineString"===e.type)for(var G=0,J=e.geometry;G<J.length;G+=1){var H=J[G];T(H,new Lu(H[0].x,H[0].y,0))}else if("Point"===e.type)for(var K=0,W=e.geometry;K<W.length;K+=1)for(var $=0,X=W[K];$<X.length;$+=1){var Y=X[$];T([Y],new Lu(Y.x,Y.y,0))}}(t,o,p,F,i,h,c,f,w,N,a)},_=0,b=t.features;_<b.length;_+=1)v();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,i,n){var o,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+i)*(o=1/(i-n)),t[14]=2*n*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i];n in t&&(r[n]=t[n])}return r},t.plugin=on,t.polygonIntersectsPolygon=qo,t.postMapLoadEvent=at,t.postTurnstileEvent=nt,t.potpack=mu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Di,t.registerForPluginStateChange=function(t){return t({pluginStatus:Xi,pluginURL:Yi}),en.on("pluginStateChange",t),t},t.renderColorRamp=_a,t.rotate=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=i*u+o*s,t[1]=n*u+a*s,t[2]=i*-s+o*u,t[3]=n*-s+a*u,t},t.rotateX=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+h*i,t[5]=a*n+l*i,t[6]=s*n+c*i,t[7]=u*n+f*i,t[8]=h*n-o*i,t[9]=l*n-a*i,t[10]=c*n-s*i,t[11]=f*n-u*i,t},t.rotateZ=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[4],l=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+h*i,t[1]=a*n+l*i,t[2]=s*n+c*i,t[3]=u*n+f*i,t[4]=h*n-o*i,t[5]=l*n-a*i,t[6]=c*n-s*i,t[7]=f*n-u*i,t},t.scale=function(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},t.scale$2=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},t.setCacheLimits=function(t,e){st=t,ut=e},t.setRTLTextPlugin=function(t,e,r){if(void 0===r&&(r=!1),"deferred"===Xi||"loading"===Xi||"loaded"===Xi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Yi=O.resolveURL(t),Xi="deferred",$i=e,tn(),r||nn()},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],i=t[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(i),y:e*Math.sin(r)*Math.sin(i),z:e*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],r=t[1];return e*e+r*r},t.styleSpec=zt,t.sub=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},t.symbolSize=ju,t.transformMat3=function(t,e,r){var i=e[0],n=e[1],o=e[2];return t[0]=i*r[0]+n*r[3]+o*r[6],t[1]=i*r[1]+n*r[4]+o*r[7],t[2]=i*r[2]+n*r[5]+o*r[8],t},t.transformMat4=ha,t.translate=function(t,e,r){var i,n,o,a,s,u,h,l,c,f,p,d,m=r[0],g=r[1],y=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(n=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],l=e[7],c=e[8],f=e[9],p=e[10],d=e[11],t[0]=i=e[0],t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h,t[7]=l,t[8]=c,t[9]=f,t[10]=p,t[11]=d,t[12]=i*m+s*g+c*y+e[12],t[13]=n*m+u*g+f*y+e[13],t[14]=o*m+h*g+p*y+e[14],t[15]=a*m+l*g+d*y+e[15]),t},t.triggerPluginCompletionEvent=Qi,t.uniqueId=d,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Ei,t.validateStyle=Ai,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=vs,t.version="1.12.0",t.warnOnce=M,t.webpSupported=N,t.window=a,t.wrap=c})),i(0,(function(t){function e(t){var r=typeof t;if("number"===r||"boolean"===r||"string"===r||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",n=0,o=t;n<o.length;n+=1)i+=e(o[n])+",";return i+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function r(r){for(var i="",n=0,o=t.refProperties;n<o.length;n+=1)i+="/"+e(r[o[n]]);return i}var i=function(t){this.keyCache={},t&&this.replace(t)};i.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},i.prototype.update=function(e,i){for(var n=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var h=0,l=i;h<l.length;h+=1){var c=l[h];delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var f=0,p=function(t,e){for(var i={},n=0;n<t.length;n++){var o=e&&e[t[n].id]||r(t[n]);e&&(e[t[n].id]=o);var a=i[o];a||(a=i[o]=[]),a.push(t[n])}var s=[];for(var u in i)s.push(i[u]);return s}(t.values(this._layerConfigs),this.keyCache);f<p.length;f+=1){var d=p[f].map((function(t){return n._layers[t.id]})),m=d[0];if("none"!==m.visibility){var g=m.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var v=m.sourceLayer||"_geojsonTileLayer",_=y[v];_||(_=y[v]=[]),_.push(d)}}};var n=function(e){var r={},i=[];for(var n in e){var o=e[n],a=r[n]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var h={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};i.push(h),a[s]={rect:h,metrics:u.metrics}}}}var l=t.potpack(i),c=new t.AlphaImage({width:l.w||1,height:l.h||1});for(var f in e){var p=e[f];for(var d in p){var m=p[+d];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var g=r[f][d].rect;t.AlphaImage.copy(m.bitmap,c,{x:0,y:0},{x:g.x+1,y:g.y+1},m.bitmap)}}}this.image=c,this.positions=r};t.register("GlyphAtlas",n);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,r,i){for(var n=new t.EvaluationParameters(r),o=0,a=e;o<a.length;o+=1)a[o].recalculate(n,i)}function s(e,r){var i=t.getArrayBuffer(e.request,(function(e,i,n,o){e?r(e):i&&r(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:n,expires:o})}));return function(){i.cancel(),r()}}o.prototype.parse=function(e,r,i,o,s){var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var h=new t.DictionaryCoder(Object.keys(e.layers).sort()),l=new t.FeatureIndex(this.tileID,this.promoteId);l.bucketLayerIDs=[];var c,f,p,d,m={},g={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},y=r.familiesBySource[this.source];for(var v in y){var _=e.layers[v];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=h.encode(v),w=[],x=0;x<_.length;x++){var M=_.feature(x),S=l.getId(M,v);w.push({feature:M,id:S,index:x,sourceLayerIndex:b})}for(var k=0,A=y[v];k<A.length;k+=1){var E=A[k],z=E[0];z.minzoom&&this.zoom<Math.floor(z.minzoom)||z.maxzoom&&this.zoom>=z.maxzoom||"none"!==z.visibility&&(a(E,this.zoom,i),(m[z.id]=z.createBucket({index:l.bucketLayerIDs.length,layers:E,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(w,g,this.tileID.canonical),l.bucketLayerIDs.push(E.map((function(t){return t.id}))))}}}var I=t.mapObject(g.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(I).length?o.send("getGlyphs",{uid:this.uid,stacks:I},(function(t,e){c||(c=t,f=e,C.call(u))})):f={};var T=Object.keys(g.iconDependencies);T.length?o.send("getImages",{icons:T,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){c||(c=t,p=e,C.call(u))})):p={};var P=Object.keys(g.patternDependencies);function C(){if(c)return s(c);if(f&&p&&d){var e=new n(f),r=new t.ImageAtlas(p,d);for(var o in m){var u=m[o];u instanceof t.SymbolBucket?(a(u.layers,this.zoom,i),t.performSymbolLayout(u,f,e.positions,p,r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof t.LineBucket||u instanceof t.FillBucket||u instanceof t.FillExtrusionBucket)&&(a(u.layers,this.zoom,i),u.addFeatures(g,this.tileID.canonical,r.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}P.length?o.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){c||(c=t,d=e,C.call(u))})):d={},C.call(this)};var u=function(t,e,r,i){this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,r){var i=this,n=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[n]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete i.loading[n],e||!o)return s.status="done",i.loaded[n]=s,r(e);var u=o.rawData,h={};o.expires&&(h.expires=o.expires),o.cacheControl&&(h.cacheControl=o.cacheControl);var l={};if(a){var c=a.finish();c&&(l.resourceTiming=JSON.parse(JSON.stringify(c)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return r(e);r(null,t.extend({rawTileData:u.slice(0)},i,h,l))})),i.loaded=i.loaded||{},i.loaded[n]=s}))},u.prototype.reloadTile=function(t,e){var r=this,i=this.loaded,n=t.uid,o=this;if(i&&i[n]){var a=i[n];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,r.availableImages,o.actor,n)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(t,e){var r=this.loading,i=t.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),e()},u.prototype.removeTile=function(t,e){var r=this.loaded,i=t.uid;r&&r[i]&&delete r[i],e()};var h=t.window.ImageBitmap,l=function(){this.loaded={}};function c(t,e){if(0!==t.length){f(t[0],e);for(var r=1;r<t.length;r++)f(t[r],!e)}}function f(t,e){for(var r=0,i=0,n=t.length,o=n-1;i<n;o=i++)r+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);r>=0!=!!e&&t.reverse()}l.prototype.loadTile=function(e,r){var i=e.uid,n=e.encoding,o=e.rawImageData,a=h&&o instanceof h?this.getImageData(o):o,s=new t.DEMData(i,a,n);this.loaded=this.loaded||{},this.loaded[i]=s,r(null,s)},l.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var r=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:r.width,height:r.height},r.data)},l.prototype.removeTile=function(t){var e=this.loaded,r=t.uid;e&&e[r]&&delete e[r]};var p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var n=i[r];e.push([new t.Point$1(n[0],n[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],h=0,l=s[a];h<l.length;h+=1){var c=l[h];u.push(new t.Point$1(c[0],c[1]))}o.push(u)}return o},d.prototype.toGeoJSON=function(t,e,r){return p.call(this,t,e,r)};var m=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};m.prototype.feature=function(t){return new d(this._features[t])};var g=t.vectorTile.VectorTileFeature,y=v;function v(t,e){this.options=e||{},this.features=t,this.length=t.length}function _(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}v.prototype.feature=function(t){return new _(this.features[t],this.options.extent)},_.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var i=e[r],n=[],o=0;o<i.length;o++)n.push(new t.Point$1(i[o][0],i[o][1]));this.geometry.push(n)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),r=Math.max(r,u.x),i=Math.min(i,u.y),n=Math.max(n,u.y)}return[e,i,r,n]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var b=x,w=y;function x(e){var r=new t.pbf;return function(t,e){for(var r in t.layers)e.writeMessage(3,M,t.layers[r])}(e,r),r.finish()}function M(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)i.feature=t.feature(r),e.writeMessage(2,S,i);var n=i.keys;for(r=0;r<n.length;r++)e.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)e.writeMessage(4,I,o[r])}function S(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,k,t),e.writeVarintField(3,r.type),e.writeMessage(4,z,r)}function k(t,e){var r=t.feature,i=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in r.properties){var u=o[s];void 0===u&&(i.push(s),o[s]=u=i.length-1),e.writeVarint(u);var h=r.properties[s],l=typeof h;"string"!==l&&"boolean"!==l&&"number"!==l&&(h=JSON.stringify(h));var c=l+":"+h,f=a[c];void 0===f&&(n.push(h),a[c]=f=n.length-1),e.writeVarint(f)}}function A(t,e){return(e<<3)+(7&t)}function E(t){return t<<1^t>>31}function z(t,e){for(var r=t.loadGeometry(),i=t.type,n=0,o=0,a=r.length,s=0;s<a;s++){var u=r[s],h=1;1===i&&(h=u.length),e.writeVarint(A(1,h));for(var l=3===i?u.length-1:u.length,c=0;c<l;c++){1===c&&1!==i&&e.writeVarint(A(2,l-1));var f=u[c].x-n,p=u[c].y-o;e.writeVarint(E(f)),e.writeVarint(E(p)),n+=f,o+=p}3===i&&e.writeVarint(A(7,1))}}function I(t,e){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function T(t,e,r,i){P(t,r,i),P(e,2*r,2*i),P(e,2*r+1,2*i+1)}function P(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function C(t,e,r,i){var n=t-r,o=e-i;return n*n+o*o}b.fromVectorTileJs=x,b.fromGeojsonVt=function(t,e){e=e||{};var r={};for(var i in t)r[i]=new y(t[i].features,e),r[i].name=i,r[i].version=e.version,r[i].extent=e.extent;return x({layers:r})},b.GeoJSONWrapper=w;var L=function(t){return t[0]},R=function(t){return t[1]},B=function(t,e,r,i,n){void 0===e&&(e=L),void 0===r&&(r=R),void 0===i&&(i=64),void 0===n&&(n=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new n(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=r(t[u]);!function t(e,r,i,n,o,a){if(!(o-n<=i)){var s=n+o>>1;!function t(e,r,i,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,u=i-n+1,h=Math.log(s),l=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*l*(s-l)/s)*(u-s/2<0?-1:1);t(e,r,i,Math.max(n,Math.floor(i-u*l/s+c)),Math.min(o,Math.floor(i+(s-u)*l/s+c)),a)}var f=r[2*i+a],p=n,d=o;for(T(e,r,n,i),r[2*o+a]>f&&T(e,r,n,o);p<d;){for(T(e,r,p,d),p++,d--;r[2*p+a]<f;)p++;for(;r[2*d+a]>f;)d--}r[2*n+a]===f?T(e,r,n,d):T(e,r,++d,o),d<=i&&(n=d+1),i<=d&&(o=d-1)}}(e,r,s,n,o,a%2),t(e,r,i,n,s-1,a+1),t(e,r,i,s+1,o,a+1)}}(a,s,i,0,a.length-1,0)};B.prototype.range=function(t,e,r,i){return function(t,e,r,i,n,o,a){for(var s,u,h=[0,t.length-1,0],l=[];h.length;){var c=h.pop(),f=h.pop(),p=h.pop();if(f-p<=a)for(var d=p;d<=f;d++)u=e[2*d+1],(s=e[2*d])>=r&&s<=n&&u>=i&&u<=o&&l.push(t[d]);else{var m=Math.floor((p+f)/2);u=e[2*m+1],(s=e[2*m])>=r&&s<=n&&u>=i&&u<=o&&l.push(t[m]);var g=(c+1)%2;(0===c?r<=s:i<=u)&&(h.push(p),h.push(m-1),h.push(g)),(0===c?n>=s:o>=u)&&(h.push(m+1),h.push(f),h.push(g))}}return l}(this.ids,this.coords,t,e,r,i,this.nodeSize)},B.prototype.within=function(t,e,r){return function(t,e,r,i,n,o){for(var a=[0,t.length-1,0],s=[],u=n*n;a.length;){var h=a.pop(),l=a.pop(),c=a.pop();if(l-c<=o)for(var f=c;f<=l;f++)C(e[2*f],e[2*f+1],r,i)<=u&&s.push(t[f]);else{var p=Math.floor((c+l)/2),d=e[2*p],m=e[2*p+1];C(d,m,r,i)<=u&&s.push(t[p]);var g=(h+1)%2;(0===h?r-n<=d:i-n<=m)&&(a.push(c),a.push(p-1),a.push(g)),(0===h?r+n>=d:i+n>=m)&&(a.push(p+1),a.push(l),a.push(g))}}return s}(this.ids,this.coords,t,e,r,this.nodeSize)};var D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},j=function(t){this.options=Z(Object.create(D),t),this.trees=new Array(this.options.maxZoom+1)};function O(t,e,r,i,n){return{x:t,y:e,zoom:1/0,id:r,parentId:-1,numPoints:i,properties:n}}function F(t,e){var r=t.geometry.coordinates,i=r[1];return{x:q(r[0]),y:V(i),zoom:1/0,index:e,parentId:-1}}function N(t){return{type:"Feature",id:t.id,properties:U(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,r=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var e,r,i}function U(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return Z(Z({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function q(t){return t/360+.5}function V(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Z(t,e){for(var r in e)t[r]=e[r];return t}function G(t){return t.x}function J(t){return t.y}function H(t,e,r,i,n,o){var a=n-r,s=o-i;if(0!==a||0!==s){var u=((t-r)*a+(e-i)*s)/(a*a+s*s);u>1?(r=n,i=o):u>0&&(r+=a*u,i+=s*u)}return(a=t-r)*a+(s=e-i)*s}function K(t,e,r,i){var n={id:void 0===t?null:t,type:e,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)W(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<e.length;i++)W(t,e[i]);else if("MultiPolygon"===r)for(i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)W(t,e[i][n])}(n),n}function W(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function $(t,e,r,i){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],u=e.id;if(r.promoteId?u=e.properties[r.promoteId]:r.generateId&&(u=i||0),"Point"===o)X(n,s);else if("MultiPoint"===o)for(var h=0;h<n.length;h++)X(n[h],s);else if("LineString"===o)Y(n,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(h=0;h<n.length;h++)Y(n[h],s=[],a,!1),t.push(K(u,"LineString",s,e.properties));return}Q(n,s,a,!1)}else if("Polygon"===o)Q(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(h=0;h<e.geometry.geometries.length;h++)$(t,{id:u,geometry:e.geometry.geometries[h],properties:e.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<n.length;h++){var l=[];Q(n[h],l,a,!0),s.push(l)}}t.push(K(u,o,s,e.properties))}}function X(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function Y(t,e,r,i){for(var n,o,a=0,s=0;s<t.length;s++){var u=tt(t[s][0]),h=et(t[s][1]);e.push(u),e.push(h),e.push(0),s>0&&(a+=i?(n*h-u*o)/2:Math.sqrt(Math.pow(u-n,2)+Math.pow(h-o,2))),n=u,o=h}var l=e.length-3;e[2]=1,function t(e,r,i,n){for(var o,a=n,s=i-r>>1,u=i-r,h=e[r],l=e[r+1],c=e[i],f=e[i+1],p=r+3;p<i;p+=3){var d=H(e[p],e[p+1],h,l,c,f);if(d>a)o=p,a=d;else if(d===a){var m=Math.abs(p-s);m<u&&(o=p,u=m)}}a>n&&(o-r>3&&t(e,r,o,n),e[o+2]=a,i-o>3&&t(e,o,i,n))}(e,0,l,r),e[l+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Q(t,e,r,i){for(var n=0;n<t.length;n++){var o=[];Y(t[n],o,r,i),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function rt(t,e,r,i,n,o,a,s){if(i/=e,o>=(r/=e)&&a<i)return t;if(a<r||o>=i)return null;for(var u=[],h=0;h<t.length;h++){var l=t[h],c=l.geometry,f=l.type,p=0===n?l.minX:l.minY,d=0===n?l.maxX:l.maxY;if(p>=r&&d<i)u.push(l);else if(!(d<r||p>=i)){var m=[];if("Point"===f||"MultiPoint"===f)it(c,m,r,i,n);else if("LineString"===f)nt(c,m,r,i,n,!1,s.lineMetrics);else if("MultiLineString"===f)at(c,m,r,i,n,!1);else if("Polygon"===f)at(c,m,r,i,n,!0);else if("MultiPolygon"===f)for(var g=0;g<c.length;g++){var y=[];at(c[g],y,r,i,n,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)u.push(K(l.id,f,m[g],l.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),u.push(K(l.id,f,m,l.tags))}}}return u.length?u:null}function it(t,e,r,i,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];a>=r&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function nt(t,e,r,i,n,o,a){for(var s,u,h=ot(t),l=0===n?ut:ht,c=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],m=t[f+2],g=t[f+3],y=t[f+4],v=0===n?p:d,_=0===n?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-y,2))),v<r?_>r&&(u=l(h,p,d,g,y,r),a&&(h.start=c+s*u)):v>i?_<i&&(u=l(h,p,d,g,y,i),a&&(h.start=c+s*u)):st(h,p,d,m),_<r&&v>=r&&(u=l(h,p,d,g,y,r),b=!0),_>i&&v<=i&&(u=l(h,p,d,g,y,i),b=!0),!o&&b&&(a&&(h.end=c+s*u),e.push(h),h=ot(t)),a&&(c+=s)}var w=t.length-3;p=t[w],d=t[w+1],m=t[w+2],(v=0===n?p:d)>=r&&v<=i&&st(h,p,d,m),w=h.length-3,o&&w>=3&&(h[w]!==h[0]||h[w+1]!==h[1])&&st(h,h[0],h[1],h[2]),h.length&&e.push(h)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,r,i,n,o){for(var a=0;a<t.length;a++)nt(t[a],e,r,i,n,o,!1)}function st(t,e,r,i){t.push(e),t.push(r),t.push(i)}function ut(t,e,r,i,n,o){var a=(o-e)/(i-e);return t.push(o),t.push(r+(n-r)*a),t.push(1),a}function ht(t,e,r,i,n,o){var a=(o-r)/(n-r);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function lt(t,e){for(var r=[],i=0;i<t.length;i++){var n,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=ct(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(ct(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var u=[],h=0;h<o.geometry[s].length;h++)u.push(ct(o.geometry[s][h],e));n.push(u)}r.push(K(o.id,a,n,o.tags))}return r}function ct(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var i=0;i<t.length;i+=3)r.push(t[i]+e,t[i+1],t[i+2]);return r}function ft(t,e){if(t.transformed)return t;var r,i,n,o=1<<t.z,a=t.x,s=t.y;for(r=0;r<t.features.length;r++){var u=t.features[r],h=u.geometry,l=u.type;if(u.geometry=[],1===l)for(i=0;i<h.length;i+=2)u.geometry.push(pt(h[i],h[i+1],e,o,a,s));else for(i=0;i<h.length;i++){var c=[];for(n=0;n<h[i].length;n+=2)c.push(pt(h[i][n],h[i][n+1],e,o,a,s));u.geometry.push(c)}}return t.transformed=!0,t}function pt(t,e,r,i,n,o){return[Math.round(r*(t*i-n)),Math.round(r*(e*i-o))]}function dt(t,e,r,i,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,mt(a,t[s],o,n);var u=t[s].minX,h=t[s].minY,l=t[s].maxX,c=t[s].maxY;u<a.minX&&(a.minX=u),h<a.minY&&(a.minY=h),l>a.maxX&&(a.maxX=l),c>a.maxY&&(a.maxY=c)}return a}function mt(t,e,r,i){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,n,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)gt(a,n[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<n.length;u++){var h=n[u];for(s=0;s<h.length;s++)gt(a,h[s],t,r,!0,0===s)}if(a.length){var l=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var c in l={},e.tags)l[c]=e.tags[c];l.mapbox_clip_start=n.start/n.size,l.mapbox_clip_end=n.end/n.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(f.id=e.id),t.features.push(f)}}function gt(t,e,r,i,n,o){var a=i*i;if(i>0&&e.size<(n?a:i))r.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===i||e[u+2]>a)&&(r.numSimplified++,s.push(e[u]),s.push(e[u+1])),r.numPoints++;n&&function(t,e){for(var r=0,i=0,n=t.length,o=n-2;i<n;o=i,i+=2)r+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(r>0===e)for(i=0,n=t.length;i<n/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[n-2-i],t[i+1]=t[n-1-i],t[n-2-i]=a,t[n-1-i]=s}}(s,o),t.push(s)}}function yt(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)$(r,t.features[i],e,i);else $(r,"Feature"===t.type?t:{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(this.stats={},this.total=0),(i=function(t,e){var r=e.buffer/e.extent,i=t,n=rt(t,1,-1-r,r,0,-1,2,e),o=rt(t,1,1-r,2+r,0,-1,2,e);return(n||o)&&(i=rt(t,1,-r,1+r,0,-1,2,e)||[],n&&(i=lt(n,1).concat(i)),o&&(i=i.concat(lt(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),r&&i.length}function vt(t,e,r){return 32*((1<<t)*r+e)+t}function _t(t,e){var r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return e(null,null);var n=new m(i.features),o=b(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:n,rawData:o.buffer})}j.prototype.load=function(t){var e=this.options,r=(e.log,e.minZoom),i=e.maxZoom,n=e.nodeSize;t.length,this.points=t;for(var o=[],a=0;a<t.length;a++)t[a].geometry&&o.push(F(t[a],a));this.trees[i+1]=new B(o,G,J,n,Float32Array);for(var s=i;s>=r;s--)Date.now(),o=this._cluster(o,s),this.trees[s]=new B(o,G,J,n,Float32Array);return this},j.prototype.getClusters=function(t,e){var r=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,n=180;else if(r>n){var a=this.getClusters([r,i,180,o],e),s=this.getClusters([-180,i,n,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],h=[],l=0,c=u.range(q(r),V(o),q(n),V(i));l<c.length;l+=1){var f=u.points[c[l]];h.push(f.numPoints?N(f):this.points[f.index])}return h},j.prototype.getChildren=function(t){var e=this._getOriginId(t),r=this._getOriginZoom(t),i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);var o=n.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],u=0,h=n.within(o.x,o.y,a);u<h.length;u+=1){var l=n.points[h[u]];l.parentId===t&&s.push(l.numPoints?N(l):this.points[l.index])}if(0===s.length)throw new Error(i);return s},j.prototype.getLeaves=function(t,e,r){var i=[];return this._appendLeaves(i,t,e=e||10,r=r||0,0),i},j.prototype.getTile=function(t,e,r){var i=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(r-a)/n,u=(r+1+a)/n,h={features:[]};return this._addTileFeatures(i.range((e-a)/n,s,(e+1+a)/n,u),i.points,e,r,n,h),0===e&&this._addTileFeatures(i.range(1-a/n,s,1,u),i.points,n,r,n,h),e===n-1&&this._addTileFeatures(i.range(0,s,a/n,u),i.points,-1,r,n,h),h.features.length?h:null},j.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},j.prototype._appendLeaves=function(t,e,r,i,n){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?n+u.point_count<=i?n+=u.point_count:n=this._appendLeaves(t,u.cluster_id,r,i,n):n<i?n++:t.push(s),t.length===r)break}return n},j.prototype._addTileFeatures=function(t,e,r,i,n,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],h=u.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(u.x*n-r)),Math.round(this.options.extent*(u.y*n-i))]],tags:h?U(u):this.points[u.index].properties},c=void 0;h?c=u.id:this.options.generateId?c=u.index:this.points[u.index].id&&(c=this.points[u.index].id),void 0!==c&&(l.id=c),o.features.push(l)}},j.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},j.prototype._cluster=function(t,e){for(var r=[],i=this.options,n=i.reduce,o=i.minPoints,a=i.radius/(i.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var h=this.trees[e+1],l=h.within(u.x,u.y,a),c=u.numPoints||1,f=c,p=0,d=l;p<d.length;p+=1){var m=h.points[d[p]];m.zoom>e&&(f+=m.numPoints||1)}if(f>=o){for(var g=u.x*c,y=u.y*c,v=n&&c>1?this._map(u,!0):null,_=(s<<5)+(e+1)+this.points.length,b=0,w=l;b<w.length;b+=1){var x=h.points[w[b]];if(!(x.zoom<=e)){x.zoom=e;var M=x.numPoints||1;g+=x.x*M,y+=x.y*M,x.parentId=_,n&&(v||(v=this._map(u,!0)),n(v,this._map(x)))}}u.parentId=_,r.push(O(g/f,y/f,_,f,v))}else if(r.push(u),f>1)for(var S=0,k=l;S<k.length;S+=1){var A=h.points[k[S]];A.zoom<=e||(A.zoom=e,r.push(A))}}}return r},j.prototype._getOriginId=function(t){return t-this.points.length>>5},j.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},j.prototype._map=function(t,e){if(t.numPoints)return e?Z({},t.properties):t.properties;var r=this.points[t.index].properties,i=this.options.map(r);return e&&i===r?Z({},i):i},yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yt.prototype.splitTile=function(t,e,r,i,n,o,a){for(var s=[t,e,r,i],u=this.options,h=u.debug;s.length;){i=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,c=vt(e,r,i),f=this.tiles[c];if(!f&&(f=this.tiles[c]=dt(t,e,r,i,u),this.tileCoords.push({z:e,x:r,y:i}),h)){var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,n){if(e===u.maxZoom||e===n)continue;var d=1<<n-e;if(r!==Math.floor(o/d)||i!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==t.length){var m,g,y,v,_,b,w=.5*u.buffer/u.extent,x=.5-w,M=.5+w,S=1+w;m=g=y=v=null,_=rt(t,l,r-w,r+M,0,f.minX,f.maxX,u),b=rt(t,l,r+x,r+S,0,f.minX,f.maxX,u),t=null,_&&(m=rt(_,l,i-w,i+M,1,f.minY,f.maxY,u),g=rt(_,l,i+x,i+S,1,f.minY,f.maxY,u),_=null),b&&(y=rt(b,l,i-w,i+M,1,f.minY,f.maxY,u),v=rt(b,l,i+x,i+S,1,f.minY,f.maxY,u),b=null),s.push(m||[],e+1,2*r,2*i),s.push(g||[],e+1,2*r,2*i+1),s.push(y||[],e+1,2*r+1,2*i),s.push(v||[],e+1,2*r+1,2*i+1)}}},yt.prototype.getTile=function(t,e,r){var i=this.options,n=i.extent;if(i.debug,t<0||t>24)return null;var o=1<<t,a=vt(t,e=(e%o+o)%o,r);if(this.tiles[a])return ft(this.tiles[a],n);for(var s,u=t,h=e,l=r;!s&&u>0;)u--,h=Math.floor(h/2),l=Math.floor(l/2),s=this.tiles[vt(u,h,l)];return s&&s.source?(this.splitTile(s.source,u,h,l,t,e,r),this.tiles[a]?ft(this.tiles[a],n):null):null};var bt=function(e){function r(t,r,i,n){e.call(this,t,r,i,_t),n&&(this.loadGeoJSON=n)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var r=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(function(o,a){if(o||!a)return r(o);if("object"!=typeof a)return r(new Error("Input data given to '"+i.source+"' is not a valid GeoJSON object."));!function t(e,r){var i,n=e&&e.type;if("FeatureCollection"===n)for(i=0;i<e.features.length;i++)t(e.features[i],r);else if("GeometryCollection"===n)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],r);else if("Feature"===n)t(e.geometry,r);else if("Polygon"===n)c(e.coordinates,r);else if("MultiPolygon"===n)for(i=0;i<e.coordinates.length;i++)c(e.coordinates[i],r);return e}(a,!0);try{if(i.filter){var s=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var u=a.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));a={type:"FeatureCollection",features:u}}e._geoJSONIndex=i.cluster?new j(function(e){var r=e.superclusterOptions,i=e.clusterProperties;if(!i||!r)return r;for(var n={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(i),h=0,l=u;h<l.length;h+=1){var c=l[h],f=i[c],p=f[0],d=t.createExpression(f[1]),m=t.createExpression("string"==typeof p?[p,["accumulated"],["get",c]]:p);n[c]=d.value,o[c]=m.value}return r.map=function(t){s.properties=t;for(var e={},r=0,i=u;r<i.length;r+=1){var o=i[r];e[o]=n[o].evaluate(a,s)}return e},r.reduce=function(t,e){s.properties=e;for(var r=0,i=u;r<i.length;r+=1){var n=i[r];a.accumulated=t[n],t[n]=o[n].evaluate(a,s)}},r}(i)).load(a.features):function(t,e){return new yt(t,e)}(a,i.geojsonVtOptions)}catch(o){return r(o)}e.loaded={};var h={};if(n){var l=n.finish();l&&(h.resourceTiming={},h.resourceTiming[i.source]=JSON.parse(JSON.stringify(l)))}r(null,h)}))}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(t,r){var i=this.loaded;return i&&i[t.uid]?e.prototype.reloadTile.call(this,t,r):this.loadTile(t,r)},r.prototype.loadGeoJSON=function(e,r){if(e.request)t.getJSON(e.request,r);else{if("string"!=typeof e.data)return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(e.data))}catch(t){return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},r.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},r.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},r.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},r}(u),wt=function(e){var r=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return wt.prototype.setReferrer=function(t,e){this.referrer=e},wt.prototype.setImages=function(t,e,r){for(var i in this.availableImages[t]=e,this.workerSources[t]){var n=this.workerSources[t][i];for(var o in n)n[o].availableImages=e}r()},wt.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},wt.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},wt.prototype.loadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).loadTile(e,r)},wt.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t,e.source).loadTile(e,r)},wt.prototype.reloadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).reloadTile(e,r)},wt.prototype.abortTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).abortTile(e,r)},wt.prototype.removeTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).removeTile(e,r)},wt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},wt.prototype.removeSource=function(t,e,r){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,r):r()}},wt.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t.toString())}},wt.prototype.syncRTLPluginState=function(e,r,i){try{t.plugin.setState(r);var n=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=n){this.self.importScripts(n);var o=t.plugin.isParsed();i(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),o)}}catch(t){i(t.toString())}},wt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},wt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},wt.prototype.getWorkerSource=function(t,e,r){var i=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][r]||(this.workerSources[t][e][r]=new this.workerSourceTypes[e]({send:function(e,r,n){i.actor.send(e,r,n,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][r]},wt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new l),this.demWorkerSources[t][e]},wt.prototype.enforceCacheSizeLimit=function(e,r){t.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new wt(self)),wt})),i(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!r(t)}function r(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(r);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var r=e.getImageData(0,0,1,1);return r&&r.width===t.width}()?(void 0===i[r=t&&t.failIfMajorPerformanceCaveat]&&(i[r]=function(t){var r=function(t){var r=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",i)||r.probablySupportsContext("experimental-webgl",i):r.supportsContext?r.supportsContext("webgl",i)||r.supportsContext("experimental-webgl",i):r.getContext("webgl",i)||r.getContext("experimental-webgl",i)}(t);if(!r)return!1;var i=r.createShader(r.VERTEX_SHADER);return!(!i||r.isContextLost())&&(r.shaderSource(i,"void main() {}"),r.compileShader(i),!0===r.getShaderParameter(i,r.COMPILE_STATUS))}(r)),i[r]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var r}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=r);var i={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),r={create:function(e,r,i){var n=t.window.document.createElement(e);return void 0!==r&&(n.className=r),i&&i.appendChild(n),n},createNS:function(e,r){return t.window.document.createElementNS(e,r)}},i=t.window.document&&t.window.document.documentElement.style;function n(t){if(!i)return t[0];for(var e=0;e<t.length;e++)if(t[e]in i)return t[e];return t[0]}var o,a=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){i&&a&&(o=i[a],i[a]="none")},r.enableDrag=function(){i&&a&&(i[a]=o)};var s=n(["transform","WebkitTransform"]);r.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var h=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",h,h),t.window.removeEventListener("test",h,h)}catch(t){u=!1}r.addEventListener=function(t,e,r,i){void 0===i&&(i={}),t.addEventListener(e,r,"passive"in i&&u?i:i.capture)},r.removeEventListener=function(t,e,r,i){void 0===i&&(i={}),t.removeEventListener(e,r,"passive"in i&&u?i:i.capture)};var l=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",l,!0)};function c(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}r.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",l,!0)}),0)},r.mousePos=function(e,r){var i=e.getBoundingClientRect();return new t.Point(r.clientX-i.left-e.clientLeft,r.clientY-i.top-e.clientTop)},r.touchPos=function(e,r){for(var i=e.getBoundingClientRect(),n=[],o=0;o<r.length;o++)n.push(new t.Point(r[o].clientX-i.left-e.clientLeft,r[o].clientY-i.top-e.clientTop));return n},r.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var f=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var i=r[e];this._notify(i.ids,i.callback)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},r.prototype._validate=function(e,r){var i=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(r.content,r)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},r.prototype._validateStretch=function(t,e){if(!t)return!0;for(var r=0,i=0,n=t;i<n.length;i+=1){var o=n[i];if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}return!0},r.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},r.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},r.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var i=0,n=t;i<n.length;i+=1)this.images[n[i]]||(r=!1);this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,r){for(var i={},n=0,o=e;n<o.length;n+=1){var a=o[n];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}r(null,i)},r.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},r.prototype.getPattern=function(e){var r=this.patterns[e],i=this.getImage(e);if(!i)return null;if(r&&r.position.version===i.version)return r.position;if(r)r.position.version=i.version;else{var n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},o=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var r in this.patterns)e.push(this.patterns[r].bin);var i=t.potpack(e),n=i.w,o=i.h,a=this.atlasImage;for(var s in a.resize({width:n||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,h=u.x+1,l=u.y+1,c=this.images[s].data,f=c.width,p=c.height;t.RGBAImage.copy(c,a,{x:0,y:0},{x:h,y:l},{width:f,height:p}),t.RGBAImage.copy(c,a,{x:0,y:p-1},{x:h,y:l-1},{width:f,height:1}),t.RGBAImage.copy(c,a,{x:0,y:0},{x:h,y:l+p},{width:f,height:1}),t.RGBAImage.copy(c,a,{x:f-1,y:0},{x:h-1,y:l},{width:1,height:p}),t.RGBAImage.copy(c,a,{x:0,y:0},{x:h+f,y:l},{width:1,height:p})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var n=this.images[i];c(n)&&this.updateImage(i,n)}}},r}(t.Evented),p=g,d=g,m=1e20;function g(t,e,r,i,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,r,i,n,o,a){for(var s=0;s<e;s++){for(var u=0;u<r;u++)i[u]=t[u*e+s];for(v(i,n,o,a,r),u=0;u<r;u++)t[u*e+s]=n[u]}for(u=0;u<r;u++){for(s=0;s<e;s++)i[s]=t[u*e+s];for(v(i,n,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(n[s])}}function v(t,e,r,i,n){r[0]=0,i[0]=-m,i[1]=+m;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);r[++a]=o,i[a]=s,i[a+1]=+m}for(o=0,a=0;o<n;o++){for(;i[a+1]<o;)a++;e[o]=(o-r[a])*(o-r[a])+t[r[a]]}}g.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var n=e.data[4*i+3]/255;this.gridOuter[i]=1===n?0:0===n?m:Math.pow(Math.max(0,.5-n),2),this.gridInner[i]=1===n?m:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)r[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return r},p.default=d;var _=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};_.prototype.setURL=function(t){this.url=t},_.prototype.getGlyphs=function(e,r){var i=this,n=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)n.push({stack:o,id:s[a]});t.asyncAll(n,(function(t,e){var r=t.stack,n=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[n];if(void 0===a){if(a=i._tinySDF(o,r,n))return o.glyphs[n]=a,void e(null,{stack:r,id:n,glyph:a});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:r,id:n,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],_.loadGlyphRange(r,s,i.url,i.requestManager,(function(t,e){if(e){for(var r in e)i._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=e[+r]);o.ranges[s]=!0}for(var n=0,a=u;n<a.length;n+=1)(0,a[n])(t,e);delete o.requests[s]}))),u.push((function(t,i){t?e(t):i&&e(null,{stack:r,id:n,glyph:i[n]||null})}))}}else e(null,{stack:r,id:n,glyph:a})}),(function(t,e){if(t)r(t);else if(e){for(var i={},n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.stack,u=a.id,h=a.glyph;(i[s]||(i[s]={}))[u]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics}}r(null,i)}}))},_.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},_.prototype._tinySDF=function(e,r,i){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(i)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(r)?a="900":/medium/i.test(r)?a="500":/light/i.test(r)&&(a="200"),o=e.tinySDF=new _.TinySDF(24,3,8,.25,n,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},_.loadGlyphRange=function(e,r,i,n,o){var a=256*r,s=a+255,u=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,r){if(e)o(e);else if(r){for(var i={},n=0,a=t.parseGlyphPBF(r);n<a.length;n+=1){var s=a[n];i[s.id]=s}o(null,i)}}))},_.TinySDF=p;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,r){return t.sphericalToCartesian(e.expression.evaluate(r))},b.prototype.interpolate=function(e,r,i){return{x:t.number(e.x,r.x,i),y:t.number(e.y,r.y,i),z:t.number(e.z,r.z,i)}};var w=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),x=function(e){function r(r){e.call(this),this._transitionable=new t.Transitionable(w),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getLight=function(){return this._transitionable.serialize()},r.prototype.setLight=function(e,r){if(void 0===r&&(r={}),!this._validate(t.validateLight,e,r))for(var i in e){var n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),n):this._transitionable.setValue(i,n)}},r.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},r.prototype.hasTransition=function(){return this._transitioning.hasTransition()},r.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},r.prototype._validate=function(e,r,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},r}(t.Evented),M=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};M.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(t,e)),this.dashEntry[r]},M.prototype.getDashRanges=function(t,e,r){var i=[],n=t.length%2==1?-t[t.length-1]*r:0,o=t[0]*r,a=!0;i.push({left:n,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var h=t[u];i.push({left:n=s*r,right:o=(s+=h)*r,isDash:a=!a,zeroLength:0===h})}return i},M.prototype.addRoundDash=function(t,e,r){for(var i=e/2,n=-r;n<=r;n++)for(var o=this.width*(this.nextRow+r+n),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var h=Math.abs(u-s.left),l=Math.abs(u-s.right),c=Math.min(h,l),f=void 0,p=n/r*(i+1);if(s.isDash){var d=i-Math.abs(p);f=Math.sqrt(c*c+d*d)}else f=i-Math.sqrt(c*c+p*p);this.data[o+u]=Math.max(0,Math.min(255,f+128))}},M.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var r=t[e],i=t[e+1];r.zeroLength?t.splice(e,1):i&&i.isDash===r.isDash&&(i.left=r.left,t.splice(e,1))}var n=t[0],o=t[t.length-1];n.isDash===o.isDash&&(n.left=o.left-this.width,o.right=n.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],h=0;h<this.width;h++){h/u.right>1&&(u=t[++s]);var l=Math.abs(h-u.left),c=Math.abs(h-u.right),f=Math.min(l,c);this.data[a+h]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}},M.prototype.addDash=function(e,r){var i=r?7:0,n=2*i+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);r?this.addRoundDash(u,s,i):this.addRegularDash(u)}var h={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=n,this.dirty=!0,h},M.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var S=function e(r,i){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var a=new e.Actor(n[o],i,this.id);a.name="Worker "+o,this.actors.push(a)}};function k(e,r,i){var n=function(n,o){if(n)return i(n);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=r.canonicalizeTileset(a,e.url),i(null,a)}};return e.url?t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame((function(){return n(null,e)}))}S.prototype.broadcast=function(e,r,i){t.asyncAll(this.actors,(function(t,i){t.send(e,r,i)}),i=i||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var A=function(e,r,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=i||24};A.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},A.prototype.contains=function(e){var r=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r);return e.x>=i&&e.x<o&&e.y>=n&&e.y<a};var E=function(e){function r(r,i,n,o){if(e.call(this),this.id=r,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new A(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},r.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},r.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(i,n){return delete e.request,e.aborted?r(null):i&&404!==i.status?r(i):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=r:e.request=e.actor.send("reloadTile",n,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,o.bind(this)))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.hasTransition=function(){return!1},r}(t.Evented),z=function(e){function r(r,i,n,o){e.call(this),this.id=r,this.dispatcher=n,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new A(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.loadTile=function(e,r){var i=this,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(function(n,o){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),r(null)}}))},r.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},r.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},r.prototype.hasTransition=function(){return!1},r}(t.Evented),I=function(e){function r(r,i,n,o){e.call(this,r,i,n,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function n(t,i){t&&(e.state="errored",r(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",r(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(i)e.state="errored",r(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},r.prototype._getNeighboringTiles=function(e){var r=e.canonical,i=Math.pow(2,r.z),n=(r.x-1+i)%i,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+i)%i,s=r.x+1===i?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<i&&(u[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),u},r.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},r}(z),T=function(e){function r(r,i,n,o){e.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(o),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(r){if(r)e.fire(new t.ErrorEvent(r));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}}))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)r.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(i.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new t.Event("data",i))}})),this},r.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},r.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},r.prototype.getClusterLeaves=function(t,e,r,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},i),this},r.prototype._updateWorkerData=function(e){var r=this;this._loaded=!1;var i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this.actor.send(this.type+".loadData",i,(function(t,n){r._removed||n&&n.abandoned||(r._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[r.id]&&(r._resourceTiming=n.resourceTiming[r.id].slice(0)),r.actor.send(r.type+".coalesce",{source:i.source},null),e(t))}))},r.prototype.loaded=function(){return this._loaded},r.prototype.loadTile=function(e,r){var i=this,n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(o,i.map.painter,"reloadTile"===n),r(null))}))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},r.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},r.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},r.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},r.prototype.hasTransition=function(){return!1},r}(t.Evented),P=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),C=function(e){function r(t,r,i,n){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=r}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(e,r){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(n,o){i._loaded=!0,n?i.fire(new t.ErrorEvent(n)):o&&(i.image=o,e&&(i.coordinates=e),r&&r(),i._finishLoading())}))},r.prototype.loaded=function(){return this._loaded},r.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},r.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setCoordinates=function(e){var r=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var r=1/0,i=1/0,n=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];r=Math.min(r,u.x),i=Math.min(i,u.y),n=Math.max(n,u.x),o=Math.max(o,u.y)}var h=Math.max(n-r,o-i),l=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),c=Math.pow(2,l);return new t.CanonicalTileID(l,Math.floor((r+n)/2*c),Math.floor((i+o)/2*c))}(i),this.minzoom=this.maxzoom=this.tileID.z;var n=i.map((function(t){return r.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},r.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},r.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return!1},r}(t.Evented),L=function(e){function r(t,r,i,n){e.call(this,t,r,i,n),this.roundZoom=!0,this.type="video",this.options=r}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1;var r=this.options;this.urls=[];for(var i=0,n=r.urls;i<n.length;i+=1)this.urls.push(this.map._requestManager.transformRequest(n[i],t.ResourceType.Source).url);t.getVideo(this.urls,(function(r,i){e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},r.prototype.pause=function(){this.video&&this.video.pause()},r.prototype.play=function(){this.video&&this.video.play()},r.prototype.seek=function(e){if(this.video){var r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+r.start(0)+" and "+r.end(0)+"-second mark."))):this.video.currentTime=e}},r.prototype.getVideo=function(){return this.video},r.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},r.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this.video&&!this.video.paused},r}(C),R=function(e){function r(r,i,n,o){e.call(this,r,i,n,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},r.prototype.getCanvas=function(){return this.canvas},r.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},r.prototype.onRemove=function(){this.pause()},r.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,i=r.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,P.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this._playing},r.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},r}(C),B={vector:E,raster:z,"raster-dem":I,geojson:T,video:L,image:C,canvas:R};function D(e,r){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(r.toUnwrapped()))}function j(t,e,r,i,n,o){var a=function(t,e,r){if(t)for(var i=0,n=t;i<n.length;i+=1){var o=e[n[i]];if(o&&o.source===r&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(i,s,a);u.sort(O);for(var h=[],l=0,c=u;l<c.length;l+=1){var f=c[l];h.push({wrappedTileID:f.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(e,r,t._state,f.queryGeometry,f.cameraQueryGeometry,f.scale,n,o,s,D(t.transform,f.tileID))})}var p=function(t){for(var e={},r={},i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.queryResults,s=o.wrappedTileID,u=r[s]=r[s]||{};for(var h in a)for(var l=a[h],c=u[h]=u[h]||{},f=e[h]=e[h]||[],p=0,d=l;p<d.length;p+=1){var m=d[p];c[m.featureIndex]||(c[m.featureIndex]=!0,f.push(m))}}return e}(h);for(var d in p)p[d].forEach((function(e){var r=e.feature,i=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return p}function O(t,e){var r=t.tileID,i=e.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}var F=function(t,e){this.max=t,this.onRemove=e,this.reset()};F.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var i=r[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},F.prototype.add=function(t,e,r){var i=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o={value:e,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout((function(){i.remove(t,o)}),r)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},F.prototype.has=function(t){return t.wrapped().key in this.data},F.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},F.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},F.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},F.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},F.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,i=void 0===e?0:this.data[r].indexOf(e),n=this.data[r][i];return this.data[r].splice(i,1),n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(n.value),this.order.splice(this.order.indexOf(r),1),this},F.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},F.prototype.filter=function(t){var e=[];for(var r in this.data)for(var i=0,n=this.data[r];i<n.length;i+=1){var o=n[i];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var N=function(t,e,r){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var U={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},q=function(t,e,r,i){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};q.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},q.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},q.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var i=e.attributes[this.attributes[r].name];void 0!==i&&t.enableVertexAttribArray(i)}},q.prototype.setVertexAttribPointers=function(t,e,r){for(var i=0;i<this.attributes.length;i++){var n=this.attributes[i],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[U[n.type]],!1,this.itemSize,n.offset+this.itemSize*(r||0))}},q.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var V=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};V.prototype.get=function(){return this.current},V.prototype.set=function(t){},V.prototype.getDefault=function(){return this.default},V.prototype.setDefault=function(){this.set(this.default)};var Z=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(V),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(V),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(V),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(V),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(V),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(V),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(V),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(V),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(V),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(V),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(V),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(V),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(V),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(V),nt=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(V),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(V),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(V),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(V),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(V),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(V),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(V),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(V),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(V),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(V),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(V),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(V),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(V),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(V),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(V),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(V),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(V),wt=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(V),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(wt),Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(wt),St=function(t,e,r,i){this.context=t,this.width=e,this.height=r;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new xt(t,n),i&&(this.depthAttachment=new Mt(t,n))};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r)}t.deleteFramebuffer(this.framebuffer)};var kt=function(t,e,r){this.func=t,this.mask=e,this.range=r};kt.ReadOnly=!1,kt.ReadWrite=!0,kt.disabled=new kt(519,kt.ReadOnly,[0,1]);var At=function(t,e,r,i,n,o){this.test=t,this.ref=e,this.mask=r,this.fail=i,this.depthFail=n,this.pass=o};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var Et=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};Et.disabled=new Et(Et.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Et.unblended=new Et(Et.Replace,t.Color.transparent,[!0,!0,!0,!0]),Et.alphaBlended=new Et([1,771],t.Color.transparent,[!0,!0,!0,!0]);var zt=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};zt.disabled=new zt(!1,1029,2305),zt.backCCW=new zt(!0,1029,2305);var It=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Z(this),this.clearDepth=new G(this),this.clearStencil=new J(this),this.colorMask=new H(this),this.depthMask=new K(this),this.stencilMask=new W(this),this.stencilFunc=new $(this),this.stencilOp=new X(this),this.stencilTest=new Y(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new rt(this),this.blendFunc=new it(this),this.blendColor=new nt(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ut(this),this.program=new ht(this),this.activeTexture=new lt(this),this.viewport=new ct(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};It.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},It.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},It.prototype.createIndexBuffer=function(t,e){return new N(this,t,e)},It.prototype.createVertexBuffer=function(t,e,r){return new q(this,t,e,r)},It.prototype.createRenderbuffer=function(t,e,r){var i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),n},It.prototype.createFramebuffer=function(t,e,r){return new St(this,t,e,r)},It.prototype.clear=function(t){var e=t.color,r=t.depth,i=this.gl,n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),i.clear(n)},It.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},It.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},It.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},It.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},It.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Tt=function(e){function r(r,i,n){var o=this;e.call(this),this.id=r,this.dispatcher=n,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,r,i,n){var o=new B[r.type](e,r,i,n);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(r,i,n,this),this._tiles={},this._cache=new F(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},r.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},r.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},r.prototype.getSource=function(){return this._source},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},r.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},r.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},r.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},r.prototype.serialize=function(){return this._source.serialize()},r.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},r.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Pt).map((function(t){return t.key}))},r.prototype.getRenderableIds=function(e){var r=this,i=[];for(var n in this._tiles)this._isIdRenderable(n,e)&&i.push(this._tiles[n]);return e?i.sort((function(e,i){var n=e.tileID,o=i.tileID,a=new t.Point(n.canonical.x,n.canonical.y)._rotate(r.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(r.transform.angle);return n.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):i.map((function(t){return t.tileID})).sort(Pt).map((function(t){return t.key}))},r.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},r.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},r.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},r.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},r.prototype._tileLoaded=function(e,r,i,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},r.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var n=this.getTileByID(i);o(t,n),o(n,t)}}function o(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},r.prototype.getTile=function(t){return this.getTileByID(t.key)},r.prototype.getTileByID=function(t){return this._tiles[t]},r.prototype._retainLoadedChildren=function(t,e,r,i){for(var n in this._tiles){var o=this._tiles[n];if(!(i[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){i[a.key]=a;break}}}},r.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var r=this._loadedParentTiles[t.key];return r&&r.tileID.overscaledZ>=e?r:null}for(var i=t.overscaledZ-1;i>=e;i--){var n=t.scaledTo(i),o=this._getLoadedTile(n);if(o)return o}},r.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},r.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,r=Math.ceil(t.height/this._source.tileSize)+1,i=Math.floor(e*r*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(n)},r.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var r={};for(var i in this._tiles){var n=this._tiles[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}for(var o in this._tiles=r,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},r.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return i._source.hasTile(t)})))):n=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-r.maxOverzooming,this._source.minzoom),s=Math.max(o+r.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(n,o);if(Ct(this._source.type)){for(var h={},l={},c=0,f=Object.keys(u);c<f.length;c+=1){var p=f[c],d=u[p],m=this._tiles[p];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(d,a);g&&(this._addTile(g.tileID),h[g.tileID.key]=g.tileID),l[p]=d}}for(var y in this._retainLoadedChildren(l,o,s,u),h)u[y]||(this._coveredTiles[y]=!0,u[y]=h[y])}for(var v in u)this._tiles[v].clearFadeHold();for(var _=0,b=t.keysDifference(this._tiles,u);_<b.length;_+=1){var w=b[_],x=this._tiles[w];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(w)}this._updateLoadedParentTileCache()}},r.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},r.prototype._updateRetainedTiles=function(t,e){for(var i={},n={},o=Math.max(e-r.maxOverzooming,this._source.minzoom),a=Math.max(e+r.maxUnderzooming,this._source.minzoom),s={},u=0,h=t;u<h.length;u+=1){var l=h[u],c=this._addTile(l);i[l.key]=l,c.hasData()||e<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,e,a,i);for(var f=0,p=t;f<p.length;f+=1){var d=p[f],m=this._tiles[d.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){i[g.key]=g;continue}}else{var v=d.children(this._source.maxzoom);if(i[v[0].key]&&i[v[1].key]&&i[v[2].key]&&i[v[3].key])continue}for(var _=m.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var w=d.scaledTo(b);if(n[w.key])break;if(n[w.key]=!0,!(m=this.getTile(w))&&_&&(m=this._addTile(w)),m&&(i[w.key]=w,_=m.wasRequested(),m.hasData()))break}}}return i},r.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],r=void 0,i=this._tiles[t].tileID;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){r=this._loadedParentTiles[i.key];break}e.push(i.key);var n=i.scaledTo(i.overscaledZ-1);if(r=this._getLoadedTile(n))break;i=n}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=r}},r.prototype._addTile=function(e){var r=this._tiles[e.key];if(r)return r;(r=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));var i=Boolean(r);return i||(r=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))),r?(r.uses++,this._tiles[e.key]=r,i||this._source.fire(new t.Event("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null},r.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((function(){r._reloadTile(t,"expired"),delete r._timers[t]}),i))},r.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},r.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},r.prototype.tilesIn=function(e,r,i){var n=this,o=[],a=this.transform;if(!a)return o;for(var s=i?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),h=s.map((function(t){return a.pointCoordinate(t)})),l=this.getIds(),c=1/0,f=1/0,p=-1/0,d=-1/0,m=0,g=h;m<g.length;m+=1){var y=g[m];c=Math.min(c,y.x),f=Math.min(f,y.y),p=Math.max(p,y.x),d=Math.max(d,y.y)}for(var v=function(e){var i=n._tiles[l[e]];if(!i.holdingForFade()){var s=i.tileID,m=Math.pow(2,a.zoom-i.tileID.overscaledZ),g=r*i.queryPadding*t.EXTENT/i.tileSize/m,y=[s.getTilePoint(new t.MercatorCoordinate(c,f)),s.getTilePoint(new t.MercatorCoordinate(p,d))];if(y[0].x-g<t.EXTENT&&y[0].y-g<t.EXTENT&&y[1].x+g>=0&&y[1].y+g>=0){var v=u.map((function(t){return s.getTilePoint(t)})),_=h.map((function(t){return s.getTilePoint(t)}));o.push({tile:i,tileID:s,queryGeometry:v,cameraQueryGeometry:_,scale:m})}}},_=0;_<l.length;_++)v(_);return o},r.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),i=0,n=r;i<n.length;i+=1){var o=n[i];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},r.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ct(this._source.type))for(var e in this._tiles){var r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=t.browser.now())return!0}return!1},r.prototype.setFeatureState=function(t,e,r){this._state.updateState(t=t||"_geojsonTileLayer",e,r)},r.prototype.removeFeatureState=function(t,e,r){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,r)},r.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},r.prototype.setDependencies=function(t,e,r){var i=this._tiles[t];i&&i.setDependencies(e,r)},r.prototype.reloadTilesForDependencies=function(t,e){for(var r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(r,"reloading");this._cache.filter((function(r){return!r.hasDependency(t,e)}))},r}(t.Evented);function Pt(t,e){var r=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Ct(t){return"raster"===t||"image"===t||"video"===t}function Lt(){return new t.window.Worker(Kn.workerUrl)}Tt.maxOverzooming=10,Tt.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",Bt=function(){this.active={}};Bt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Bt.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()},Bt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Bt.prototype.isPreloaded=function(){return!!this.active[Rt]},Bt.prototype.numActive=function(){return Object.keys(this.active).length};var Dt,jt=Math.floor(t.browser.hardwareConcurrency/2);function Ot(){return Dt||(Dt=new Bt),Dt}function Ft(e,r){var i={};for(var n in e)"ref"!==n&&(i[n]=e[n]);return t.refProperties.forEach((function(t){t in r&&(i[t]=r[t])})),i}function Nt(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Ft(t[i],e[t[i].ref]));return t}Bt.workerCount=Math.max(Math.min(jt,6),1);var Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function qt(t,e,r){r.push({command:Ut.addSource,args:[t,e[t]]})}function Vt(t,e,r){e.push({command:Ut.removeSource,args:[t]}),r[t]=!0}function Zt(t,e,r,i){Vt(t,r,i),qt(t,e,r)}function Gt(e,r,i){var n;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;for(n in r[i])if(r[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;return!0}function Jt(e,r,i,n,o,a){var s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:a,args:[n,s,r[s],o]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:a,args:[n,s,r[s],o]}))}function Ht(t){return t.id}function Kt(t,e){return t[e.id]=e,t}var Wt=function(t,e){this.reset(t,e)};Wt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Wt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var r=1,i=this._distances[r],n=e*this.paddedLength+this.padding;i<n&&r<this._distances.length;)i=this._distances[++r];var o=r-1,a=this._distances[o],s=i-a,u=s>0?(n-a)/s:0;return this.points[o].mult(1-u).add(this.points[r].mult(u))};var $t=function(t,e,r){var i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Xt(e,r,i,n,o){var a=t.create();return r?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,n.angle)):t.multiply(a,n.labelPlaneMatrix,e),a}function Yt(e,r,i,n,o){if(r){var a=t.clone(e);return t.scale(a,a,[o,o,1]),i||t.rotateZ(a,a,-n.angle),a}return n.glCoordMatrix}function Qt(e,r){var i=[e.x,e.y,0,1];le(i,i,r);var n=i[3];return{point:new t.Point(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function te(t,e){return.5+t/e*.5}function ee(t,e){var r=t[0]/t[3],i=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&i>=-e[1]&&i<=e[1]}function re(e,r,i,n,o,a,s,u){var h=n?e.textSizeData:e.iconSizeData,l=t.evaluateSizeForZoom(h,i.transform.zoom),c=[256/i.width*2+1,256/i.height*2+1],f=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var p=e.lineVertexArray,d=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,g=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!g)he(v.numGlyphs,f);else{g=!1;var _=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(_,_,r),ee(_,c)){var b=te(i.transform.cameraToCenterDistance,_[3]),w=t.evaluateSizeForFeature(h,l,v),x=s?w/b:w*b,M=new t.Point(v.anchorX,v.anchorY),S=Qt(M,o).point,k={},A=oe(v,x,!1,u,r,o,a,e.glyphOffsetArray,p,f,S,M,k,m);g=A.useVertical,(A.notEnoughRoom||g||A.needsFlipping&&oe(v,x,!0,u,r,o,a,e.glyphOffsetArray,p,f,S,M,k,m).notEnoughRoom)&&he(v.numGlyphs,f)}else he(v.numGlyphs,f)}}n?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function ie(t,e,r,i,n,o,a,s,u,h,l){var c=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(c-1),g=se(t*d,r,i,n,o,a,s.segment,f,p,u,h,l);if(!g)return null;var y=se(t*m,r,i,n,o,a,s.segment,f,p,u,h,l);return y?{first:g,last:y}:null}function ne(e,r,i,n){return e===t.WritingMode.horizontal&&Math.abs(i.y-r.y)>Math.abs(i.x-r.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?r.y<i.y:r.x>i.x)?{needsFlipping:!0}:null}function oe(e,r,i,n,o,a,s,u,h,l,c,f,p,d){var m,g=r/24,y=e.lineOffsetX*g,v=e.lineOffsetY*g;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,w=e.lineStartIndex+e.lineLength,x=ie(g,u,y,v,i,c,f,e,h,a,p);if(!x)return{notEnoughRoom:!0};var M=Qt(x.first.point,s).point,S=Qt(x.last.point,s).point;if(n&&!i){var k=ne(e.writingMode,M,S,d);if(k)return k}m=[x.first];for(var A=e.glyphStartIndex+1;A<_-1;A++)m.push(se(g*u.getoffsetX(A),y,v,i,c,f,e.segment,b,w,h,a,p));m.push(x.last)}else{if(n&&!i){var E=Qt(f,o).point,z=e.lineStartIndex+e.segment+1,I=new t.Point(h.getx(z),h.gety(z)),T=Qt(I,o),P=T.signedDistanceFromCamera>0?T.point:ae(f,I,E,1,o),C=ne(e.writingMode,E,P,d);if(C)return C}var L=se(g*u.getoffsetX(e.glyphStartIndex),y,v,i,c,f,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,h,a,p);if(!L)return{notEnoughRoom:!0};m=[L]}for(var R=0,B=m;R<B.length;R+=1){var D=B[R];t.addDynamicAttributes(l,D.point,D.angle)}return{}}function ae(t,e,r,i,n){var o=Qt(t.add(t.sub(e)._unit()),n).point,a=r.sub(o);return r.add(a._mult(i/a.mag()))}function se(e,r,i,n,o,a,s,u,h,l,c,f){var p=n?e-r:e+r,d=p>0?1:-1,m=0;n&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var g=d>0?u+s:u+s+1,y=o,v=o,_=0,b=0,w=Math.abs(p),x=[];_+b<=w;){if((g+=d)<u||g>=h)return null;if(v=y,x.push(y),void 0===(y=f[g])){var M=new t.Point(l.getx(g),l.gety(g)),S=Qt(M,c);if(S.signedDistanceFromCamera>0)y=f[g]=S.point;else{var k=g-d;y=ae(0===_?a:new t.Point(l.getx(k),l.gety(k)),M,v,w-_+1,c)}}_+=b,b=v.dist(y)}var A=(w-_)/b,E=y.sub(v),z=E.mult(A)._add(v);z._add(E._unit()._perp()._mult(i*d));var I=m+Math.atan2(y.y-v.y,y.x-v.x);return x.push(z),{point:z,angle:I,path:x}}$t.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},$t.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},$t.prototype.insertCircle=function(t,e,r,i){this._forEachCell(e-i,r-i,e+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(i)},$t.prototype._insertBoxCell=function(t,e,r,i,n,o){this.boxCells[n].push(o)},$t.prototype._insertCircleCell=function(t,e,r,i,n,o){this.circleCells[n].push(o)},$t.prototype._query=function(t,e,r,i,n,o){if(r<0||t>this.width||i<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=i){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var h=this.circles[3*u],l=this.circles[3*u+1],c=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:h-c,y1:l-c,x2:h+c,y2:l+c})}return o?a.filter(o):a}return this._forEachCell(t,e,r,i,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?a.length>0:a},$t.prototype._queryCircle=function(t,e,r,i,n){var o=t-r,a=t+r,s=e-r,u=e+r;if(a<0||o>this.width||u<0||s>this.height)return!i&&[];var h=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,h,{hitTest:i,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}},n),i?h.length>0:h},$t.prototype.query=function(t,e,r,i,n){return this._query(t,e,r,i,!1,n)},$t.prototype.hitTest=function(t,e,r,i,n){return this._query(t,e,r,i,!0,n)},$t.prototype.hitTestCircle=function(t,e,r,i){return this._queryCircle(t,e,r,!0,i)},$t.prototype._queryCell=function(t,e,r,i,n,o,a,s){var u=a.seenUids,h=this.boxCells[n];if(null!==h)for(var l=this.bboxes,c=0,f=h;c<f.length;c+=1){var p=f[c];if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=l[d+2]&&e<=l[d+3]&&r>=l[d+0]&&i>=l[d+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:l[d],y1:l[d+1],x2:l[d+2],y2:l[d+3]})}}}var m=this.circleCells[n];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,r,i)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var w=g[b],x=g[b+1],M=g[b+2];o.push({key:this.circleKeys[_],x1:w-M,y1:x-M,x2:w+M,y2:x+M})}}}},$t.prototype._queryCellCircle=function(t,e,r,i,n,o,a,s){var u=a.circle,h=a.seenUids,l=this.boxCells[n];if(null!==l)for(var c=this.bboxes,f=0,p=l;f<p.length;f+=1){var d=p[f];if(!h.box[d]){h.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,c[m+0],c[m+1],c[m+2],c[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var g=this.circleCells[n];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var b=_[v];if(!h.circle[b]){h.circle[b]=!0;var w=3*b;if(this._circlesCollide(y[w],y[w+1],y[w+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},$t.prototype._forEachCell=function(t,e,r,i,n,o,a,s){for(var u=this._convertToXCellCoord(t),h=this._convertToYCellCoord(e),l=this._convertToXCellCoord(r),c=this._convertToYCellCoord(i),f=u;f<=l;f++)for(var p=h;p<=c;p++)if(n.call(this,t,e,r,i,this.xCellCount*p+f,o,a,s))return},$t.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},$t.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},$t.prototype._circlesCollide=function(t,e,r,i,n,o){var a=i-t,s=n-e,u=r+o;return u*u>a*a+s*s},$t.prototype._circleAndRectCollide=function(t,e,r,i,n,o,a){var s=(o-i)/2,u=Math.abs(t-(i+s));if(u>s+r)return!1;var h=(a-n)/2,l=Math.abs(e-(n+h));if(l>h+r)return!1;if(u<=s||l<=h)return!0;var c=u-s,f=l-h;return c*c+f*f<=r*r};var ue=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(t,e){for(var r=0;r<t;r++){var i=e.length;e.resize(i+4),e.float32.set(ue,3*i)}}function le(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t[3]=r[3]*i+r[7]*n+r[15],t}var ce=function(t,e,r){void 0===e&&(e=new $t(t.width+200,t.height+200,25)),void 0===r&&(r=new $t(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function fe(e,r,i){return r*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}ce.prototype.placeCollisionBox=function(t,e,r,i,n){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=r*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,h=t.x2*a+o.point.x,l=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,h,l)||!e&&this.grid.hitTest(s,u,h,l,n)?{box:[],offscreen:!1}:{box:[s,u,h,l],offscreen:this.isOffscreen(s,u,h,l)}},ce.prototype.placeCollisionCircles=function(e,r,i,n,o,a,s,u,h,l,c,f,p){var d=[],m=new t.Point(r.anchorX,r.anchorY),g=Qt(m,a),y=te(this.transform.cameraToCenterDistance,g.signedDistanceFromCamera),v=(l?o/y:o*y)/t.ONE_EM,_=Qt(m,s).point,b=ie(v,n,r.lineOffsetX*v,r.lineOffsetY*v,!1,_,m,r,i,s,{}),w=!1,x=!1,M=!0;if(b){for(var S=.5*f*y+p,k=new t.Point(-100,-100),A=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),E=new Wt,z=b.first,I=b.last,T=[],P=z.path.length-1;P>=1;P--)T.push(z.path[P]);for(var C=1;C<I.path.length;C++)T.push(I.path[C]);var L=2.5*S;if(u){var R=T.map((function(t){return Qt(t,u)}));T=R.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:R.map((function(t){return t.point}))}var B=[];if(T.length>0){for(var D=T[0].clone(),j=T[0].clone(),O=1;O<T.length;O++)D.x=Math.min(D.x,T[O].x),D.y=Math.min(D.y,T[O].y),j.x=Math.max(j.x,T[O].x),j.y=Math.max(j.y,T[O].y);B=D.x>=k.x&&j.x<=A.x&&D.y>=k.y&&j.y<=A.y?[T]:j.x<k.x||D.x>A.x||j.y<k.y||D.y>A.y?[]:t.clipLine([T],k.x,k.y,A.x,A.y)}for(var F=0,N=B;F<N.length;F+=1){var U;E.reset(N[F],.25*S),U=E.length<=.5*S?1:Math.ceil(E.paddedLength/L)+1;for(var q=0;q<U;q++){var V=q/Math.max(U-1,1),Z=E.lerp(V),G=Z.x+100,J=Z.y+100;d.push(G,J,S,0);var H=G-S,K=J-S,W=G+S,$=J+S;if(M=M&&this.isOffscreen(H,K,W,$),x=x||this.isInsideGrid(H,K,W,$),!e&&this.grid.hitTestCircle(G,J,S,c)&&(w=!0,!h))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!h&&w||!x?[]:d,offscreen:M,collisionDetected:w}},ce.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var r=[],i=1/0,n=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var h=u[s],l=new t.Point(h.x+100,h.y+100);i=Math.min(i,l.x),n=Math.min(n,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y),r.push(l)}for(var c={},f={},p=0,d=this.grid.query(i,n,o,a).concat(this.ignoredGrid.query(i,n,o,a));p<d.length;p+=1){var m=d[p],g=m.key;if(void 0===c[g.bucketInstanceId]&&(c[g.bucketInstanceId]={}),!c[g.bucketInstanceId][g.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(r,y)&&(c[g.bucketInstanceId][g.featureIndex]=!0,void 0===f[g.bucketInstanceId]&&(f[g.bucketInstanceId]=[]),f[g.bucketInstanceId].push(g.featureIndex))}}return f},ce.prototype.insertCollisionBox=function(t,e,r,i,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:n},t[0],t[1],t[2],t[3])},ce.prototype.insertCollisionCircles=function(t,e,r,i,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:i,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},ce.prototype.projectAndGetPerspectiveRatio=function(e,r,i){var n=[r,i,0,1];return le(n,n,e),{point:new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},ce.prototype.isOffscreen=function(t,e,r,i){return r<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},ce.prototype.isInsideGrid=function(t,e,r,i){return r>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary},ce.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var pe=function(t,e,r,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&r?1:0,this.placed=r};pe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var de=function(t,e,r,i,n){this.text=new pe(t?t.text:null,e,r,n),this.icon=new pe(t?t.icon:null,e,i,n)};de.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var me=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},ge=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ye=function(t,e,r,i,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=n},ve=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function _e(e,r,i,n,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*r,u=-(a.verticalAlign-.5)*i,h=t.evaluateVariableOffset(e,n);return new t.Point(s+h[0]*o,u+h[1]*o)}function be(e,r,i,n,o,a){var s=e.x1,u=e.x2,h=e.y1,l=e.y2,c=e.anchorPointX,f=e.anchorPointY,p=new t.Point(r,i);return n&&p._rotate(o?a:-a),{x1:s+p.x,y1:h+p.y,x2:u+p.x,y2:l+p.y,anchorPointX:c,anchorPointY:f}}ve.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var we=function(t,e,r,i){this.transform=t.clone(),this.collisionIndex=new ce(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ve(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function xe(t,e,r,i,n){t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0)}we.prototype.getBucketParts=function(e,r,i,n){var o=i.getBucket(r),a=i.latestFeatureIndex;if(o&&a&&r.id===o.layerIds[0]){var s=i.collisionBoxArray,u=o.layers[0].layout,h=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),l=i.tileSize/t.EXTENT,c=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),f="map"===u.get("text-pitch-alignment"),p="map"===u.get("text-rotation-alignment"),d=fe(i,1,this.transform.zoom),m=Xt(c,f,p,this.transform,d),g=null;if(f){var y=Yt(c,f,p,this.transform,d);g=t.multiply([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[o.bucketInstanceId]=new ye(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);var v={bucket:o,layout:u,posMatrix:c,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:h,textPixelRatio:l,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(var _=0,b=o.sortKeyRanges;_<b.length;_+=1){var w=b[_];e.push({sortKey:w.sortKey,symbolInstanceStart:w.symbolInstanceStart,symbolInstanceEnd:w.symbolInstanceEnd,parameters:v})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v})}},we.prototype.attemptAnchorPlacement=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d){var m,g=[c.textOffset0,c.textOffset1],y=_e(t,r,i,g,n),v=this.collisionIndex.placeCollisionBox(be(e,y.x,y.y,o,a,this.transform.angle),l,s,u,h.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(be(d,y.x,y.y,o,a,this.transform.angle),l,s,u,h.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID]&&this.prevPlacement.placements[c.crossTileID].text&&(m=this.prevPlacement.variableOffsets[c.crossTileID].anchor),this.variableOffsets[c.crossTileID]={textOffset:g,width:r,height:i,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(f,t,c,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,c),this.placedOrientations[c.crossTileID]=p),{shift:y,placedGlyphBoxes:v}):void 0},we.prototype.placeLayerBucketPart=function(e,r,i){var n=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,h=o.textLabelPlaneMatrix,l=o.labelToScreenMatrix,c=o.textPixelRatio,f=o.holdingForFade,p=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,m=o.collisionGroup,g=s.get("text-optional"),y=s.get("icon-optional"),v=s.get("text-allow-overlap"),_=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),w="map"===s.get("text-pitch-alignment"),x="none"!==s.get("icon-text-fit"),M="viewport-y"===s.get("symbol-z-order"),S=v&&(_||!a.hasIconData()||y),k=_&&(v||!a.hasTextData()||g);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var A=function(e,o){if(!r[e.crossTileID])if(f)n.placements[e.crossTileID]=new me(!1,!1,!1);else{var p,M=!1,A=!1,E=!0,z=null,I={box:null,offscreen:null},T={box:null,offscreen:null},P=null,C=null,L=0,R=0,B=0;o.textFeatureIndex?L=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var D=o.textBox;if(D){var j=function(r){var i=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!r&&n.prevPlacement){var o=n.prevPlacement.placedOrientations[e.crossTileID];o&&(n.placedOrientations[e.crossTileID]=o,n.markUsedOrientation(a,i=o,e))}return i},O=function(r,i){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var n=0,s=a.writingModes;n<s.length&&(s[n]===t.WritingMode.vertical?(I=i(),T=I):I=r(),!(I&&I.box&&I.box.length));n+=1);else I=r()};if(s.get("text-variable-anchor")){var F=s.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[e.crossTileID]){var N=n.prevPlacement.variableOffsets[e.crossTileID];F.indexOf(N.anchor)>0&&(F=F.filter((function(t){return t!==N.anchor}))).unshift(N.anchor)}var U=function(t,r,i){for(var o=t.x2-t.x1,s=t.y2-t.y1,h=e.textBoxScale,l=x&&!_?r:null,f={box:[],offscreen:!1},p=v?2*F.length:F.length,d=0;d<p;++d){var g=n.attemptAnchorPlacement(F[d%F.length],t,o,s,h,b,w,c,u,m,d>=F.length,e,a,i,l);if(g&&(f=g.placedGlyphBoxes)&&f.box&&f.box.length){M=!0,z=g.shift;break}}return f};O((function(){return U(D,o.iconBox,t.WritingMode.horizontal)}),(function(){var r=o.verticalTextBox;return a.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&e.numVerticalGlyphVertices>0&&r?U(r,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),I&&(M=I.box,E=I.offscreen);var q=j(I&&I.box);if(!M&&n.prevPlacement){var V=n.prevPlacement.variableOffsets[e.crossTileID];V&&(n.variableOffsets[e.crossTileID]=V,n.markUsedJustification(a,V.anchor,e,q))}}else{var Z=function(t,r){var i=n.collisionIndex.placeCollisionBox(t,v,c,u,m.predicate);return i&&i.box&&i.box.length&&(n.markUsedOrientation(a,r,e),n.placedOrientations[e.crossTileID]=r),i};O((function(){return Z(D,t.WritingMode.horizontal)}),(function(){var r=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r?Z(r,t.WritingMode.vertical):{box:null,offscreen:null}})),j(I&&I.box&&I.box.length)}}if(M=(p=I)&&p.box&&p.box.length>0,E=p&&p.offscreen,e.useRuntimeCollisionCircles){var G=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),J=t.evaluateSizeForFeature(a.textSizeData,d,G),H=s.get("text-padding");P=n.collisionIndex.placeCollisionCircles(v,G,a.lineVertexArray,a.glyphOffsetArray,J,u,h,l,i,w,m.predicate,e.collisionCircleDiameter,H),M=v||P.circles.length>0&&!P.collisionDetected,E=E&&P.offscreen}if(o.iconFeatureIndex&&(B=o.iconFeatureIndex),o.iconBox){var K=function(t){var e=x&&z?be(t,z.x,z.y,b,w,n.transform.angle):t;return n.collisionIndex.placeCollisionBox(e,_,c,u,m.predicate)};A=T&&T.box&&T.box.length&&o.verticalIconBox?(C=K(o.verticalIconBox)).box.length>0:(C=K(o.iconBox)).box.length>0,E=E&&C.offscreen}var W=g||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,$=y||0===e.numIconVertices;if(W||$?$?W||(A=A&&M):M=A&&M:A=M=A&&M,M&&p&&p.box&&n.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,T&&T.box&&R?R:L,m.ID),A&&C&&n.collisionIndex.insertCollisionBox(C.box,s.get("icon-ignore-placement"),a.bucketInstanceId,B,m.ID),P&&(M&&n.collisionIndex.insertCollisionCircles(P.circles,s.get("text-ignore-placement"),a.bucketInstanceId,L,m.ID),i)){var X=a.bucketInstanceId,Y=n.collisionCircleArrays[X];void 0===Y&&(Y=n.collisionCircleArrays[X]=new ge);for(var Q=0;Q<P.circles.length;Q+=4)Y.circles.push(P.circles[Q+0]),Y.circles.push(P.circles[Q+1]),Y.circles.push(P.circles[Q+2]),Y.circles.push(P.collisionDetected?1:0)}n.placements[e.crossTileID]=new me(M||S,A||k,E||a.justReloaded),r[e.crossTileID]=!0}};if(M)for(var E=a.getSortedSymbolIndexes(this.transform.angle),z=E.length-1;z>=0;--z){var I=E[z];A(a.symbolInstances.get(I),a.collisionArrays[I])}else for(var T=e.symbolInstanceStart;T<e.symbolInstanceEnd;T++)A(a.symbolInstances.get(T),a.collisionArrays[T]);if(i&&a.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[a.bucketInstanceId];t.invert(P.invProjMatrix,u),P.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},we.prototype.markUsedJustification=function(e,r,i,n){var o;o=n===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(r)];for(var a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:i.crossTileID)}},we.prototype.markUsedOrientation=function(e,r,i){for(var n=r===t.WritingMode.horizontal||r===t.WritingMode.horizontalOnly?r:0,o=r===t.WritingMode.vertical?r:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=n;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)},we.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,r=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],h=n[s];h?(this.opacities[s]=new de(h,i,u.text,u.icon),r=r||u.text!==h.text.placed||u.icon!==h.icon.placed):(this.opacities[s]=new de(null,i,u.text,u.icon,u.skipFade),r=r||u.text||u.icon)}for(var l in n){var c=n[l];if(!this.opacities[l]){var f=new de(c,i,!1,!1);f.isHidden()||(this.opacities[l]=f,r=r||c.text.placed||c.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},we.prototype.updateLayerOpacities=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1){var o=n[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},we.prototype.updateBucketOpacities=function(e,r,i){var n=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new de(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),h=o.get("text-variable-anchor"),l="map"===o.get("text-rotation-alignment"),c="map"===o.get("text-pitch-alignment"),f="none"!==o.get("icon-text-fit"),p=new de(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);for(var d=function(t,e,r){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(r)},m=function(i){var o=e.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,m=o.crossTileID,g=n.opacities[m];r[m]?g=a:g||(n.opacities[m]=g=p),r[m]=!0;var y=o.numIconVertices>0,v=n.placedOrientations[o.crossTileID],_=v===t.WritingMode.vertical,b=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||u>0){var w=Te(g.text);d(e.text,s,_?Pe:w),d(e.text,u,b?Pe:w);var x=g.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||_?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=x||b?1:0);var M=n.variableOffsets[o.crossTileID];M&&n.markUsedJustification(e,M.anchor,o,v);var S=n.placedOrientations[o.crossTileID];S&&(n.markUsedJustification(e,"left",o,S),n.markUsedOrientation(e,S,o))}if(y){var k=Te(g.icon),A=!(f&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,A?k:Pe),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=g.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,A?Pe:k),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var E=e.collisionArrays[i];if(E){var z=new t.Point(0,0);if(E.textBox||E.verticalTextBox){var I=!0;if(h){var T=n.variableOffsets[m];T?(z=_e(T.anchor,T.width,T.height,T.textOffset,T.textBoxScale),l&&z._rotate(c?n.transform.angle:-n.transform.angle)):I=!1}E.textBox&&xe(e.textCollisionBox.collisionVertexArray,g.text.placed,!I||_,z.x,z.y),E.verticalTextBox&&xe(e.textCollisionBox.collisionVertexArray,g.text.placed,!I||b,z.x,z.y)}var P=Boolean(!b&&E.verticalIconBox);E.iconBox&&xe(e.iconCollisionBox.collisionVertexArray,g.icon.placed,P,f?z.x:0,f?z.y:0),E.verticalIconBox&&xe(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!P,f?z.x:0,f?z.y:0)}}},g=0;g<e.symbolInstances.length;g++)m(g);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var y=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=y.invProjMatrix,e.placementViewportMatrix=y.viewportMatrix,e.collisionCircleArray=y.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},we.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},we.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},we.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},we.prototype.stillRecent=function(t,e){var r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t},we.prototype.setStale=function(){this.stale=!0};var Me=Math.pow(2,25),Se=Math.pow(2,24),ke=Math.pow(2,17),Ae=Math.pow(2,16),Ee=Math.pow(2,9),ze=Math.pow(2,8),Ie=Math.pow(2,1);function Te(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*Me+e*Se+r*ke+e*Ae+r*Ee+e*ze+r*Ie+e}var Pe=0,Ce=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ce.prototype.continuePlacement=function(t,e,r,i,n){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,n())return!0;return!1};var Le=function(t,e,r,i,n,o,a){this.placement=new we(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(e,r,i){for(var n=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=r[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ce(s)),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t.EXTENT/2,Be=function(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<e.length;i++){var n=e.get(i),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};Be.prototype.getScaledCoordinates=function(e,r){var i=Re/Math.pow(2,r.canonical.z-this.tileID.canonical.z);return{x:Math.floor((r.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((r.canonical.y*t.EXTENT+e.anchorY)*i)}},Be.prototype.findMatches=function(t,e,r){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,h=a;u<h.length;u+=1){var l=h[u];if(Math.abs(l.coord.x-s.x)<=i&&Math.abs(l.coord.y-s.y)<=i&&!r[l.crossTileID]){r[l.crossTileID]=!0,o.crossTileID=l.crossTileID;break}}}}};var De=function(){this.maxCrossTileID=0};De.prototype.generate=function(){return++this.maxCrossTileID};var je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};je.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var i=this.indexes[r],n={};for(var o in i){var a=i[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[r]=n}this.lng=t},je.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,n)}else{var h=a[t.scaledTo(Number(o)).key];h&&h.findMatches(e.symbolInstances,t,n)}}for(var l=0;l<e.symbolInstances.length;l++){var c=e.symbolInstances.get(l);c.crossTileID||(c.crossTileID=r.generate(),n[c.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Be(t,e.symbolInstances,e.bucketInstanceId),!0},je.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var i=0,n=e.indexedSymbolInstances[r];i<n.length;i+=1)delete this.usedCrossTileIDs[t][n[i].crossTileID]},je.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var i=this.indexes[r];for(var n in i)t[i[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,i[n]),delete i[n],e=!0)}return e};var Oe=function(){this.layerIndexes={},this.crossTileIDs=new De,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Oe.prototype.addLayer=function(t,e,r){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new je);var n=!1,o={};i.handleWrapJump(r);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],h=u.getBucket(t);h&&t.id===h.layerIds[0]&&(h.bucketInstanceId||(h.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,h,this.crossTileIDs)&&(n=!0),o[h.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(n=!0),n},Oe.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[r]||delete this.layerIndexes[r]};var Fe=function(e,r){return t.emitValidationErrors(e,r&&r.filter((function(t){return"source.canvas"!==t.identifier})))},Ne=t.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ue=t.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),qe=function(){var e={},r=t.styleSpec.$version;for(var i in t.styleSpec.$root){var n,o=t.styleSpec.$root[i];o.required&&null!=(n="version"===i?r:"array"===o.type?[]:{})&&(e[i]=n)}return e}(),Ve=function(e){function r(i,n){var o=this;void 0===n&&(n={}),e.call(this),this.map=i,this.dispatcher=new S(Ot(),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new _(i._requestManager,n.localIdeographFontFamily),this.lineAtlas=new M(256,512),this.crossTileSymbolIndex=new Oe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=r.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,r){if(t.triggerPluginCompletionEvent(e),r&&r.every((function(t){return t})))for(var i in a.sourceCaches)a.sourceCaches[i].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var i in o._layers){var n=o._layers[i];n.source===r.id&&o._validateLayer(n)}}}}))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.loadURL=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,r){i._request=null,e?i.fire(new t.ErrorEvent(e)):r&&i._load(r,n)}))},r.prototype.loadJSON=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){i._request=null,i._load(e,!1!==r.validate)}))},r.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(qe,!1)},r.prototype._load=function(e,r){if(!r||!Fe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var n=Nt(this.stylesheet.layers);this._order=n.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=n;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},r.prototype._loadSprite=function(e){var r=this;this._spriteRequest=function(e,r,i){var n,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(r.transformRequest(r.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,a||(a=t,n=e,l())})),h=t.getImage(r.transformRequest(r.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){h=null,a||(a=t,o=e,l())}));function l(){if(a)i(a);else if(n&&o){var e=t.browser.getImageData(o),r={};for(var s in n){var u=n[s],h=u.width,l=u.height,c=u.x,f=u.y,p=u.sdf,d=u.pixelRatio,m=u.stretchX,g=u.stretchY,y=u.content,v=new t.RGBAImage({width:h,height:l});t.RGBAImage.copy(e,v,{x:c,y:f},{x:0,y:0},{width:h,height:l}),r[s]={data:v,pixelRatio:d,sdf:p,stretchX:m,stretchY:g,content:y}}i(null,r)}}return{cancel:function(){u&&(u.cancel(),u=null),h&&(h.cancel(),h=null)}}}(e,this.map._requestManager,(function(e,i){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(i)for(var n in i)r.imageManager.addImage(n,i[n]);r.imageManager.setLoaded(!0),r._availableImages=r.imageManager.listImages(),r.dispatcher.broadcast("setImages",r._availableImages),r.fire(new t.Event("data",{dataType:"style"}))}))},r.prototype._validateLayer=function(e){var r=this.sourceCaches[e.source];if(r){var i=e.sourceLayer;if(i){var n=r.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},r.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},r.prototype._serializeLayers=function(t){for(var e=[],r=0,i=t;r<i.length;r+=1){var n=this._layers[i[r]];"custom"!==n.type&&e.push(n.serialize())}return e},r.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},r.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},r.prototype.update=function(e){if(this._loaded){var r=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var o in(i.length||n.length)&&this._updateWorkerLayers(i,n),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var h=0,l=this._order;h<l.length;h+=1){var c=this._layers[l[h]];c.recalculate(e,this._availableImages),!c.isHidden(e.zoom)&&c.source&&(this.sourceCaches[c.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.Event("data",{dataType:"style"}))}},r.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},r.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},r.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},r.prototype.setState=function(e){var r=this;if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Nt(e.layers);var i=function(e,r){if(!e)return[{command:Ut.setStyle,args:[r]}];var i=[];try{if(!t.deepEqual(e.version,r.version))return[{command:Ut.setStyle,args:[r]}];t.deepEqual(e.center,r.center)||i.push({command:Ut.setCenter,args:[r.center]}),t.deepEqual(e.zoom,r.zoom)||i.push({command:Ut.setZoom,args:[r.zoom]}),t.deepEqual(e.bearing,r.bearing)||i.push({command:Ut.setBearing,args:[r.bearing]}),t.deepEqual(e.pitch,r.pitch)||i.push({command:Ut.setPitch,args:[r.pitch]}),t.deepEqual(e.sprite,r.sprite)||i.push({command:Ut.setSprite,args:[r.sprite]}),t.deepEqual(e.glyphs,r.glyphs)||i.push({command:Ut.setGlyphs,args:[r.glyphs]}),t.deepEqual(e.transition,r.transition)||i.push({command:Ut.setTransition,args:[r.transition]}),t.deepEqual(e.light,r.light)||i.push({command:Ut.setLight,args:[r.light]});var n={},o=[];!function(e,r,i,n){var o;for(o in r=r||{},e=e||{})e.hasOwnProperty(o)&&(r.hasOwnProperty(o)||Vt(o,i,n));for(o in r)r.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],r[o])||("geojson"===e[o].type&&"geojson"===r[o].type&&Gt(e,r,o)?i.push({command:Ut.setGeoJSONSourceData,args:[o,r[o].data]}):Zt(o,r,i,n)):qt(o,r,i))}(e.sources,r.sources,o,n);var a=[];e.layers&&e.layers.forEach((function(t){n[t.source]?i.push({command:Ut.removeLayer,args:[t.id]}):a.push(t)})),i=i.concat(o),function(e,r,i){r=r||[];var n,o,a,s,u,h,l,c=(e=e||[]).map(Ht),f=r.map(Ht),p=e.reduce(Kt,{}),d=r.reduce(Kt,{}),m=c.slice(),g=Object.create(null);for(n=0,o=0;n<c.length;n++)d.hasOwnProperty(a=c[n])?o++:(i.push({command:Ut.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(n=0,o=0;n<f.length;n++)m[m.length-1-n]!==(a=f[f.length-1-n])&&(p.hasOwnProperty(a)?(i.push({command:Ut.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,i.push({command:Ut.addLayer,args:[d[a],h=m[m.length-n]]}),m.splice(m.length-n,0,a),g[a]=!0);for(n=0;n<f.length;n++)if(s=p[a=f[n]],u=d[a],!g[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(l in Jt(s.layout,u.layout,i,a,null,Ut.setLayoutProperty),Jt(s.paint,u.paint,i,a,null,Ut.setPaintProperty),t.deepEqual(s.filter,u.filter)||i.push({command:Ut.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||i.push({command:Ut.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Jt(s[l],u[l],i,a,l.slice(6),Ut.setPaintProperty):t.deepEqual(s[l],u[l])||i.push({command:Ut.setLayerProperty,args:[a,l,u[l]]}));for(l in u)u.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Jt(s[l],u[l],i,a,l.slice(6),Ut.setPaintProperty):t.deepEqual(s[l],u[l])||i.push({command:Ut.setLayerProperty,args:[a,l,u[l]]}))}else i.push({command:Ut.removeLayer,args:[a]}),h=m[m.lastIndexOf(a)+1],i.push({command:Ut.addLayer,args:[u,h]})}(a,r.layers,i)}catch(t){i=[{command:Ut.setStyle,args:[r]}]}return i}(this.serialize(),e).filter((function(t){return!(t.command in Ue)}));if(0===i.length)return!1;var n=i.filter((function(t){return!(t.command in Ne)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(t){return t.command})).join(", ")+".");return i.forEach((function(t){"setTransition"!==t.command&&r[t.command].apply(r,t.args)})),this.stylesheet=e,!0},r.prototype.addImage=function(e,r){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,r),this._afterImageUpdated(e)},r.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},r.prototype.getImage=function(t){return this.imageManager.getImage(t)},r.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},r.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},r.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},r.prototype.addSource=function(e,r,i){var n=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(r).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,r,null,i))){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Tt(e,r,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},r.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+r+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},r.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},r.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},r.prototype.addLayer=function(e,r,i){void 0===i&&(i={}),this._checkLoaded();var n=e.id;if(this.getLayer(n))this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var o;if("custom"===e.type){if(Fe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,"layers."+n,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[o.id]=o.serialize()}var a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.')));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},r.prototype.moveLayer=function(e,r){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==r){var i=this._order.indexOf(e);this._order.splice(i,1);var n=r?this._order.indexOf(r):this._order.length;r&&-1===n?this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},r.prototype.removeLayer=function(e){this._checkLoaded();var r=this._layers[e];if(r){r.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},r.prototype.getLayer=function(t){return this._layers[t]},r.prototype.hasLayer=function(t){return t in this._layers},r.prototype.setLayerZoomRange=function(e,r,i){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===r&&n.maxzoom===i||(null!=r&&(n.minzoom=r),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},r.prototype.setFilter=function(e,r,i){void 0===i&&(i={}),this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,r))return null==r?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",r,null,i)||(n.filter=t.clone$1(r),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},r.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},r.prototype.setLayoutProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,n),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getLayoutProperty=function(e,r){var i=this.getLayer(e);if(i)return i.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},r.prototype.setPaintProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},r.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},r.prototype.setFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=e.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,e.id,r)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.removeFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=this.sourceCaches[i];if(void 0!==n){var o=n.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,e.id,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},r.prototype.getFeatureState=function(e){this._checkLoaded();var r=e.source,i=e.sourceLayer,n=this.sourceCaches[r];if(void 0!==n){if("vector"!==n.getSource().type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},r.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},r.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},r.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},r.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},i={},n=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(r(a)){i[a]=o;for(var s=0,u=t;s<u.length;s+=1){var h=u[s][a];if(h)for(var l=0,c=h;l<c.length;l+=1)n.push(c[l])}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var f=[],p=this._order.length-1;p>=0;p--){var d=this._order[p];if(r(d))for(var m=n.length-1;m>=0;m--){var g=n[m].feature;if(i[g.layer.id]<p)break;f.push(g),n.pop()}else for(var y=0,v=t;y<v.length;y+=1){var _=v[y][d];if(_)for(var b=0,w=_;b<w.length;b+=1)f.push(w[b].feature)}}return f},r.prototype.queryRenderedFeatures=function(e,r,i){r&&r.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",r.filter,null,r);var n={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=r.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[u.source]=!0}}var h=[];for(var l in r.availableImages=this._availableImages,this.sourceCaches)r.layers&&!n[l]||h.push(j(this.sourceCaches[l],this._layers,this._serializedLayers,e,r,i));return this.placement&&h.push(function(t,e,r,i,n,o,a){for(var s={},u=o.queryRenderedSymbols(i),h=[],l=0,c=Object.keys(u).map(Number);l<c.length;l+=1)h.push(a[c[l]]);h.sort(O);for(var f=function(){var r=d[p],i=r.featureIndex.lookupSymbolFeatures(u[r.bucketInstanceId],e,r.bucketIndex,r.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(var o in i){var a=s[o]=s[o]||[],h=i[o];h.sort((function(t,e){var i=r.featureSortOrder;if(i){var n=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(var l=0,c=h;l<c.length;l+=1)a.push(c[l])}},p=0,d=h;p<d.length;p+=1)f();var m=function(e){s[e].forEach((function(i){var n=i.feature,o=r[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}))};for(var g in s)m(g);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(h)},r.prototype.querySourceFeatures=function(e,r){r&&r.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",r.filter,null,r);var i=this.sourceCaches[e];return i?function(t,e){for(var r=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),i=[],n={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(i,e))}return i}(i,r):[]},r.prototype.addSourceType=function(t,e,i){return r.getSourceType(t)?i(new Error('A source type called "'+t+'" already exists.')):(r.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},r.prototype.getLight=function(){return this.light.getLight()},r.prototype.setLight=function(e,r){void 0===r&&(r={}),this._checkLoaded();var i=this.light.getLight(),n=!1;for(var o in e)if(!t.deepEqual(e[o],i[o])){n=!0;break}if(n){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}},r.prototype._validate=function(e,r,i,n,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:i,styleSpec:t.styleSpec},n)))},r.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var r in this.sourceCaches)this.sourceCaches[r].clearTiles(),this.sourceCaches[r].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},r.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},r.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},r.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},r.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},r.prototype._updatePlacement=function(e,r,i,n,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},h=0,l=this._order;h<l.length;h+=1){var c=this._layers[l[h]];if("symbol"===c.type){if(!u[c.source]){var f=this.sourceCaches[c.source];u[c.source]=f.getRenderableIds(!0).map((function(t){return f.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var p=this.crossTileSymbolIndex.addLayer(c,u[c.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Le(e,this._order,o,r,i,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,m=this._order;d<m.length;d+=1){var g=this._layers[m[d]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,u[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},r.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},r.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},r.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},r.prototype.getResource=function(e,r,i){return t.makeRequest(r,i)},r}(t.Evented);Ve.getSourceType=function(t){return B[t]},Ve.setSourceType=function(t,e){B[t]=e},Ve.registerForPluginStateChange=t.registerForPluginStateChange;var Ze=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ge=yr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Je=yr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),He=yr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ke=yr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),We=yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),$e=yr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xe=yr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ye=yr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qe=yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tr=yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),er=yr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),rr=yr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ir=yr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),nr=yr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),or=yr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ar=yr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),sr=yr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ur=yr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),hr=yr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lr=yr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),cr=yr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),fr=yr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),pr=yr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),dr=yr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mr=yr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gr=yr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yr(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute ([\w]+) ([\w]+)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:t=t.replace(r,(function(t,e,r,i,n){return s[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+r+" "+i+" "+n+";\n#else\nuniform "+r+" "+i+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+r+" "+i+" "+n+" = u_"+n+";\n#endif\n"})),vertexSource:e=e.replace(r,(function(t,e,r,i,n){var o="float"===i?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+r+" "+o+" a_"+n+";\nvarying "+r+" "+i+" "+n+";\n#else\nuniform "+r+" "+i+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+r+" "+i+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+r+" "+i+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+r+" "+o+" a_"+n+";\n#else\nuniform "+r+" "+i+" u_"+n+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+r+" "+i+" "+n+" = a_"+n+";\n#else\n    "+r+" "+i+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+r+" "+i+" "+n+" = unpack_mix_"+a+"(a_"+n+", u_"+n+"_t);\n#else\n    "+r+" "+i+" "+n+" = u_"+n+";\n#endif\n"})),staticAttributes:i,staticUniforms:a}}var vr=Object.freeze({__proto__:null,prelude:Ge,background:Je,backgroundPattern:He,circle:Ke,clippingMask:We,heatmap:$e,heatmapTexture:Xe,collisionBox:Ye,collisionCircle:Qe,debug:tr,fill:er,fillOutline:rr,fillOutlinePattern:ir,fillPattern:nr,fillExtrusion:or,fillExtrusionPattern:ar,hillshadePrepare:sr,hillshade:ur,line:hr,lineGradient:lr,linePattern:cr,lineSDF:fr,raster:pr,symbolIcon:dr,symbolSDF:mr,symbolTextAndIcon:gr}),_r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function br(t){for(var e=[],r=0;r<t.length;r++)if(null!==t[r]){var i=t[r].split(" ");e.push(i.pop())}return e}_r.prototype.bind=function(t,e,r,i,n,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==i.length,h=0;!u&&h<i.length;h++)this.boundPaintVertexBuffers[h]!==i[h]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===r&&!u&&this.boundIndexBuffer===n&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,r,i,n,o,a,s)},_r.prototype.freshBind=function(t,e,r,i,n,o,a){var s,u=t.numAttributes,h=this.context,l=h.gl;if(h.extVertexArrayObject)this.vao&&this.destroy(),this.vao=h.extVertexArrayObject.createVertexArrayOES(),h.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=h.currentNumAttributes||0;for(var c=u;c<s;c++)l.disableVertexAttribArray(c)}e.enableAttributes(l,t);for(var f=0,p=r;f<p.length;f+=1)p[f].enableAttributes(l,t);o&&o.enableAttributes(l,t),a&&a.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,n);for(var d=0,m=r;d<m.length;d+=1){var g=m[d];g.bind(),g.setVertexAttribPointers(l,t,n)}o&&(o.bind(),o.setVertexAttribPointers(l,t,n)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(l,t,n)),h.currentNumAttributes=u},_r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wr=function(t,e,r,i,n,o){var a=t.gl;this.program=a.createProgram();for(var s=br(r.staticAttributes),u=i?i.getBinderAttributes():[],h=s.concat(u),l=r.staticUniforms?br(r.staticUniforms):[],c=i?i.getBinderUniforms():[],f=[],p=0,d=l.concat(c);p<d.length;p+=1){var m=d[p];f.indexOf(m)<0&&f.push(m)}var g=i?i.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;");var y=g.concat(Ge.fragmentSource,r.fragmentSource).join("\n"),v=g.concat(Ge.vertexSource,r.vertexSource).join("\n"),_=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,y),a.compileShader(_),a.attachShader(this.program,_);var b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,v),a.compileShader(b),a.attachShader(this.program,b),this.attributes={};var w={};this.numAttributes=h.length;for(var x=0;x<this.numAttributes;x++)h[x]&&(a.bindAttribLocation(this.program,x,h[x]),this.attributes[h[x]]=x);a.linkProgram(this.program),a.deleteShader(b),a.deleteShader(_);for(var M=0;M<f.length;M++){var S=f[M];if(S&&!w[S]){var k=a.getUniformLocation(this.program,S);k&&(w[S]=k)}}this.fixedUniforms=n(t,w),this.binderUniforms=i?i.getUniforms(t,w):[]}}};function xr(t,e,r){var i=1/fe(r,1,e.transform.tileZoom),n=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(r.tileID.canonical.x+r.tileID.wrap*n),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}wr.prototype.draw=function(t,e,r,i,n,o,a,s,u,h,l,c,f,p,d,m){var g,y=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(i),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);p&&p.setUniforms(t,this.binderUniforms,c,{zoom:f});for(var _=(g={},g[y.LINES]=2,g[y.TRIANGLES]=3,g[y.LINE_STRIP]=1,g)[e],b=0,w=l.get();b<w.length;b+=1){var x=w[b],M=x.vaos||(x.vaos={});(M[s]||(M[s]=new _r)).bind(t,this,u,p?p.getPaintVertexBuffers():[],h,x.vertexOffset,d,m),y.drawElements(e,x.primitiveLength*_,y.UNSIGNED_SHORT,x.primitiveOffset*_*2)}}};var Mr=function(e,r,i,n){var o=r.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-r.transform.angle),t.transformMat3(s,s,u);var h=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[h.r,h.g,h.b],u_vertical_gradient:+i,u_opacity:n}},Sr=function(e,r,i,n,o,a,s){return t.extend(Mr(e,r,i,n),xr(a,r,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},kr=function(t){return{u_matrix:t}},Ar=function(e,r,i,n){return t.extend(kr(e),xr(i,r,n))},Er=function(t,e){return{u_matrix:t,u_world:e}},zr=function(e,r,i,n,o){return t.extend(Ar(e,r,i,n),{u_world:o})},Ir=function(e,r,i,n){var o,a,s=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var u=fe(i,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(r.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Tr=function(t,e,r){var i=fe(r,1,e.zoom),n=Math.pow(2,e.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*n),e.pixelsToGLUnits[1]/(i*n)],u_overscale_factor:o}},Pr=function(t,e,r){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}},Cr=function(t,e,r){return void 0===r&&(r=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:r}},Lr=function(t){return{u_matrix:t}},Rr=function(t,e,r,i){return{u_matrix:t,u_extrude_scale:fe(e,1,r),u_intensity:i}},Br=function(e,r,i){var n=e.transform;return{u_matrix:Nr(e,r,i),u_ratio:1/fe(r,1,n.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Dr=function(e,r,i,n){return t.extend(Br(e,r,i),{u_image:0,u_image_height:n})},jr=function(e,r,i,n){var o=e.transform,a=Fr(r,o);return{u_matrix:Nr(e,r,i),u_texsize:r.imageAtlasTexture.size,u_ratio:1/fe(r,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Or=function(e,r,i,n,o){var a=e.lineAtlas,s=Fr(r,e.transform),u="round"===i.layout.get("line-cap"),h=a.getDash(n.from,u),l=a.getDash(n.to,u),c=h.width*o.fromScale,f=l.width*o.toScale;return t.extend(Br(e,r,i),{u_patternscale_a:[s/c,-h.height/2],u_patternscale_b:[s/f,-l.height/2],u_sdfgamma:a.width/(256*Math.min(c,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:l.y,u_mix:o.t})};function Fr(t,e){return 1/fe(t,1,e.tileZoom)}function Nr(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Ur=function(t,e,r,i,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:qr(n.paint.get("raster-hue-rotate"))};var o,a};function qr(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}var Vr,Zr=function(t,e,r,i,n,o,a,s,u,h){var l=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:l.width/l.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+i,u_texsize:h,u_texture:0}},Gr=function(e,r,i,n,o,a,s,u,h,l,c){var f=o.transform;return t.extend(Zr(e,r,i,n,o,a,s,u,h,l),{u_gamma_scale:n?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+c})},Jr=function(e,r,i,n,o,a,s,u,h,l){return t.extend(Gr(e,r,i,n,o,a,s,u,!0,h,!0),{u_texsize_icon:l,u_texture_icon:1})},Hr=function(t,e,r){return{u_matrix:t,u_opacity:e,u_color:r}},Kr=function(e,r,i,n,o,a){return t.extend(function(t,e,r,i){var n=r.imageManager.getPattern(t.from.toString()),o=r.imageManager.getPattern(t.to.toString()),a=r.imageManager.getPixelSize(),s=a.width,u=a.height,h=Math.pow(2,i.tileID.overscaledZ),l=i.tileSize*Math.pow(2,r.transform.tileZoom)/h,c=l*(i.tileID.canonical.x+i.tileID.wrap*h),f=l*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/fe(i,1,r.transform.tileZoom),u_pixel_coord_upper:[c>>16,f>>16],u_pixel_coord_lower:[65535&c,65535&f]}}(n,a,i,o),{u_matrix:e,u_opacity:r})},Wr={fillExtrusion:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fillExtrusionPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,r.u_height_factor),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fill:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},fillPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},fillOutline:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world)}},fillOutlinePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},circle:function(e,r){return{u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,r.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},collisionBox:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,r.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,r.u_overscale_factor)}},collisionCircle:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,r.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,r.u_viewport_size)}},debug:function(e,r){return{u_color:new t.UniformColor(e,r.u_color),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_overlay:new t.Uniform1i(e,r.u_overlay),u_overlay_scale:new t.Uniform1f(e,r.u_overlay_scale)}},clippingMask:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmap:function(e,r){return{u_extrude_scale:new t.Uniform1f(e,r.u_extrude_scale),u_intensity:new t.Uniform1f(e,r.u_intensity),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmapTexture:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_color_ramp:new t.Uniform1i(e,r.u_color_ramp),u_opacity:new t.Uniform1f(e,r.u_opacity)}},hillshade:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_latrange:new t.Uniform2f(e,r.u_latrange),u_light:new t.Uniform2f(e,r.u_light),u_shadow:new t.UniformColor(e,r.u_shadow),u_highlight:new t.UniformColor(e,r.u_highlight),u_accent:new t.UniformColor(e,r.u_accent)}},hillshadePrepare:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_dimension:new t.Uniform2f(e,r.u_dimension),u_zoom:new t.Uniform1f(e,r.u_zoom),u_unpack:new t.Uniform4f(e,r.u_unpack)}},line:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels)}},lineGradient:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_image:new t.Uniform1i(e,r.u_image),u_image_height:new t.Uniform1f(e,r.u_image_height)}},linePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_texsize:new t.Uniform2f(e,r.u_texsize),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_image:new t.Uniform1i(e,r.u_image),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_scale:new t.Uniform3f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},lineSDF:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,r.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,r.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,r.u_sdfgamma),u_image:new t.Uniform1i(e,r.u_image),u_tex_y_a:new t.Uniform1f(e,r.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,r.u_tex_y_b),u_mix:new t.Uniform1f(e,r.u_mix)}},raster:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_tl_parent:new t.Uniform2f(e,r.u_tl_parent),u_scale_parent:new t.Uniform1f(e,r.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,r.u_buffer_scale),u_fade_t:new t.Uniform1f(e,r.u_fade_t),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image0:new t.Uniform1i(e,r.u_image0),u_image1:new t.Uniform1i(e,r.u_image1),u_brightness_low:new t.Uniform1f(e,r.u_brightness_low),u_brightness_high:new t.Uniform1f(e,r.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,r.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,r.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,r.u_spin_weights)}},symbolIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1i(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture)}},symbolSDF:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1i(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,r.u_is_halo)}},symbolTextAndIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1i(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texsize_icon:new t.Uniform2f(e,r.u_texsize_icon),u_texture:new t.Uniform1i(e,r.u_texture),u_texture_icon:new t.Uniform1i(e,r.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,r.u_is_halo)}},background:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_color:new t.UniformColor(e,r.u_color)}},backgroundPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image:new t.Uniform1i(e,r.u_image),u_pattern_tl_a:new t.Uniform2f(e,r.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,r.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,r.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,r.u_pattern_br_b),u_texsize:new t.Uniform2f(e,r.u_texsize),u_mix:new t.Uniform1f(e,r.u_mix),u_pattern_size_a:new t.Uniform2f(e,r.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,r.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,r.u_scale_a),u_scale_b:new t.Uniform1f(e,r.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,r.u_tile_units_to_pixels)}}};function $r(e,r,i,n,o,a,s){for(var u=e.context,h=u.gl,l=e.useProgram("collisionBox"),c=[],f=0,p=0,d=0;d<n.length;d++){var m=n[d],g=r.getTile(m),y=g.getBucket(i);if(y){var v=m.posMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(m.posMatrix,g,o,a));var _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){var w=t.create(),x=v;t.mul(w,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(w,w,y.placementViewportMatrix),c.push({circleArray:b,circleOffset:p,transform:x,invTransform:w}),p=f+=b.length/4}_&&l.draw(u,h.LINES,kt.disabled,At.disabled,e.colorModeForRenderPass(),zt.disabled,Tr(v,e.transform,g),i.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}}if(s&&c.length){var M=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*f),S._trim();for(var k=0,A=0,E=c;A<E.length;A+=1)for(var z=E[A],I=0;I<z.circleArray.length/4;I++){var T=4*I,P=z.circleArray[T+0],C=z.circleArray[T+1],L=z.circleArray[T+2],R=z.circleArray[T+3];S.emplace(k++,P,C,L,R,0),S.emplace(k++,P,C,L,R,1),S.emplace(k++,P,C,L,R,2),S.emplace(k++,P,C,L,R,3)}(!Vr||Vr.length<2*f)&&(Vr=function(e){var r=2*e,i=new t.StructArrayLayout3ui6;i.resize(r),i._trim();for(var n=0;n<r;n++){var o=6*n;i.uint16[o+0]=4*n+0,i.uint16[o+1]=4*n+1,i.uint16[o+2]=4*n+2,i.uint16[o+3]=4*n+2,i.uint16[o+4]=4*n+3,i.uint16[o+5]=4*n+0}return i}(f));for(var B=u.createIndexBuffer(Vr,!0),D=u.createVertexBuffer(S,t.collisionCircleLayout.members,!0),j=0,O=c;j<O.length;j+=1){var F=O[j],N=Pr(F.transform,F.invTransform,e.transform);M.draw(u,h.TRIANGLES,kt.disabled,At.disabled,e.colorModeForRenderPass(),zt.disabled,N,i.id,D,B,t.SegmentVector.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,e.transform.zoom,null,null,null)}D.destroy(),B.destroy()}}var Xr=t.identity(new Float32Array(16));function Yr(e,r,i,n,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*r,h=-(s.verticalAlign-.5)*i,l=t.evaluateVariableOffset(e,n);return new t.Point((u/o+l[0])*a,(h/o+l[1])*a)}function Qr(e,r,i,n,o,a,s,u,h,l,c){var f=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,m={};p.clear();for(var g=0;g<f.length;g++){var y=f.get(g),v=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:n[y.crossTileID];if(v){var _=new t.Point(y.anchorX,y.anchorY),b=Qt(_,i?u:s),w=te(a.cameraToCenterDistance,b.signedDistanceFromCamera),x=o.evaluateSizeForFeature(e.textSizeData,l,y)*w/t.ONE_EM;i&&(x*=e.tilePixelRatio/h);for(var M=Yr(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,x),S=i?Qt(_.add(M),s).point:b.point.add(r?M.rotate(-a.angle):M),k=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,A=0;A<y.numGlyphs;A++)t.addDynamicAttributes(p,S,k);c&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:S,angle:k})}else he(y.numGlyphs,p)}if(c){d.clear();for(var E=e.icon.placedSymbolArray,z=0;z<E.length;z++){var I=E.get(z);if(I.hidden)he(I.numGlyphs,d);else{var T=m[z];if(T)for(var P=0;P<I.numGlyphs;P++)t.addDynamicAttributes(d,T.shiftedAnchor,T.angle);else he(I.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function ti(t,e,r){return r.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function ei(e,r,i,n,o,a,s,u,h,l,c,f){for(var p=e.context,d=p.gl,m=e.transform,g="map"===u,y="map"===h,v=g&&"point"!==i.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==i.layout.get("symbol-sort-key").constantOr(1),w=e.depthModeForSublayer(0,kt.ReadOnly),x=i.layout.get("text-variable-anchor"),M=[],S=0,k=n;S<k.length;S+=1){var A=k[S],E=r.getTile(A),z=E.getBucket(i);if(z){var I=o?z.text:z.icon;if(I&&I.segments.get().length){var T=I.programConfigurations.get(i.id),P=o||z.sdfIcons,C=o?z.textSizeData:z.iconSizeData,L=y||0!==m.pitch,R=e.useProgram(ti(P,o,z),T),B=t.evaluateSizeForZoom(C,m.zoom),D=void 0,j=[0,0],O=void 0,F=void 0,N=null,U=void 0;if(o)O=E.glyphAtlasTexture,F=d.LINEAR,D=E.glyphAtlasTexture.size,z.iconsInText&&(j=E.imageAtlasTexture.size,N=E.imageAtlasTexture,U=L||e.options.rotating||e.options.zooming||"composite"===C.kind||"camera"===C.kind?d.LINEAR:d.NEAREST);else{var q=1!==i.layout.get("icon-size").constantOr(0)||z.iconsNeedLinear;O=E.imageAtlasTexture,F=P||e.options.rotating||e.options.zooming||q||L?d.LINEAR:d.NEAREST,D=E.imageAtlasTexture.size}var V=fe(E,1,e.transform.zoom),Z=Xt(A.posMatrix,y,g,e.transform,V),G=Yt(A.posMatrix,y,g,e.transform,V),J=x&&z.hasTextData(),H="none"!==i.layout.get("icon-text-fit")&&J&&z.hasIconData();v&&re(z,A.posMatrix,e,o,Z,G,y,l);var K=e.translatePosMatrix(A.posMatrix,E,a,s),W=v||o&&x||H?Xr:Z,$=e.translatePosMatrix(G,E,a,s,!0),X=P&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Y={program:R,buffers:I,uniformValues:P?z.iconsInText?Jr(C.kind,B,_,y,e,K,W,$,D,j):Gr(C.kind,B,_,y,e,K,W,$,o,D,!0):Zr(C.kind,B,_,y,e,K,W,$,o,D),atlasTexture:O,atlasTextureIcon:N,atlasInterpolation:F,atlasInterpolationIcon:U,isSDF:P,hasHalo:X};if(b)for(var Q=0,tt=I.segments.get();Q<tt.length;Q+=1){var et=tt[Q];M.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:Y})}else M.push({segments:I.segments,sortKey:0,state:Y})}}}b&&M.sort((function(t,e){return t.sortKey-e.sortKey}));for(var rt=0,it=M;rt<it.length;rt+=1){var nt=it[rt],ot=nt.state;if(p.activeTexture.set(d.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,d.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,ri(ot.buffers,nt.segments,i,e,ot.program,w,c,f,at)),at.u_is_halo=0}ri(ot.buffers,nt.segments,i,e,ot.program,w,c,f,ot.uniformValues)}}function ri(t,e,r,i,n,o,a,s,u){var h=i.context;n.draw(h,h.gl.TRIANGLES,o,a,s,zt.disabled,u,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ii(t,e,r,i,n,o,a){var s,u,h,l,c,f=t.context.gl,p=r.paint.get("fill-pattern"),d=p&&p.constantOr(1),m=r.getCrossfadeParameters();a?(u=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=d?"fillPattern":"fill",s=f.TRIANGLES);for(var g=0,y=i;g<y.length;g+=1){var v=y[g],_=e.getTile(v);if(!d||_.patternsLoaded()){var b=_.getBucket(r);if(b){var w=b.programConfigurations.get(r.id),x=t.useProgram(u,w);d&&(t.context.activeTexture.set(f.TEXTURE0),_.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePaintBuffers(m));var M=p.constantOr(null);if(M&&_.imageAtlas){var S=_.imageAtlas,k=S.patternPositions[M.to.toString()],A=S.patternPositions[M.from.toString()];k&&A&&w.setConstantPatternPositions(k,A)}var E=t.translatePosMatrix(v.posMatrix,_,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){l=b.indexBuffer2,c=b.segments2;var z=[f.drawingBufferWidth,f.drawingBufferHeight];h="fillOutlinePattern"===u&&d?zr(E,t,m,_,z):Er(E,z)}else l=b.indexBuffer,c=b.segments,h=d?Ar(E,t,m,_):kr(E);x.draw(t.context,s,n,t.stencilModeForClipping(v),o,zt.disabled,h,r.id,b.layoutVertexBuffer,l,c,r.paint,t.transform.zoom,w)}}}}function ni(t,e,r,i,n,o,a){for(var s=t.context,u=s.gl,h=r.paint.get("fill-extrusion-pattern"),l=h.constantOr(1),c=r.getCrossfadeParameters(),f=r.paint.get("fill-extrusion-opacity"),p=0,d=i;p<d.length;p+=1){var m=d[p],g=e.getTile(m),y=g.getBucket(r);if(y){var v=y.programConfigurations.get(r.id),_=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",v);l&&(t.context.activeTexture.set(u.TEXTURE0),g.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),v.updatePaintBuffers(c));var b=h.constantOr(null);if(b&&g.imageAtlas){var w=g.imageAtlas,x=w.patternPositions[b.to.toString()],M=w.patternPositions[b.from.toString()];x&&M&&v.setConstantPatternPositions(x,M)}var S=t.translatePosMatrix(m.posMatrix,g,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),k=r.paint.get("fill-extrusion-vertical-gradient"),A=l?Sr(S,t,k,f,m,c,g):Mr(S,t,k,f);_.draw(s,s.gl.TRIANGLES,n,o,a,zt.backCCW,A,r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,t.transform.zoom,v)}}}function oi(e,r,i,n,o,a){var s=e.context,u=s.gl,h=r.fbo;if(h){var l=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,h.colorAttachment.get());var c=function(e,r,i){var n=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),a=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,h,l,c=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(r.tileID.toUnwrapped(),c),u_image:0,u_latrange:(u=r.tileID,h=Math.pow(2,u.canonical.z),l=u.canonical.y,[new t.MercatorCoordinate(0,l/h).toLngLat().lat,new t.MercatorCoordinate(0,(l+1)/h).toLngLat().lat]),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}}(e,r,i);l.draw(s,u.TRIANGLES,n,o,a,zt.disabled,c,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function ai(e,r,i,n,o,a){var s=e.context,u=s.gl,h=r.dem;if(h&&h.data){var l=h.dim,c=h.stride,f=h.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(c),r.demTexture){var p=r.demTexture;p.update(f,{premultiply:!1}),p.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else r.demTexture=new t.Texture(s,f,u.RGBA,{premultiply:!1}),r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=r.fbo;if(!d){var m=new t.Texture(s,{width:l,height:l,data:null},u.RGBA);m.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=r.fbo=s.createFramebuffer(l,l,!0)).colorAttachment.set(m.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,n,o,a,zt.disabled,function(e,r){var i=r.stride,n=t.create();return t.ortho(n,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(n,n,[0,-t.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:r.getUnpackVector()}}(r.tileID,h),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function si(e,r,i,n,o){var a=n.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,h=r?(s-r.timeAdded)/a:-1,l=i.getSource(),c=o.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),f=!r||Math.abs(r.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),p=f&&e.refreshedUponExpiration?1:t.clamp(f?u:1-h,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var ui=new t.Color(1,0,0,1),hi=new t.Color(0,1,0,1),li=new t.Color(0,0,1,1),ci=new t.Color(1,0,1,1),fi=new t.Color(0,1,1,1);function pi(t,e,r,i){mi(t,0,e+r/2,t.transform.width,r,i)}function di(t,e,r,i){mi(t,e-r/2,0,r,t.transform.height,i)}function mi(e,r,i,n,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function gi(e,r,i){var n=e.context,o=n.gl,a=i.posMatrix,s=e.useProgram("debug"),u=kt.disabled,h=At.disabled,l=e.colorModeForRenderPass();n.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(n,o.LINE_STRIP,u,h,l,zt.disabled,Cr(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var c=r.getTileByID(i.key).latestRawTileData,f=Math.floor((c&&c.byteLength||0)/1024),p=r.getTile(i).tileSize,d=512/Math.min(p,512)*(i.overscaledZ/e.transform.zoom)*.5,m=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(m+=" => "+i.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var r=t.debugOverlayCanvas,i=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,r.width,r.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(r),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,m+" "+f+"kb"),s.draw(n,o.TRIANGLES,u,h,Et.alphaBlended,zt.disabled,Cr(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var yi={symbol:function(e,r,i,n,o){if("translucent"===e.renderPass){var a=At.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,r,i,n,o,a,s){for(var u=r.transform,h="map"===o,l="map"===a,c=0,f=e;c<f.length;c+=1){var p=f[c],d=n.getTile(p),m=d.getBucket(i);if(m&&m.text&&m.text.segments.get().length){var g=t.evaluateSizeForZoom(m.textSizeData,u.zoom),y=fe(d,1,r.transform.zoom),v=Xt(p.posMatrix,l,h,r.transform,y),_="none"!==i.layout.get("icon-text-fit")&&m.hasIconData();if(g){var b=Math.pow(2,u.zoom-d.tileID.overscaledZ);Qr(m,h,l,s,t.symbolSize,u,v,p.posMatrix,b,g,_)}}}}(n,e,i,r,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&ei(e,r,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&ei(e,r,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&($r(e,r,i,n,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),$r(e,r,i,n,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,r,i,n){if("translucent"===e.renderPass){var o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),u=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var h=e.context,l=h.gl,c=e.depthModeForSublayer(0,kt.ReadOnly),f=At.disabled,p=e.colorModeForRenderPass(),d=[],m=0;m<n.length;m++){var g=n[m],y=r.getTile(g),v=y.getBucket(i);if(v){var _=v.programConfigurations.get(i.id),b={programConfiguration:_,program:e.useProgram("circle",_),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:Ir(e,g,y,i)};if(u)for(var w=0,x=v.segments.get();w<x.length;w+=1){var M=x[w];d.push({segments:new t.SegmentVector([M]),sortKey:M.sortKey,state:b})}else d.push({segments:v.segments,sortKey:0,state:b})}}u&&d.sort((function(t,e){return t.sortKey-e.sortKey}));for(var S=0,k=d;S<k.length;S+=1){var A=k[S],E=A.state;E.program.draw(h,l.TRIANGLES,c,f,p,zt.disabled,E.uniformValues,i.id,E.layoutVertexBuffer,E.indexBuffer,A.segments,i.paint,e.transform.zoom,E.programConfiguration)}}}},heatmap:function(e,r,i,n){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=At.disabled,u=new Et([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,r){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=r.heatmapFbo;if(n)i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),n=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,r,i){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),i.colorAttachment.set(r)}(t,e,o,n)}}(o,e,i),o.clear({color:t.Color.transparent});for(var h=0;h<n.length;h++){var l=n[h];if(!r.hasRenderableParent(l)){var c=r.getTile(l),f=c.getBucket(i);if(f){var p=f.programConfigurations.get(i.id);e.useProgram("heatmap",p).draw(o,a.TRIANGLES,kt.disabled,s,u,zt.disabled,Rr(l.posMatrix,c,e.transform.zoom,i.paint.get("heatmap-intensity")),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){var i=e.context,n=i.gl,o=r.heatmapFbo;if(o){i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1);var a=r.colorRampTexture;a||(a=r.colorRampTexture=new t.Texture(i,r.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,n.TRIANGLES,kt.disabled,At.disabled,e.colorModeForRenderPass(),zt.disabled,function(e,r,i,n){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:r.paint.get("heatmap-opacity")}}(e,r),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}}(e,i))},line:function(e,r,i,n){if("translucent"===e.renderPass){var o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,kt.ReadOnly),u=e.colorModeForRenderPass(),h=i.paint.get("line-dasharray"),l=i.paint.get("line-pattern"),c=l.constantOr(1),f=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),d=c?"linePattern":h?"lineSDF":f?"lineGradient":"line",m=e.context,g=m.gl,y=!0,v=0,_=n;v<_.length;v+=1){var b=_[v],w=r.getTile(b);if(!c||w.patternsLoaded()){var x=w.getBucket(i);if(x){var M=x.programConfigurations.get(i.id),S=e.context.program.get(),k=e.useProgram(d,M),A=y||k.program!==S,E=l.constantOr(null);if(E&&w.imageAtlas){var z=w.imageAtlas,I=z.patternPositions[E.to.toString()],T=z.patternPositions[E.from.toString()];I&&T&&M.setConstantPatternPositions(I,T)}var P=c?jr(e,w,i,p):h?Or(e,w,i,h,p):f?Dr(e,w,i,x.lineClipsArray.length):Br(e,w,i);if(c)m.activeTexture.set(g.TEXTURE0),w.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),M.updatePaintBuffers(p);else if(h&&(A||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(f){var C=x.gradients[i.id],L=C.texture;if(i.gradientVersion!==C.version){var R=256;if(i.stepInterpolant){var B=r.getSource().maxzoom,D=b.canonical.z===B?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(x.maxLineLength/t.EXTENT*1024*D),256,m.maxTextureSize)}C.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:C.gradient||void 0,clips:x.lineClipsArray}),C.texture?C.texture.update(C.gradient):C.texture=new t.Texture(m,C.gradient,g.RGBA),C.version=i.gradientVersion,L=C.texture}m.activeTexture.set(g.TEXTURE0),L.bind(i.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}k.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(b),u,zt.disabled,P,i.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,i.paint,e.transform.zoom,M,x.layoutVertexBuffer2),y=!1}}}}},fill:function(e,r,i,n){var o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=i.paint.get("fill-pattern"),h=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===h){var l=e.depthModeForSublayer(1,"opaque"===e.renderPass?kt.ReadWrite:kt.ReadOnly);ii(e,r,i,n,l,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var c=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,kt.ReadOnly);ii(e,r,i,n,c,s,!0)}}},"fill-extrusion":function(t,e,r,i){var n=r.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var o=new kt(t.context.gl.LEQUAL,kt.ReadWrite,t.depthRangeFor3D);if(1!==n||r.paint.get("fill-extrusion-pattern").constantOr(1))ni(t,e,r,i,o,At.disabled,Et.disabled),ni(t,e,r,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();ni(t,e,r,i,o,At.disabled,a)}}},hillshade:function(t,e,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=t.depthModeForSublayer(0,kt.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i],u=s[0],h=0,l=s[1];h<l.length;h+=1){var c=l[h],f=e.getTile(c);f.needsHillshadePrepare&&"offscreen"===t.renderPass?ai(t,f,r,o,At.disabled,a):"translucent"===t.renderPass&&oi(t,f,r,o,u[c.overscaledZ],a)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,r,i){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length)for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),h=a instanceof C?[{},i]:t.stencilConfigForOverlap(i),l=h[0],c=h[1],f=c[c.length-1].overscaledZ,p=!t.options.moving,d=0,m=c;d<m.length;d+=1){var g=m[d],y=t.depthModeForSublayer(g.overscaledZ-f,1===r.paint.get("raster-opacity")?kt.ReadWrite:kt.ReadOnly,o.LESS),v=e.getTile(g),_=t.transform.calculatePosMatrix(g.toUnwrapped(),p);v.registerFadeDuration(r.paint.get("raster-fade-duration"));var b=e.findLoadedParent(g,0),w=si(v,b,e,r,t.transform),x=void 0,M=void 0,S="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),v.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,b.tileID.overscaledZ-v.tileID.overscaledZ),M=[v.tileID.canonical.x*x%1,v.tileID.canonical.y*x%1]):v.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var k=Ur(_,M||[0,0],x||1,w,r);a instanceof C?s.draw(n,o.TRIANGLES,y,At.disabled,u,zt.disabled,k,r.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,y,l[g.overscaledZ],u,zt.disabled,k,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,r){var i=r.paint.get("background-color"),n=r.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,h=r.paint.get("background-pattern");if(!t.isPatternMissing(h)){var l=!h&&1===i.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===l){var c=At.disabled,f=t.depthModeForSublayer(0,"opaque"===l?kt.ReadWrite:kt.ReadOnly),p=t.colorModeForRenderPass(),d=t.useProgram(h?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});h&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=r.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var _=v[y],b=t.transform.calculatePosMatrix(_.toUnwrapped()),w=h?Kr(b,n,t,h,{tileID:_,tileSize:u},g):Hr(b,n,i);d.draw(o,a.TRIANGLES,f,c,p,zt.disabled,w,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,r){for(var i=0;i<r.length;i++)gi(t,e,r[i])},custom:function(t,e,r){var i=t.context,n=r.implementation;if("offscreen"===t.renderPass){var o=n.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(n,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(At.disabled);var a="3d"===n.renderingMode?new kt(t.context.gl.LEQUAL,kt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,kt.ReadOnly);i.setDepthMode(a),n.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},vi=function(t,e){this.context=new It(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Tt.maxUnderzooming+Tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Oe,this.gpuTimers={}};vi.prototype.resize=function(e,r){if(this.width=e*t.browser.devicePixelRatio,this.height=r*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,n=this.style._order;i<n.length;i+=1)this.style._layers[n[i]].resize()},vi.prototype.setup=function(){var e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,Ze.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ze.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,P.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ze.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new At({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},vi.prototype.clearStencil=function(){var e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,kt.disabled,this.stencilClearMode,Et.disabled,zt.disabled,Lr(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vi.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,i=r.gl;this.nextStencilID+e.length>256&&this.clearStencil(),r.setColorMode(Et.disabled),r.setDepthMode(kt.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(r,i.TRIANGLES,kt.disabled,new At({func:i.ALWAYS,mask:0},u,255,i.KEEP,i.KEEP,i.REPLACE),Et.disabled,zt.disabled,Lr(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new At({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},vi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new At({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},vi.prototype.stencilConfigForOverlap=function(t){var e,r=this.context.gl,i=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),n=i[i.length-1].overscaledZ,o=i[0].overscaledZ-n+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+n]=new At({func:r.GEQUAL,mask:255},s+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=o,[a,i]}return[(e={},e[n]=At.disabled,e),i]},vi.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Et([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Et.unblended:Et.alphaBlended},vi.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return kt.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new kt(r||this.context.gl.LEQUAL,e,[i,i])},vi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vi.prototype.render=function(e,r){var i=this;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var n=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,h,l={},c={},f={};for(var p in o){var d=o[p];l[p]=d.getVisibleCoordinates(),c[p]=l[p].slice().reverse(),f[p]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<n.length;m++)if(this.style._layers[n[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var g=0,y=n;g<y.length;g+=1){var v=this.style._layers[y[g]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var _=c[v.source];("custom"===v.type||_.length)&&this.renderLayer(this,o[v.source],v,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[n[this.currentLayer]],w=o[b.source],x=l[b.source];this._renderTileClippingMasks(b,x),this.renderLayer(this,w,b,x)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var M=this.style._layers[n[this.currentLayer]],S=o[M.source],k=("symbol"===M.type?f:c)[M.source];this._renderTileClippingMasks(M,l[M.source]),this.renderLayer(this,S,M,k)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(h&&h.id)&&(h=i.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<h.getSource().maxzoom)&&(u=h))})),u&&yi.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;pi(t,t.transform.height-(e.top||0),3,ui),pi(t,e.bottom||0,3,hi),di(t,e.left||0,3,li),di(t,t.transform.width-(e.right||0),3,ci);var r=t.transform.centerPoint;!function(t,e,r,i){mi(t,e-1,r-10,2,20,i),mi(t,e-10,r-1,20,2,i)}(t,r.x,t.transform.height-r.y,fi)}(this),this.context.setDefault()},vi.prototype.renderLayer=function(t,e,r,i){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||i.length)&&(this.id=r.id,this.gpuTimingStart(r),yi[r.type](t,e,r,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},vi.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,r=this.gpuTimers[t.id];r||(r=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),r.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,r.query)}},vi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},vi.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},vi.prototype.queryGpuTimers=function(t){var e={};for(var r in t){var i=t[r],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(i.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i.query),e[r]=o}return e},vi.prototype.translatePosMatrix=function(e,r,i,n,o){if(!i[0]&&!i[1])return e;var a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);i=[i[0]*u-i[1]*s,i[0]*s+i[1]*u]}var h=[o?i[0]:fe(r,i[0],this.transform.zoom),o?i[1]:fe(r,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,h),l},vi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},vi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},vi.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r},vi.prototype.useProgram=function(t,e){this.cache=this.cache||{};var r=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new wr(this.context,t,vr[t],e,Wr[t],this._showOverdrawInspector)),this.cache[r]},vi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vi.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},vi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _i=function(t,e){this.points=t,this.planes=e};_i.fromInvProjectionMatrix=function(e,r,i){var n=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(r){return t.transformMat4([],r,e)})).map((function(e){return t.scale$1([],e,1/e[3]/r*n)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var r=t.sub([],o[e[0]],o[e[1]]),i=t.sub([],o[e[2]],o[e[1]]),n=t.normalize([],t.cross([],r,i)),a=-t.dot(n,o[e[1]]);return n.concat(a)}));return new _i(o,a)};var bi=function(e,r){this.min=e,this.max=r,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};bi.prototype.quadrant=function(e){for(var r=[e%2==0,e<2],i=t.clone$2(this.min),n=t.clone$2(this.max),o=0;o<r.length;o++)i[o]=r[o]?this.min[o]:this.center[o],n[o]=r[o]?this.center[o]:this.max[o];return n[2]=this.max[2],new bi(i,n)},bi.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},bi.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},bi.prototype.intersects=function(e){for(var r=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,n=0;n<e.planes.length;n++){for(var o=e.planes[n],a=0,s=0;s<r.length;s++)a+=t.dot$1(o,r[s])>=0;if(0===a)return 0;a!==r.length&&(i=!1)}if(i)return 2;for(var u=0;u<3;u++){for(var h=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var f=e.points[c][u]-this.min[u];h=Math.min(h,f),l=Math.max(l,f)}if(l<0||h>this.max[u]-this.min[u])return 0}return 1};var wi=function(t,e,r,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=r,this.right=i};wi.prototype.interpolate=function(e,r,i){return null!=r.top&&null!=e.top&&(this.top=t.number(e.top,r.top,i)),null!=r.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,r.bottom,i)),null!=r.left&&null!=e.left&&(this.left=t.number(e.left,r.left,i)),null!=r.right&&null!=e.right&&(this.right=t.number(e.right,r.right,i)),this},wi.prototype.getCenter=function(e,r){var i=t.clamp((this.left+e-this.right)/2,0,e),n=t.clamp((this.top+r-this.bottom)/2,0,r);return new t.Point(i,n)},wi.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wi.prototype.clone=function(){return new wi(this.top,this.bottom,this.left,this.right)},wi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xi=function(e,r,i,n,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Mi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xi.prototype.clone=function(){var t=new xi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Mi.minZoom.get=function(){return this._minZoom},Mi.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Mi.maxZoom.get=function(){return this._maxZoom},Mi.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Mi.minPitch.get=function(){return this._minPitch},Mi.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Mi.maxPitch.get=function(){return this._maxPitch},Mi.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Mi.renderWorldCopies.get=function(){return this._renderWorldCopies},Mi.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Mi.worldSize.get=function(){return this.tileSize*this.scale},Mi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Mi.size.get=function(){return new t.Point(this.width,this.height)},Mi.bearing.get=function(){return-this.angle/Math.PI*180},Mi.bearing.set=function(e){var r=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mi.pitch.get=function(){return this._pitch/Math.PI*180},Mi.pitch.set=function(e){var r=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())},Mi.fov.get=function(){return this._fov/Math.PI*180},Mi.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Mi.zoom.get=function(){return this._zoom},Mi.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Mi.center.get=function(){return this._center},Mi.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Mi.padding.get=function(){return this._edgeInsets.toJSON()},Mi.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Mi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xi.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},xi.prototype.interpolatePadding=function(t,e,r){this._unmodified=!1,this._edgeInsets.interpolate(t,e,r),this._constrain(),this._calcMatrices()},xi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},xi.prototype.getVisibleUnwrappedCoordinates=function(e){var r=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,n.x,o.x,a.x)),u=Math.floor(Math.max(i.x,n.x,o.x,a.x)),h=s-1;h<=u+1;h++)0!==h&&r.push(new t.UnwrappedTileID(h,e));return r},xi.prototype.coveringTiles=function(e){var r=this.coveringZoomLevel(e),i=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var n=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,r),a=[o*n.x,o*n.y,0],s=_i.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=r);var h=function(t){return{aabb:new bi([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},l=[],c=[],f=r,p=e.reparseOverscaled?i:r;if(this._renderWorldCopies)for(var d=1;d<=3;d++)l.push(h(-d)),l.push(h(d));for(l.push(h(0));l.length>0;){var m=l.pop(),g=m.x,y=m.y,v=m.fullyVisible;if(!v){var _=m.aabb.intersects(s);if(0===_)continue;v=2===_}var b=m.aabb.distanceX(a),w=m.aabb.distanceY(a),x=Math.max(Math.abs(b),Math.abs(w));if(m.zoom===f||x>3+(1<<f-m.zoom)-2&&m.zoom>=u)c.push({tileID:new t.OverscaledTileID(m.zoom===f?p:m.zoom,m.wrap,m.zoom,g,y),distanceSq:t.sqrLen([a[0]-.5-g,a[1]-.5-y])});else for(var M=0;M<4;M++){var S=(g<<1)+M%2,k=(y<<1)+(M>>1);l.push({aabb:m.aabb.quadrant(M),zoom:m.zoom+1,x:S,y:k,wrap:m.wrap,fullyVisible:v})}}return c.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},xi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Mi.unmodified.get=function(){return this._unmodified},xi.prototype.zoomScale=function(t){return Math.pow(2,t)},xi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},xi.prototype.project=function(e){var r=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(r)*this.worldSize)},xi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Mi.point.get=function(){return this.project(this.center)},xi.prototype.setLocationAtPoint=function(e,r){var i=this.pointCoordinate(r),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-n.x),o.y-(i.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},xi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},xi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},xi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},xi.prototype.coordinateLocation=function(t){return t.toLngLat()},xi.prototype.pointCoordinate=function(e){var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var n=r[3],o=i[3],a=r[1]/n,s=i[1]/o,u=r[2]/n,h=i[2]/o,l=u===h?0:(0-u)/(h-u);return new t.MercatorCoordinate(t.number(r[0]/n,i[0]/o,l)/this.worldSize,t.number(a,s,l)/this.worldSize)},xi.prototype.coordinatePoint=function(e){var r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},xi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},xi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},xi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xi.prototype.calculatePosMatrix=function(e,r){void 0===r&&(r=!1);var i=e.key,n=r?this._alignedPosMatrixCache:this._posMatrixCache;if(n[i])return n[i];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,r?this.alignedProjMatrix:this.projMatrix,u),n[i]=new Float32Array(u),n[i]},xi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,r,i,n,o=-90,a=90,s=-180,u=180,h=this.size,l=this._unmodified;if(this.latRange){var c=this.latRange;o=t.mercatorYfromLat(c[1])*this.worldSize,e=(a=t.mercatorYfromLat(c[0])*this.worldSize)-o<h.y?h.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=t.mercatorXfromLng(f[0])*this.worldSize,r=(u=t.mercatorXfromLng(f[1])*this.worldSize)-s<h.x?h.x/(u-s):0}var p=this.point,d=Math.max(r||0,e||0);if(d)return this.center=this.unproject(new t.Point(r?(u+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var m=p.y,g=h.y/2;m-g<o&&(n=o+g),m+g>a&&(n=a-g)}if(this.lngRange){var y=p.x,v=h.x/2;y-v<s&&(i=s+v),y+v>u&&(i=u-v)}void 0===i&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==i?i:p.x,void 0!==n?n:p.y))),this._unmodified=l,this._constraining=!1}},xi.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var r=Math.PI/2+this._pitch,i=this._fov*(.5+e.y/this.height),n=Math.sin(i)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-r-i,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),h=this.height/50,l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,h,u),l[8]=2*-e.x/this.width,l[9]=2*e.y/this.height,t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-a,-s,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=t.invert([],this.projMatrix);var c=this.width%2/2,f=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),m=a-Math.round(a)+p*c+d*f,g=s-Math.round(s)+p*f+d*c,y=new Float64Array(l);if(t.translate(y,y,[m>.5?m-1:m,g>.5?g-1:g,0]),this.alignedProjMatrix=y,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=t.create(),t.scale(l,l,[1,-1,1]),t.translate(l,l,[-1,-1,0]),t.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance},xi.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},xi.prototype.getCameraQueryGeometry=function(e){var r=this.getCameraPoint();if(1===e.length)return[e[0],r];for(var i=r.x,n=r.y,o=r.x,a=r.y,s=0,u=e;s<u.length;s+=1){var h=u[s];i=Math.min(i,h.x),n=Math.min(n,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}return[new t.Point(i,n),new t.Point(o,n),new t.Point(o,a),new t.Point(i,a),new t.Point(i,n)]},Object.defineProperties(xi.prototype,Mi);var Si=function(e){var r,i,n,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(r=this._updateHashUnthrottled.bind(this),i=!1,n=null,o=function(){n=null,i&&(r(),n=setTimeout(o,300),i=!1)},function(){return i=!0,n||o(),n})};Si.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Si.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Si.prototype.getHashString=function(e){var r=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,n),a=Math.round(r.lng*o)/o,s=Math.round(r.lat*o)/o,u=this._map.getBearing(),h=this._map.getPitch(),l="";if(l+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(u||h)&&(l+="/"+Math.round(10*u)/10),h&&(l+="/"+Math.round(h)),this._hashName){var c=this._hashName,f=!1,p=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===c?(f=!0,e+"="+l):t})).filter((function(t){return t}));return f||p.push(c+"="+l),"#"+p.join("&")}return"#"+l},Si.prototype._getCurrentHash=function(){var e,r=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===r._hashName&&(e=t)})),(e&&e[1]||"").split("/")):i.split("/")},Si.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Si.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var ki={linearity:.3,easing:t.bezier(0,0,.3,1)},Ai=t.extend({deceleration:2500,maxSpeed:1400},ki),Ei=t.extend({deceleration:20,maxSpeed:1400},ki),zi=t.extend({deceleration:1e3,maxSpeed:360},ki),Ii=t.extend({deceleration:1e3,maxSpeed:90},ki),Ti=function(t){this._map=t,this.clear()};function Pi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Ci(e,r,i){var n=i.maxSpeed,o=i.linearity,a=i.deceleration,s=t.clamp(e*o/(r/1e3),-n,n),u=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*u,amount:s*(u/2)}}Ti.prototype.clear=function(){this._inertiaBuffer=[]},Ti.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Ti.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,r=t.browser.now();e.length>0&&r-e[0].time>160;)e.shift()},Ti.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var r={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},i=0,n=this._inertiaBuffer;i<n.length;i+=1){var o=n[i].settings;r.zoom+=o.zoomDelta||0,r.bearing+=o.bearingDelta||0,r.pitch+=o.pitchDelta||0,o.panDelta&&r.pan._add(o.panDelta),o.around&&(r.around=o.around),o.pinchAround&&(r.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var u=Ci(r.pan.mag(),a,t.extend({},Ai,e||{}));s.offset=r.pan.mult(u.amount/r.pan.mag()),s.center=this._map.transform.center,Pi(s,u)}if(r.zoom){var h=Ci(r.zoom,a,Ei);s.zoom=this._map.transform.zoom+h.amount,Pi(s,h)}if(r.bearing){var l=Ci(r.bearing,a,zi);s.bearing=this._map.transform.bearing+t.clamp(l.amount,-179,179),Pi(s,l)}if(r.pitch){var c=Ci(r.pitch,a,Ii);s.pitch=this._map.transform.pitch+c.amount,Pi(s,c)}if(s.zoom||s.bearing){var f=void 0===r.pinchAround?r.around:r.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Li=function(e){function i(i,n,o,a){void 0===a&&(a={});var s=r.mousePos(n.getCanvasContainer(),o),u=n.unproject(s);e.call(this,i,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=n}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var n={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,n),i}(t.Event),Ri=function(e){function i(i,n,o){var a="touchend"===i?o.changedTouches:o.touches,s=r.touchPos(n.getCanvasContainer(),a),u=s.map((function(t){return n.unproject(t)})),h=s.reduce((function(t,e,r,i){return t.add(e.div(i.length))}),new t.Point(0,0)),l=n.unproject(h);e.call(this,i,{points:s,point:h,lngLats:u,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i;var n={defaultPrevented:{configurable:!0}};return i.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(i.prototype,n),i}(t.Event),Bi=function(t){function e(e,r,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(t.Event),Di=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Di.prototype.reset=function(){delete this._mousedownPos},Di.prototype.wheel=function(t){return this._firePreventable(new Bi(t.type,this._map,t))},Di.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Li(t.type,this._map,t))},Di.prototype.mouseup=function(t){this._map.fire(new Li(t.type,this._map,t))},Di.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Li(t.type,this._map,t))},Di.prototype.dblclick=function(t){return this._firePreventable(new Li(t.type,this._map,t))},Di.prototype.mouseover=function(t){this._map.fire(new Li(t.type,this._map,t))},Di.prototype.mouseout=function(t){this._map.fire(new Li(t.type,this._map,t))},Di.prototype.touchstart=function(t){return this._firePreventable(new Ri(t.type,this._map,t))},Di.prototype.touchmove=function(t){this._map.fire(new Ri(t.type,this._map,t))},Di.prototype.touchend=function(t){this._map.fire(new Ri(t.type,this._map,t))},Di.prototype.touchcancel=function(t){this._map.fire(new Ri(t.type,this._map,t))},Di.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var ji=function(t){this._map=t};ji.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ji.prototype.mousemove=function(t){this._map.fire(new Li(t.type,this._map,t))},ji.prototype.mousedown=function(){this._delayContextMenu=!0},ji.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ji.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Li(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var Oi=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function Fi(t,e){for(var r={},i=0;i<t.length;i++)r[t[i].identifier]=e[i];return r}Oi.prototype.isEnabled=function(){return!!this._enabled},Oi.prototype.isActive=function(){return!!this._active},Oi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Oi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Oi.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(r.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Oi.prototype.mousemoveWindow=function(t,e){if(this._active){var i=e;if(!(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=i,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(n.x,i.x),a=Math.max(n.x,i.x),s=Math.min(n.y,i.y),u=Math.max(n.y,i.y);r.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=a-o+"px",this._box.style.height=u-s+"px"}}},Oi.prototype.mouseupWindow=function(e,i){var n=this;if(this._active&&0===e.button){var o=this._startPos,a=i;if(this.reset(),r.suppressClick(),o.x!==a.x||o.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,a,n._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Oi.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Oi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},Oi.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))};var Ni=function(t){this.reset(),this.numTouches=t.numTouches};Ni.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ni.prototype.touchstart=function(e,r,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){for(var r=new t.Point(0,0),i=0,n=e;i<n.length;i+=1)r._add(n[i]);return r.div(e.length)}(r),this.touches=Fi(i,r)))},Ni.prototype.touchmove=function(t,e,r){if(!this.aborted&&this.centroid){var i=Fi(r,e);for(var n in this.touches){var o=i[n];(!o||o.dist(this.touches[n])>30)&&(this.aborted=!0)}}},Ni.prototype.touchend=function(t,e,r){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){var i=!this.aborted&&this.centroid;if(this.reset(),i)return i}};var Ui=function(t){this.singleTap=new Ni(t),this.numTaps=t.numTaps,this.reset()};Ui.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ui.prototype.touchstart=function(t,e,r){this.singleTap.touchstart(t,e,r)},Ui.prototype.touchmove=function(t,e,r){this.singleTap.touchmove(t,e,r)},Ui.prototype.touchend=function(t,e,r){var i=this.singleTap.touchend(t,e,r);if(i){var n=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(i)<30;if(n&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}};var qi=function(){this._zoomIn=new Ui({numTouches:1,numTaps:2}),this._zoomOut=new Ui({numTouches:2,numTaps:1}),this.reset()};qi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qi.prototype.touchstart=function(t,e,r){this._zoomIn.touchstart(t,e,r),this._zoomOut.touchstart(t,e,r)},qi.prototype.touchmove=function(t,e,r){this._zoomIn.touchmove(t,e,r),this._zoomOut.touchmove(t,e,r)},qi.prototype.touchend=function(t,e,r){var i=this,n=this._zoomIn.touchend(t,e,r),o=this._zoomOut.touchend(t,e,r);return n?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return i.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Vi={0:1,2:2},Zi=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Zi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Zi.prototype._correctButton=function(t,e){return!1},Zi.prototype._move=function(t,e){return{}},Zi.prototype.mousedown=function(t,e){if(!this._lastPoint){var i=r.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}},Zi.prototype.mousemoveWindow=function(t,e){var r=this._lastPoint;if(r)if(t.preventDefault(),function(t,e){var r=Vi[e];return void 0===t.buttons||(t.buttons&r)!==r}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(r,e)},Zi.prototype.mouseupWindow=function(t){this._lastPoint&&r.mouseButton(t)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())},Zi.prototype.enable=function(){this._enabled=!0},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,r){t.prototype.mousedown.call(this,e,r),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Zi),Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var r=.8*(e.x-t.x);if(r)return this._active=!0,{bearingDelta:r}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Zi),Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var r=-.5*(e.y-t.y);if(r)return this._active=!0,{pitchDelta:r}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Zi),Ki=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Ki.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Ki.prototype.touchstart=function(t,e,r){return this._calculateTransform(t,e,r)},Ki.prototype.touchmove=function(t,e,r){if(this._active&&!(r.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,r)},Ki.prototype.touchend=function(t,e,r){this._calculateTransform(t,e,r),this._active&&r.length<this._minTouches&&this.reset()},Ki.prototype.touchcancel=function(){this.reset()},Ki.prototype._calculateTransform=function(e,r,i){i.length>0&&(this._active=!0);var n=Fi(i,r),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var u in n){var h=n[u],l=this._touches[u];l&&(o._add(h),a._add(h.sub(l)),s++,n[u]=h)}if(this._touches=n,!(s<this._minTouches)&&a.mag()){var c=a.div(s);if(this._sum._add(c),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:c}}},Ki.prototype.enable=function(){this._enabled=!0},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};var Wi=function(){this.reset()};function $i(t,e,r){for(var i=0;i<t.length;i++)if(t[i].identifier===r)return e[i]}function Xi(t,e){return Math.log(t/e)/Math.LN2}Wi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wi.prototype._start=function(t){},Wi.prototype._move=function(t,e,r){return{}},Wi.prototype.touchstart=function(t,e,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([e[0],e[1]]))},Wi.prototype.touchmove=function(t,e,r){if(this._firstTwoTouches){t.preventDefault();var i=this._firstTwoTouches,n=i[1],o=$i(r,e,i[0]),a=$i(r,e,n);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},Wi.prototype.touchend=function(t,e,i){if(this._firstTwoTouches){var n=this._firstTwoTouches,o=n[1],a=$i(i,e,n[0]),s=$i(i,e,o);a&&s||(this._active&&r.suppressClick(),this.reset())}},Wi.prototype.touchcancel=function(){this.reset()},Wi.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Wi.prototype.disable=function(){this._enabled=!1,this.reset()},Wi.prototype.isEnabled=function(){return this._enabled},Wi.prototype.isActive=function(){return this._active};var Yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var r=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Xi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xi(this._distance,r),pinchAround:e}},e}(Wi);function Qi(t,e){return 180*t.angleWith(e)/Math.PI}var tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var r=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qi(this._vector,r),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,r=Qi(t,this._startVector);return Math.abs(r)<e},e}(Wi);function en(t){return Math.abs(t.y)>Math.abs(t.x)}var rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,en(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,r){var i=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,n,r.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+n.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,r){if(void 0!==this._valid)return this._valid;var i=t.mag()>=2,n=e.mag()>=2;if(i||n){if(!i||!n)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return en(t)&&en(e)&&o}},e}(Wi),nn={panStep:100,bearingStep:15,pitchStep:10},on=function(){var t=nn;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function an(t){return t*(2-t)}on.prototype.reset=function(){this._active=!1},on.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=0,i=0,n=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),a=1);break;default:return}return{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:an,zoom:r?Math.round(u)+r*(t.shiftKey?2:1):u,bearing:s.getBearing()+i*e._bearingStep,pitch:s.getPitch()+n*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},on.prototype.enable=function(){this._enabled=!0},on.prototype.disable=function(){this._enabled=!1,this.reset()},on.prototype.isEnabled=function(){return this._enabled},on.prototype.isActive=function(){return this._active};var sn=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};sn.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sn.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sn.prototype.isEnabled=function(){return!!this._enabled},sn.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sn.prototype.isZooming=function(){return!!this._zooming},sn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sn.prototype.wheel=function(e){if(this.isEnabled()){var r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),n=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this._active||this._start(e)),e.preventDefault()}},sn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sn.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var i=r.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sn.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var r=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==n&&(n=1/n);var o="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:r.zoom,u=this._startZoom,h=this._easing,l=!1;if("wheel"===this._type&&u&&h){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),f=h(c);a=t.number(u,s,f),c<1?this._frameId||(this._frameId=!0):l=!0}else a=s,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:a-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sn.prototype._smoothOutEasing=function(e){var r=t.ease;if(this._prevEase){var i=this._prevEase,n=(t.browser.now()-i.start)/i.duration,o=i.easing(n+.01)-i.easing(n),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:r},r},sn.prototype.reset=function(){this._active=!1};var un=function(t,e){this._clickZoom=t,this._tapZoom=e};un.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},un.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},un.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},un.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var hn=function(){this.reset()};hn.prototype.reset=function(){this._active=!1},hn.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(r){r.easeTo({duration:300,zoom:r.getZoom()+(t.shiftKey?-1:1),around:r.unproject(e)},{originalEvent:t})}}},hn.prototype.enable=function(){this._enabled=!0},hn.prototype.disable=function(){this._enabled=!1,this.reset()},hn.prototype.isEnabled=function(){return this._enabled},hn.prototype.isActive=function(){return this._active};var ln=function(){this._tap=new Ui({numTouches:1,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ln.prototype.touchstart=function(t,e,r){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=e[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(t,e,r))},ln.prototype.touchmove=function(t,e,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;var i=e[0],n=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,r)},ln.prototype.touchend=function(t,e,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(t,e,r)&&(this._tapTime=t.timeStamp)},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var cn=function(t,e,r){this._el=t,this._mousePan=e,this._touchPan=r};cn.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},cn.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},cn.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},cn.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var fn=function(t,e,r){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=r};fn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},fn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},fn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},fn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var pn=function(t,e,r,i){this._el=t,this._touchZoom=e,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0};pn.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},pn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},pn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},pn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},pn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},pn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var dn=function(t){return t.zoom||t.drag||t.pitch||t.rotate},mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function gn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var yn=function(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ti(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);var n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],u=s[0];r.addEventListener(u,s[1],u===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};yn.prototype.destroy=function(){for(var e=0,i=this._listeners;e<i.length;e+=1){var n=i[e],o=n[0];r.removeEventListener(o,n[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,n[2])}},yn.prototype._addDefaultHandlers=function(t){var e=this._map,r=e.getCanvasContainer();this._add("mapEvent",new Di(e,t));var i=e.boxZoom=new Oi(e,t);this._add("boxZoom",i);var n=new qi,o=new hn;e.doubleClickZoom=new un(o,n),this._add("tapZoom",n),this._add("clickZoom",o);var a=new ln;this._add("tapDragZoom",a);var s=e.touchPitch=new rn;this._add("touchPitch",s);var u=new Ji(t),h=new Hi(t);e.dragRotate=new fn(t,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);var l=new Gi(t),c=new Ki(t);e.dragPan=new cn(r,l,c),this._add("mousePan",l),this._add("touchPan",c,["touchZoom","touchRotate"]);var f=new tn,p=new Yi;e.touchZoomRotate=new pn(r,p,f,a),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var d=e.scrollZoom=new sn(e,this);this._add("scrollZoom",d,["mousePan"]);var m=e.keyboard=new on;this._add("keyboard",m),this._add("blockableMapEvent",new ji(e));for(var g=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];g<y.length;g+=1){var v=y[g];t.interactive&&t[v]&&e[v].enable(t[v])}},yn.prototype._add=function(t,e,r){this._handlers.push({handlerName:t,handler:e,allowed:r}),this._handlersById[t]=e},yn.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,r=this._handlers;e<r.length;e+=1)r[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},yn.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},yn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yn.prototype.isMoving=function(){return Boolean(dn(this._eventsInProgress))||this.isZooming()},yn.prototype._blockedByActive=function(t,e,r){for(var i in t)if(i!==r&&(!e||e.indexOf(i)<0))return!0;return!1},yn.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},yn.prototype._getMapTouches=function(t){for(var e=[],r=0,i=t;r<i.length;r+=1){var n=i[r];this._el.contains(n.target)&&e.push(n)}return e},yn.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var i="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},o={},a={},s=t.touches?this._getMapTouches(t.touches):void 0,u=s?r.touchPos(this._el,s):r.mousePos(this._el,t),h=0,l=this._handlers;h<l.length;h+=1){var c=l[h],f=c.handlerName,p=c.handler,d=c.allowed;if(p.isEnabled()){var m=void 0;this._blockedByActive(a,d,f)?p.reset():p[e||t.type]&&(m=p[e||t.type](t,u,s),this.mergeHandlerResult(n,o,m,f,i),m&&m.needsRenderFrame&&this._triggerRenderFrame()),(m||p.isActive())&&(a[f]=p)}}var g={};for(var y in this._previousActiveHandlers)a[y]||(g[y]=i);this._previousActiveHandlers=a,(Object.keys(g).length||gn(n))&&(this._changes.push([n,o,g]),this._triggerRenderFrame()),(Object.keys(a).length||gn(n))&&this._map._stop(!0),this._updatingCamera=!1;var v=n.cameraAnimation;v&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],v(this._map))}else this.stop(!0)},yn.prototype.mergeHandlerResult=function(e,r,i,n,o){if(i){t.extend(e,i);var a={handlerName:n,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(r.zoom=a),void 0!==i.panDelta&&(r.drag=a),void 0!==i.pitchDelta&&(r.pitch=a),void 0!==i.bearingDelta&&(r.rotate=a)}},yn.prototype._applyChanges=function(){for(var e={},r={},i={},n=0,o=this._changes;n<o.length;n+=1){var a=o[n],s=a[0],u=a[1],h=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(r,u),t.extend(i,h)}this._updateMapTransform(e,r,i),this._changes=[]},yn.prototype._updateMapTransform=function(t,e,r){var i=this._map,n=i.transform;if(!gn(t))return this._fireEvents(e,r,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,h=t.around,l=t.pinchAround;void 0!==l&&(h=l),i._stop(!0),h=h||i.transform.centerPoint;var c=n.pointLocation(o?h.sub(o):h);s&&(n.bearing+=s),u&&(n.pitch+=u),a&&(n.zoom+=a),n.setLocationAtPoint(c,h),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,r,!0)},yn.prototype._fireEvents=function(e,r,i){var n=this,o=dn(this._eventsInProgress),a=dn(e),s={};for(var u in e)this._eventsInProgress[u]||(s[u+"start"]=e[u].originalEvent),this._eventsInProgress[u]=e[u];for(var h in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(h,s[h]);for(var l in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(l,e[l].originalEvent);var c,f={};for(var p in this._eventsInProgress){var d=this._eventsInProgress[p],m=d.handlerName,g=d.originalEvent;this._handlersById[m].isActive()||(delete this._eventsInProgress[p],f[p+"end"]=c=r[m]||g)}for(var y in f)this._fireEvent(y,f[y]);var v=dn(this._eventsInProgress);if(i&&(o||a)&&!v){this._updatingCamera=!0;var _=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(t){return 0!==t&&-n._bearingSnap<t&&t<n._bearingSnap};_?(b(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:c})):(this._map.fire(new t.Event("moveend",{originalEvent:c})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yn.prototype._fireEvent=function(e,r){this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},yn.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new mn("renderFrame",{timeStamp:e})),t._applyChanges()}))},yn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var vn=function(e){function r(r,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},r.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},r.prototype.panBy=function(e,r,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),i)},r.prototype.panTo=function(e,r,i){return this.easeTo(t.extend({center:e},r),i)},r.prototype.getZoom=function(){return this.transform.zoom},r.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},r.prototype.zoomTo=function(e,r,i){return this.easeTo(t.extend({zoom:e},r),i)},r.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},r.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},r.prototype.getBearing=function(){return this.transform.bearing},r.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},r.prototype.getPadding=function(){return this.transform.padding},r.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},r.prototype.rotateTo=function(e,r,i){return this.easeTo(t.extend({bearing:e},r),i)},r.prototype.resetNorth=function(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this},r.prototype.resetNorthPitch=function(e,r){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),r),this},r.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},r.prototype.getPitch=function(){return this.transform.pitch},r.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},r.prototype.cameraForBounds=function(e,r){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,r)},r.prototype._cameraForBoxAndBearing=function(e,r,i,n){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var a=n.padding;n.padding={top:a,bottom:a,right:a,left:a}}n.padding=t.extend(o,n.padding);var s=this.transform,u=s.padding,h=s.project(t.LngLat.convert(e)),l=s.project(t.LngLat.convert(r)),c=h.rotate(-i*Math.PI/180),f=l.rotate(-i*Math.PI/180),p=new t.Point(Math.max(c.x,f.x),Math.max(c.y,f.y)),d=new t.Point(Math.min(c.x,f.x),Math.min(c.y,f.y)),m=p.sub(d),g=(s.width-(u.left+u.right+n.padding.left+n.padding.right))/m.x,y=(s.height-(u.top+u.bottom+n.padding.top+n.padding.bottom))/m.y;if(!(y<0||g<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(g,y)),n.maxZoom),_=t.Point.convert(n.offset),b=new t.Point(_.x+(n.padding.left-n.padding.right)/2,_.y+(n.padding.top-n.padding.bottom)/2).mult(s.scale/s.zoomScale(v));return{center:s.unproject(h.add(l).div(2).sub(b)),zoom:v,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},r.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},r.prototype.fitScreenCoordinates=function(e,r,i,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(r)),i,n),n,o)},r.prototype._fitInternal=function(e,r,i){return e?(delete(r=t.extend(e,r)).padding,r.linear?this.easeTo(r,i):this.flyTo(r,i)):this},r.prototype.jumpTo=function(e,r){this.stop();var i=this.transform,n=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),n&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),o&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),a&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r))},r.prototype.easeTo=function(e,r){var i=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var n=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),h="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:n.padding,p=t.Point.convert(e.offset),d=n.centerPoint.add(p),m=n.pointLocation(d),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);var y,v,_=n.project(m),b=n.project(g).sub(_),w=n.zoomScale(h-o);e.around&&(y=t.LngLat.convert(e.around),v=n.locationPoint(y));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||h!==o,this._rotating=this._rotating||a!==l,this._pitching=this._pitching||c!==s,this._padding=!n.isPaddingEqual(f),this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,x),this._ease((function(e){if(i._zooming&&(n.zoom=t.number(o,h,e)),i._rotating&&(n.bearing=t.number(a,l,e)),i._pitching&&(n.pitch=t.number(s,c,e)),i._padding&&(n.interpolatePadding(u,f,e),d=n.centerPoint.add(p)),y)n.setLocationAtPoint(y,v);else{var m=n.zoomScale(n.zoom-o),g=h>o?Math.min(2,w):Math.max(.5,w),x=Math.pow(g,1-e),M=n.unproject(_.add(b.mult(e*x)).mult(m));n.setLocationAtPoint(n.renderWorldCopies?M.wrap():M,d)}i._fireMoveEvents(r)}),(function(t){i._afterEase(r,t)}),e),this},r.prototype._prepareEase=function(e,r,i){void 0===i&&(i={}),this._moving=!0,r||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))},r.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},r.prototype._afterEase=function(e,r){if(!this._easeId||!r||this._easeId!==r){delete this._easeId;var i=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},r.prototype.flyTo=function(e,r){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),h=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,f="pitch"in e?+e.pitch:u,p="padding"in e?e.padding:o.padding,d=o.zoomScale(l-a),m=t.Point.convert(e.offset),g=o.centerPoint.add(m),y=o.pointLocation(g),v=t.LngLat.convert(e.center||y);this._normalizeCenter(v);var _=o.project(y),b=o.project(v).sub(_),w=e.curve,x=Math.max(o.width,o.height),M=x/d,S=b.mag();if("minZoom"in e){var k=t.clamp(Math.min(e.minZoom,a,l),o.minZoom,o.maxZoom),A=x/o.zoomScale(k-a);w=Math.sqrt(A/S*2)}var E=w*w;function z(t){var e=(M*M-x*x+(t?-1:1)*E*E*S*S)/(2*(t?M:x)*E*S);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}var P=z(0),C=function(t){return T(P)/T(P+w*t)},L=function(t){return x*((T(P)*(I(e=P+w*t)/T(e))-I(P))/E)/S;var e},R=(z(1)-P)/w;if(Math.abs(S)<1e-6||!isFinite(R)){if(Math.abs(x-M)<1e-6)return this.easeTo(e,r);var B=M<x?-1:1;R=Math.abs(Math.log(M/x))/w,L=function(){return 0},C=function(t){return Math.exp(B*w*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/w:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=f!==u,this._padding=!o.isPaddingEqual(p),this._prepareEase(r,!1),this._ease((function(e){var n=e*R,d=1/C(n);o.zoom=1===e?l:a+o.scaleZoom(d),i._rotating&&(o.bearing=t.number(s,c,e)),i._pitching&&(o.pitch=t.number(u,f,e)),i._padding&&(o.interpolatePadding(h,p,e),g=o.centerPoint.add(m));var y=1===e?v:o.unproject(_.add(b.mult(L(n))).mult(d));o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,g),i._fireMoveEvents(r)}),(function(){return i._afterEase(r)}),e),this},r.prototype.isEasing=function(){return!!this._easeFrameId},r.prototype.stop=function(){return this._stop()},r.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var r=this._onEaseEnd;delete this._onEaseEnd,r.call(this,e)}if(!t){var i=this.handlers;i&&i.stop(!1)}return this},r.prototype._ease=function(e,r,i){!1===i.animate||0===i.duration?(e(1),r()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},r.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},r.prototype._normalizeBearing=function(e,r){e=t.wrap(e,-180,180);var i=Math.abs(e-r);return Math.abs(e-360-r)<i&&(e-=360),Math.abs(e+360-r)<i&&(e+=360),e},r.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},r}(t.Evented),_n=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};_n.prototype.getDefaultPosition=function(){return"bottom-right"},_n.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},_n.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},_n.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=r.reduce((function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<r.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},_n.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},_n.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var i in r){var n=r[i];if(n.used){var o=n.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,r){for(var i=r+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},_n.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var bn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};bn.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},bn.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},bn.prototype.getDefaultPosition=function(){return"bottom-left"},bn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},bn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},bn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var wn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};wn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},wn.prototype.remove=function(t){for(var e=this._currentlyRunning,r=0,i=e?this._queue.concat(e):this._queue;r<i.length;r+=1){var n=i[r];if(n.id===t)return void(n.cancelled=!0)}},wn.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var r=0,i=e;r<i.length;r+=1){var n=i[r];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},wn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xn={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mn=t.window.HTMLImageElement,Sn=t.window.HTMLElement,kn=t.window.ImageBitmap,An={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},En=function(i){function n(e){var r=this;if(null!=(e=t.extend({},An,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var n=new xi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(i.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new wn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},xn,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Sn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return r._update(!1)})),this.on("moveend",(function(){return r._update(!1)})),this.on("zoom",(function(){return r._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yn(this,e),this._hash=e.hash&&new Si("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new _n({customAttribution:e.customAttribution})),this.addControl(new bn,e.logoPosition),this.on("style.load",(function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)})),this.on("data",(function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){r.fire(new t.Event(e.dataType+"dataloading",e))}))}i&&(n.__proto__=i),(n.prototype=Object.create(i&&i.prototype)).constructor=n;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,r){if(void 0===r&&e.getDefaultPosition&&(r=e.getDefaultPosition()),void 0===r&&(r="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[r];return-1!==r.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this},n.prototype.resize=function(e){var r=this._containerDimensions(),i=r[0],n=r[1];this._resizeCanvas(i,n),this.transform.resize(i,n),this.painter.resize(i,n);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(t,e,r){var i,n=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:r,delegates:{mousemove:function(i){var a=n.getLayer(e)?n.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?o||(o=!0,r.call(n,new Li(t,n,i.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:r,delegates:{mousemove:function(i){(n.getLayer(e)?n.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,r.call(n,new Li(t,n,i.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(n,new Li(t,n,e.originalEvent)))}}}}return{layer:e,listener:r,delegates:(i={},i[t]=function(t){var i=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,r.call(n,t),delete t.features)},i)}},n.prototype.on=function(t,e,r){if(void 0===r)return i.prototype.on.call(this,t,e);var n=this._createDelegatedListener(t,e,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n),n.delegates)this.on(o,n.delegates[o]);return this},n.prototype.once=function(t,e,r){if(void 0===r)return i.prototype.once.call(this,t,e);var n=this._createDelegatedListener(t,e,r);for(var o in n.delegates)this.once(o,n.delegates[o]);return this},n.prototype.off=function(t,e,r){var n=this;return void 0===r?i.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(i){for(var o=i[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===r){for(var u in s.delegates)n.off(u,s.delegates[u]);return o.splice(a,1),n}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,r){if(!this.style)return[];var i;if(void 0!==r||void 0===e||e instanceof t.Point||Array.isArray(e)||(r=e,e=void 0),r=r||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var n=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[n,new t.Point(o.x,n.y),o,new t.Point(n.x,o.y),n]}return this.style.queryRenderedFeatures(i,r,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,r){return!1!==(r=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ve(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ve(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,r){var i=this;if("string"==typeof e){var n=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(o,(function(e,n){e?i.fire(new t.ErrorEvent(e)):n&&i._updateDiff(n,r)}))}else"object"==typeof e&&this._updateDiff(e,r)},n.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce("Unable to perform style diff: "+(i.message||i.error||i)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var i in r){var n=r[i];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,r){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,r)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,r,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var o=i.sdf;void 0===o&&(o=!1);var a=i.stretchX,s=i.stretchY,u=i.content;if(this._lazyInitEmptyStyle(),r instanceof Mn||kn&&r instanceof kn){var h=t.browser.getImageData(r);this.style.addImage(e,{data:new t.RGBAImage({width:h.width,height:h.height},h.data),pixelRatio:n,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===r.width||void 0===r.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=r;this.style.addImage(e,{data:new t.RGBAImage({width:r.width,height:r.height},new Uint8Array(r.data)),pixelRatio:n,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:l}),l.onAdd&&l.onAdd(this,e)}},n.prototype.updateImage=function(e,r){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=r instanceof Mn||kn&&r instanceof kn?t.browser.getImageData(r):r,o=n.width,a=n.height,s=n.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(r instanceof Mn||kn&&r instanceof kn)),void this.style.updateImage(e,i))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,r){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),r)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},n.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,r,i),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,r,i),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var n=this._controlContainer=r.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=r.create("div","mapboxgl-ctrl-"+t,n)}))},n.prototype._resizeCanvas=function(e,r){var i=t.browser.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*r,this._canvas.style.width=e+"px",this._canvas.style.height=r+"px"},n.prototype._setupPainter=function(){var r=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);i?(this.painter=new vi(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(e){var r,i=this,n=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(r=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,r),n=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=t.browser.now();this.style.zoomHistory.update(s,u);var h=new t.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=h.crossFadingFactor();1===l&&l===this._crossFadingFactor||(a=!0,this._crossFadingFactor=l),this.style.update(h)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-n;o.endQueryEXT(o.TIME_ELAPSED_EXT,r),setTimeout((function(){var e=o.getQueryObjectEXT(r,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(r),i.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var e=i.painter.queryGpuTimers(f);i.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,r=this._controls;e<r.length;e+=1)r[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),zn(this._canvasContainer),zn(this._controlContainer),zn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,r){t.setCacheLimits(e,r)},o.version.get=function(){return t.version},Object.defineProperties(n.prototype,o),n}(vn);function zn(t){t.parentNode&&t.parentNode.removeChild(t)}var In={showCompass:!0,showZoom:!0,visualizePitch:!1},Tn=function(e){var i=this;this.options=t.extend({},In,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return i._map.zoomIn({},{originalEvent:t})})),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return i._map.zoomOut({},{originalEvent:t})})),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){i.options.visualizePitch?i._map.resetNorthPitch({},{originalEvent:t}):i._map.resetNorth({},{originalEvent:t})})),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Tn.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Tn.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Tn.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pn(this._map,this._compass,this.options.visualizePitch)),this._container},Tn.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Tn.prototype._createButton=function(t,e){var i=r.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i},Tn.prototype._setButtonTitle=function(t,e){var r=this._map._getUIString("NavigationControl."+e);t.title=r,t.setAttribute("aria-label",r)};var Pn=function(e,i,n){void 0===n&&(n=!1),this._clickTolerance=10,this.element=i,this.mouseRotate=new Ji({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Hi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(i,"mousedown",this.mousedown),r.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(i,"touchmove",this.touchmove),r.addEventListener(i,"touchend",this.touchend),r.addEventListener(i,"touchcancel",this.reset)};function Cn(e,r,i){if(e=new t.LngLat(e.lng,e.lat),r){var n=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(r);i.locationPoint(n).distSqr(r)<a?e=n:i.locationPoint(o).distSqr(r)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Pn.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),r.disableDrag()},Pn.prototype.move=function(t,e){var r=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&r.setBearing(r.getBearing()+i.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&r.setPitch(r.getPitch()+n.pitchDelta)}},Pn.prototype.off=function(){var t=this.element;r.removeEventListener(t,"mousedown",this.mousedown),r.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(t,"touchmove",this.touchmove),r.removeEventListener(t,"touchend",this.touchend),r.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Pn.prototype.offTemp=function(){r.enableDrag(),r.removeEventListener(t.window,"mousemove",this.mousemove),r.removeEventListener(t.window,"mouseup",this.mouseup)},Pn.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),r.mousePos(this.element,e)),r.addEventListener(t.window,"mousemove",this.mousemove),r.addEventListener(t.window,"mouseup",this.mouseup)},Pn.prototype.mousemove=function(t){this.move(t,r.mousePos(this.element,t))},Pn.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Pn.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Pn.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Pn.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Pn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ln={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rn(t,e,r){var i=t.classList;for(var n in Ln)i.remove("mapboxgl-"+r+"-anchor-"+n);i.add("mapboxgl-"+r+"-anchor-"+e)}var Bn,Dn=function(e){function i(i,n){var o=this;if(e.call(this),(i instanceof t.window.HTMLElement||n)&&(i=t.extend({element:i},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=t.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");var a=r.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=r.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var h=r.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(3.0, 29.0)"),h.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var f=c[l],p=r.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",f.rx),p.setAttributeNS(null,"ry",f.ry),h.appendChild(p)}var d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var m=r.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(m);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var v=r.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var w=r.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(w),u.appendChild(h),u.appendChild(d),u.appendChild(g),u.appendChild(v),u.appendChild(_),a.appendChild(u),a.setAttributeNS(null,"height",41*this._scale+"px"),a.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(a),this._offset=t.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Rn(this._element,this._anchor,"marker"),this._popup=null}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},i.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},i.prototype.getElement=function(){return this._element},i.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},i.prototype._onKeyPress=function(t){var e=t.code,r=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==r&&13!==r||this.togglePopup()},i.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},i.prototype.getPopup=function(){return this._popup},i.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},i.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Cn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,Ln[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+i+" "+e)}},i.prototype.getOffset=function(){return this._offset},i.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},i.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},i.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},i.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},i.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},i.prototype.isDraggable=function(){return this._draggable},i.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},i.prototype.getRotation=function(){return this._rotation},i.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},i.prototype.getRotationAlignment=function(){return this._rotationAlignment},i.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},i.prototype.getPitchAlignment=function(){return this._pitchAlignment},i}(t.Evented),jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},On=0,Fn=!1,Nn=function(e){function i(r){e.call(this),this.options=t.extend({},jn,r),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(e){var i;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Bn?i(Bn):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){i(Bn="denied"!==t.state)})):i(Bn=!!t.window.navigator.geolocation),this._container},i.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,On=0,Fn=!1},i.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),r=t.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())},i.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},i.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},i.prototype._updateCamera=function(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,n=this._map.getBearing(),o=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(i),o,{geolocateSource:!0})},i.prototype._updateMarker=function(e){if(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},i.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),r=this._map.unproject([1,t]),i=e.distanceTo(r),n=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},i.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},i.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Fn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},i.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},i.prototype._setupUI=function(e){var i=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Dn(this._dotElement),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Dn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==i._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new t.Event("trackuserlocationend")))}))},i.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":On--,Fn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++On>1?(e={maximumAge:6e5,timeout:0},Fn=!0):(e=this.options.positionOptions,Fn=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},i.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},i}(t.Evented),Un={maxWidth:100,unit:"metric"},qn=function(e){this.options=t.extend({},Un,e),t.bindAll(["_onMove","setUnit"],this)};function Vn(t,e,r){var i=r&&r.maxWidth||100,n=t._container.clientHeight/2,o=t.unproject([0,n]),a=t.unproject([i,n]),s=o.distanceTo(a);if(r&&"imperial"===r.unit){var u=3.2808*s;u>5280?Zn(e,i,u/5280,t._getUIString("ScaleControl.Miles")):Zn(e,i,u,t._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?Zn(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Zn(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers")):Zn(e,i,s,t._getUIString("ScaleControl.Meters"))}function Zn(t,e,r,i){var n,o,a,s=(n=r,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=(a=n/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/r)+"px",t.innerHTML=s+"&nbsp;"+i}qn.prototype.getDefaultPosition=function(){return"bottom-left"},qn.prototype._onMove=function(){Vn(this._map,this._container,this.options)},qn.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qn.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qn.prototype.setUnit=function(t){this.options.unit=t,Vn(this._map,this._container,this.options)};var Gn=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gn.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Gn.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gn.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Gn.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gn.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Gn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Gn.prototype._isFullscreen=function(){return this._fullscreen},Gn.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Gn.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Jn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Hn=function(e){function i(r){e.call(this),this.options=t.extend(Object.create(Jn),r),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},i.prototype.isOpen=function(){return!!this._map},i.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},i.prototype.getLngLat=function(){return this._lngLat},i.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},i.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},i.prototype.getElement=function(){return this._container},i.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},i.prototype.setHTML=function(e){var r,i=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");for(n.innerHTML=e;r=n.firstChild;)i.appendChild(r);return this.setDOMContent(i)},i.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},i.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},i.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},i.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},i.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},i.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},i.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},i.prototype._onMouseUp=function(t){this._update(t.point)},i.prototype._onMouseMove=function(t){this._update(t.point)},i.prototype._onDrag=function(t){this._update(t.point)},i.prototype._update=function(e){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return i._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cn(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(r){if(r){if("number"==typeof r){var i=Math.round(Math.sqrt(.5*Math.pow(r,2)));return{center:new t.Point(0,0),top:new t.Point(0,r),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-r),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(r,0),right:new t.Point(-r,0)}}if(r instanceof t.Point||Array.isArray(r)){var n=t.Point.convert(r);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(r.center||[0,0]),top:t.Point.convert(r.top||[0,0]),"top-left":t.Point.convert(r["top-left"]||[0,0]),"top-right":t.Point.convert(r["top-right"]||[0,0]),bottom:t.Point.convert(r.bottom||[0,0]),"bottom-left":t.Point.convert(r["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(r["bottom-right"]||[0,0]),left:t.Point.convert(r.left||[0,0]),right:t.Point.convert(r.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,h=this._container.offsetHeight;s=n.y+a.bottom.y<h?["top"]:n.y>this._map.transform.height-h?["bottom"]:[],n.x<u/2?s.push("left"):n.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var l=n.add(a[o]).round();r.setTransform(this._container,Ln[o]+" translate("+l.x+"px,"+l.y+"px)"),Rn(this._container,o,"popup")}},i.prototype._onClose=function(){this.remove()},i}(t.Evented),Kn={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:En,NavigationControl:Tn,GeolocateControl:Nn,AttributionControl:_n,ScaleControl:qn,FullscreenControl:Gn,Popup:Hn,Marker:Dn,Style:Ve,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ot().acquire(Rt)},clearPrewarmedResources:function(){var t=Dt;t&&t.isPreloaded()&&1===t.numActive()&&(t.release(Rt),Dt=null)},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Bt.workerCount},set workerCount(t){Bt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Kn})),r}()},e1d3:function(t,e,r){(function(e){var i=r("3337"),n=r("37e6");t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function s(t,r,i){Array.isArray(t)||(t=t.toArray());var n=new e(t);if(i&&n.length<i){var o=new e(i-n.length);o.fill(0),n=e.concat([o,n])}return r?n.toString(r):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,r,i){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var i=new n(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}}).call(this,r("1c35").Buffer)},e666:function(t,e,r){"use strict";(function(e){var i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var n=r("4250"),o=r("19ea");r("3fb5")(h,n);for(var a=i(o.prototype),s=0;s<a.length;s++){var u=a[s];h.prototype[u]||(h.prototype[u]=o.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);n.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||e.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r("f28c"))},e683:function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},e85f:function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},e9cc:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(r("8827")),n=o(r("57ba"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){(0,i.default)(this,t),this.eventHash={click:[],mouseup:[],mousemove:[],mouseover:[],mouseleave:[],contextmenu:[],dragend:[],dragstart:[],zoomend:[],zoomstart:[],movestart:[]},this.gl=e}return(0,n.default)(t,[{key:"on",value:function(t,e,r){"function"==typeof e&&(r=e,e=null);var i;i=t.split(".")[1];var n=t.split(".")[0];!this.eventHash[n]&&(this.eventHash[n]=[]),this.eventHash[n].push({namespace:i,fn:r,layer:e}),e?this.gl.on(n,e,r):this.gl.on(n,r)}},{key:"off",value:function(t,e,r){var i=this;"function"==typeof e&&(r=e,e=null);var n;n=t.split(".")[1];var o=t.split(".")[0];return(r?this.eventHash[o].filter((function(t){return t.fn==r&&t.layer==e})):n?this.eventHash[o].filter((function(t){return t.namespace==n&&t.layer==e})):this.eventHash[o].filter((function(t){return t.layer==e}))).forEach((function(t){var r=i.eventHash[o].indexOf(t);i.eventHash[o].splice(r,1),e?i.gl.off(o,e,t.fn):i.gl.off(o,t.fn)})),this}},{key:"offAll",value:function(){var t=this,e=function(e){t.eventHash[e].forEach((function(r){r.layer?t.gl.off(e,r.layer,r.fn):t.gl.off(e,r.fn)}))};for(var r in this.eventHash)e(r);this.eventHash={}}}]),t}();e.default=a,t.exports=e.default},ea53:function(t,e,r){"use strict";var i=r("80af"),n=r("f3a3"),o=n.getNAF,a=n.getJSF,s=n.assert;function u(t,e){this.type=t,this.p=new i(e.p,16),this.red=e.prime?i.red(e.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=e.n&&new i(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var r=t._getDoubles(),i=o(e,1,this._bitLength),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;for(var a=[],u=0;u<i.length;u+=r.step){var h=0;for(e=u+r.step-1;e>=u;e--)h=(h<<1)+i[e];a.push(h)}for(var l=this.jpoint(null,null,null),c=this.jpoint(null,null,null),f=n;f>0;f--){for(u=0;u<a.length;u++){(h=a[u])===f?c=c.mixedAdd(r.points[u]):h===-f&&(c=c.mixedAdd(r.points[u].neg()))}l=l.add(c)}return l.toP()},u.prototype._wnafMul=function(t,e){var r=4,i=t._getNAFPoints(r);r=i.wnd;for(var n=i.points,a=o(e,r,this._bitLength),u=this.jpoint(null,null,null),h=a.length-1;h>=0;h--){for(e=0;h>=0&&0===a[h];h--)e++;if(h>=0&&e++,u=u.dblp(e),h<0)break;var l=a[h];s(0!==l),u="affine"===t.type?l>0?u.mixedAdd(n[l-1>>1]):u.mixedAdd(n[-l-1>>1].neg()):l>0?u.add(n[l-1>>1]):u.add(n[-l-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,r,i,n){for(var s=this._wnafT1,u=this._wnafT2,h=this._wnafT3,l=0,c=0;c<i;c++){var f=(k=e[c])._getNAFPoints(t);s[c]=f.wnd,u[c]=f.points}for(c=i-1;c>=1;c-=2){var p=c-1,d=c;if(1===s[p]&&1===s[d]){var m=[e[p],null,null,e[d]];0===e[p].y.cmp(e[d].y)?(m[1]=e[p].add(e[d]),m[2]=e[p].toJ().mixedAdd(e[d].neg())):0===e[p].y.cmp(e[d].y.redNeg())?(m[1]=e[p].toJ().mixedAdd(e[d]),m[2]=e[p].add(e[d].neg())):(m[1]=e[p].toJ().mixedAdd(e[d]),m[2]=e[p].toJ().mixedAdd(e[d].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=a(r[p],r[d]);l=Math.max(y[0].length,l),h[p]=new Array(l),h[d]=new Array(l);for(var v=0;v<l;v++){var _=0|y[0][v],b=0|y[1][v];h[p][v]=g[3*(_+1)+(b+1)],h[d][v]=0,u[p]=m}}else h[p]=o(r[p],s[p],this._bitLength),h[d]=o(r[d],s[d],this._bitLength),l=Math.max(h[p].length,l),l=Math.max(h[d].length,l)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(c=l;c>=0;c--){for(var M=0;c>=0;){var S=!0;for(v=0;v<i;v++)x[v]=0|h[v][c],0!==x[v]&&(S=!1);if(!S)break;M++,c--}if(c>=0&&M++,w=w.dblp(M),c<0)break;for(v=0;v<i;v++){var k,A=x[v];0!==A&&(A>0?k=u[v][A-1>>1]:A<0&&(k=u[v][-A-1>>1].neg()),w="affine"===k.type?w.mixedAdd(k):w.add(k))}}for(c=0;c<i;c++)u[c]=null;return n?w:w.toP()},u.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=n.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(t){return this.encode(t,!0)},h.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},h.prototype.encode=function(t,e){return n.encode(this._encode(e),t)},h.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},h.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},h.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<e;n+=t){for(var o=0;o<t;o++)i=i.dbl();r.push(i)}return{step:t,points:r}},h.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)e[n]=e[n-1].add(i);return{wnd:t,points:e}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},edc9:function(t,e,r){"use strict";var i=r("c3c0"),n=r("da3e");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=i.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=i.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,i=new Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=t>>>24&255,i[n++]=t>>>16&255,i[n++]=t>>>8&255,i[n++]=255&t}else for(i[n++]=255&t,i[n++]=t>>>8&255,i[n++]=t>>>16&255,i[n++]=t>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i}},ee93:function(t,e,r){"use strict";var i=r("9d8a").codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}(o||n);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||l()},h=e._writableState&&e._writableState.finished,l=function(){s=!1,h=!0,a||o.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,c=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!c?(e._readableState&&e._readableState.ended||(t=new i),o.call(e,t)):s&&!h?(e._writableState&&e._writableState.ended||(t=new i),o.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",l),e.on("abort",d),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",l),e.removeListener("abort",d),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},ef3a:function(t,e,r){"use strict";const i=r("343e"),n=r("20f6"),o=r("3fb5");function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(n[t])),this.decoders[t]},a.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i[t])),this.encoders[t]},a.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},f12a:function(t,e,r){t.exports=r("7e25").EventEmitter},f1c8:function(t,e,r){"use strict";t.exports=l;var i=r("d113").codes,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,a=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,u=r("5e7d");function h(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r("3fb5")(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new n("_transform()"))},l.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},f3a3:function(t,e,r){"use strict";var i=e,n=r("80af"),o=r("da3e"),a=r("7658");i.assert=o,i.toArray=a.toArray,i.zero2=a.zero2,i.toHex=a.toHex,i.encode=a.encode,i.getNAF=function(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,o=t.clone(),a=0;a<i.length;a++){var s,u=o.andln(n-1);o.isOdd()?(s=u>(n>>1)-1?(n>>1)-u:u,o.isubn(s)):s=0,i[a]=s,o.iushrn(1)}return i},i.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0;t.cmpn(-i)>0||e.cmpn(-n)>0;){var o,a,s,u=t.andln(3)+i&3,h=e.andln(3)+n&3;if(3===u&&(u=-1),3===h&&(h=-1),0==(1&u))o=0;else o=3!==(s=t.andln(7)+i&7)&&5!==s||2!==h?u:-u;if(r[0].push(o),0==(1&h))a=0;else a=3!==(s=e.andln(7)+n&7)&&5!==s||2!==u?h:-h;r[1].push(a),2*i===o+1&&(i=1-i),2*n===a+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r},i.cachedProperty=function(t,e,r){var i="_"+e;t.prototype[e]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function(t){return new n(t,"hex","le")}},f460:function(t,e,r){var i=r("98e6"),n=r("8707").Buffer;function o(t){var e=n.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var r,a=n.alloc(0),s=0;a.length<e;)r=o(s++),a=n.concat([a,i("sha1").update(t).update(r).digest()]);return a.slice(0,e)}},f576:function(t,e,r){"use strict";var i=r("3fb5"),n=r("93e6"),o=r("8707").Buffer,a=new Array(16);function s(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function h(t,e,r,i,n,o,a){return u(t+(e&r|~e&i)+n+o|0,a)+e|0}function l(t,e,r,i,n,o,a){return u(t+(e&i|r&~i)+n+o|0,a)+e|0}function c(t,e,r,i,n,o,a){return u(t+(e^r^i)+n+o|0,a)+e|0}function f(t,e,r,i,n,o,a){return u(t+(r^(e|~i))+n+o|0,a)+e|0}i(s,n),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,i=this._b,n=this._c,o=this._d;r=h(r,i,n,o,t[0],3614090360,7),o=h(o,r,i,n,t[1],3905402710,12),n=h(n,o,r,i,t[2],606105819,17),i=h(i,n,o,r,t[3],3250441966,22),r=h(r,i,n,o,t[4],4118548399,7),o=h(o,r,i,n,t[5],1200080426,12),n=h(n,o,r,i,t[6],2821735955,17),i=h(i,n,o,r,t[7],4249261313,22),r=h(r,i,n,o,t[8],1770035416,7),o=h(o,r,i,n,t[9],2336552879,12),n=h(n,o,r,i,t[10],4294925233,17),i=h(i,n,o,r,t[11],2304563134,22),r=h(r,i,n,o,t[12],1804603682,7),o=h(o,r,i,n,t[13],4254626195,12),n=h(n,o,r,i,t[14],2792965006,17),r=l(r,i=h(i,n,o,r,t[15],1236535329,22),n,o,t[1],4129170786,5),o=l(o,r,i,n,t[6],3225465664,9),n=l(n,o,r,i,t[11],643717713,14),i=l(i,n,o,r,t[0],3921069994,20),r=l(r,i,n,o,t[5],3593408605,5),o=l(o,r,i,n,t[10],38016083,9),n=l(n,o,r,i,t[15],3634488961,14),i=l(i,n,o,r,t[4],3889429448,20),r=l(r,i,n,o,t[9],568446438,5),o=l(o,r,i,n,t[14],3275163606,9),n=l(n,o,r,i,t[3],4107603335,14),i=l(i,n,o,r,t[8],1163531501,20),r=l(r,i,n,o,t[13],2850285829,5),o=l(o,r,i,n,t[2],4243563512,9),n=l(n,o,r,i,t[7],1735328473,14),r=c(r,i=l(i,n,o,r,t[12],2368359562,20),n,o,t[5],4294588738,4),o=c(o,r,i,n,t[8],2272392833,11),n=c(n,o,r,i,t[11],1839030562,16),i=c(i,n,o,r,t[14],4259657740,23),r=c(r,i,n,o,t[1],2763975236,4),o=c(o,r,i,n,t[4],1272893353,11),n=c(n,o,r,i,t[7],4139469664,16),i=c(i,n,o,r,t[10],3200236656,23),r=c(r,i,n,o,t[13],681279174,4),o=c(o,r,i,n,t[0],3936430074,11),n=c(n,o,r,i,t[3],3572445317,16),i=c(i,n,o,r,t[6],76029189,23),r=c(r,i,n,o,t[9],3654602809,4),o=c(o,r,i,n,t[12],3873151461,11),n=c(n,o,r,i,t[15],530742520,16),r=f(r,i=c(i,n,o,r,t[2],3299628645,23),n,o,t[0],4096336452,6),o=f(o,r,i,n,t[7],1126891415,10),n=f(n,o,r,i,t[14],2878612391,15),i=f(i,n,o,r,t[5],4237533241,21),r=f(r,i,n,o,t[12],1700485571,6),o=f(o,r,i,n,t[3],2399980690,10),n=f(n,o,r,i,t[10],4293915773,15),i=f(i,n,o,r,t[1],2240044497,21),r=f(r,i,n,o,t[8],1873313359,6),o=f(o,r,i,n,t[15],4264355552,10),n=f(n,o,r,i,t[6],2734768916,15),i=f(i,n,o,r,t[13],1309151649,21),r=f(r,i,n,o,t[4],4149444226,6),o=f(o,r,i,n,t[11],3174756917,10),n=f(n,o,r,i,t[2],718787259,15),i=f(i,n,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+i|0,this._c=this._c+n|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},f6b4:function(t,e,r){"use strict";var i=r("c532");function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},f83c:function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},f96f:function(t,e,r){},f9e6:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encryptUrl=e.tReq=e.getUToc=void 0;var i=r("9fc1"),n=r("5934");e.getUToc=function(){return i.UToc},e.tReq=function(t){if(-1!==t.indexOf("cmaptile2.allhistory.com"))return t=(0,n.getOriginUrl)(t),{url:i.UToc.calcUrl((0,n.getUrlHost)(t),(0,n.getUrlPath)(t))}},e.encryptUrl=function(t){return-1!==t.indexOf("cmaptile2.allhistory.com")?(t=(0,n.getOriginUrl)(t),{url:i.UToc.calcUrl((0,n.getUrlHost)(t),(0,n.getUrlPath)(t))}):{url:t}}},fb1f:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(r("3f6b")),n=u(r("8827")),o=u(r("57ba")),a=u(r("c8c6")),s=u(r("e088"));function u(t){return t&&t.__esModule?t:{default:t}}r("2fe6");var h=function(){function t(e){(0,n.default)(this,t),(0,i.default)(this,{$container:$("body"),map:{},comps:{}},e),this.checkSupport()}return(0,o.default)(t,[{key:"_render",value:function(){this.$html=$((0,a.default)()),this.$container.append(this.$html)}},{key:"moveToUserPosition",value:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.map.gl.easeTo({center:[e.coords.longitude,e.coords.latitude],zoom:5})}),(function(t){new s.default({type:"error",duration:3e3,position:"center-top",text:_L_("askForPosition","timemap")})}))}},{key:"checkSupport",value:function(){"geolocation"in navigator?(this._render(),this._bind()):this.$container.remove()}},{key:"_bind",value:function(){var t=this;this.$container.click((function(e){t.moveToUserPosition()}))}}]),t}();e.default=h,t.exports=e.default},fbd5:function(t,e,r){"use strict";var i;var n=r("9d8a").codes,o=n.ERR_MISSING_ARGS,a=n.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,n,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===i&&(i=r("ee93")),i(t,{readable:e,writable:n},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function h(t){t()}function l(t,e){return t.pipe(e)}function c(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,n=c(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){i||(i=t),t&&a.forEach(h),o||(a.forEach(h),n(i))}))}));return e.reduce(l)}},fcbf:function(t,e,r){"use strict";var i,n=r("e2d7"),o=(i=n)&&i.__esModule?i:{default:i};t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onlyA",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return(0,o.default)(t,e,r)}},fda6:function(t,e,r){var i=r("8947"),n=r("4228"),o=r("e85f");e.createCipher=e.Cipher=i.createCipher,e.createCipheriv=e.Cipheriv=i.createCipheriv,e.createDecipher=e.Decipher=n.createDecipher,e.createDecipheriv=e.Decipheriv=n.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},fdac:function(t,e,r){var i;function n(t){this.rand=t}if(t.exports=function(t){return i||(i=new n(null)),i.generate(t)},t.exports.Rand=n,n.prototype.generate=function(t){return this._rand(t)},n.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(4);if("function"!=typeof o.randomBytes)throw new Error("Not supported");n.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},fdfd:function(t,e,r){t.exports={default:r("9e1c"),__esModule:!0}},fe21:function(t,e,r){"use strict";var i,n=c(r("6042")),o=c(r("41b2")),a=c(r("3f6b")),s=c(r("a05d")),u=c(r("3d58")),h=c(r("e2d7")),l=r("49dc");function c(t){return t&&t.__esModule?t:{default:t}}var f=c(r("9fdf")).default.getLang({api:!0});t.exports=(i={getSimpleIntro:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/simpleintro/"+e+"/"+t).then((function(t){if(!t.data)return{};var e=t.data;return e.summary&&(e.summary=u.default.formatLink((0,h.default)(e.summary,"content"))),e.name&&(e.name=(0,h.default)(e.name)),t.data=e,t}))},getIntroSimple:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/w1/h5intro/"+e+"/"+t).then((function(t){if(!t.data)return{};var e=t.data;return e.summary&&(e.summary=u.default.formatLink((0,h.default)(e.summary,"content"))),e.name&&(e.name=(0,h.default)(e.name)),t.data=e,t}))},getIntro:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/intro/"+e+"/"+t).then((function(t){if(!t.data)return{};var e=t.data;return e.summary&&(e.summary=u.default.formatLink((0,h.default)(e.summary,"content"))),e.name&&(e.name=(0,h.default)(e.name)),e.langs=(0,s.default)(e.global).filter((function(t){return!!t[1]})).map((function(t){return t[0]})),e.langs.indexOf("cn")>-1&&e.langs.push("zh"),t.data=e,t}))},getLinkInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.getJson)("/api/link/v1/n/item/get?id="+t)},getMapDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/timemap/"+e+"/"+t)},getMapDetailByVersionId:function(t){var e=t.vId;return(0,l.getJson)("/api/user/version/"+e)},getDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/detail/"+e+"/"+t)},getTimeline:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/timeline/"+e+"/"+t)},getTimelineById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.postJson)("/api/item/timeline/detail",{id:t})},getExread:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/fastread/"+e+"/"+t)},saveTimeline:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.postJson)("/api/item/timeline/save",t)},save:function(t,e){return e&&"userCenter"==e?(0,l.postJson)("/api/user/version/save",t):(0,l.postJson)("/api/item/save",t)},getArticleDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/article/detail/"+e+"/"+t)},uploadImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t;return(0,l.postJson)("/api/item/image/upload",e)},getCategoryList:function(){return(0,l.getJson)("/api/item/category/list")},getTemplateList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.getJson)("/api/category/template/"+t)},getCategoryListInCluster:function(){return(0,l.getJson)("/api/category/list/clustering")},getLockStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={};return e.id=t,(0,l.postJson)("/api/item/lock/status",e)},cancelEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={};return e.id=t,(0,l.postJson)("/api/item/cancel",e,{async:!1})},updateStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={};return e.id=t,(0,l.postJson)("/api/item/heartbeat/update",e)},checkItemName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,i={};return i.name=t,i.disambiguation=e,i.language=r,(0,l.postJson)("/api/item/checkName/",i,{once:!1})},checkFavor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entry",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return(0,l.getJson)("/api/social/favor/check/"+r+"/"+t+"/"+e)},favor:function(t,e,r,i){var n={itemId:t,socialId:e,type:r,action:i};return(0,l.postJson)("/api/social/favor/send",n)},saveReportInfo:function(t){return(0,l.postJson)("/api/report/save",t)},getReportTypes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return(0,l.getJson)("/api/report/types/"+t)},checkLike:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entry",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return(0,l.getJson)("/api/social/like/check/"+r+"/"+t+"/"+e)},like:function(t,e,r,i){var n={};return n.itemId=t,n.socialId=e,n.type=r,n.action=i,(0,l.postJson)("/api/social/like/send",n)},comment:function(t,e,r){var i={};return i.id=t,i.type=e,i.reply=r,(0,l.postJson)("/api/social/comment/send",i)},getRelation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/relation/"+e+"/"+t)},getNewRelation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/relation/"+e+"/"+t.aId+"/"+t.bId)},getRelationSelectWord:function(){return(0,l.getJson)("/api/relation/relationDic")},getEightRelation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/relation/subdivision/"+e+"/"+t)},getVersionLockStatus:function(t){return(0,l.getJson)("/api/user/version/"+t)},saveVersionLockStatus:function(t){return(0,l.postJson)("/api/user/version/save",t)},getBookList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,l.getJson)("/api/book/list/"+i+"/"+t+"/"+e+"/"+r+"/"+n)},getBookDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.getJson)("/api/index/book/detail/"+f+"/"+t)},getBookContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cn",n={};return n.id=t,n.pageNum=e,n.volumnId=r,n.language=i,(0,l.postJson)("/api/book/content/",n)},getBookMenu:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,l.getJson)("/api/book/index/"+t)},deleteBookFromList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n={bookId:t,itemId:e,language:r,type:i};return(0,l.postJson)("/api/book/delete",n)},saveImage:function(t){var e={};return(0,a.default)(e,{itemId:"",module:"",source:"portalupload",language:f,imageList:[]},t),(0,l.postJson)("/api/media/image/upload",e)},getMediaList:function(t){var e={};return(0,a.default)(e,{itemId:"",language:f,page:1,size:20,mediaType:1},t),(0,l.postJson)("/api/basic/item/media/search",e,{once:!1})},getImageList:function(t){var e={};return(0,a.default)(e,{itemId:"",language:f,page:1,size:20,sort:0},t),(0,l.getJson)("/api/media/image/list/"+e.language+"/"+e.itemId+"/"+e.page+"/"+e.size+"/"+e.sort)},getAudioList:function(t){var e=(0,o.default)({itemId:"",language:f,page:1,size:20,sort:0},t);return(0,l.getJson)("/api/media/audio/list/"+e.language+"/"+e.itemId+"/"+e.page+"/"+e.size+"/"+e.sort)},getVideoList:function(t){var e=(0,o.default)({itemId:"",language:f,page:1,size:20,sort:0},t);return(0,l.getJson)("/api/media/video/list/"+e.language+"/"+e.itemId+"/"+e.page+"/"+e.size+"/"+e.sort)},postFeedback:function(t){return(0,l.postJson)("/api/report/feedback/save",t)},imageUpdate:function(t){var e={};return(0,a.default)(e,{id:"",itemId:"",title:"",desc:"",tags:[],infos:[],murmurHash:""},t),(0,l.postJson)("/api/media/image/update",e)},imageDelete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={};return r.id=t,r.itemId=e,(0,l.postJson)("/api/media/image/delete/",r)},mediaDelete:function(t){var e=(0,o.default)({mediaType:1},t);return(0,l.postJson)("/api/basic/item/media/delete",e)},getImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/media/image/"+e+"/"+t)},getMedias:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Array.isArray(t)?t:[t];return(0,l.postJson)("/api/basic/media/listNormal",{ids:r,needAuthor:e})},savePainting:function(t){var e={};return(0,a.default)(e,{itemId:"",imageList:[]},t),(0,l.postJson)("/api/painting/upload",e)},getImageList_painting:function(t){var e={};return(0,a.default)(e,{itemId:"",page:1,size:20,sort:0,filterKey:"",filterValue:""},t),(0,l.postJson)("/api/painting/list",e,{once:!1})},getImage_painting:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/painting/w2/n/detail/"+e+"/"+t,"",{once:!1})},imageDelete_painting:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={};return r.id=t,r.itemId=e,(0,l.postJson)("/api/painting/delete/",r)},imageUpdate_painting:function(t){var e={};return(0,a.default)(e,{id:"",itemId:"",title:"",desc:"",tags:[],infos:[],murmurHash:""},t),(0,l.postJson)("/api/painting/update",e)},paintingTiles:function(t){return(0,l.getJson)("/api/painting/tiles/"+t)},paintingStats:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/painting/stats/"+e+"/"+t)},paintingMuseumList:function(){return(0,l.getJson)("/api/painting/w1/n/museum/list")},paintingMuseumSug:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return(0,a.default)(e,{key:"博物馆",page:1,size:5},t),(0,l.postJson)("/api/painting/w1/n/museum/sug",e)},saveMuseum:function(t){return(0,l.postJson)("/api/painting/w1/y/museum/save",t)},savePaintingUgc:function(t){return(0,l.postJson)("/api/painting/w1/y/savePainting",t)},getPaintingUgcDetail:function(t){return(0,l.getJson)("/api/painting/w1/n/ugc-detail/"+t)},getMuseumById:function(t){return(0,l.getJson)("/api/painting/w1/n/museum/"+t)},saveMapNodes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.postJson)("/api/item/timemap/save",t)},saveMapNodesByVersionId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.postType&&(t.postType.language=f),(0,l.postJson)("/api/user/version/save",t)},saveRelation:function(t){return(0,l.postJson)("/api/item/relation/save",t)},saveNewRelation:function(t){return(0,l.postJson)("/api/web/basic/relation/save",t)},delRelation:function(t){return(0,l.postJson)("/api/web/basic/relation/delete",t)},saveRelationGragh:function(t){return(0,l.postJson)("/api/customRelationGraph/save",t)},getSpecialRelationGroupDetail:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,l.postJson)("/api/special/group/detail",{id:t,type:e})},saveSpecialRelationGroup:function(t){return(0,l.postJson)("/api/special/group/save",t)},saveSpecialRelationGroupDraft:function(t){return(0,l.postJson)("/api/special/groupDraft/save",t)},copySpecialRelationGroup:function(t){return(0,l.postJson)("/api/special/group/copy",{id:t})},getRelationGragh:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/customRelationGraph/"+e+"/"+t)},saveBook:function(t){return(0,l.postJson)("/api/book/save",t)},getBook:function(t){return(0,l.getJson)("/api/book/detail/"+t)},getRelationBooks:function(t){return(0,l.postJson)("/api/search/relatedbook",t)},getBookSug:function(t){return(0,l.postJson)("/api/search/bookSuggestion",t,{once:!1})},addSerachBook:function(t){var e={};return(0,a.default)(e,{bookId:"",itemId:"",requestType:""},t),(0,l.postJson)("/api/book/search/save",e)},getHelpMenu:function(){return(0,l.getJson)("/api/help/allQuestions")},getHelpContent:function(t){return(0,l.postJson)("/api/help/questionContent",{id:t})},getSpecialContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,l.postJson)("/api/special/content",{itemId:t,page:e,size:r,specialModule:i})},getTimemapDetail:function(t){var e={id:t.id};return(0,l.postJson)("/api/item/timemap/detail",e)},getTimeLineSame:function(t){var e={id:t.id,type:t.type,page:t.page,pageSize:t.pageSize};return(0,l.postJson)("/api/item/timemap/same_v2",e,{once:!1})},getUserSubjectsList:function(t){var e=t.module,r={module:void 0===e?"":e,page:t.page,size:t.size};return(0,l.postJson)("/api/special/user/content",r)},deleteUserSubject:function(t){var e={id:t.id,module:t.module};return(0,l.postJson)("/api/special/content/delete",e)},imageImport:function(t){return(0,l.postJson)("/api/media/image/import",t)},getHomeRelation:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;return(0,l.getJson)("/api/landingpage/relation/"+f+"/"+t+"/"+e)},getTitleBar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,l.getJson)("/api/item/figureline/"+f+"/"+t+"/"+e)},saveBookMention:function(t){var e={};return(0,a.default)(e,{mentionId:0,mentionContent:"",bookId:"",itemId:"",volumnId:"",volumnName:"",page:1,language:f},t),(0,l.postJson)("/api/index/book/saveBookMention",e)},getBookMentionList:function(t){return(0,l.getJson)("/api/index/book/"+f+"/getBookMentionList/"+t)},getBookVolumns:function(t){return(0,l.getJson)("/api/index/book/"+f+"/getVolumns/"+t)},getSingleBookMentionList:function(t){return(0,l.getJson)("/api/index/book/"+f+"/getSingleBookMentionList/"+t)},deleteMention:function(t){return(0,l.getJson)("/api/index/book/"+f+"/deleteMention/"+t)},getPromotesItemsById:function(t){var e=t.id,r=t.startTime,i=t.endTime,n=t.language,o=void 0===n?f:n;return(0,l.getJson)("/api/item/timeLine/getItemLine/"+o+"/"+e+"/"+r+"/"+i)},getNextPromotesItemsById:function(t){var e=t.id,r=t.startTime,i=t.endTime,n=t.state,o=void 0===n||n,a=t.language,s=void 0===a?f:a;return(0,l.getJson)("/api/item/timeLine/getList/"+s+"/"+e+"/"+r+"/"+i+"/"+o)},getItemVersionList:function(t){return(0,l.postJson)("/api/item/versionList",t)},getItemRankBoard:function(t){return(0,l.getJson)("/api/rankBoard/item/"+f+"/"+t+"/")},getCount:function(t){return(0,l.getJson)("/api/item/intro/"+f+"/"+t+"/")},getVersionDetail:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/version/detail/"+e+"/"+t)},getVersionEditDetail:function(t){return(0,l.getJson)("/api/user/version/"+t)}},(0,n.default)(i,"getVersionLockStatus",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/item/user/lock/status/"+e+"/"+t)})),(0,n.default)(i,"versionEditSave",(function(t){return(0,l.postJson)("/api/user/version/save",t)})),(0,n.default)(i,"saveABPath",(function(t){return(0,l.postJson)("/api/abPathSave/save",t)})),(0,n.default)(i,"getSavedABPath",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.getJson)("/api/abPathSave/detail/"+e+"/"+t)})),(0,n.default)(i,"getBasicInfoNew",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return(0,l.postJson)("/api/web/basic/item/basicInfo",{itemId:t,language:e})})),(0,n.default)(i,"getFigureLineNew",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return e?(0,l.getJson)("/api/web/basic/item/figureline/"+r+"/"+t+"/"+e):(0,l.getJson)("/api/web/basic/item/figureline/"+r+"/"+t)})),(0,n.default)(i,"getHomeRelationNew",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;return(0,l.postJson)("/api/web/basic/item/relation",{itemId:t,maxCount:e,language:f})})),(0,n.default)(i,"addProductOrMediaNew",(function(t){return(0,l.postJson)("/api/web/basic/item/saveAchievements",{achievementDTOList:t,language:f})})),(0,n.default)(i,"getTopTimeLineNew",(function(t){return t=(0,a.default)({},{id:"",startTime:"",endTime:""},t),(0,l.getJson)("/api/web/basic/item/timeLine/getItemLine/"+f+"/"+t.id+"/"+t.startTime+"/"+t.endTime)})),(0,n.default)(i,"getTopTimeLinePageNew",(function(t){return t=(0,a.default)({},{id:"",startTime:"",endTime:"",state:!0},t),(0,l.getJson)("/api/web/basic/item/timeLine/getList/"+f+"/"+t.id+"/"+t.startTime+"/"+t.endTime+"/"+t.state)})),(0,n.default)(i,"getContentArticle",(function(t){return(0,l.getJson)("/api/item/content/list",{id:t})})),(0,n.default)(i,"addArticleToEntry",(function(t){var e=t.articleId,r=t.itemId,i=t.referenceReason;return(0,l.postJson)("/api/item/content/add",{articleId:e,itemId:r,referenceReason:i})})),(0,n.default)(i,"getModuleVersionDetail",(function(t){return(0,l.getJson)("/api/user/moduleInfo/"+t)})),i)},feb7:function(t,e,r){"use strict";function i(t,e,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=e||{},i.geometry=t,i}function n(t,e,r){return void 0===r&&(r={}),i({type:"Point",coordinates:t},e,r)}function o(t,e,r){void 0===r&&(r={});for(var n=0,o=t;n<o.length;n++){var a=o[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,r)}function a(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function u(t,e,r){return void 0===r&&(r={}),i({type:"MultiLineString",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),i({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),i({type:"MultiPolygon",coordinates:t},e,r)}function c(t,r){void 0===r&&(r="kilometers");var i=e.factors[r];if(!i)throw new Error(r+" units is invalid");return t*i}function f(t,r){void 0===r&&(r="kilometers");var i=e.factors[r];if(!i)throw new Error(r+" units is invalid");return t/i}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return n(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return h(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return n(t,e)})),r)},e.polygon=o,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return o(t,e)})),r)},e.lineString=a,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return a(t,e)})),r)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=h,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),i({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return p(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(f(t,e),r)},e.convertArea=function(t,r,i){if(void 0===r&&(r="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=e.areaFactors[r];if(!n)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/n*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}}]);